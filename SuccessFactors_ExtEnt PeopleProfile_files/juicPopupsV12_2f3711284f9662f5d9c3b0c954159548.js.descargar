function SFAbstractAdjustableHeight(){juic.assert(!1,"[SFAbstractAdjustableHeight] Please do not instantiate")}juic.extend(SFAbstractAdjustableHeight,juic.Component,{setHeight:function(){juic.assert(!1,"[SFAbstractAdjustableHeight] Must implement setHeight")}});function SFHeightAdjuster(e,t){this.register(),this._init(e,t)}(function(){juic.extend(SFHeightAdjuster,juic.Component,{_init:function(e,t){this._child=e,this._padding=t&&null!=t.padding?t.padding:0,this._minHeight=t&&t.minHeight||0,SFBodyEventDispatcher.addResizeListener(this,"resize"),"undefined"!=typeof TopNavBar&&TopNavBar.showEvent&&(TopNavBar.hideEvent.subscribe(this.resize,this,!0),TopNavBar.showEvent.subscribe(this.resize,this,!0))},cleanup:function(){this._child instanceof juic.Component&&this._child.cleanup(),this._super()},renderHtml:function(e){e.push("<div id=\"",this.id,"\" class=\"sf-height-adjuster\">"),this._child instanceof juic.Component?this._child.renderHtml(e):e.push(this._child?this._child.toString():""),e.push("</div>")},resize:function(){var e=SFDom.getY(this.id);if(null!=e){var t=SFDom.getViewportHeight(),i=Math.max(t-e-this._padding,this._minHeight),o=juic.$(this.id);o.style.height=i+"px",this._child instanceof SFAbstractAdjustableHeight&&this._child.setHeight(i),this.dispatch("heightAdjusted",{height:i})}},setChild:function(e){this._child=e;var t=juic.$(this.id);t&&(this._child instanceof juic.Component?this._child.render(this.id):t.innerHTML=this._child?this._child.toString():"")}})})();function SFButtonLayout(e,t,i){this._baseButtonWrapperClass=t,this._baseButtonWrapperOuterClass=i,this._super(e,{styleClass:"buttonLayout",innerClass:"buttonWrapper",outerBlock:!0,innerBlock:!1})}(function(){SFButtons={OK:{actionCommand:"ok",label:MSGS.COMMON_Ok,active:!0},CANCEL:{actionCommand:"cancel",label:MSGS.COMMON_Cancel},PREVIOUS:{actionCommand:"previous",label:MSGS.COMMON_Previous},NEXT:{actionCommand:"next",label:MSGS.COMMON_Next,active:!0},DONE:{actionCommand:"done",label:MSGS.COMMON_Done,active:!0},OK_CANCEL:["CANCEL","OK"],PREVIOUS_NEXT_CANCEL:["CANCEL","PREVIOUS","NEXT"],PREVIOUS_NEXT:["PREVIOUS","NEXT"],normalize:function(e){if(e){var t=SFButtons[e];return t&&!Array.isArray(t)&&(e=t),{label:e.label||e.text||e.toString(),active:e.active,actionCommand:e.eventName||e.actionCommand||e.command||("string"==typeof e?e:null),size:e.size,enabled:null==e.enabled?null==e.disabled||!e.disabled:e.enabled,data:e.data,ariaLabel:e.ariaLabel,baseButtonWrapperClass:e.baseButtonWrapperClass,buttonDesign:e.buttonDesign,refocusId:e.refocusId}}return null},normalizeSet:function(e){"string"==typeof e&&SFButtons[e]&&(e=SFButtons[e]);var t=[];return e&&(!Array.isArray(e)&&(e=[e]),e.forEach(function(e){t.push(SFButtons.normalize(e))},this)),t}},juic.extend(SFButtonLayout,SFListContainer,{setModel:function(e){e=SFButtons.normalizeSet(e),Array.isArray(e)&&(e=new SFDefaultListModel(e)),assert(e instanceof SFDefaultListModel,"SFButtonLayout: invalid model"),this._buttonModel=e,this._super(new SFFactoryListModel(this._buttonModel,this._createButton,this))},getModel:function(){return this._buttonModel},getButtonDefinitions:function(){return this._buttonModel.getItems()},setButtonDefinitions:function(e){this._buttonModel.setItems(SFButtons.normalizeSet(e))},getButtonDefinition:function(e){return this._buttonModel.get(e)},setButtonDefinition:function(e,t){this._buttonModel.set(e,SFButtons.normalize(t))},insertButton:function(e,t){this._buttonModel.insertItemAt(e,SFButtons.normalize(t))},appendButton:function(e){this._buttonModel.add(SFButtons.normalize(e))},removeButton:function(e){this._buttonModel.removeItemAt(e)},setButtonsEnabled:function(e){this.broadcast(function(t,i){t.setEnabled(e),this._buttonModel.get(i).enabled=e})},setButtonEnabled:function(e,t){var i=this.get(e);i&&(this._buttonModel.get(e).enabled=t,i.setEnabled(t))},setButtonLabel:function(e,t){var i=this.get(e);i&&(this._buttonModel.get(e).label=t,i.setLabel(t))},setButtonActionCommand:function(e,t){var i=this.get(e);i&&(this._buttonModel.get(e).actionCommand=t,i.setActionCommand(t))},setButtonVisible:function(e,t){var i=this.get(e);i&&(this._buttonModel.get(e).visible=t,i.setVisible(t))},_createButton:function(e){if(e=SFButtons.normalize(e),juic.assert(e,"SFButtonLayout: You cannot pass null for the button definition"),e){var t={baseButtonWrapperClass:this._baseButtonWrapperClass||e.baseButtonWrapperClass,ariaLabel:e.ariaLabel,buttonDesign:e.buttonDesign,refocusId:e.refocusId},i=new SFCommandButton(e.label,e.active,e.enabled,!0,t);return i.setActionCommand(e.actionCommand),i.setData(e.data),e.size&&i.setSize(e.size),i.addEventListener("action",this,"dispatchEvent"),i}}})})();function SFScrollBox(e,t){this.register(),this._init(e,t)}(function(){var e=Math.min,t=Math.max;function i(e,t,i){return e&&e[t].size-e[t].scrollArea>i}function o(e,t){var i={};if(set(i,t),e)for(var o in e){var n=e[o];null!=n&&(i[o]=n)}return i}var n={autoHide:!0,scrollMargin:!0,vertical:!0,horizontal:!0,height:null,scrollTickSize:void 0,scrollInterval:void 0,minimumScroll:10,dragScroll:!1,dragInertia:!1,bubbleMouseWheel:!0},s=300,a=6;juic.extend(SFScrollBox,SFAbstractAdjustableHeight,{_init:function(e,t){t=o(t,n),this._child=e,this._child instanceof juic.Component&&this._child.addEventListener("changeDimensions",this,"adjustDOM"),this._autoHide=t.autoHide,this._scrollMargin=t.scrollMargin,this._height=t.height,this._verticalOption=t.vertical,this._horizontalOption=t.horizontal,this._minimumScroll=t.minimumScroll,this._dragScroll=t.dragScroll,this._dragInertia=t.dragInertia,this._bubbleMouseWheel=t.bubbleMouseWheel,Util.browserInfo.ff||(this._focusMarker=new SFFocusMarker,this._focusMarker.addEventListener("focus",this,"_onFocus"),this._focusMarker.addEventListener("blur",this,"_onBlur")),this._autoScroller=new SFAutoScroller({scrollEl:this.id+"scroller",tickSize:t.scrollTickSize,interval:t.scrollInterval}),this._horizontal=this._horizontalOption&&new SFScrollBar({autoScroller:this._autoScroller,minimumScroll:this._minimumScroll,axisType:"x"}),this._vertical=this._verticalOption&&new SFScrollBar({autoScroller:this._autoScroller,minimumScroll:this._minimumScroll,axisType:"y"}),this._horizontalOption&&this._horizontal.addEventListener("action",this,"_onScrollBarAction"),this._verticalOption&&this._vertical.addEventListener("action",this,"_onScrollBarAction")},renderHtml:function(e){e.push("<div id=\"",this.id,"\" class=\"sfScrollBox",this._autoHide?" autoHideScroll":"","\""),SFDom.renderStyle(e,this._getContainerStyle()),e.push(" onmouseover=\"",this.fireCode("_onHover",!0),"\" onmouseout=\"",this.fireCode("_onHover",!1),"\"><div id=\"",this.id,"cutoff\" class=\"scrollCutoff\""),SFDom.renderStyle(e,this._getCutoffStyle()),e.push("><div id=\"",this.id,"scroller\" class=\"scrollWrapper\""),SFDom.renderStyle(e,this._getScrollerStyle()),e.push(" onscroll=\"",this.fireCode("_onScroll"),"\" onfocus=\"",this.fireCode("_setFocus",!0),"\" onblur=\"",this.fireCode("_setFocus",!1),"\""),this._dragScroll&&e.push("ondragstart=\"return false\" onmousedown=\"",this.fireCode("_onDragStart"),"\" ontouchstart=\"",this.fireCode("_onDragStart"),"\" unselectable=\"on\" onselectstart=\"return false\""),e.push(">",this._focusMarker,this._child,"</div></div><div class=\"scrollBars",this._autoHide?" autoHideHover":"","\">"),this._verticalOption&&e.push(this._vertical),this._horizontalOption&&e.push(this._horizontal),e.push("</div></div>"),e.addAfterRenderListener(this,"_onLoad")},setChild:function(e){this._child=e;var t=juic.createRenderContext();t.push(e),t.renderInto(this.id),this.adjustDOM()},adjustDOM:function(){var e=juic.$(this.id);if(e&&(this._height||(this._height=parseInt(SFDom.getStyle(e,"height"))),SFDom.updateStyle(e,this._getContainerStyle()),SFDom.updateStyle(this.id+"scroller",this._getScrollerStyle()),SFDom.updateStyle(this.id+"cutoff",this._getCutoffStyle()),this._horizontal&&this._horizontal.adjustDOM(),this._vertical&&this._vertical.adjustDOM(),this._vertical&&!this._height&&this._vertical.setEnabled(!1),this._child instanceof SFAbstractAdjustableHeight)){var t=e.offsetHeight-SFDom.getOffsets(e);this._child.setHeight(t)}},getAutoScroller:function(){return this._autoScroller},setHeight:function(e){this._height=e,this.adjustDOM()},cleanup:function(){this._child instanceof juic.Component&&this._child.cleanup(),this._focusMarker&&this._focusMarker.cleanup(),this._vertical&&this._vertical.cleanup(),this._horizontal&&this._horizontal.cleanup(),this._super()},handleDragEvent:function(i){switch(i.type){case"dragStart":null!=this._intervalId&&clearInterval(this._intervalId),this._last=this._last2=null;break;case"drag":this._last2=this._last,this._last={x:i.lastPoint.x-i.point.x,y:i.lastPoint.y-i.point.y},this._autoScroller.scrollMove(this._last.x,this._last.y);break;case"dragEnd":try{if(this._last2&&this._dragInertia){var o=this._autoScroller.getScrollInfo(),n=(this._last2.x+this._last.x)/2,r=(this._last2.y+this._last.y)/2,l=o.x.position,d=o.y.position,u=t(0,e(o.x.size-o.x.scrollArea,l+n*a)),_=t(0,e(o.y.size-o.y.scrollArea,d+r*a)),p=new Date().getTime(),c=this;this._intervalId=setInterval(function(){var e=new Date().getTime()-p;if(e>s)c._autoScroller.setScrollPosition(u,_),clearTimeout(c._intervalId),c._intervalId=null;else{var t=SFAnimUtil.calculateEasing(e/s,"easeOut");c._autoScroller.setScrollPosition(l+t*(u-l),l+t*(_-d))}},10)}}catch(t){console.log(t)}}},_onLoad:function(){if(el=juic.$(this.id),el)this._loadTime=null,this._bubbleMouseWheel||SFDOMEvent.addListener(el,Util.browserInfo.ff?"DOMMouseScroll":"mousewheel",this._onMouseWheel,this),this.adjustDOM();else{var e=new Date().getTime();if(this._loadTime=this._loadTime||e,5e3>e-this._loadTime){var t=this;setTimeout(function(){t._onLoad()},10)}}},_onMouseWheel:function(e){if(!this._bubbleMouseWheel){var t=0;e=e||window.event,e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3),t=100*(0>t?1:0<t?-1:0);var i=e.axis==e.VERTICAL_AXIS?"y":"x",o=this._autoScroller.getScrollInfo(),n=o[i],s=n.position+t;if(s+n.scrollArea>=n.size||0>s){var a="x"==i?s:o.x.position,r="y"==i?s:o.y.position;this._autoScroller.setScrollPosition(a,r),SFDOMEvent.stopEvent(e)}}},_setFocus:function(e){SFDom[e?"addClass":"removeClass"](this.id,"scrollBoxFocused")},_onFocus:function(){this._setFocus(!0)},_onBlur:function(){this._setFocus(!1)},_onDragStart:function(e){SFDragDropMgr.handleDragStart(e,this,{useShim:!0,shimCursor:"move"})},_onHover:function(e,t){Util.isMouseLeaveOrEnter(t,juic.$(this.id))&&(SFDom[e?"addClass":"removeClass"](this.id,"scrollBoxHover"),e&&this.adjustDOM())},_onScroll:function(){null==this._scrollingTimeout?SFDom.addClass(this.id,"scrollBoxScrolling"):clearTimeout(this._scrollingTimeout),this.adjustDOM();var e=this;this._scrollingTimeout=setTimeout(function(){SFDom.removeClass(e.id,"scrollBoxScrolling"),e._scrollingTimeout=null},1e3)},_getContainerStyle:function(){var e={};if(0<this._height&&(e.height=this._height+"px"),this._scrollMargin){var t=this._autoScroller.getScrollInfo();if(t)if(!this._height){var o=this._horizontalOption&&i(t,"x",this._minimumScroll);e["padding-bottom"]=o?this._horizontal.getOffset()+"px":0}else{var n=this._verticalOption&&i(t,"y",this._minimumScroll);e["padding-right"]=n?this._vertical.getOffset()+"px":0}}return e},_getCutoffStyle:function(){var e=juic.$(this.id+"scroller");if(e){var t={};if(0<this._height){var o=this._autoScroller.getScrollInfo(),n=this._horizontalOption&&i(o,"x",this._minimumScroll),s=n?e.offsetHeight-o.y.scrollArea:0;t.height=this._height-s+"px"}return t}},_getScrollerStyle:function(){var e=juic.$(this.id+"scroller");if(e){var t={},o=this._autoScroller.getScrollInfo(),n=this._verticalOption&&i(o,"y",0),s=this._verticalOption&&i(o,"y",this._minimumScroll),a=this._horizontalOption&&i(o,"x",0),r=this._horizontalOption&&i(o,"x",this._minimumScroll),l=s?e.offsetWidth-o.x.scrollArea:0,d=r?e.offsetHeight-o.y.scrollArea:0,u=Util.isRTL()?"margin-left":"margin-right";return t[u]=s?-l+"px":0,0<this._height?t.height=this._height+d+"px":(t["margin-bottom"]=r?-d+"px":0,Util.browserInfo.ie&&8>Util.ieVersion()&&(t["padding-bottom"]=r?d+"px":0,t["overflow-y"]="hidden")),n&&!s&&(t["overflow-y"]="hidden"),a&&!r&&(t["overflow-x"]="hidden"),t}},_onScrollBarAction:function(e){var t=juic.$(this.id);switch(e.actionCommand){case"dragStart":SFDom.addClass(t,"scrollBoxDragging");break;case"dragEnd":SFDom.removeClass(t,"scrollBoxDragging");}}})})();function SFList(e,t){this.register(),this._init(e,t)}SFList.prototype=function(){function e(e,t){this.register(),this.actionItem=e,this._options=t||{},this._ariaRole=this._options.ariaRole||null}function t(){}function i(e){var t;switch(e){case"CheckBoxList":case"RadioButtonList":t="ckrbList";break;case"comboDropDown":t="comboField";break;case"floatList":t="floatList";break;case"bulletList":t="bulletList";break;case"dataGridList":t="dataGridList";break;case"menuItemList":t="menuItemList";break;case"popMenu":default:t="sf-PopMenu";}return t}return e.prototype=function(){return juic.set(new juic.Component,{renderHtml:function(e){e.push("<li id=\"",this.getDomId(),"\""),this._ariaRole?e.push("role=\"",this._ariaRole,"\""):e.push(" role=\"none\" ");var t=this.actionItem,i=this.isFioriFDEnabled()&&t.hasOwnProperty("selectionClass")&&t.selectionClass.includes("globalMenuItemFocus")?" is-selected is-focus":"";if(e.push(" class=\"",this.generateFDClasses("list__item")+i,"\""),e.push(">"),this.actionItem){var t=this.actionItem,o=this._options.linkAriaRole,n=this._options.tabIndex;t.setLinkAriaRole&&o&&t.setLinkAriaRole(o),t.setTabIndex&&n&&t.setTabIndex(n),this.actionItem.renderHtml(e)}e.push("</li>")},getDomId:function(){return this.id+"_listitem"}})}(),t.prototype=function(){return juic.set(new juic.Component,{renderHtml:function(e){e.push("<li class=\"separator\"><div>&nbsp;</div></li>")}})}(),juic.set(new juic.Component,{_defaultUseFocusLoopMap:{CheckBoxList:!1,RadioButtonList:!1,ckrbList:!1,comboDropDown:!0,comboField:!1,floatList:!1,bulletList:!1,dataGridList:!1,popMenu:!0},_scrollBarWidth:18,_fixedHeight:!1,add:function(t,i){if(t.length)for(var o=0,n=t.length;o<n;o++)this._listItems.push(new e(t[o],i));else this._listItems.push(new e(t,i));this._drawList()},getItemAtIndex:function(e){return this._listItems[e]},addSeparator:function(){this._listItems.push(new t),this._drawList()},remove:function(e){for(var t=0,i=this._listItems.length;t<i;t++)this._listItems[t].actionItem===e&&this._listItems.splice(t,1);this._drawList()},addClass:function(e){this._styleClass+=" "+e},_init:function(e,t){this._type=e?e:"",this._options=t?t:{},this._ariaRole=this._options.ariaRole||null,this._addFocusLoop=this._useFocusMarker(),this._styleClass=i(e),this._listItems=[],this._domReady=!1,this._addFocusLoop&&(this._focusLoop=new SFFocusLoop(this.id),this._focusMarkers=this._focusLoop.getMarkers())},_useFocusMarker:function(){var e=this._type;if("boolean"==typeof this._options.addFocusLoop)return this._options.addFocusLoop;var t=this._defaultUseFocusLoopMap[e];return"boolean"!=typeof t||t},setFocus:function(e){this._focusLoop.setFocus(e)},_focusNext:function(e){var t=juic.$(this.id);if(t){var i=document.activeElement;if(i){var o=SFDom.findNextFocusableElement(i,t,!0,e);o&&SFDom.setFocus(o)}else this.setFocus(e)}},focus:function(e){this.setFocus(e)},onItemFocus:function(){},_drawListItems:function(e){var t=[],o=i(this._type);"sf-PopMenu"!==o&&(t.push("no-border"),("comboDropDown"===o||"popMenu"===o||"comboField"===o)&&t.push("dropdown")),e.push("<ul class=\"",this._styleClass," ",this.generateFDClasses("list",t),"\""),this._ariaRole&&e.push("role=\"",this._ariaRole,"\""),e.push(">");for(var n=0,s=this._listItems.length;n<s;n++)this._listItems[n].renderHtml(e);e.push("</ul>")},_drawList:function(){if(!this._domReady)return!1;var e=[];this._drawListItems(e),juic.$(this.id).innerHTML=e.join("")},setFixedHeight:function(e){juic.assert(!e||"number"==typeof e||"auto"==e,"[SFList] : innerWidth parameter must be a number or auto.");var t=juic.$(this.id);"auto"!=e&&t&&t.offsetHeight>e?(t.style.height=e+"px",t.style.width=t.offsetWidth+this._scrollBarWidth+"px",t.style.overflow="auto",this._fixedHeight=!0):this._fixedHeight=!1},hasFixedHeight:function(){return this._fixedHeight},show:function(){var e=juic.$(this.id);e&&Util.show(e)},hide:function(){var e=juic.$(this.id);e&&Util.hide(e)},renderHtml:function(e){e.push("<div id=\"",this.id,"\" class=\"",this._styleClass,"\">"),this._addFocusLoop&&this._focusMarkers[0].renderHtml(e),this._drawListItems(e),this._addFocusLoop&&this._focusMarkers[1].renderHtml(e),e.push("</div>"),this._domReady=!0},addMenuitemRoles:function(){var e=juic.$(this.id);e&&SFDom.walk({starter:e,visitor:function(e){SFDom.isFocusable(e,!0)&&!e.getAttribute("role")&&e.setAttribute("role","menuitem")}})}})}();function SFPanel(e){this.register(),this._init(e)}(function(){var e=Math.max,t=!1,i=["header","content","buttonLayout","footer"],o={header:"panelHeader globalPortletHeader",content:"panelContent globalPortletBody",buttonLayout:"panelButtonLayout",footer:"panelFooter"},n=document.createElement("div");juic.extend(SFPanel,SFAbstractAdjustableHeight,{_init:function(e){if(e){"undefined"!=typeof e.titleHeaderTagLevel&&(juic.assert("number"==typeof e.titleHeaderTagLevel,"[SFPanel] : titleHeaderTagLevel must be a number."),juic.assert(-1<e.titleHeaderTagLevel&&7>e.titleHeaderTagLevel,"[SFPanel] : titleHeaderTagLevel must be a number between 0 and 6.")),this._header=e.header,this._title=e.title,this._titleTip=e.titleTip,this._titleHeaderTagLevel=e.titleHeaderTagLevel,this._useNameAnchor=e.useNameAnchor,this._showCloseIcon=e.showCloseIcon,this._closeDialogOnEsc=e.closeDialogOnEsc,this._headerTag=!0===this._useNameAnchor?"a":"span",this._content=e.content,this._footer=e.footer,this._type=e.type,this._width=e.width,this._height=e.height,this._scrollable=null==e.scrollable?t:e.scrollable,this._escapeHtml=!(null!=e.escapeHtml)||e.escapeHtml,this._ownChildren=!1!==e.ownChildren,this._baseButtonWrapperClass=e.baseButtonWrapperClass,this._baseButtonWrapperOuterClass=e.baseButtonWrapperOuterClass,this._ignoreAccessibility=e.ignoreAccessibility,this._shouldSetAriaDescribedBy=!1!==e.shouldSetAriaDescribedBy,this._focusable=e.focusable,this._ariaLabel=e.ariaLabel,this._panelRole=e.panelRole,this._sectionTabIndexes=e.sectionTabIndexes||{};var i=e.buttonDefinitions||e.buttons;i&&0<i.length&&(this._buttonLayout=new SFButtonLayout(i,this._baseButtonWrapperClass,this._baseButtonWrapperOuterClass),this._buttonLayout.addEventListener("action",this,"handleButton"))}else this._scrollable=t,this._ownChildren=!0},renderHtml:function(e){e.push("<div id=\"",this.id,"\" class=\"",this._getSectionClassName(),"\""),SFDom.renderStyle(e,this._getStyle()),this._ignoreAccessibility?(this._ariaLabel&&e.push(" aria-label='",juic.escapeHTML(this._ariaLabel),"'"),this._panelRole&&e.push(" role='",this._panelRole,"'")):this.renderAriaAttributes(e),this._focusable&&e.push(" tabindex='0'"),e.push(">");for(var t=this._getSectionOrder(),i=0,o;i<t.length;i++)o=t[i],this._renderSection(e,o,this["_"+o]);e.push("</div>")},renderAriaAttributes:function(e,t){null==t&&(t="dialog"!=this._ariaRole),null!=this._title&&t&&e.push(" aria-labelledby=\"",this.id,"_panelTitle\""),null!=this._content&&this._shouldSetAriaDescribedBy&&e.push(" aria-describedby=\"",this.id,"content\"")},setShouldSetAriaDescribedBy:function(e){this._shouldSetAriaDescribedBy=e},handleButton:function(e){this.dispatchEvent(e)},_renderSection:function(e,t,i){if(this._isSectionRendered(t,i)){var o=this._getSectionClassName(t),n=this.isFioriFDEnabled(),s=n&&"header"===t;e.push("<div id=\"",this.id,t,"\""),o&&e.push(" class=\"",o,"\""),this._sectionTabIndexes[t]&&e.push(" tabindex=\"",this._sectionTabIndexes[t],"\""),SFDom.renderStyle(e,this._getStyle(t)),e.push(">"),s&&e.push("<span class=\"",this.generateFDClasses("panel__title"),"\">"),this._renderContent(e,t,i),s&&e.push("</span>"),e.push("</div>")}},_renderContent:function(e,t,i){if(null!=i){var o=Array.isArray(e)?e:null;e=o?juic.createRenderContext():e,this._escapeHtml&&!(i instanceof juic.Component)?e.push(juic.escapeHTML(i.toString())):e.push(i),o&&o.push(e.join(""))}},_renderStandardHeader:function(e){e.push("<span id=\"",this.id,"headerContainer\" class=\"sfPanelHeaderContainer\">"),this._renderStandardHeaderContent(e),e.push("</span>")},_renderStandardHeaderContent:function(e){this._renderTitle(e),this._showCloseIcon&&(e.push("&nbsp;"),e.push("<button id=\"",this.id,"closeIcon\" class=\"closeDialog globalPortletCloseIcon globalIconFont1Support ",Util.generateIconClasses(MSGS.DNTI_ICON_DECLINE),"\" title=\"",MSGS.COMMON_Close,"\"  onclick=\"",this.fireCode("_handleClose"),"return false;\" style=\"display:",this._showCloseIcon?"block":"none","\"><span class=\"legacyFont1Icon\"></span></button>"))},_usesStandardHeader:function(){return!1},setShowCloseIcon:function(e){this._showCloseIcon=e;var t=juic.$(this.id+"closeIcon");t&&(t.style.display=e?"":"none")},isShowCloseIcon:function(){return this._showCloseIcon},_handleClose:function(){},_renderTitle:function(e,t){this._closeDialogOnEsc&&e.push("<span id=\"",this.id,"descTitle\" class=\"hiddenAriaContent\">",MSGS.COMMON_PRESS_ESC_KEY,"</span>");(this._title||this._useNameAnchor)&&(this._titleHeaderTagLevel&&e.push("<h",this._titleHeaderTagLevel," class=\"",this.generateFDClasses("title",[t||"h4"]),"\">"),e.push("<",this._headerTag," id=\"",this.id,"_panelTitle\"","style=\"",this._showCloseIcon?"width: 90%; text-align: "+(Util.isRTL()?"right":"left")+";\"":"\""," title=\"",juic.escapeHTML(this._titleTip||this._title||""),"\""," class=\"panelHeaderTitle"),!0===this._useNameAnchor?(e.push(" namedAnchor"),!this._title&&e.push(" hiddenAriaContent"),e.push("\" tabindex=\"-1\" name=\"",this._getAnchorName(),"\">")):e.push("\">"),this._title&&"string"==typeof this._title?e.push(juic.escapeHTML(this._title)):e.push(this._title||"&nbsp;"),e.push("</",this._headerTag,">"),this._titleHeaderTagLevel&&e.push("</h",this._titleHeaderTagLevel,">"))},getTitle:function(){return this._title},setTitle:function(e){this._title=e,this._usesStandardHeader()&&this._setSectionContent("header","&nbsp;")},setFocusNamedAnchor:function(){(""==location.hash||0>location.hash.indexOf("/"))&&(location.hash="#"+this._getAnchorName())},setFocus:function(e){this.isShown()&&this._useNameAnchor&&!e&&this.setFocusNamedAnchor()},_handleRefocus:function(){var e=this._refocusRef;e&&setTimeout(function(){return e.setFocus?void e.setFocus():e.focus?void e.focus():void SFDom.setFocus(e)},0)},isShown:function(){},_getAnchorName:function(){return Util.createAnchorName("sfPanelHeaderAnchor_"+this.id)},adjustDOM:function(){this._updateStyles()},setWidth:function(e){this._width=e,this._updateStyles()},setHeight:function(e){this._height=e,this._updateStyles()},getWidth:function(){return this._width},getHeight:function(){var e=juic.$(this.id);return"auto"===this._height&&e?e.offsetHeight:this._height},setType:function(e){this._type=e,this._updateClassName()},getType:function(){return this._type},setHeader:function(e){this._setSectionContent("header",e)},getHeader:function(){return this._header},setContent:function(e){this._setSectionContent("content",e)},getContent:function(){return this._content},setFooter:function(e){this._setSectionContent("footer",e)},getFooter:function(){return this._footer},getButtonLayout:function(){return this._buttonLayout||(this._buttonLayout=new SFButtonLayout([],this._baseButtonWrapperClass),this._buttonLayout.addEventListener("action",this,"handleButton"),this._setSectionContent("buttonLayout",this._buttonLayout)),this._buttonLayout},getButtonModel:function(){return this._buttonLayout&&this._buttonLayout.getModel()},setScrollable:function(e){this._scrollable=e,this._updateStyles()},isScrollable:function(){return this._scrollable},cleanup:function(){this._ownChildren&&(this._header instanceof juic.Component&&this._header.cleanup(),this._content instanceof juic.Component&&this._content.cleanup(),this._footer instanceof juic.Component&&this._footer.cleanup()),this._buttonLayout&&this._buttonLayout.cleanup(),this._super()},_setSectionContent:function(e,t){this["_"+e]=t;var i=juic.$(this.id+e),o=this._isSectionRendered(e,t);if(i){if(o){var s=juic.createRenderContext();this._renderContent(s,e,t),s.renderInto(i)}else{for(var a=juic.$(this.id);i.parentNode!==a;)i=i.parentNode;a.removeChild(i)}}else if(o){var a=juic.$(this.id);if(a){var s=juic.createRenderContext();this._renderSection(s,e,t),n.innerHTML=s.join("");for(var i=n.firstChild,r=this._getSectionOrder(),l=0,d;l<r.length;l++)if(r[l]==e){d=l;break}for(var u=null,l=d+1;!u&&l<r.length;l++)u=juic.$(this.id+r[l]);u?a.insertBefore(i,u):a.appendChild(i)}}this._margins=null,this._updateStyles()},_isSectionRendered:function(e,t){return t||"content"==e},_getStyle:function(e){var t={};switch(e){case void 0:this._width&&(t.width="number"==typeof this._width?this._width+"px":this._width);break;case"content":t={},this._scrollable&&(t.overflow="auto");var i=this._getInnerHeight();t.height=i?i+"px":"";}return t},_updateClassName:function(e){var t;t=e?juic.$(this.id+e):juic.$(this.id),t&&(t.className=this._getSectionClassName(e))},_updateStyles:function(e){var t=juic.$(this.id+(e?e:""));if(t&&(SFDom.updateStyle(t,this._getStyle(e)),null==e)){for(var i=this._getSectionOrder(),o=0;o<i.length;o++)this._updateStyles(i[o]);var n=this._getInnerHeight();null!=n&&this._content instanceof SFAbstractAdjustableHeight&&this._content.setHeight(n)}},_getInnerHeight:function(){var t=null;if(null!=this._height){var i=this._getMarginToFitContent();t=null==i?this._height:e(0,this._height-i)}return t},_getMarginToFitContent:function(e){this._margins=this._margins||{},e=e||"y";var t=this._margins[e];if(null==t){var i=juic.$(this.id);if(i){var o=juic.$(this.id+"content"),n="x"==e?"width":"height",s=i.style[n];i.style[n]="",t=SFDom.getMarginToFitDescendant(i,o,e),i.style[n]=s,this._margins[e]=t}}return t},_getSectionClassName:function(e){if(e){var t=[o[e]];return"header"===e?t.push(this.generateFDClasses("panel__header")):"content"===e?t.push(this.generateFDClasses("panel__content")):void 0,"header"!=e||!this._usesStandardHeader()||this._title||this._showCloseIcon||t.push("hiddenAriaContent"),t.join(" ")}var i=["sfPanelComponent"];return this._type&&i.push(this._type),(this._title||this._header)&&i.push("hasTitle",this.generateFDClasses("panel")),i.join(" ")},_getSectionOrder:function(){return i}})})();function SFRevolutionPanel(e){this._super(e)}juic.extend(SFRevolutionPanel,SFPanel,{_init:function(e){var t="globalContainer globalPortletBodyBackground globalRoundedCorners revolutionPanel";e.type&&(t+=" "+e.type),this._super(juic.set(e,{type:t}))},_getSectionClassName:function(e){var t=this._super(e);return"header"==e&&(t+=" globalRoundedCornersHeader globalModernStyleSupport"),t}});function SFCalloutPanel(e){this._super(e)}(function(){var e=Math.max;function t(t){t=t?juic.set({},t):{};var i=t.pointerOptions;if(i){var o=i.direction,n=i.offset,s=!!i.flipOffset;if(["top","right","bottom","left"].contains(o)||(o=a.direction),"middle"!=n)if(!isNaN(n)){var r=["top","bottom"].contains(o),l=r?30:50;n=e(parseInt(n),l)}else n=a.offset;i={direction:o,offset:n,flipOffset:s}}else i=juic.set({},a);var d=t.type;return t.type="globalRoundedCorners revolutionPanel revolutionCallout"+(d?" "+d:""),t.pointerOptions=i,t}function i(e,t){var i={};if(e){var o=e.direction,n=e.offset;"middle"==n?n="50%":n+="px";"top"===o||"bottom"===o?(i[e.flipOffset?"right":"left"]=n,i[e.flipOffset?"left":"right"]="auto"):"left"===o||"right"===o?(i[e.flipOffset?"bottom":"top"]=n,i[e.flipOffset?"top":"bottom"]="auto"):void 0;i[o]="pointerContainer"==t&&Util.browserInfo.ie&&9>=Util.ieVersion()?"-1px":0;"top"===o?i.bottom="auto":"bottom"===o?i.top="auto":"left"===o?i.right="auto":"right"===o?i.left="auto":void 0}return i}var o="calloutPointer",n="calloutDirection-",s=["startMarker","header","content","buttonLayout","footer","pointerContainer","pointer","endMarker"],a={direction:"top",offset:"middle"};juic.extend(SFCalloutPanel,SFPanel,{_init:function(e){e=t(e),"tooltip"===e.role&&(e.sectionTabIndexes={content:"0"}),this._super(e),this._pointerOptions=e.pointerOptions,this._clickOutsideClosesPopup=e&&e.clickOutsideClosesPopup,juic.assert(this._pointerOptions,"SFCalloutPanel: Invalid pointer options.")},_getStyle:function(e){return"pointer"==e||"pointerContainer"==e?i(this._pointerOptions,e):this._super(e)},_getSectionClassName:function(e){var t=this._super(e);switch(e){case void 0:if(!this._header)return t+=" globalContentBackground globalContentForeground "+"noTitle";break;case"pointer":t="globalCalloutPointer"+" "+o,this._pointerOptions&&this._pointerOptions.direction&&(t+=" "+n+this._pointerOptions.direction);break;case"pointerContainer":t="globalCalloutPointerContainer"+" "+o,this._pointerOptions&&this._pointerOptions.direction&&(t+=" "+n+"container-"+this._pointerOptions.direction);break;case"header":"header"==e&&(t+=" globalRoundedCornersHeader "+this.generateFDClasses("panel__title"));}return t},_isSectionRendered:function(e,t){return!("pointer"!=e&&"pointerContainer"!=e)||this._super(e,t)},_getSectionOrder:function(){return s}})})();function SFContextPopup(e,t){this.register(),this._init(e,t)}(function(){function e(e,i){var o=Util.isRTL()?"right":"left",n={origin:t(e.origin,{vertical:"bottom",horizontal:o}),menu:t(e.menu,{vertical:"top",horizontal:o}),offset:t(e.offset)};return i&&(n.offset&&((n.origin.vertical!=i.origin.vertical||n.menu.vertical!=i.menu.vertical)&&(n.offset.vertical*=-1),(n.origin.horizontal!=i.origin.horizontal||n.menu.horizontal!=i.menu.horizontal)&&(n.offset.horizontal*=-1)),n.origin=i.origin,n.menu=i.menu),n}function t(e,t){return e?juic.set({},e):t}var i=Util.browserInfo.android||Util.browserInfo.ios,o={context:SFPositionManager,originId:null,refocusRef:null,visibleOverflow:!1,preventRedisplay:!0,loopFocus:!1,setFocusOnSelf:!1,closeOnEscape:!1,closeOnClick:!1,closeOnMouseout:!1,hideLatency:.5,viewportPadding:20},n={context:SFAbstractPositionManager};juic.extend(SFContextPopup,juic.Component,{_init:function(e,t){t=new juic.Config(t,o,n),this._originalPoint={offset:t&&t.offset,menu:t&&t.menu,origin:t&&t.origin},this.setChild(e),this._context=t.context,this._originId=t.originId,this._visibleOverflow=t.visibleOverflow,this._preventRedisplay=t.preventRedisplay,this._lastHiddenTimeStamp=0,this._loopFocus=t.loopFocus,this._setFocusOnSelf=t.setFocusOnSelf,this._closeOnEscape=t.closeOnEscape,this._closeOnClick=t.closeOnClick,this._refocusRef=t.refocusRef,this._closeOnMouseout=t.closeOnMouseout,this._hideLatency=t.hideLatency,this._fullScreen=t.fullScreen,this._fullScreenThreshold=t.fullScreenThreshold,this._showRelativeToViewport=t.showRelativeToViewport,this._stopTouchMove=t.stopTouchMove,this._viewportPadding=t.viewportPadding,this._showArrow=t.showArrow,this._loopFocus&&(this._focusLoop=new SFFocusLoop(this.id),this._focusMarkers=this._focusLoop.getMarkers())},renderHtml:function(e){e.push("<div id=\"",this.id,"\" onmousedown=\"",this.fireCode("_onMouseDown"),"\" ontouchstart=\"",this.fireCode("_onMouseDown"),"\" style=\"max-height: ",SFDom.getViewportHeight()-this._viewportPadding,"px; max-width: ",SFDom.getViewportWidth()-this._viewportPadding,"px"),this._visibleOverflow||e.push("; overflow: hidden"),this._stopTouchMove&&e.push("\" ontouchmove=\"SFDOMEvent.stopPropagation(event)"),e.push("\">"),this._focusMarkers&&e.push(this._focusMarkers[0]),this._child.renderHtml(e),this._focusMarkers&&e.push(this._focusMarkers[1]),e.push("</div>")},show:function(t,o){var n=this._showRelativeToViewport;o=o||{},o.refocusRef&&(this._refocusRef=o.refocusRef),null!=o.setFocusOnSelf&&(this._setFocusOnSelf=o.setFocusOnSelf),"boolean"==typeof o.showRelativeToViewport&&(n=o.showRelativeToViewport);var s=t==this._currentOriginId;this._currentOriginId=t||this._originId,this._allowShow()?(this._shown=!0,this._isFullScreen=this._fullScreen,!this._isFullScreen&&null!=this._fullScreenThreshold&&(this._isFullScreen=SFDom.getViewportWidth()<=this._fullScreenThreshold),this._isFullScreen?(SFOverlayMgr.addEventListener("overlayRendered",this,"_onFullScreenRendered"),SFOverlayMgr.show(this,{fullScreen:!0,viewport:!0,modal:!0,centered:!1,css:{top:0,left:0}})):(this._context.addEventListener("positionFixed",this,"_onPositionFixed"),this._context.show({component:this,originId:this._currentOriginId,fixPoint:e(this._originalPoint,this._currentPoint),alwaysInViewport:!0,showRelativeToViewport:n,showArrow:this._showArrow})),i?(SFDOMEvent.addListener(window.document,"touchstart",this._onWindowMouseDown,this),SFDOMEvent.addStopPropagationListener("touchstart",this,"_onNotifyClick")):(SFDOMEvent.addListener(window.document,"mousedown",this._onWindowMouseDown,this),SFDOMEvent.addStopPropagationListener("mousedown",this,"_onNotifyClick")),this._closeOnEscape&&SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this),this._closeOnMouseout&&this._bindMouseOutAndOver()):!s&&!this._isFullScreen&&this._context.moveTo(this.id,e(this._originalPoint,this._currentPoint),this._currentOriginId,!0)},hide:function(){this._shown&&(this._shown=!1,this.dispatch("hide"),this._isFullScreen?SFBodyEventDispatcher.removeResizeListener(null,this):this._context.removeEventListener("positionFixed",this),i?(SFDOMEvent.removeListener(window.document,"touchstart",this._onWindowMouseDown,this),SFDOMEvent.removeStopPropagationListener("touchstart",this)):(SFDOMEvent.removeListener(window.document,"mousedown",this._onWindowMouseDown,this),SFDOMEvent.removeStopPropagationListener("mousedown",this)),this._closeOnEscape&&SFDOMEvent.removeListener(window.document,"keydown",this._onWindowKeyDown,this),this._refocusRef&&this._handleRefocus(),this._closeOnMouseout&&(this._unBindMouseOutAndOver(),this._cleanHidePopupTimeout()))},setChild:function(e){this._child&&(this._child.removeEventListener("changeDimensions",this),this._child.removeEventListener("hide",this),this._child.removeEventListener("action",this)),this._child=e,this._child&&(this._child.addEventListener("changeDimensions",this,"_onChangeDimension"),this._child.addEventListener("hide",this,"hide"),this._child.addEventListener("action",this,"_onChildAction"))},setFocus:function(e){this._focusLoop&&this._focusLoop.setFocus(e)},isFullScreen:function(){return this._isFullScreen},_onFullScreenRendered:function(){SFOverlayMgr.removeEventListener("overlayRendered",this),SFBodyEventDispatcher.addResizeListener(this,"_onFullScreenResize"),this._child instanceof SFAbstractPositionable&&this._child.handleFullScreenResize(this._getViewportDims(),!0),this._setFocusOnSelf&&this.setFocus()},_onFullScreenResize:function(){this._child instanceof SFAbstractPositionable&&this._child.handleFullScreenResize(this._getViewportDims(),!1)},_getViewportDims:function(){return{width:SFDom.getViewportWidth(),height:SFDom.getViewportHeight()}},_handleRefocus:function(){var e=this._refocusRef;e&&setTimeout(function(){return e.setFocus?void e.setFocus():e.focus?void e.focus():void SFDom.setFocus(e)},0)},isShown:function(){return this._shown},cleanup:function(e){!1!==e&&this._child.cleanup(),this._focusLoop&&this._focusLoop.cleanup(),this.unregister()},resetCurrentPosition:function(){this._currentPoint=null},preventClose:function(){this._clickedInsidePopup=!0;var e=this;setTimeout(function(){e._clickedInsidePopup=!1},0)},_updateClassName:function(){var e=juic.$(this.id);if(e){var t="popupAligned-",i=this._currentPoint.menu.horizontal,o=this._currentPoint.menu.vertical;e.className=t+i+" "+t+o}},_onChildAction:function(e){"hide"==e.actionCommand&&this.dispatch("hide")},_allowShow:function(){var e=!this._shown;if(e&&this._preventRedisplay){var t=new Date().getTime(),i=t-this._lastHiddenTimeStamp;250>=i&&(e=!1)}return e},_onPositionFixed:function(e){if(e.componentId==this.id){if(!this._childChangedDimension){e.positionInfo.fixPoint.origin;this._currentPoint=e.positionInfo.fixPoint,this._updateClassName(),"undefined"!=typeof SFAbstractPositionable&&this._child instanceof SFAbstractPositionable?this._child.positionFixed(e):"undefined"!=typeof SFAbstractResizable&&this._child instanceof SFAbstractResizable?(e.newComponentWidth||e.newComponentHeight)&&this._child.setDimension({width:e.newComponentWidth,height:e.newComponentHeight}):"undefined"!=typeof SFAbstractAdjustableHeight&&this._child instanceof SFAbstractAdjustableHeight&&e.newComponentHeight&&this._child.setHeight(e.newComponentHeight)}this._loopFocus&&this._setFocusOnSelf&&this.setFocus(),this.dispatch("positionFixed")}},_bindMouseOutAndOver:function(){var e=juic.$(this._currentOriginId);e&&(SFDOMEvent.addListener(e,"mouseover",this._handleMouseOver,this),SFDOMEvent.addListener(e,"mouseout",this._handleMouseOut,this));var t=juic.$(this.id);t&&(SFDOMEvent.addListener(t,"mouseover",this._handleMouseOver,this),SFDOMEvent.addListener(t,"mouseout",this._handleMouseOut,this))},_unBindMouseOutAndOver:function(){var e=juic.$(this._currentOriginId);e&&(SFDOMEvent.removeListener(e,"mouseover",this._handleMouseOver,this),SFDOMEvent.removeListener(e,"mouseout",this._handleMouseOut,this));var t=juic.$(this.id);t&&(SFDOMEvent.removeListener(t,"mouseover",this._handleMouseOver,this),SFDOMEvent.removeListener(t,"mouseout",this._handleMouseOut,this))},_handleMouseOver:function(){this._cleanHidePopupTimeout()},_handleMouseOut:function(e){var t=juic.$(this._currentOriginId),i=juic.$(this.id),o=this,n=SFDOMEvent.getRelatedTarget(e);this._cleanHidePopupTimeout(),0<this._hideLatency&&(this._hidePopupTimeout=setTimeout(function(){!i||SFDom.isAncestor(t,n)||SFDom.isAncestor(i,n)||o.hide()},1e3*this._hideLatency))},_cleanHidePopupTimeout:function(){this._hidePopupTimeout&&clearTimeout(this._hidePopupTimeout)},_onNotifyClick:function(e){this._onWindowMouseDown(e.userEvent)},_onWindowMouseDown:function(e){if(e||(e=window.event),!this._clickedInsidePopup){var t=e&&SFDOMEvent.getTarget(e);SFDom.isAncestor(this.id,t)?this._onMouseDown(e):(this.dispatch("clickedOutsidePopup",{userEvent:e}),this._closeOnClick&&this.hide(),this._lastHiddenTimeStamp=new Date().getTime())}},_onMouseDown:function(e){this.preventClose(),this.dispatch("preventBlur",{mouseEvent:e})},isTopOverlay:function(){return SFOverlayMgr.isTopOverlay(this)},_onWindowKeyDown:function(e){var t=SFDOMEvent.getKeyName(e);"ESCAPE"===t?this.isTopOverlay()&&this.hide():void 0},_onChangeDimension:function(){if(this._shown){var e=juic.$(this.id);this.dispatch("changeDimensions",{width:e.offsetWidth,height:e.offsetHeight}),this._childChangedDimension=!0,this.reposition(),this._childChangedDimension=!1}},reposition:function(){this._isFullScreen||this._context.moveTo(this.id,e(this._originalPoint,this._currentPoint),this._currentOriginId,!0)},setCloseOnClick:function(e){this._closeOnClick=e},setRefocusId:function(e){this._refocusRef=e}})})();function SFAbstractDropComponent(e){this.register(),this._init(e)}(function(){var e={useButton:!1},t={};juic.extend(SFAbstractDropComponent,juic.Component,{_init:function(i){i=new juic.Config(i,e,t),this._useButton=i.useButton,this._stableId=i.stableId,this._popup=new SFContextPopup(this._createPopupContents(),this._getPopupOptions()),this._popup.addEventListener("hide",this,"_onPopupHidden")},cleanup:function(){this.hide(),this._popup.cleanup(),this._super()},renderHtml:function(e){this._useButton?e.push("<button"):e.push("<a role=\"button\" tabindex=\"0\""),e.push(" id=\"",this.getReferenceId(),"\" class=\"",this._getClassName(),this._stableId?"\" data-help-id=\""+this._stableId:"","\" aria-haspopup=\"true\" role=\"menu\" onkeydown=\"",this.fireCode("_handleKeypress"),"\" onclick=\"",this.fireCode("show"),"return false;\" aria-owns=\"",this._popup.getReferenceId(),"\">"),this._renderButtonContents(e),this._useButton?e.push("</button>"):e.push("</a>")},_renderButtonContents:function(){throw new Error("SFAbstractDropComponent: Must implement _renderButtonContents")},_createPopupContents:function(){throw new Error("SFAbstractDropComponent: Must implement _createPopupContents")},_getClassName:function(){return"sfDropComponent"},_getPopupOptions:function(){var e=this.getReferenceId();return{visibleOverflow:!0,originId:e,refocusRef:this,loopFocus:!0,closeOnEscape:!0,closeOnClick:!0,setFocusOnSelf:!0}},_onPopupHidden:function(){},focus:function(){SFDom.setFocus(this.getReferenceId())},isPopupShown:function(){return this._popup.isShown()},show:function(){this._popup.show()},hide:function(){this._popup.hide()},_handleKeypress:function(e){var t=SFDOMEvent.getKeyName(e||window.event);("SPACEBAR"==t||"RETURN"==t)&&(this.show(),SFDOMEvent.stopEvent(e))},updateClassName:function(){var e=juic.$(this.id);e&&(e.className=this._getClassName())},updateContent:function(){var e=juic.$(this.id);if(e){e.className=this._getClassName();var t=juic.createRenderContext();this._renderButtonContents(t),t.renderInto(e)}}})})();function SFDropComponentContents(e){this.register(),this._init(e)}(function(){var e={contents:["string",juic.Component],className:["string",null]},t={};juic.extend(SFDropComponentContents,SFAbstractAdjustableHeight,{_init:function(i){i=new juic.Config(i,t,e),this._contents=i.contents,this._className=i.className,this._contents instanceof juic.Component&&this._contents.addEventListener("hide",this,"dispatchEvent")},cleanup:function(){this._contents instanceof juic.Component&&this._contents.cleanup(),this._super()},renderHtml:function(e){e.push("<div id=\"",this.id,"\" class=\"",this.getClassName(),"\">",this._contents,"</div>")},getClassName:function(){return this._className?this._className:"sfDropComponentContents"},setHeight:function(e){var t=juic.$(this.id);if(t){this._offsets||(this._offsets=SFDom.getOffsets(t));var e=Math.max(0,e-this._offsets);this._contents instanceof SFAbstractAdjustableHeight?this._contents.setHeight(e):(SFDom.updateStyle(t,{overflow:"auto",height:e+"px"}),this.dispatch("changeDimensions"))}}})})();function SFCalloutPopup(e){this._super(e)}(function(){var e=Math.max;function t(e,t){this._panel=e,this._showArrow=t,this._panel.addEventListener("action",this,"dispatchEvent"),this._panel.addEventListener("changeDimensions",this,"dispatchEvent"),this._panel.addEventListener("hide",this,"_onDialogHidden")}function i(e){e=e?juic.set({},e):{};var t=e.originOptions;if(t){var i=t.direction;r[i]||(i=a.direction);var n=r[i].directionType,s="vertical"==n?30:50;t={direction:i,originOffset:o(t,"originOffset",0,!0),flipOriginOffset:!!t.flipOriginOffset,pointerOffset:o(t,"pointerOffset",s,!0),flipPointerOffset:!!t.flipPointerOffset,margin:o(t,"margin",0,!1)}}else t=juic.set({},a);return e.originOptions=t,e.pointerOptions={direction:r[t.direction].opposite,offset:t.pointerOffset,flipOffset:t.flipPointerOffset},e}function o(t,i,o,n){var s=t[i];return null==s||n&&"middle"==s||(isNaN(s)?s=null:s=e(o,parseInt(s))),null==s?a[i]:s}function n(e){var t=r[e.direction],i={menu:{},origin:{},offset:{}};i.menu[t.directionType]=t.opposite,i.origin[t.directionType]=t.direction,i.menu[t.oppositeType]="middle"==e.pointerOffset?"middle":e.flipPointerOffset?t.oppositeAnchor:t.anchor,i.origin[t.oppositeType]="middle"==e.originOffset?"middle":e.flipOriginOffset?t.oppositeAnchor:t.anchor,i.offset[t.directionType]=(t.flipped?1:-1)*e.margin;var o=0,n=e.flipPointerOffset?-1:1,s=e.flipOriginOffset?-1:1;return"middle"!=e.pointerOffset&&(o-=n*(e.pointerOffset+10)),"middle"!=e.originOffset&&(o+=s*e.originOffset),i.offset[t.oppositeType]=o,i}function s(e,t){var i=r[e.direction],o=n(e),s=t.menu[i.directionType]!=o.menu[i.directionType],a=t.menu[i.oppositeType]!=o.menu[i.oppositeType];return{direction:s?i.direction:i.opposite,offset:e.pointerOffset,flipOffset:a?!e.flipPointerOffset:e.flipPointerOffset}}var a={direction:"bottom",originOffset:"middle",flipOriginOffset:!1,pointerOffset:"middle",flipPointerOffset:!1,margin:0};juic.extend(SFCalloutPopup,SFCalloutPanel,{_init:function(e){var e=i(e);this._super(e),this._originOptions=e.originOptions,this._originId=e.originId,this._closeOnClick=!(null!=e.closeOnClick)||e.closeOnClick,this._closeOnMouseout=!(null!=e.closeOnMouseout)||e.closeOnMouseout,this._hideLatency=null==e.hideLatency?.5:e.hideLatency,this._role=e.role,this._refocusRef=e.refocusRef,this._showRelativeToViewport=e.showRelativeToViewport,this._closeOnScroll=!(null!=e.closeOnScroll)||e.closeOnScroll,this._showArrow=!(null!=e.showArrow)||e.showArrow,this._isAnnouncePopupContent=!(null!=e.isAnnouncePopupContent)||e.isAnnouncePopupContent},_getScrollableParents:function(e){var t=[];if(e instanceof HTMLElement){for(var i=e,o,n;i&&i!==document;)o=getComputedStyle(i),n=o.getPropertyValue("overflow")+","+o.getPropertyValue("overflow-x")+","+o.getPropertyValue("overflow-y"),/(auto|scroll)/.test(n)&&t.push(i),i=i.parentNode;t.push(document)}return t},show:function(e,i){var o=new juic.Config(i);if("boolean"!=typeof o.showRelativeToViewport&&(o.showRelativeToViewport=this._showRelativeToViewport),this._currentOriginId=e||this._originId,!this._popup){var s=n(this._originOptions);this._popup=new SFContextPopup(new t(this,this._showArrow),juic.set({originId:this._originId,closeOnClick:this._closeOnClick,closeOnMouseout:this._closeOnMouseout,hideLatency:this._hideLatency,loopFocus:!0,closeOnEscape:!0,showArrow:this._showArrow,refocusRef:this._refocusRef},s)),this._popup.addEventListener("clickedOutsidePopup",this,"dispatchEvent"),this._popup.addEventListener("hide",this,"dispatchEvent"),this._popup.addEventListener("positionFixed",this,"_onPositionFixed")}if(this._setFocusOnSelf=o.setFocusOnSelf,o.setFocusOnSelf=!1,this._popup.show(this._currentOriginId,o),SFBodyEventDispatcher.addResizeListener(this,"reposition"),this._closeOnScroll){this._justShow=!0;var a=this;setTimeout(function(){a._justShow=!1},100);var r=SFDom.hasClass(document.body,"fioriShellBarEnabled"),l=juic.$(this._currentOriginId),d=r&&l?this._getScrollableParents(l):[document];this._aScrollableParents=d,d.forEach(function(e){SFDOMEvent.addListener(e,"scroll",this._onWindowScroll,this)}.bind(this))}},_onWindowScroll:function(){this._justShow||this.hide()},_onPositionFixed:function(){this._setFocusOnSelf&&this.setFocus()},exclusiveShow:function(e,t){this.isShown()&&this._currentOriginId!==e&&this.hide(),(!this.isShown()||this.isShown()&&this._currentOriginId!==e)&&(t&&(t.header&&(this._usesStandardHeader()?this.setTitle(t.header):this.setHeader(t.header)),t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content)),this.show(e,t))},hide:function(){this._popup&&this._popup.hide(),this.dispatch("hide"),this._currentOriginId=null,SFBodyEventDispatcher.removeResizeListener(null,this);var e=this._aScrollableParents;e&&(e.forEach(function(e){SFDOMEvent.removeListener(e,"scroll",this._onWindowScroll,this)}.bind(this)),this._aScrollableParents=null)},setFocus:function(e){this._popup&&this._popup.setFocus(e),this._super(e)},_handleClose:function(){this.hide.apply(this,arguments)},_isSectionRendered:function(e,t){return!("header"!==e)||this._super(e,t)},_renderContent:function(e,t){switch(t){case"header":this._renderStandardHeader(e);break;default:this._super.apply(this,arguments);}},_usesStandardHeader:function(){return!0},reposition:function(){this._popup.reposition()},isShown:function(){return this._popup&&this._popup.isShown()},positionFixed:function(e){var t=e.positionInfo.fixPoint;this._pointerOptions=s(this._originOptions,t);var i=r[this._pointerOptions.direction],o=e[i.offsetNewDimension];if(0<o){var n=e.positionInfo.overlay[i.offsetDimension],a=n-o;10>parseInt(SFDom.getStyle(juic.$(e.positionInfo.overlay.overlayId),i.offsetOverlayPosition))&&(a*=-1),this._pointerOptions.flipOffset&&(a*=-1);var l=this._pointerOptions.offset;if("middle"==l){var d=juic.$(this.id),u=this._pointerOptions.flipOffset?i.offsetMarginEnd:i.offsetMarginStart;l=n/2,l-=parseInt(SFDom.getStyle(d,u))}l+=a,this._pointerOptions.offset=l}this._updateStyles("pointerContainer"),this._updateClassName("pointerContainer"),this._updateStyles("pointer"),this._updateClassName("pointer")},setCloseOnClick:function(e){this._popup.setCloseOnClick(e)},getRole:function(){return this._role},cleanup:function(){this._popup&&(this._popup.cleanup(!1),delete this._popup),this._focusMarkers&&(this._focusMarkers[0].cleanup(),this._focusMarkers[1].cleanup()),this._super()}}),juic.extend(t,SFAbstractPositionable,{renderHtml:function(e){var t=this._panel.getRole(),i=this._panel._title||this._panel._header;e.push("<div role=\"",t||"dialog","\" id=\"",this._panel.getReferenceId(),"wrapper\""),i&&e.push(" aria-label=\""+i+"\""),"dialog"!==t&&t||e.push(" aria-modal=\"true\""),e.push(" class=\"globalCallout calloutPopupWrapper"),this._showArrow&&e.push(" calloutPopupArrow"),e.push("\">"),this._panel.renderHtml(e),e.push("</div>"),e.addAfterRenderListener&&e.addAfterRenderListener(this,"_onAfterRendering")},_onAfterRendering:function(){if(this._panel._isAnnouncePopupContent){var e=this._panel.getReferenceId(),t=document.getElementById(this._panel._currentOriginId||"");if(t&&e){var i=(t.getAttribute("aria-describedby")||"").split(" ");0>i.indexOf(e)&&(i.push(e),t.setAttribute("aria-describedby",i.join(" ")))}}},_onDialogHidden:function(){if(this._panel._isAnnouncePopupContent){var e=this._panel.getReferenceId(),t=document.getElementById(this._panel._currentOriginId||"");if(t&&e){var i=(t.getAttribute("aria-describedby")||"").split(" ");t.setAttribute("aria-describedby",i.filter(function(t){return t!==e}).join(" "))}}},positionFixed:function(e){this._panel.positionFixed(e)}});var r={top:{flipped:!1,direction:"top",opposite:"bottom",directionType:"vertical",oppositeType:"horizontal",offsetMarginStart:"margin-left",offsetMarginEnd:"margin-right",offsetDimension:"width",offsetNewDimension:"newComponentWidth",offsetOverlayPosition:"left",anchor:"left",oppositeAnchor:"right"},bottom:{flipped:!0,direction:"bottom",opposite:"top",directionType:"vertical",oppositeType:"horizontal",offsetMarginStart:"margin-left",offsetMarginEnd:"margin-right",offsetDimension:"width",offsetNewDimension:"newComponentWidth",offsetOverlayPosition:"left",anchor:"left",oppositeAnchor:"right"},left:{flipped:!1,direction:"left",opposite:"right",directionType:"horizontal",oppositeType:"vertical",offsetMarginStart:"margin-top",offsetMarginEnd:"margin-bottom",offsetDimension:"height",offsetNewDimension:"newComponentHeight",offsetOverlayPosition:"top",anchor:"top",oppositeAnchor:"bottom"},right:{flipped:!0,direction:"right",opposite:"left",directionType:"horizontal",oppositeType:"vertical",offsetMarginStart:"margin-top",offsetMarginEnd:"margin-bottom",offsetDimension:"height",offsetNewDimension:"newComponentHeight",offsetOverlayPosition:"top",anchor:"top",oppositeAnchor:"bottom"}}})();function SFTriangle(e){this.register(),this._init(e)}(function(){var e={top:"top",bottom:"bottom",left:"left",right:"right"},t={size:20,direction:e.top,cssClass:"",inherit:void 0},i={color:["string",null],size:["number",null],direction:["string",null],cssClass:["string",null],inherit:["boolean",null]};juic.extend(SFTriangle,juic.Component,{_init:function(e){this._options=new juic.Config(e,t,i),this._fioriFDIconClass=this._getFioriFDIconClass()},renderHtml:function(e){this._renderTriangle(e)},pivot:function(e){var t=juic.$(this._getDomId());if(t&&(this._clearDirections(t),Util.addClass(t,"direction"+e),this._options.direction=e||this._options.direction,Util.isFioriFDEnabled())){this._fioriFDIconClass=this._getFioriFDIconClass();var i=juic.$(this._getArrowIconId());i&&(i.className=this._fioriFDIconClass)}},_renderTriangle:function(e){this._options.cssClass+=" direction"+this._options.direction,e.push("<span class=\"globalArrowColor sfTriangle globalIconFont1Support globalIconFont1 ",this.generateFDClasses("button",["transparent"])," ",this.generateFDClasses("select__button")," ",this._options.cssClass,"\""," id=\"triangle_",this.id,"\""),e.push(" onclick=\"",this.fireCode("_click"),"\""),this._options.color&&!this._options.inherit&&e.push(" style=\"color:",this._options.color,"\""),Util.isFioriFDEnabled()?e.push("\"><i id=\"arrowIcon_",this.id,"\" class=\"",this._fioriFDIconClass,"\"></i></span>"):e.push("\"><span class=\"legacyFont1Icon globalIconFont1 ",this._options.direction,"\"></span></span>")},_getDomId:function(){return"triangle_"+this.id},_getArrowIconId:function(){return"arrowIcon_"+this.id},_click:function(){this.dispatch("triangleClickEvent")},getDirection:function(){return this._options.direction},_clearDirections:function(e){Util.removeClass(e,"directiontop"),Util.removeClass(e,"directionbottom"),Util.removeClass(e,"directionleft"),Util.removeClass(e,"directionright")},_getFioriFDIconClass:function(){var t="";switch(this._options.direction){case e.top:t="sap-icon--slim-arrow-up";break;case e.bottom:t="sap-icon--slim-arrow-down";break;case e.left:t="sap-icon--slim-arrow-left";break;case e.right:t="sap-icon--slim-arrow-right";}return t}})})();function SFComboListSelect(e,t){this._options=t,this._mutatorClass=t&&t.mutatorClass,this._itemClass=t&&t.itemClass,this._itemFocusClass=t&&t.itemFocusClass,this._visionClasses=t&&t.visionClasses||"",this._pageSize=t&&t.pageSize||10,this._filterType=t&&t.filterType,this._filterValue=t&&t.filterValue,this._width=t&&t.width,this._height=t&&t.height,this._scrollItemTop=t&&t.scrollItemTop,this._fetchPageDelay=t&&"number"==typeof t.fetchPageDelay?t.fetchPageDelay:0,this._focusIndex=this._getInitFocusIndex(),this._noResultsMessage=t&&t.noResultsMessage,this._useGlobalMenuTheming=!t||!1!==t.useGlobalMenuTheming,this._fetchPagesInOrder=t&&t.fetchPagesInOrder,this.setItemProvider(e),this.register()}(function(){var e=Math.min,t=Math.max;function i(){return _||(_=document.createElement("div"),Util.hide(_),_.style.position="absolute",document.body.firstChild?document.body.insertBefore(_,document.body.firstChild):document.body.appendChild(_)),_}var o="scrolling-page",n="page-loading",s="page-error",a="first-page",r="globalMenuItemFocus",l="fetch-page-in-order",d=Util.browserInfo.ff&&7>Util.ffVersion(),u={width:117,height:10};juic.extend(SFComboListSelect,SFAbstractResizable,{renderHtml:function(e){this._calculateDims(),this._initScroll=!0,e.push("<div id=\"",this.id,"\" class=\"",this._getGlobalMenuThemingClass("globalMenu")?this._getGlobalMenuThemingClass("globalMenu")+" ":"","sf-combo-listselect",this._visionClasses,this._mutatorClass?" "+this._mutatorClass:"","\" onscroll=\"",this.fireCode("_fetchVisiblePages"),"\"");var t={};this._height&&(t.height=this._height),this._width&&(t.width=this._width),SFDom.renderStyle(e,t),e.push("><div id=\"",this.id,"container\" class=\"scrollPage\" ontouchstart=\"",this.fireCode("_onTouchStart"),"\""),this._containerHeight&&e.push(" style=\"height:",this._containerHeight,"px\""),e.push(">"),this._renderPage(e,0),e.push("</div></div>"),this._fetchPagesInOrder&&e.addAfterRenderListener(this,"_fetchVisiblePages")},cleanup:function(){this.setItemProvider(null),this._super()},_renderPage:function(e,t){var i=this._pageStatus[t],r=(this._pageHeight||0)*t,d={},u=[o];this._fetchPagesInOrder?u.push(l):d.top=r+"px",0==t&&u.push(a),!i||i.loading?u.push(n):i.error&&u.push(s),e.push("<div id=\"",this.id,t,"\""),SFDom.renderStyle(e,d),e.push(" class=\"",u.join(" "),"\">"),!i||i.loading?this._fetchPagesInOrder&&e.push(MSGS.COMMON_loading):!i.error&&this._renderPageContent(e,t,i.items),e.push("</div>")},_adjustPageHeight:function(e){var t=this.id,i=juic.$(t),o=juic.$(t+e),n=o.offsetHeight;if(n>this._pageHeight){var s=i.scrollTop%this._pageHeight/this._pageHeight;this._pageHeight=n,this._itemHeight=n/this._pageSize,this._containerHeight=this._itemCount*this._itemHeight;var a=juic.$(t+"container");a.style.height=this._containerHeight+"px",i.scrollTop=n*(e+s),Array.prototype.forEach.call(a.childNodes,function(e){var i=e.id;if(0==i.indexOf(t)){var o=parseInt(i.substring(t.length));e.style.top=n*o+"px"}})}},_renderPageContent:function(e,t,i){if(0==t&&0==i.length)e.push("<div role=\"alert\" id=\"",this._getItemDomId(0),"\" class=\"","no-results"," ",this._getGlobalMenuThemingClass("globalMenuItem")," ",this.generateFDClasses("list__item"),"\" unselectable=\"on\" onselectstart=\"return false\">"),e.push(this._noResultsMessage||MSGS.COMMON_No_Results),e.push("</div>");else{e.push("<ul id=\"",this.id,"_listSelect\" class=\"","sf-list-select"," ",this.generateFDClasses("list",["dropdown"]),"\" role=\"listbox\" aria-expanded=\"true\">");for(var o=0,n=i.length;o<n;o++){var s=i[o],a=t*this._pageSize+o;this._fetchPagesInOrder&&0<t&&(a=this._lastItemIndex+1),e.push("<li role=\"option\" id=\"",this._getItemDomId(a),"\""),e.push(" class=\"",this._getGlobalMenuThemingClass("globalMenuItem")),e.push(" ",this.generateFDClasses("list__item")),s&&s.disabled&&e.push(" ","disabled-item"),this._itemClass?e.push(" ",this._itemClass):e.push(" ","sf-list-item"),this.isFioriFDEnabled()&&s===this._focusItem&&e.push(" ","is-selected"),this._focusIndex==a&&(e.push(" ",this._getFocusClass()),e.push(" ",this._getGlobalMenuThemingClass(r))),e.push("\"aria-posinset=\"",a+1,"\" aria-setsize=\"",this._itemCount),this.isFioriFDEnabled()||(e.push("\" onmouseover=\"",this.fireCode("_mouseover",a)),e.push("\" onmouseout=\"",this.fireCode("_mouseout",a))),e.push("\" ontouchstart=\"",this.fireCode("_touchstart",a)),e.push("\" ontouchend=\"",this.fireCode("_touchend",a)),e.push("\" onclick=\"",this.fireCode("_selectItem",a),"\">"),this._renderItem(e,s,a),e.push("</li>"),this._fetchPagesInOrder&&(this._lastItemIndex=a)}e.push("</ul>")}},_renderItem:function(e,t,i){if(d&&e.push("<span class=\"ellipsis\">...</span>"),e.push("<a title=\"",juic.escapeHTML(this._itemProvider.getLabel(t)),"\" onclick=\"",this.fireCode("_selectItem",i),"\" unselectable=\"on\" onselectstart=\"return false\" role=\"menuitem\">"),t)if(t instanceof juic.Component)t.renderHTML(e);else{var o=juic.escapeHTML(this._itemProvider.getLabel(t));""==o&&(o="&nbsp;"),this._filterValue&&(o=o.replace(new RegExp("("+RegExp.escape(juic.escapeHTML(this._filterValue))+")","i"),"<em>$1</em>")),e.push(o)}e.push("</a>")},_renderPageError:function(e,t,i){e.push(i)},resetPagination:function(){this._focusItem&&this.setFocusItem(this._focusItem),this._lastFetchIndex=null,this._pageAvailable=!1,this._pageHeight=null,this._pageCount=null,this._itemCount=null,this._height=null,this._containerHeight=null,this._pageStatus=[],this._fetchPagesInOrder&&(this._cachedItems=[]);var e=juic.$(this.id);if(e){e.scrollTop=0;var t=e.firstChild;t.innerHTML=""}},setFilter:function(e,t){var i=this;this._filterType=e,this._filterValue=t,this.resetPagination(),0<this._fetchPageDelay?(this._fetchPageTimeout&&clearTimeout(this._fetchPageTimeout),this._fetchPageTimeout=setTimeout(function(){i._fetchPage(0),delete i._fetchPageTimeout},this._fetchPageDelay)):this._fetchPage(0)},_getInitFocusIndex:function(){return this._options&&this._options.focusIndex||0},getFocusItemId:function(){return this._getItemDomId(this._focusIndex)},_getItemDomId:function(e){return this.id+"item"+e},resetFilter:function(){this._filterValue=null,this._fetchPageTimeout&&(clearTimeout(this._fetchPageTimeout),this._fetchPageTimeout=null)},clearFilter:function(){this.setFilter(null,null)},selectFocus:function(){if(null!=this._focusIndex){var e=this.getCachedItem(this._focusIndex);e&&!e.disabled&&(this._focusItem=e,this.dispatch("itemSelected",{item:e}))}},moveFocusUp:function(){if(0<this._itemCount&&0<this._focusIndex){var e=this._focusIndex-1;this.changeItemFocus(e)}},moveFocusDown:function(){if(0<this._itemCount){var t=null==this._focusIndex?0:this._focusIndex+1,i=this._itemCount-1;this._fetchPagesInOrder&&(i=this._lastItemIndex),t=e(t,i),this.changeItemFocus(t)}},changeItemFocus:function(e,t){var i=this._itemCount-1;this._fetchPagesInOrder&&(i=this._lastItemIndex),0<this._itemCount&&e<=i&&(this._setItemFocus(this._focusIndex,!1),this._focusIndex=e,!t&&this.scrollToItem(this._focusIndex),this._setItemFocus(this._focusIndex,!0))},setFocusItem:function(e){var t=e?this._itemProvider.indexOf(e,{filterType:this._filterType,filterValue:this._filterValue}):-1;0<=t?(this._focusItem=e,this._focusIndex=t):(this._focusItem=null,this._focusIndex=this._getInitFocusIndex())},getFocusItem:function(){return this._focusItem},scrollToItem:function(e,t){var i=juic.$(this.id);if(i){var o=e*this._itemHeight,n=o+this._itemHeight,s=i.scrollTop,a=s+i.clientHeight;o<s&&(i.scrollTop=o),n>a&&(t?i.scrollTop=o:i.scrollTop=n-i.clientHeight),this._fetchVisiblePages()}},selectOnlyValue:function(){1==this._itemCount&&this.selectFocus()},resize:function(){var e=juic.$(this.id);if(e){var t=e.offsetHeight,i=e.offsetWidth,o=e.firstChild;if(this._calculateDims(),!this._height&&this._pageHeight&&(this._height=this._pageHeight+"px"),this._height){var n=this._height;this._itemCount<this._pageSize&&this._height>this._containerHeight&&(n="auto"),e.style.height=n}else e.style.height="auto";this._width&&(e.style.width=this._width),this._containerHeight?o.style.height=this._containerHeight+"px":0==this._itemCount&&(this._containerHeight=e.offsetHeight-SFDom.getOffsets(e)),"auto"==this._width&&this._containerHeight>e.offsetHeight&&(this._width=e.offsetWidth+17+"px",e.style.width=this._width),this._initScroll&&this._focusIndex?(this.scrollToItem(this._focusIndex,this._scrollItemTop),this._initScroll=!1):this._fetchVisiblePages(),(t!=e.offsetHeight||i!=e.offsetWidth)&&this.dispatch("changeDimensions",this.getDimension())}},getContainerHeight:function(){return this._calculateDims(),this._containerHeight},isVerticalScrollRequired:function(){return this._fetchPagesInOrder?!!this._isPageAvailable(0)&&this._itemCount>this._pageSize:(this._calculateDims(),this.getContainerHeight()>this._pageHeight)},getPageHeight:function(){return this.getPageDimension().height},getPageWidth:function(){return this.getPageDimension().width},getPageDimension:function(){return this._calculateDims(),{width:this._pageWidth,height:this._pageHeight}},getPageCount:function(){return this._pageCount},setWidth:function(e){this.setDimension(e,null)},setHeight:function(e){this.setDimension(null,e)},setDimension:function(i,o){if(i&&(i.width||i.height))this.setDimension(i.width,i.height);else{var n=SFDom.getViewportRegion(),s=this.getMaxDimension();i&&(s&&s.width&&(i=e(i,s.width)),i=e(i,n.width-17),this._width="string"==typeof i?i:t(i,u.width)+"px"),o&&("string"==typeof o?this._height=o:(s&&s.height&&(o=e(o,s.height)),o=e(o,n.height-17),this._height=t(o,u.height)+"px")),this.resize(),this.dispatch("changeDimensions",this.getDimension())}},getDimension:function(){var e=juic.$(this.id);if(e)return this._offsetsX||(this._offsetsX=SFDom.getBorder(e,"x")+SFDom.getPadding(e,"x"),this._offsetsY=SFDom.getBorder(e,"y")+SFDom.getPadding(e,"y")),{width:e.offsetWidth-this._offsetsX,height:e.offsetHeight-this._offsetsY}},getMinDimension:function(){var e;return e=0<this._itemHeight?1*this._itemHeight:this._containerHeight,{width:u.width,height:t(e,u.height)}},getMaxDimension:function(){if(this._containerHeight)return{height:this._containerHeight}},resetDimension:function(){this._height=null,this._width=null},isPageAvailable:function(){return this._pageAvailable},setItemProvider:function(e){this._itemProvider&&(this._itemProvider.removeEventListener("itemsAvailable",this),this._itemProvider.removeEventListener("itemsError",this)),e instanceof SFAbstractItemProvider?this._itemProvider=e:e instanceof Array&&(this._itemProvider=new SFArrayItemProvider(e)),this._itemProvider&&(this._itemProvider.addEventListener("itemsAvailable",this,"_onItemsAvailable"),this._itemProvider.addEventListener("itemsError",this,"_onItemsError"))},getItemProvider:function(){return this._itemProvider},setPageSize:function(e){this._pageSize=e},getPageSize:function(){return this._pageSize},getScrollThreshold:function(){return 20},_adjustPageDOM:function(t){if(d)for(var i=t*this._pageSize,o=e(this._itemCount,(t+1)*this._pageSize)-1,n=i;n<=o;n++)this._adjustItemDOM(n)},_adjustItemDOM:function(e){var t=juic.$(this._getItemDomId(e));if(t){var i=t.childNodes[1]&&t.childNodes[1].offsetWidth>t.offsetWidth-5;SFDom[i?"addClass":"removeClass"](t,"display-ellipsis")}},_selectItem:function(e,t){t=t||window.event,SFDOMEvent.stopPropagation(t),this._focusIndex=e,this.selectFocus()},_touchstart:function(e,t){this._mouseover(e,t)},_touchend:function(e,t){this._mouseout(e,t)},_mouseover:function(e,t){var i=juic.$(this._getItemDomId(e));Util.isMouseLeaveOrEnter(t,i)&&this.changeItemFocus(e,!0)},_mouseout:function(e,t){var i=juic.$(this._getItemDomId(e));Util.isMouseLeaveOrEnter(t,i)&&this.changeItemFocus(null,!0)},_getFocusClass:function(){var e=this._itemFocusClass||"item-focused";return this.isFioriFDEnabled()&&(e+=" is-focus"),e},_setItemFocus:function(e,t){if(null!=e){var i=juic.$(this._getItemDomId(e));i&&(SFDom[t?"addClass":"removeClass"](i,this._getFocusClass()),this._useGlobalMenuTheming&&SFDom[t?"addClass":"removeClass"](i,r))}if(t){var o=this.getCachedItem(this._focusIndex);o&&!o.disabled&&(this._focusItem=o,this.dispatch("itemFocused",{item:o}))}},_onTouchStart:function(e){e=e||window.event,SFDragDropMgr.handleDragStart(e,this,{useShim:!0})},handleDragEvent:function(i){var o=juic.$(this.id);switch(i.type){case"dragStart":this._scrollTopStart=o.scrollTop;break;case"drag":var n=i.point.y-i.origin.y,s=o.scrollHeight-o.clientHeight;o.scrollTop=t(0,e(s,this._scrollTopStart-n));}},_onItemsAvailable:function(e){if(e.pagination.filterValue==this._filterValue){var t=e.pagination;this._pageAvailable=!0,this._itemCount||(this._itemCount=e.itemCount),this._pageCount=Math.ceil(this._itemCount/this._pageSize);var i=e.items,o=t.pageIndex,n=this._pageStatus[o]={event:e,items:i,itemCount:e.itemCount,error:!1,loading:!1};0<o&&(n.firstPageStatus=this._pageStatus[0]),this._fetchPagesInOrder&&i&&0<i.length&&(this._cachedItems.push.apply(this._cachedItems,i),this._itemCount=this._cachedItems.length),this._updatePage(e.pagination.pageIndex);var s=juic.$(this.id);s&&0<this._pageHeight&&(!this._height&&(this._height=this._pageHeight+"px"),this.resize()),this.dispatchEvent(e),!this._fetchPagesInOrder&&juic.$(this.id+o)&&this._adjustPageHeight(o),0===e.pagination.pageIndex&&0==this._focusIndex&&this.changeItemFocus(0,!0)}},_onItemsError:function(e){var t=e.pagination;this._pageStatus[t.pageIndex]={error:!0,loading:!1,message:e.message},this.dispatchEvent(e)},_fetchVisiblePages:function(){if(!0===arguments[0]||this._pageCount<=10){var e=juic.$(this.id);if(e){var t=e.scrollTop,i=t+e.clientHeight;if(this._fetchPagesInOrder){var o=this._lastFetchIndex,n="number"==typeof o&&this._isPageAvailable(o),s=e.scrollHeight-i<this.getScrollThreshold();if(n&&s){var a=this._pageStatus[o],r=a.itemCount,l;if("function"==typeof this._itemProvider.hasMore)l=this._itemProvider.hasMore(a);else if("number"==typeof r)l=r>(o+1)*this._pageSize;else throw new Error("ItemProvider must have hasMore, or itemsAvailable event must have itemCount as number");l&&this._fetchPage(o+1)}}else for(var d=parseInt(t/this._pageHeight);d<this._pageCount&&!(d*this._pageHeight>=i||d>this._pageCount);)this._pageStatus[d]?juic.$(this.id+d)?this.isPageAvailable()&&this._adjustPageDOM(d):this._addPage(d):this._fetchPage(d),d++}}else if(null==this._fetchTimeout){var u=this;this._fetchTimeout=setTimeout(function(){u._fetchVisiblePages(!0),u._fetchTimeout=null},225)}},_fetchPage:function(e){this._pageStatus[e]||(this._lastFetchIndex=e,this._pageStatus[e]={loading:!0},this._nextStartIndex=0<e?this._getNextPageStartIndex(e):0,this._itemProvider.getItems({pageNumber:e+1,pageIndex:e,pageSize:this._pageSize,startIndex:this._nextStartIndex,endIndex:(e+1)*this._pageSize-1,filterType:this._filterType,filterValue:this._filterValue}),!juic.$(this.id+e)&&this._addPage(e))},_getNextPageStartIndex:function(e){var o=0<e&&this._pageStatus[e-1];if(o){var n=o.items;if(n&&0<n.length){var s=this._getItemIndex(n[0]);if(0<=s){for(var a=1;a<n.length;a++)s=t(s,this._getItemIndex(n[a]));return s+1}}}return this._pageSize*e},_getItemIndex:function(e){var t=e&&e.indexRef;return"number"==typeof t&&0<=t?t:-1},_addPage:function(e){var t=juic.$(this.id);if(t){var o=t.firstChild,n=juic.createRenderContext();this._renderPage(n,e);var s=i();n.renderInto(s),o.appendChild(s.firstChild),this._isPageAvailable(e)&&(this._adjustPageDOM(e),!this._fetchPagesInOrder&&this._adjustPageHeight(e))}},_updatePage:function(e){var t=juic.$(this.id+e);if(t){var i=this._pageStatus[e],r=0==e?a+" ":"";if(!i||i.loading)t.className=r+o+" "+n,t.innerHTML="";else if(i.error){t.className=r+o+" "+s;var d=juic.createRenderContext();this._renderPageError(d,e,i.message),d.renderInto(t)}else{var d=juic.createRenderContext();this._renderPageContent(d,e,i.items),t.className=r+o,d.renderInto(t)}this._fetchPagesInOrder&&SFDom.addClass(t,l),this._calculateDims(),t.style.top=this._pageHeight*e+"px"}},getCachedItem:function(e){if(this._fetchPagesInOrder)return this._cachedItems&&this._cachedItems[e];if(0<=e&&e<this._itemCount){var t=parseInt(e/this._pageSize),i=this._pageStatus[t];if(i&&!i.error&&!i.loading){var o=i.items;return o[e%this._pageSize]}}return null},_calculateDims:function(){if(!this._pageHeight){var t=juic.$(this.id+0);if(t)this._pageHeight=t.offsetHeight,this._pageWidth=t.offsetWidth;else if(this._isPageAvailable(0)){var o=i();o.className="sf-combo-listselect"+(this._mutatorClass?" "+this._mutatorClass:"");var n=juic.createRenderContext();this._renderPage(n,0),n.renderInto(o),Util.show(o),this._pageHeight=o.firstChild.offsetHeight,this._pageWidth=o.firstChild.offsetWidth,Util.hide(o),o.innerHTML=""}this._itemHeight=this._pageHeight/e(this._pageSize,this._itemCount),this._fetchPagesInOrder||(this._containerHeight=this._itemCount*this._itemHeight)}},_isPageAvailable:function(e){var t=this._pageStatus[e];return!!t&&!t.error&&!t.loading},getDomId:function(){return this.id+"_listSelect"},_getGlobalMenuThemingClass:function(e){return this._useGlobalMenuTheming?e:""}});var _})();function SFComboBox(e,t,i){this.register(),this._init(e,t,i)}(function(){var e=Math.min,t=Math.max;function i(e,t,i){return e&&null!=e[t]?e[t]:i}function o(i,o){if(!i)return"auto";if(!l){var n=document.createElement("span");document.body.appendChild(n),l=document.createElement("a"),n.appendChild(l)}l.parentNode.className=o,l.innerHTML=juic.escapeHTML(i);var s=l.offsetWidth;return l.innerHTML="",e(620,t(50,s+3))+"px"}var n=["ja_JP","ko_KR","zh_CN","zh_TW"],s=!1,a={vertical:5,horizontal:-5},r={vertical:0,horizontal:Util.isRTL()?25:-25};SFDOMEvent.ready(function(){Util.isFioriFDEnabled()&&(a={vertical:1,horizontal:0},r={vertical:1,horizontal:0})}),juic.extend(SFComboBox,juic.Component,{_init:function(e,t,o){this._popupOptions=i(o,"popupOptions",null),this._minimumFilterSize=i(o,"minimumFilterSize",0),this._enabled=!i(o,"disabled",!1),this._forceSelection=i(o,"forceSelection",!0),this._title=i(o,"title",null),this._placeholder=i(o,"placeholder",null),this._allowEmpty=i(o,"allowEmpty",!1),this._autoHeight=i(o,"autoHeight",!1),this._autoWidth=i(o,"autoWidth",!1),this._fixedWidth=i(o,"fixedWidth",!1),this._allowResize=i(o,"allowResize",!0),this._a11yLabel=i(o,"a11yLabel",MSGS.COMMON_ComboBox_Aria_Instruction),this._a11yloadingLabel=i(o,"loadingLabel",MSGS.UXR_Loading_ATL),this._isV12Plus=i(o,"isV12Plus",!1),this._trimQueryValue=i(o,"trimQueryValue",!1),this._selectFirstItem=i(o,"selectFirstItem",!1),this._required=i(o,"required",!1),this._writable=i(o,"writable",!0),this._readOnlyClass=i(o,"readOnlyClass",""),this._callOutID=i(o,"callOutID",null),this._maxInputLength=i(o,"maxInputLength",null),this._clearValueWhenDelete=i(o,"clearValueWhenDelete",!1);var n=i(o,"pageSize",7);this._itemProvider=this._createItemProvider(t),this._listSelect=this._createListSelect(this._itemProvider,{pageSize:n,width:this._autoWidth?"auto":null,fetchPagesInOrder:i(o,"fetchPagesInOrder",!1),noResultsMessage:i(o,"noResultsMessage",null),scrollItemTop:i(o,"scrollItemTop",!1),fetchPageDelay:i(o,"fetchPageDelay",250)}),this._previousFilterValue=null,this._listSelect.addEventListener("itemsAvailable",this,"_onItemsAvailable"),this._listSelect.addEventListener("itemsAvailable",this,"_announceItemCountInfo"),this._listSelect.addEventListener("itemsError",this,"_onItemsError"),this._listSelect.addEventListener("itemSelected",this,"_onItemSelected"),this._listSelect.addEventListener("itemFocused",this,"_updateActiveItem"),this._oldValue=this.getValue(),this._selectedItem=this._itemProvider.toItem(e),this._selectedItem&&this._listSelect.setFocusItem(this._selectedItem),s=AccessibilityPrefs.isKeyboardOnlyNavigationEnabled();var a={direction:"bottom",size:6,cssClass:this.generateFDClasses("input-group__button")};this.dropDownPointer=new SFTriangle(a),this._requiresResultSpacing=!1},isAriaPopupEnabled:function(){return s&&null!==this._a11yLabel},renderHtml:function(e){this._writable?(e.push("<span id=\"",this.id,"\" class=\"sfComboBox ",this._getStyleClass()," ",this.generateFDClasses("popover"),"\">"),e.push("<span id=\"",this.id,"wrapper\" class=\"",this._getWrapperClassName(),"\"><span class=\"",this.generateFDClasses("input-group",["control"])," sfComboBoxInner\">"),this._renderInput(e),e.push("</span></span></span>")):(e.push("<span id=\"",this.id,"_span\" class= \"",this._readOnlyClass,"\">"),e.push(juic.escapeHTML(this.getInputText())),e.push("</span>"))},_renderInput:function(e){var t="toggle";this._a11yLabel&&e.push("<label id=\"",this.getReferenceId(),"_describedby\" class=\"hiddenAriaContent\" for=\"",this.getReferenceId(),"\">",this._a11yLabel,"</label>"),e.push("<input class=\"",this.generateFDClasses("input")," ",this.generateFDClasses("input-group__input"),"\" type=\"text\" id=\""+this.getReferenceId(),"\" autocomplete=\"off\" "),e.push("role=\"combobox\""),this._maxInputLength&&e.push("maxlength=\"",this._maxInputLength,"\" "),this._required&&e.push("aria-required=\"true\""),SFDom.renderStyle(e,this._getInputStyle()),e.push(" value=\""+juic.escapeHTML(this.getInputText()),"\"");var i=this._getInputEventFireCodes();for(var o in i)e.push(" on",o,"=\"",this.fireCode.apply(this,i[o]),"\"");var n=this._getInputAriaAttributes();for(var s in n)e.push(" ",s,"=\"",n[s],"\"");this._a11yLabel&&e.push(" aria-labelledby=\"",this.getReferenceId(),"_describedby\""),e.push(" aria-live=\"polite\""),e.push(" aria-atomic=\"true\""),e.push(" aria-describedby=\"",this.getReferenceId(),"_ariaLiveAnnounce\""),e.push(this._placeholder?"\" placeholder=\""+Util.escapeHTML(this._placeholder):"",this._enabled?"":"\" disabled=\"disabled","\" />"),e.push("<div id=\"",this.getReferenceId(),"_ariaLiveAnnounce\" aria-live=\"assertive\" style=\"display: none;\"></div>"),this.isAriaPopupEnabled()&&this._createAccessibilityPopup(),this._isToggleRendered()&&(this._isV12Plus&&(t="globalRoundedCornersRightXSmall "+t),e.push("<span class=\"",t," ",this.generateFDClasses("input-group__addon",["button"]),"\" onclick=\"",this.fireCode("_clickToggle"),"\" onmousedown=\"",this.fireCode("_preventBlur"),"\">"),this._isV12Plus||this.isFioriFDEnabled()?e.push(this.dropDownPointer):e.push("&nbsp;"),e.push("</span>"))},_getInputEventFireCodes:function(){return{blur:["_handleInputBlur"],focus:["setFocus",!0],keydown:["_keyDown"],keyup:["_keyUp"],mousedown:["_preventBlur"],input:["_onInput"]}},_getInputAriaAttributes:function(){return{"aria-expanded":"false","aria-owns":this._getAriaOwns(),"aria-autocomplete":"list"}},attachExternal:function(e){this._attachConfig=e,this._callOutID=e.callOutID||e.displayFieldId;var t=e&&juic.$(e.displayFieldId);if(t){var i=this._getInputEventFireCodes();for(var o in i)(function(i){SFDOMEvent.addListener(t,o,function(t){var e=i.slice(1);return e.push(t),this[i[0]].apply(this,e)},this)}).call(this,i[o]);var n=this._getInputAriaAttributes();for(var s in n)t[s]=n[s]}var a=e.hiddenFieldId;if(a){var r=this,l=e.hiddenFieldValueGenerator||function(){var e=this.getValue();if("string"==typeof e)return e;return e&&e.toString?e.toString():""},d={handleEvent:function(t){var i=juic.$(a);if(i){var o=l.call(r);if(window.jQuery?jQuery(i).val(o).trigger("change"):i.onchange&&(i.value=o,i.onchange()),e.submitOnSelect){var n=juic.$(e.displayFieldId),s=n&&n.form;s&&s.submit()}}}};this.addEventListener("change",d),this.addEventListener("itemRemoved",d)}},_getAriaOwns:function(){return this._listSelect.id+"_listSelect"},getReferenceId:function(){return this._attachConfig?this._attachConfig.displayFieldId:this.id+"_write"},validate:function(){var e=this.getValue();return this._required&&!/[^ \t\r\n]/.test(e)?(this.displayErrorMessage(),!1):(this._err&&this._err.hide(),!0)},displayErrorMessage:function(e){window.SFInlineError?document.getElementById(this.id+"_error")?this._showError(e):this._onErrorLoad(e):SMRF.load(["/ui/juic/js/components/sfInlineError.js"],this._onErrorLoad.bind(this,e))},_initError:function(){this._err=new SFInlineError(sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,this._title),"auto")},_appendError:function(){var e=document.getElementById(this.id),t=document.createElement("span");t.setAttribute("id",this.id+"_error"),e.parentNode.appendChild(t),this._err.render(this.id+"_error")},_showError:function(e){e&&this._err.setValue(e),this._err&&this._err.show()},_onErrorLoad:function(e){window.SFInlineError&&(this._initError(),this._appendError(),this._showError(e))},setValue:function(e){this._selectedItem=this._itemProvider.toItem(e),this._selectedItem||!e||this._forceSelection||(this._selectedItem=e),this._valueChanged()},getValue:function(){return this._itemProvider.getValue(this._selectedItem)},getDisplayText:function(){return this._itemProvider.getLabel(this._selectedItem)},getValueObject:function(){return this._selectedItem},clearValue:function(){this.setValue(null),this.dispatch("itemSelected",{value:this._selectedItem})},setEnabled:function(e){this._enabled=e,this._updateWrapperClassName();var t=juic.$(this.getReferenceId());t&&(t.disabled=!this._enabled)},isEnabled:function(){return this._enabled},_createAccessibilityPopup:function(){this._callout=new SFCalloutPopup({content:this._a11yLabel,width:400,clickOutsideClosesPopup:!0,originOptions:{direction:"top",pointerOffset:350}})},_showAriaPopup:function(){this._callout||this._createAccessibilityPopup(),this._callOutID||(this._callOutID=this.getReferenceId()),this._callout.show(this._callOutID)},_hideAriaPopup:function(){var e=this._callout;e&&e.hide()},setFocus:function(e){if(this.isEnabled()&&!!e!=!!this._focusFlag)if(e)this.isAriaPopupEnabled()&&this._showAriaPopup(),this._focusFlag=e,this._updateWrapperClassName(),this._clearTitle(),this._focusInput(),this._focusChanged();else if(!this._stopBlur){this.isAriaPopupEnabled()&&this._hideAriaPopup();var t=this;clearTimeout(this._timeoutID),this._timeoutID=setTimeout(function(){t._handleBlur()},0)}else this._restoreCaret()},_handleInputBlur:function(){this.setFocus(!1),this.dispatch("action",{actionCommand:"blur"})},isFocus:function(){return this._focusFlag},isModified:function(){return this._oldValue!=this.getValue()},_createItemProvider:function(e){if(e instanceof SFAbstractItemProvider)return e;return e instanceof Array?new SFArrayItemProvider(e):void 0},_createListSelect:function(e,t){return new SFComboListSelect(e,t)},_getStyleClass:function(){return this._isV12Plus?"v12plus-field v12plus-rounded-corner v12plus-combobox globalCompositeControlChild":"rev-field rev-rounded-corner rev-combobox"},_getExtraClasses:function(){return"search-box"},_isToggleRendered:function(){return!0},_getScratchPadClassName:function(){return this._isV12Plus?"v12plus-field v12plus-rounded-corner v12plus-scratch-pad":"rev-field rev-rounded-corner rev-scratch-pad"},_getPopupOffsets:function(){return this._attachConfig?this._attachConfig.popupOffsets?this._attachConfig.popupOffsets:{vertical:0,horizontal:0}:this._isV12Plus?r:a},_getInputStyle:function(){var e={},t=this._getInputWidth();return t&&(e.width=t),e},getItemProvider:function(){return this._itemProvider},setItemProvider:function(e){this._listSelect.setItemProvider(e),this._itemProvider=e},setPageSize:function(e){this._listSelect.setPageSize(e)},setTitle:function(e){this._title=e,this._updateWrapperClassName(),this._valueChanged()},getTitle:function(){return this._title},isLoading:function(){return this._loading},selectFirstItem:function(){},_setLoading:function(e){this._loading=!!e,this._updateWrapperClassName(),this._updateA11yText()},_handleBlur:function(){clearTimeout(this._timeoutID),this._timeoutID=null,this._focusFlag=!1,this._updateInputWidth(),this._commitValue(),this._focusChanged(),this._updateWrapperClassName()},_getWrapperClassName:function(){var e=[];this._wrapperClass&&e.push(this._wrapperClass),this._focusFlag&&e.push("field-focus"),this._hasError&&e.push("has-error"),this._enabled||e.push("field-disabled"),this._selectedItem||!this._title||this.isFocus()||e.push("placeholder-value"),this._loading&&e.push("field-loading"),this.isModified()&&e.push("dirty-field");var t=this._getExtraClasses();return t&&(t instanceof Array?e=e.concat(t):e.push(t)),this._isV12Plus&&e.push("globalRoundedCornersXSmall"),e.push(this.generateFDClasses("popover__control")),e.join(" ")},_updateWrapperClassName:function(){var e=juic.$(this.id+"wrapper");e&&(e.className=this._getWrapperClassName())},_updateA11yText:function(){var e=juic.$(this.getReferenceId()+"_describedby");e&&(this._loading?e.textContent=this._a11yloadingLabel:this._previousFilterValue&&0==this._previousFilterValue.length?e.textContent=this._a11yLabel:e.textContent="")},_onItemsError:function(e){this._setLoading(!1),alert(e.message)},_onItemSelected:function(e){this._stopBlur=!1,this._itemSelected=!0,this._commitValue(),this._hidePopup(),this.dispatch("itemSelected",{value:this._selectedItem})},_updateActiveItem:function(){var e=juic.$(this.getReferenceId());e&&e.setAttribute("aria-activedescendant",this.getFocusItemId())},getFocusItemId:function(){return this._listSelect.getFocusItemId()},_valueChanged:function(){var e=juic.$(this.getReferenceId());e&&this._updateInputEl(e,this.getInputText()),this.validate()},_updateInputEl:function(e,t){e.value=t,SFDom.updateStyle(e,this._getInputStyle()),this._updateWrapperClassName()},_preventBlur:function(e){if(this.isFocus())if(this._timeoutID)this._timeoutID=null,clearTimeout(this._timeoutID);else{SFDOMEvent.getTarget(e)!=juic.$(this.getReferenceId())&&this._storeCaret(),this._stopBlur=!0;var t=this;setTimeout(function(){t._stopBlur=!1},50)}},_storeCaret:function(){Util.browserInfo.ios||(this._lastCaret=SFCaretUtil.caret(juic.$(this.getReferenceId())))},_restoreCaret:function(){if(this._lastCaret){var e=this,t=this._lastCaret,i=juic.$(this.getReferenceId());setTimeout(function(){e.isFocus()&&SFCaretUtil.caret(i,t)},0),this._lastCaret=null}},_clickToggle:function(){this.isEnabled()&&(this.isFocus()?this._focusInput():this.setFocus(!0),!this._isPopupShown()&&this._showPopup())},_focusChanged:function(){this.dispatch(this.isFocus()?"focus":"blur"),this.isFocus()?0==this._minimumFilterSize&&this._showPopup():this._hidePopup()},_createPopup:function(e){this._popup=new SFContextPopup(e,this._getPopupOptions()),this._popup.addEventListener("preventBlur",this,"_preventBlur")},_getPopupOptions:function(){return juic.set({offset:this._getPopupOffsets()},this._popupOptions||{})},_createPopupContents:function(){return this._allowResize?(this._dragResizer=new SFDragResizer(this._listSelect,{dragByResizing:!0}),this._dragResizer.addEventListener("dragResize",this,"_onDragResize"),this._dragResizer):this._listSelect},_onInput:function(e){function t(){this._inputTimeout=!1;var e=this._previousFilterValue||"",t=juic.$(this.getReferenceId()),i=t&&t.value;if(this.dispatch("input"),this._trimQueryValue&&i&&i.trim&&(i=i.trim()),i!=e){var o=i?i.length:0;o<this._minimumFilterSize?this._hidePopup():this._showPopup(i),this._previousFilterValue=i}}if(!this._inputTimeout&&SFDom.isDisplayed(juic.$(SFDOMEvent.getTarget(e)))){var i=this;this._inputTimeout=!0,setTimeout(function(){t.call(i)},0)}},_resetFilter:function(){this._inputTimeout&&clearTimeout(this._inputTimeoutId),this._listSelect&&this._listSelect.resetFilter&&this._listSelect.resetFilter()},_hidePopup:function(){if(this._resetFilter(),this._previousFilterValue=null,clearInterval(this._intervalId),this._popup){var e=this._isPopupShown();this._popup.hide(),this._loading=!1,this.isAriaPopupEnabled()&&(e&&this.isFocus()?this._showAriaPopup():this._hideAriaPopup())}this._setAriaExpanded("false")},_showPopup:function(e){this.isAriaPopupEnabled()&&this._hideAriaPopup(),this._isPopupShown()&&this._hidePopup(),this._popup&&this._popup.resetCurrentPosition(),this._previousFilterValue=e,e?this._listSelect.setFilter("contains",e):this._listSelect.clearFilter(),this._listSelect.isPageAvailable()||this._setLoading(!0)},isDOMAvailable:function(){return!!juic.$(this.getPopupReferenceId())},_onItemsAvailable:function(){if(this.isRegistered()&&this.isDOMAvailable()&&(this.isLoading()&&this._setLoading(!1),this.isFocus()&&!this._isPopupShown())){this._popup||this._createPopup(this._createPopupContents()),this._listSelect.resetDimension();var e={width:"auto",height:"auto"};if(!this._autoHeight||!this._autoWidth){var t=this._listSelect.getPageDimension();if(!this._autoWidth){var i=this._listSelect.isVerticalScrollRequired(),o=i?17:0;o=this._requiresResultSpacing?o+10:o;var n=this._getMinPopupWidth();e.width=t.width>n-o?t.width+o:n,this._userWidth&&(!e.width||e.width<this._userWidth)&&(e.width=this._userWidth)}this._autoHeight||(e.height=t.height)}this._listSelect.setDimension(e),this.selectFirstItem(),this._popup.show(this.getPopupReferenceId());var s=this,a;clearInterval(this._intervalId),setTimeout(function(){a=SFDom.getXY(s.getReferenceId())},0),this._intervalId=setInterval(function(){var e=SFDom.getXY(s.getReferenceId());a=a||e,(e[0]!=a[0]||e[1]!=a[1])&&s._hidePopup()},500),this._setAriaExpanded("true")}},_getMinPopupWidth:function(){var e=juic.$(this.getPopupReferenceId()),t=(e?e.offsetWidth:50)+30;return t},_onDragResize:function(e){this._userWidth=e.dimension.width},_isPopupShown:function(){return this._popup&&this._popup.isShown()},_updateInputWidth:function(){if(!this._fixedWidth){var e=juic.$(this.getReferenceId());e&&(e.style.width=this._getInputWidth())}},_keyDown:function(e){e=e||window.event;var t=SFDOMEvent.getKeyName(e),i=e.altKey,o=this._isPopupShown(),n=this._callout&&this._callout.isShown();switch(t){case"ARROWDOWN":o||this._showPopup();break;case"ARROWUP":i&&o?this._hidePopup():!o&&this._showPopup();break;case"F4":o||this._showPopup();break;case"ESCAPE":var s=juic.$(this.getReferenceId()),a=s&&s.value;this.isAriaPopupEnabled()&&this._hideAriaPopup();;setTimeout(function(){s&&(s.value=a)},0),(o||n)&&SFDOMEvent.stopPropagation(e);break;case"RETURN":SFDOMEvent.preventDefault(e);}},_keyUp:function(e){e=e||window.event;var t=SFDOMEvent.getKeyName(e),i=this._listSelect,o;switch(t){case"ESCAPE":this._hidePopup(),SFDOMEvent.stopPropagation(e);break;case"ARROWUP":e.altKey||this.moveFocusUp();break;case"ARROWDOWN":e.altKey||this.moveFocusDown();break;case"RETURN":o=i.getFocusItem(),this._isPopupShown()?this.selectFocus():this._isToggleRendered()&&this._showPopup(),o&&this.dispatch("itemInvoked",{item:o});break;case"ALPHA":case"NUMERIC":var n=SFDOMEvent.getCharCode(e);if(e.ctrlKey&&e.shiftKey&&49==n){o=i.getFocusItem(),o&&this.dispatch("itemDetailsRequested",{item:o});break}case"SPACEBAR":case"OTHER":this._onInput(e);break;case"BACKSPACE":case"DELETE":Util.ieVersion()&&9>=Util.ieVersion()&&this._onInput(e);var s=SFDOMEvent.getTarget(e);this._clearValueWhenDelete&&0==s.value.length&&this._removeSelectedItem();break;default:}this.dispatch("keyUp",{keyEvent:e,keyName:t})},moveFocusUp:function(){this._listSelect.moveFocusUp()},moveFocusDown:function(){this._listSelect.moveFocusDown()},selectFocus:function(){Util.browserInfo.ios?this._listSelect.selectOnlyValue():this._listSelect.selectFocus()},getPopupReferenceId:function(){return this._attachConfig?this._attachConfig.displayFieldId:this.getReferenceId()},getInputText:function(){var e=this.getDisplayText();return this._selectedItem||!this._title||this.isFocus()||(e=this._title),e},_commitValue:function(){var e=juic.$(this.getReferenceId());if(e){var t=e.value;if(this._itemSelected)t=this._listSelect.getFocusItem();else if(this._forceSelection)t=!t&&this._allowEmpty?null:this._selectedItem;else{var i=this._itemProvider.getLabel(this._selectedItem);null!=i&&(i=i.replace(/\n/g,"")),t==i&&(t=this._selectedItem)}var o=this.getValue();this.setValue(t),o!=this.getValue()&&this.dispatch("change",{newValue:this.getValue()}),this._itemSelected=!1}},_removeSelectedItem:function(){this.setValue(null),this._itemSelected=!1,this.dispatch("itemRemoved",{value:this._selectedItem})},_clearTitle:function(){var e=juic.$(this.getReferenceId());e&&!this._selectedItem&&this._title&&(e.value="")},_focusInput:function(){if(this.isFocus()){var e=juic.$(this.getReferenceId());if(!e)return;setTimeout(function(){Util.browserInfo.ios?(e.focus(),e.setSelectionRange(0,9999)):e.select()},0)}},_getInputWidth:function(){if(this._fixedWidth){var e=0;if(this._a11yLabel){var t=juic.$(this._a11yLabel.id);e=t?t.getOffsetWidth():1}if("number"==typeof this._fixedWidth)return this._fixedWidth-e+"px";if("boolean"==typeof this._fixedWidth)return null;var i=this._fixedWidth.toString();if(i.indexOf("px")==i.length-2){var n=parseInt(i);if(!isNaN(n))return parseInt(i)-e+"px"}return i}return o(this.getInputText(),this._getScratchPadClassName())},_setAriaExpanded:function(e){var t=juic.$(this.getReferenceId());t&&t.setAttribute("aria-expanded",e)},_announceItemCountInfo:function(e){if(e&&0<=e.itemCount){var t=juic.$(this.getReferenceId()+"_ariaLiveAnnounce");t&&(t.innerHTML=sfMessageFormat.format(MSGS.COMMON_ComboBox_Aria_Item_Count_Announcement,e.itemCount),setTimeout(function(){t.innerHTML=""},1e3))}},cleanup:function(){this._popup&&this._popup.cleanup(),this.unregister()},getDefaultMinimumFilterSize:function(){var e=window.pageHeaderJsonData||{};return 0<=n.indexOf(e.userLocale)?1:2}});var l})();function SFDropMenuPopup(e,t){this.register(),this._init(e,t)}(function(){var e=Math.min,t=Math.max;function i(){assert(!1,"SFAbstractMenuModel: Do not instantiate")}function o(e){this._menuItems=e}function n(e){this._model=e}var s="sfDropMenu",a=(Util.browserInfo.ie&&Util.quirksMode()?"":"globalRoundedCorners ")+"globalMenu",r="separator",l="menuLink",d="globalMenuItem",u="globalDisabledMenuItem",_="globalMenuItemFocus",p="itemWithMenu",c="menuTitle",h="sfLoadingContainer",g="first",m="last",f=250,b=100,C=15,I=.2,v=Util.browserInfo.css3Support,S={menu:{vertical:"top",horizontal:"left"},origin:{vertical:"top",horizontal:"right"}};juic.extend(SFDropMenuPopup,SFAbstractPositionable,{_init:function(e,t){t=t||{},this._subMenus={},this.setModel(e),this._css=t.css,this._fixPoint=t.fixPoint||{},this._escapeHTML=t.escapeHTML,this._originId=t.originId,this._animate=!(null!=t.animate)||t.animate,this._preventRedisplay=t.preventRedisplay,this._refocusId=t.refocusId},renderHtml:function(e){e.push("<div id=\"",this.id,"\" class=\"",this._getClassName(),"\"><div id=\"",this.id,"wrapper\" class=\"",a," ",this.generateFDClasses("menu"),"\""),this._minWidth&&e.push(" style=\"min-width:",this._minWidth,"px\""),e.push(">"),this._renderContent(e),e.push("</div></div>")},_getClassName:function(){return"sfDropMenu"+(this._css?" "+this._css:"")},setMinWidth:function(e){this._minWidth=e;var t=juic.$(this.id+"wrapper");t&&(t.style.minWidth=e+"px")},_renderContent:function(e){if(e.push("<ul id=\"",this.id,"wrapperList\" class=\"wrapperList ",this.generateFDClasses("menu__list"),"\" role=\"menu\" tabindex=\"-1\""),e.push("\" onkeydown=\"",this.fireCode("_onWindowKeyDown"),"\">"),this._menuItems){var t=this._menuItems.length;this._menuItems.forEach(function(e){(e.header||e.separator)&&t--});for(var i=0,o=0;o<this._menuItems.length;o++)this._menuItems[o].header||this._menuItems[o].separator||i++,this._renderItem(e,this._menuItems[o],o,t,i)}else e.push("<li class=\"",h,"\"><span>&nbsp;</span></li>");e.push("</ul>")},_renderItem:function(e,t,i,o,n){var s=!1,a=!1,_=Util.isFioriFDEnabled();if(t.header)e.push("<li class=\"",this.generateFDClasses("menu__item"),"\"><h4 id=\"",this.id,i,"\" class=\"",c," ",this.generateFDClasses("title",["h5"]),"\">",this._checkEscape(t.header,t),"</h4></li>");else if(t.separator)_||e.push("<li><hr id=\"",this.id,i,"\" class=\"",r,"\" /></li>");else{var h=this._checkEscape(t.label||t.name||t.description,t),f=[l];t.css&&f.push(t.css),t.subMenu&&f.push(p),(t.sapIcon||t.sfSuppIcon)&&f.push("hasIcon"),0==i?f.push(g):i==this._menuItems.length-1&&f.push(m),e.push("<li role=\"none\" class=\"",this.generateFDClasses("menu__item"),"\""),t.disabled?f.push(u):f.push(d);var b=this.generateFDClasses("menu__link");t.subMenu&&(b+=" has-child is-expanded"),e.push("><a tabindex=\"-1\" role=\"menuitem\" id=\"",this.id,i,"\" class=\"",f.join(" ")," ",b,"\" href=\""),!t.disabled&&(t.href||t.url)?(a=!0,e.push(t.href||t.url)):e.push("javascript:void(0)");var C="\" rel=\"noopener";a&&(C+=" noreferrer"),e.push(C),t.subMenu&&e.push("\" aria-haspopup=\"true"),!t.disabled&&t.target&&e.push("\" target=\"",t.target),!t.disabled&&t.actionCommand?(e.push("\" onclick=\"",this.fireCode("_clickMenuItem",i),"return false"),s=!0):!t.disabled&&t.onclick?(e.push("\" onclick=\"",this.fireCode("_clickMenuItem",i),t.onclick,";return false"),s=!0):!t.disabled&&!t.subMenu&&(e.push("\" onclick=\"",this.fireCode("hide"),"return ",a),s=!0),(t.altText||t.title)&&e.push("\" title=\"",this._checkEscape(t.altText||t.title,t)),t.disabled||!t.subMenu||t.actionCommand||a||(e.push("\" onclick=\"",this.fireCode("_showSubMenu",i),"return false"),s=!0),s||a||e.push("\" onclick=\"return false"),e.push("\" aria-setsize=",o),e.push(" aria-posinset=",n),e.push(" aria-disabled=\"",t.disabled?"true":"false"),t.disabled||e.push("\" onmouseover=\"",this.fireCode("_onMenuMouseOver",i),"\" onmouseout=\"",this.fireCode("_onMenuMouseOut",i)),e.push("\" onfocus=\"",this.fireCode("_onItemFocus",i),"\">"),t.sapIcon&&e.push("<span class=\"menuIcon sapIcon ",this.generateFDClasses("menu__addon-before"),"\">",t.sapIcon,"</span>"),t.sfSuppIcon&&e.push("<span class=\"menuIcon sfSuppIcon\">",t.sfSuppIcon,"</span>"),_?e.push("<span data-testid=\"sfDropMenuPopupTitle\" class=\"",this.generateFDClasses("menu__title"),"\">",h,"</span>"):e.push(h),t.subMenu&&(_?e.push("<span data-testid=\"sfDropMenuPopupSubMenu\" class=\"",this.generateFDClasses("menu__addon-after",["submenu"]),"\"></span>"):e.push("<span class=\"menuArrow\"></span>")),e.push("</a>"),e.push("</li>")}},_checkEscape:function(e,t){return this._escapeHTML&&!1!==t.escapeHTML?juic.escapeHTML(e):e},show:function(e){this._menuItems||this._model.fetchMenuItems(),this._originId=e||this._originId,this._popup||(this._popup=this._createPopup()),this._popup.show(this._originId),SFAnimUtil.css3FadeInTransition(this._popup.id,100);var t=juic.$(this._originId);t&&t.setAttribute("aria-expanded","true"),this._startKeyListener();var i=this,o=null;clearInterval(this._intervalId),this._intervalId=setInterval(function(){var e=SFDom.getXY(i._originId);o=o||e,(e[0]!=o[0]||e[1]!=o[1])&&i.hide()},500)},_createPopup:function(){var e=new SFContextPopup(this,{visibleOverflow:!0,preventRedisplay:this._preventRedisplay,menu:this._fixPoint.menu,origin:this._fixPoint.origin,offset:this._fixPoint.offset});return e.addEventListener("clickedOutsidePopup",this,"hide"),e.addEventListener("focusOutside",this,"_onFocusOutside"),e.addEventListener("preventBlur",this,"dispatchEvent"),e},isShown:function(){return this._popup&&this._popup.isShown()},hide:function(e){function t(){this._stopKeyListener(),this.dispatch("blur"),clearInterval(this._intervalId),this.dispatch("hide"),this._visibleSubMenu&&this._visibleSubMenu.hide(),this._visibleSubMenu=null,this._refocusId&&SFDom.setFocus(this._refocusId,!0);var e=this;setTimeout(function(){var t=juic.$(e._originId);t&&t.setAttribute("aria-expanded","false")},500)}e instanceof juic.EventTarget.Event&&(e=!1),this._runningAnimation&&this._runningAnimation.stop(),e&&v?this._animateMenu(this._currentFixPoint,!0,t):t.call(this)},cleanup:function(){for(var e in this.setModel(null),this._popup&&this._popup.cleanup(!1),this._error&&this._error.cleanup(),this._subMenus)this._subMenus[e].cleanup();this._super()},setFocusedItem:function(e){this._focusedItem=e},focus:function(e){var t=juic.$(this.id+"wrapper");if(t)if("undefined"==typeof e&&this._focusedItem){var i=juic.$(this.id+this._focusedItem);SFDom.setFocus(i)}else{var o=e?t.lastChild:t.firstChild,n=SFDom.findNextFocusableElement(o,t,!0,e);SFDom.setFocus(n,!0)}},positionFixed:function(e){var i=juic.$(this.id+"wrapper");if(i){var o=juic.$(this.id+"wrapperList");if(this._fixedCount=this._fixedCount||0,3>++this._fixedCount){var n=e.newComponentHeight,s=e.newComponentWidth;if(null!=n||null!=s){n=(n-C||o.offsetHeight)-SFDom.getOffsets(i,"y"),s=s-C||o.offsetWidth,i.style.width=s+17+"px";var a=t(n,b)+"px";this.isFioriFDEnabled()?i.style.maxHeight=a:o.style.height=a,SFDom.addClass(i,"sfDropMenuScrollable"),SFDom.addClass(i,this.generateFDClasses("menu--overflow")),this.dispatch("changeDimensions")}}if(this._animateMenu(e.positionInfo.fixPoint,!1,this.focus),null==this._fixedTimeout){var r=this;this._fixedTimeout=setTimeout(function(){r._fixedCount=0,r._fixedTimeout=null},50)}}},setModel:function(e){this.setFocusedItem(null),this._model&&(this._model.removeEventListener("menuItemsAvailable",this,"_onMenuItemsAvailable"),this._model.removeEventListener("menuItemsError",this,"_onMenuItemsError")),this._menuItems=null,this._subMenus={},Array.isArray(e)?this._model=new o(e):e instanceof i?this._model=e:e instanceof SFDefaultListModel&&(this._model=new n(e)),this._model&&(this._model.addEventListener("menuItemsAvailable",this,"_onMenuItemsAvailable"),this._model.addEventListener("menuItemsError",this,"_onMenuItemsError"))},getMenuId:function(){return this.id},getItemId:function(e){return this.id+e},_animateMenu:function(t,i,o){var n=juic.$(this.id+"wrapper");if(n&&v&&this._animate){this._currentFixPoint=t;var s=document.createElement("div"),a=t.origin.horizontal!=t.menu.horizontal,r={},l=n.offsetWidth,d=n.offsetHeight,u=null;s.style.width=l+"px",s.style.height=d+"px",s.style.position="relative",s.style.overflow="hidden",n.parentNode.replaceChild(s,n),s.appendChild(n),n.style.position="absolute",a?(u="left"==t.menu.horizontal?"left":"right",i?(n.style[u]="0",r[u]=-l):(n.style[u]="right"==u?-l+"px":-e(100,l)+"px",r[u]=0)):(u="top"==t.menu.vertical?"top":"bottom",i?(n.style[u]="0",r[u]=-d):(n.style[u]=-d+"px",r[u]=0)),this._runningAnimation=SFAnimUtil.animate(n,r,{duration:I,context:this,complete:function(){this._runningAnimation=null,Util.browserInfo.css3Support&&(n.style.position="",n.style[u]="",s.parentNode.replaceChild(n,s)),o&&o.call(this)}})}else o&&o.call(this)},_startKeyListener:function(){SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this)},_stopKeyListener:function(){SFDOMEvent.removeListener(window.document,"keydown",this._onWindowKeyDown,this)},_focusNext:function(e){if(null!=this._focusedItem){var t=juic.$(this.id+"wrapper");if(t){var i=juic.$(this.id+this._focusedItem),o=e?i.parentNode.previousSibling:i.parentNode.nextSibling,n=SFDom.findNextFocusableElement(o,t,!0,e);n&&0==n.id.indexOf(this.id)?SFDom.setFocus(n,!0):this.focus(e)}}else this.focus(e);return!1},_onPreventBlur:function(e){this.dispatch("preventBlur"),this._popup&&this._popup.preventClose()},_onWindowKeyDown:function(e){var t=SFDOMEvent.getKeyName(e||window.event);if(Util.isRTL()&&("ARROWLEFT"===t?t="ARROWRIGHT":"ARROWRIGHT"==t&&(t="ARROWLEFT")),e.shiftKey)SFDOMEvent.preventDefault(e);else switch(t){case"ARROWDOWN":case"ARROWUP":this._focusNext("ARROWUP"==t),SFDOMEvent.preventDefault(e);break;case"ARROWLEFT":SFDOMEvent.preventDefault(e);case"TAB":case"ESCAPE":this._popup&&this._popup.isTopOverlay()&&(this.hide(!0),SFDOMEvent.stopEvent(e),SFDom.setFocus(this._originId,!0));break;case"ARROWRIGHT":SFDOMEvent.preventDefault(e),null!=this._focusedItem&&this._menuItems[this._focusedItem].subMenu&&this._showSubMenu(this._focusedItem);break;case"SPACEBAR":SFDOMEvent.preventDefault(e),e.target.click();}},_onItemFocus:function(e){this._focusedItem=e},_onFocusOutside:function(e){this.focus(e.start)},_onMenuItemsAvailable:function(e){this._menuItems=e.menuItems;var t=juic.$(this.id+"wrapper");if(t){var i=createRenderContext();this._renderContent(i),t.innerHTML=i.join(""),this.dispatch("changeDimensions")}},_onMenuItemsError:function(e){this._error=new SFSysMsg("error",e.message),this._error.render(this.id)},_onMenuMouseOver:function(e,t){if(Util.isMouseLeaveOrEnter(t,juic.$(this.id+e))){this._onMenuMouseOut();var i=this;this._timeout=setTimeout(function(){i._showSubMenu(e)},f);var o=SFDOMEvent.getTarget(t);o.focus()}},_onMenuMouseOut:function(e,t){(!t||Util.isMouseLeaveOrEnter(t,juic.$(this.id+e)))&&null!=this._timeout&&clearTimeout(this._timeout)},_onSubMenuAction:function(e){this.hide(),this.dispatchEvent(e)},_onSubMenuBlur:function(e){if(this._visibleSubMenu=null,this._startKeyListener(),null!=this._focusedItem){var t=juic.$(this.id+this._focusedItem);t&&t.focus()}else this.focus(!1)},_showSubMenu:function(e){if(this._menuItems[e].subMenu){var t=this._subMenus[e];if(null==t||this._visibleSubMenu!==t){this._hideSubMenu(),t||(t=new SFDropMenuPopup(this._menuItems[e].subMenu,{originId:this.id+e,fixPoint:S}),t.addEventListener("blur",this,"_onSubMenuBlur"),t.addEventListener("action",this,"_onSubMenuAction"),t.addEventListener("preventBlur",this,"_onPreventBlur"),t.addEventListener("hide",this,"_onHideSubMenu"),this._subMenus[e]=t),this._stopKeyListener(),t.show();var i=this;setTimeout(function(){i._focusedItem=e},0),this._visibleSubMenu=t,juic.$(this.id+e).className+=" "+_}}else this._hideSubMenu()},_hideSubMenu:function(){this._visibleSubMenu&&this._visibleSubMenu.hide()},_onHideSubMenu:function(e){var t=e.target._originId,i=juic.$(t);if(t&&i){for(var o=" "+i.className+" ";-1<o.indexOf(" "+_+" ");)o=o.replace(" "+_+" "," ");i.className=o.trim(),i.setAttribute("aria-expanded","false")}},_clickMenuItem:function(e){this.hide();var t=this._menuItems[e];this.dispatch("action",{actionCommand:t.actionCommand,menuItem:t,itemIndex:e})},setRefocusId:function(e){this._refocusId=e},getRefocusId:function(){return this._refocusId}}),juic.extend(i,juic.EventTarget,{fetchMenuItems:function(){assert(!1,"SFAbstractMenuModel: must implement fetchMenuItems")}}),window.SFAbstractMenuModel=i,juic.extend(o,i,{fetchMenuItems:function(){this.dispatch("menuItemsAvailable",{menuItems:this._menuItems})}}),juic.extend(n,i,{fetchMenuItems:function(){for(var e=[],t=0;t<this._model.size();t++)e.push(this._model.get(t));this.dispatch("menuItemsAvailable",{menuItems:e})}})})();function SFDropMenu(e,t){this.register(),this._init(e,t)}SFDropMenu.forceExplicitLabelWidth=function(){return Util.quirksMode()||8==Util.ieVersion()},juic.extend(SFDropMenu,juic.Component,{_init:function(e,t){t=t||{},this._css=t.css,this._hoverCss=t.hoverCss,this._activeCss=t.activeCss,this._content=t.content,this._escapeHTML=t.escapeHTML,this._button=t.button,this._tag=t.button?"button":"a",this._title=t.title,this._ariaLabel=t.ariaLabel,this._labelWidth=t.labelWidth,this._useTouchEnd=t.useTouchEnd,this._image=t.image,this._stableId=t.stableId,t.showTriangle&&(this._triangleIcon=new SFTriangle({direction:"bottom",inherit:!0}),this.triangleIconId=this._triangleIcon._getDomId()),this._menu=new SFDropMenuPopup(e,{animate:t.animate,preventRedisplay:t.preventRedisplay,fixPoint:t.fixPoint,escapeHTML:t.escapeHTML,css:t.popupCss}),this._menu.addEventListener("blur",this,"focus"),this._menu.addEventListener("hide",this,"_onPopupHidden"),this._menu.addEventListener("action",this,"dispatchEvent"),this._menu.addEventListener("preventBlur",this,"dispatchEvent");var i=t.activeButton?"globalPrimaryButton":"globalSecondaryButton buttonDefault",o;switch(t.buttonType){case"command":o="globalRoundedCornersXSmall "+i+" sfDropMenuCommandButton";}this._buttonStyles=o||"",this._ariaRole=t.ariaRole},renderHtml:function(e){var t=Util.isFioriFDEnabled(),i;t&&(i=this._createFDWrapperRenderer(),i.renderOpeningHtml(e)),e.push("<",this._tag),"a"===this._tag&&e.push(" href=\"javascript:void(0)\""),this._stableId&&e.push(" data-help-id=\"",this._stableId,"\""),this._hoverCss&&(e.push(" onmouseover=\"",this.fireCode("_onMouseOver"),"\" onmouseout=\"",this.fireCode("_onMouseOut"),"\""),e.push(" onfocus=\"",this.fireCode("_onMouseOver"),"\" onblur=\"",this.fireCode("_onMouseOut"),"\"")),e.push(" aria-haspopup=\"true\" aria-expanded=\"false\" id=\"",this.id,"\""),e.push(" role=\"",this._ariaRole||"button","\""),this._useTouchEnd&&(Util.browserInfo.ios||Util.browserInfo.android)?e.push(" ontouchend=\"",this.fireCode("_activateMenu"),"\""):(e.push(" onclick=\"",this.fireCode("_activateMenu"),"return false;\""),e.push(" onkeydown=\"",this.fireCode("_activateMenu"),"\"")),e.push(" data-testid=\"sfDropMenuBtn\" class=\"",t?"":""," sfDropMenuBtn ",this.generateFDClasses("select__control")," ",this._css," ",this._buttonStyles,"\""),this._title&&(e.push(" title=\"",juic.escapeHTML(this._title),"\""),this._ariaLabel&&e.push(" aria-label=\"",juic.escapeHTML(this._ariaLabel),"\"")),e.push(">"),e.push(this._image),this._iconFont&&e.push("<span class=\"legacyFont1Icon\">",this._iconFont,"</span>"),e.push("<span id=\"",this.id,"label\" class=\"dropDownButtonText ",this.generateFDClasses("select__text-content"),"\""),this._labelWidth&&SFDropMenu.forceExplicitLabelWidth()?e.push(" style=\"width:",this._labelWidth,"px\""):this._labelWidth&&e.push(" style=\"max-width:\"",this._labelWidth,"px\""),e.push(">"),this._renderContent(e),e.push("</span>"),this._triangleIcon&&this._triangleIcon.renderHtml(e),e.push("</",this._tag,">"),i&&i.renderClosingHtml(e)},_createFDWrapperRenderer:function(){var e=this;return{renderOpeningHtml:function(t){t.push("<div data-testid=\"sfDropMenuFDPopover\" class=\"",e.generateFDClasses("popover"),"\">"),t.push("<div data-testid=\"sfDropMenuFDPopoverControl\" class=\"",e.generateFDClasses("popover__control"),"\">"),t.push("<div data-testid=\"sfDropMenuFDSelect\" class=\"",e.generateFDClasses("select"),"\">")},renderClosingHtml:function(e){e.push("</div></div></div>")}}},_renderContent:function(e){null!=this._content&&("string"==typeof this._content&&this._escapeHTML?e.push(juic.escapeHTML(this._content)):e.push(this._content))},addDropDownIconFont:function(e){this._iconFont=e},setModel:function(e){this._menu.setModel(e)},setModel:function(e){this._menu.setModel(e)},updateMinWidth:function(){var e=juic.$(this.id);e&&this._menu.setMinWidth(e.offsetWidth)},setContent:function(e){this._content=e;var t=juic.$(this.id+"label");if(t){var i=juic.createRenderContext();this._renderContent(i),t.innerHTML=i.join("")}},setTitle:function(e){this._title=e;var t=juic.$(this.id);t&&(t.title=e)},setAriaLabel:function(e){this._ariaLabel=e||" ";var t=juic.$(this.id);t&&t.setAttribute("aria-label",e)},setFocusedItem:function(e){this._menu.setFocusedItem(e)},focus:function(){var e=juic.$(this.id);if(e)try{e.focus()}catch(t){}},blur:function(){var e=juic.$(this.id);e&&e.blur()},setShowDisabled:function(e){this._showDisabled=e},_activateMenu:function(e){if("keydown"===e.type){var t=SFDOMEvent.getKeyName(e);if("SPACEBAR"!=t&&"RETURN"!=t&&!(e.altKey&&"ARROWDOWN"===t))return;SFDOMEvent.preventDefault(e),SFDOMEvent.stopPropagation(e)}this._showDisabled||(this._menu.isShown()?this.hide():this.show())},show:function(){this._menu.show(this.id);var e=this._menu.isShown();juic.$(this.id)&&e&&juic.$(this.id).setAttribute("aria-expanded","true"),this._activeCss&&(e?SFDom.addClass(this.id,this._activeCss):(this.hide(),SFDom.setFocus(this.id,!0)))},hide:function(){this._menu.hide()},getOffsetWidth:function(){var e=juic.$(this.id);return e?e.offsetWidth:0},setLabelWidth:function(e){var t=juic.$(this.id+"label");t&&(SFDropMenu.forceExplicitLabelWidth()?t.style.width=e+"px":t.style.maxWidth=e+"px")},isPopupShown:function(){return this._menu&&this._menu.isShown()},getPopupMenu:function(){return this._menu},_onPopupHidden:function(){this._activeCss&&(SFDom.removeClass(this.id,this._activeCss),SFDom.removeClass(this.id,this._hoverCss));var e=juic.$(this.id);e&&e.setAttribute("aria-expanded","false")},_onMouseOver:function(e){Util.isMouseLeaveOrEnter(e,juic.$(this.id))&&SFDom.addClass(this.id,this._hoverCss)},_onMouseOut:function(e){Util.isMouseLeaveOrEnter(e,juic.$(this.id))&&SFDom.removeClass(this.id,this._hoverCss)},cleanup:function(){this._triangleIcon&&this._triangleIcon.cleanup(),this._menu.cleanup(),this._super()}});function SFMenuDropDown(e,t){this.register(),this._init(e,t)}(function(){function e(e){if(!e)return null;var t=Array.isArray(e)?e:new i(e);return t}function t(e){var t=[];return e.css&&t.push(e.css),!1==e.isModule&&t.push("nonmodule"),{onclick:e.onclick,actionCommand:e.actionCommand||null,value:e.value||"",label:e.label,url:e.url,title:e.title,target:e.target,css:t.join(" ")}}function i(e){this._model=e}var o="menuDefault",n="nonmodule";juic.extend(SFMenuDropDown,juic.Component,{_init:function(t,i){i=i||{},assert(t,"[SFMenuDropDown] You need to send in a valid model of menu drop down objects!"),this._model=t,this._isLegacy=!!i.isLegacy,this._isMultiLine=!!i.isMultiLine,this._hasOpacity=!!i.hasOpacity,this._menuTitleFormat=i.menuTitleFormat||MSGS.COMMON_MENU_ALT,this._menuAriaLabel=i.menuAriaLabel,this._updateLabelOnSelect=i.updateLabelOnSelect;var o=[],n=i.cssClassesCore||"globalPlacematNavigationText",s=i.cssClassesAux||"";n&&o.push(n),s&&o.push(s),o=o.join(" ");var a=e(this._model);this._menu=new SFDropMenu(a,{popupCss:"menuDefault"+(i.popupCss?" "+i.popupCss:""),css:o,hoverCss:this._hasOpacity?"globalModulePickerHover":null,activeCss:this._hasOpacity?"globalModulePickerActive":null,button:!!this._isLegacy,content:this.buttonLabel,title:this.buttonTitle,ariaLabel:this._menuAriaLabel,showTriangle:!1!==i.showTriangle,fixPoint:i.fixPoint,animate:null!=i.animate&&i.animate,preventRedisplay:!(null!=i.preventRedisplay)||i.preventRedisplay,image:i.image,ariaRole:i.ariaRole}),this._menu.triangleIconId&&(this.triangleID=this._menu.triangleIconId),this._menu.addEventListener("action",this,"_handleAction"),this._menu.addEventListener("preventBlur",this,"dispatchEvent"),this._updateButtonLabel()},renderHtml:function(e){this._isMultiLine&&e.push("<div class=\"multiLineLabel\" id=\"",this.registerAutomationName(this.id+"_multiLineLabel","DropDown-"+this.getButtonText()),"\">"),e.push(this._menu),this._isMultiLine&&e.push("</div>"),this._hasOpacity&&e.addAfterRenderListener(this,"_onLoad")},addDropDownIconFont:function(e){this._menu.addDropDownIconFont(e)},cleanup:function(){this._menu.cleanup(),this._super()},getButtonText:function(){return this.buttonLabel},updateButtonText:function(e,t,i){this.buttonLabel=e,this.buttonTitle=t||e,this._menuAriaLabel=i||e,this._menu.setContent(this.buttonLabel),this._menu.setTitle(this._updateTitleText(this.buttonTitle)),this._menu.setAriaLabel(this._menuAriaLabel),this._menu.hide()},blurButton:function(){this._menu.blur()},getOffsetWidth:function(){return this._menu.getOffsetWidth()},getComputedMargins:function(){var e=juic.$(this.id+"_multiLineLabel");return e?SFDom.getMargin(e,"x"):0},adjustTextWidth:function(e){var t=e;if(this.triangleID){var i=juic.$(this.triangleID);t-=SFDom.getComputedWidth(i)}var o=juic.$(this._menu.id);t-=SFDom.getComputedHorizPadding(o),this._menu.setLabelWidth(t)},setFocusedItem:function(e){this._menu.setFocusedItem(e)},focus:function(){this._menu.focus()},isPopupShown:function(){return this._menu&&this._menu.isPopupShown()},getPopupMenu:function(){return this._menu.getPopupMenu()},setModel:function(t){if(this._model=t,this._menu){var i=e(t);this._menu.setModel(i)}},show:function(){return this._menu.show()},hide:function(){return this._menu.hide()},_updateButtonLabel:function(e){if(this._model instanceof SFDefaultSingleSelectModel){var t=this._model.getSelectedIndex(),i=this._model.get(t);i&&(this.buttonLabel=i.label,this.buttonTitle=i.title),this._menu.setContent(this.buttonLabel),this._menu.setTitle(this._updateTitleText(this.buttonTitle)),this._menu.setAriaLabel(this._menuAriaLabel)}},_updateTitleText:function(e){return sfMessageFormat.format(this._menuTitleFormat,e)},_onLoad:function(){this._menu.updateMinWidth()},_handleAction:function(e){this._updateLabelOnSelect&&this._model instanceof SFDefaultSingleSelectModel&&(this._model.setSelectedIndex(e.itemIndex),this._updateButtonLabel()),this.dispatchEvent(e)}}),juic.extend(i,SFAbstractMenuModel,{fetchMenuItems:function(){for(var e=this._model.size(),i=[],o=0;o<e;o++)i.push(t(this._model.get(o)));this.dispatch("menuItemsAvailable",{menuItems:i})}})})();function SFDialogBox(e){this.register(),this._init.apply(this,arguments)}(function(){var e="sfPanelComponent",t={header:"panelHeader globalPortletHeader",content:"panelContent globalPortletBody",buttonLayout:"panelButtonLayout",footer:"panelFooter"},i=["title","content","buttons","width","innerHeight","scrollable","useNameAnchor","ariaLabel","titleHeaderTagLevel"],o={title:void 0,buttons:void 0,content:void 0,width:300,height:"auto",innerHeight:void 0,scrollable:!1,useNameAnchor:!1,closeDialogOnEsc:!0,showCloseIcon:!1,contentHasForm:!1,cancelActionCommand:void 0,cancelActionData:void 0,preventClose:!1,overlayOpacity:void 0,ownChildren:!0,ariaRole:"dialog",ariaLabel:void 0,useUI5Popups:!1,titleHeaderTagLevel:2},n=!1,s=500,a={title:["string",juic.Component,null],buttons:[juic.Config.arrayType("*"),"string",null],content:[juic.Component,"string",null],width:"number",height:["number","auto"],innerHeight:["number","auto","",null],cancelActionCommand:["string",null],overlayOpacity:["number",null],ariaRole:"string",ariaLabel:["string",null]};juic.extend(SFDialogBox,SFRevolutionPanel,{_init:function(e){if(!n){var t=Util.isFioriEnabled();o.closeDialogOnEsc=t,o.showCloseIcon=!t,n=!0}if(e=juic.Config.convertArguments(arguments,i,o,a),e.baseButtonWrapperClass="sfDialogBoxButtonWrapper "+this.generateFDClasses("bar__element"),e.baseButtonWrapperOuterClass=this.generateFDClasses("bar__right"),e.type="sfDialogBox",this._messageBoxType=e.messageBoxType,this._responsive=e.responsive,this._responsive){var r=SFDom.getViewportWidth(),l=e.width,d=e.height;this._originalWidth=l,this._originalHeight=d,SFBodyEventDispatcher.addResizeListener(this,"_setWidthAndHeight"),r<=s&&(l=r,d=SFDom.getViewportHeight(),e.width=l,e.height=d)}this._super(e),this._responsive||(this._innerHeight=e.innerHeight?e.innerHeight:void 0),this._contentHasForm=e.contentHasForm,this._preventClose=e.preventClose,this._overlayOpacity=e.overlayOpacity,this._ariaRole=this._getAriaRole(e.ariaRole),this._ariaLabel=e.ariaLabel,this._useUI5Popups=e.useUI5Popups,this._announceTitleChange=e.announceTitleChange,this.dialogPanel=this,this.setContent(this._content),this._focusLoop=new SFFocusLoop(this.id+"_dialogBox"),this._focusMarkers=this._focusLoop.getMarkers()},_setWidthAndHeight:function(e){var t=SFDom.getViewportWidth();t<=s?(this.setWidth(t),this.setHeight(SFDom.getViewportHeight())):(this.setWidth(this._originalWidth),this.setHeight(this._originalHeight))},_renderSection:function(e,t,i){if(this._isSectionRendered(t,i)){var o=this._getSectionClassName(t);e.push("<div id=\"",this.id,t,"\""),this._announceTitleChange&&"header"===t&&e.push(" aria-live=\"polite\""),o&&e.push(" class=\"",o,"\""),SFDom.renderStyle(e,this._getStyle(t)),e.push(">"),this._renderContent(e,t,i),e.push("</div>")}},_getDialogType:function(){return this._messageBoxType?"message-box":"dialog"},_getSectionClassName:function(e){var i=this._getDialogType();if(e&&this instanceof SFDialogBox){var o=[t[e]];return"header"===e?o.push(this.generateFDClasses(i+"__header"),this.generateFDClasses("bar")):"content"===e?o.push(this.generateFDClasses(i+"__body")):"buttonLayout"===e||"footer"===e?o.push(this.generateFDClasses(i+"__footer"),this.generateFDClasses("bar",["footer"])):void 0,"header"!=e||!this._usesStandardHeader()||this._title||this._showCloseIcon||o.push("hiddenAriaContent"),o.join(" ")}var n=["sfPanelComponent"];return n.push(this.generateFDClasses(i+"__content")),this._type&&n.push(this._type),(this._title||this._header)&&n.push("hasTitle"),n.join(" ")},_renderStandardHeader:function(e){e.push("<span id=\"",this.id,"headerContainer\" class=\"sfPanelHeaderContainer ",this.generateFDClasses("bar__left"),"\">"),this._renderStandardHeaderContent(e),e.push("</span>")},renderHtml:function(e){e.push(this._focusMarkers[0]),e.push("<div id=\"",this.id,"_dialogBox\">"),e.push("<div id=\"",this.id,"_dialogContent\">"),e.push("<div role=\"",this._ariaRole,"\" id=\"",this.id,"wrapper\" "),this._ariaLabel?e.push("aria-label=\"",this._ariaLabel,"\""):this.renderAriaAttributes(e,!0);var t=["active"];this._messageBoxType&&t.push(this._messageBoxType),e.push(" class=\"dialogBoxWrapper ",this.generateFDClasses(this._getDialogType(),t)),this.isScrollable()&&e.push(" scrollableDialog"),e.push("\">"),this._super(e),e.push("</div>"),e.push("</div>"),e.push("</div>")},cleanup:function(){delete this.dialogPanel,this.isRegistered()&&(this._focusMarkers[0].cleanup(),this._focusMarkers[1].cleanup(),this._super())},showDialog:function(e,t){this.isDialogVisible()||(this._modal=e,this._refocusRef=t,SFOverlayMgr.addEventListener("overlayRendered",this,"_onDialogRendered"),"undefined"==typeof e&&(e=!0),SFOverlayMgr.showOverlay(this,e,null,null,this._getOverlayOptions()),this._closeDialogOnEsc&&SFOverlayMgr.addEventListener("escKeyPressed",this,"_cancel"))},close:function(){this.isDialogVisible()&&(this._preventClose?this.dispatch("action",{actionCommand:"hideRequest"}):this._hideDialog())},show:function(e){this._dialogHidden=!e,this._updateStyles()},renderContent:function(e){e.push(this._content)},handleButton:function(e){switch(e.actionCommand){case"hide":var t=this;setTimeout(function(){t.close()},0);}this._super(e)},setContent:function(e){this._content instanceof juic.Component&&this._content.removeEventListener("changeDimensions",this),e instanceof juic.Component&&e.addEventListener("changeDimensions",this,"_handleDialogResized"),this._super(e)},isDialogVisible:function(){return!this._dialogHidden&&!!juic.$(this.id)},isShown:function(){return this.isDialogVisible()},setCloseDialogOnEsc:function(e){!!this._closeDialogOnEsc!=!!e&&(this._closeDialogOnEsc=!!e,e&&this.isDialogVisible()&&SFOverlayMgr.addEventListener("escKeyPressed",this,"_cancel"))},setPreventCloseState:function(e){this._preventClose=e},getPreventCloseState:function(){return this._preventClose},setScrollable:function(e){this._super(e);var t=juic.$(this.id+"wrapper");t&&SFDom[e?"addClass":"removeClass"](t,"scrollableDialog")},setCancelAction:function(e,t){"object"==typeof e&&(e=e.actionCommand,t=e.data),this._cancelActionData=e?{actionCommand:e,data:t}:null},getCancelAction:function(){return this._cancelActionData},setTitle:function(e){this._super(e),this._setSectionContent("header",null)},setInnerHeight:function(e){this._innerHeight=e,this._updateStyles("content"),this._handleDialogResized()},getInnerHeight:function(){return this._innerHeight||this._getInnerHeight()},setHeader:function(){throw new Error("SFDialogBox: setHeader is disabled, use setTitle instead.")},getHeader:function(){throw new Error("SFDialogBox: getHeader is disabled, use setTitle instead.")},setAriaRole:function(e){this._ariaRole=this._getAriaRole(e);var t=juic.$(this.id+"wrapper");t&&t.setAttribute(this._ariaRole)},_getAriaRole:function(e){return"dialog"===e?"dialog":"alertdialog"},_renderContentBody:function(e){this._contentHasForm?(e.push("<form id=\"",this.id,"form\" onsubmit=\"",this.fireCode("_onFormSubmit"),"return false\">"),this.renderContent(e),e.push("<input type=\"image\" src=\"",IMAGES["/ui/juic/img/_.gif"],"\" width=\"1\" height\"1\" tabindex=\"-1\" alt=\"\" /></form>")):this.renderContent(e)},_getInnerHeight:function(){return null==this._innerHeight?this._super():this._innerHeight},_getOverlayOptions:function(){return{dispatchEscKeyPress:this._closeDialogOnEsc,opacity:this._overlayOpacity,useUI5Popups:this._useUI5Popups}},_renderContent:function(e,t){switch(t){case"header":this._renderStandardHeader(e);break;case"content":this._renderContentBody(e);break;case"endMarker":e.push(this._focusMarkers[1]);break;case"helpIcon":this._renderHelpIcon(e);break;case"closeIcon":this._showCloseIcon&&e.push("<button id=\"",this.id,"closeIconBtn\" class=\"closeDialog globalPortletCloseIcon globalIconFont1Support\" title=\"",MSGS.COMMON_Close,"\" aria-label=\"",MSGS.COMMON_Close,"\" onclick=\"",this.fireCode("_handleClose"),"return false;\" style=\"display:",this._showCloseIcon?"block":"none","\"><span class=\"legacyFont1Icon\"></span></button>");break;default:this._super.apply(this,arguments);}},_renderHelpIcon:function(e){},_usesStandardHeader:function(){return!0},_getStyle:function(e){var t=this._super(e);return null==e&&(t.display=this._dialogHidden?"none":""),t},_isSectionRendered:function(e,t){return!("header"!==e&&"startMarker"!==e&&"helpIcon"!==e&&"closeIcon"!==e&&"endMarker"!==e)||this._super(e,t)},_renderStandardHeaderContent:function(e){if(this._messageBoxType){var t="confirmation"==this._messageBoxType?"question-mark":"message-"+this._messageBoxType;e.push("<i class=\"sap-icon--",t,"\"></i>")}this._renderTitle(e,"h5")},_getSectionOrder:function(){return[].concat(this._super()).concat(["closeIcon","endMarker"])},_cancel:function(e){SFOverlayMgr.isTopOverlay(this)&&(this._cancelActionData?this.dispatch("action",this._cancelActionData):this.close())},_hideDialog:function(){this._closeDialogOnEsc&&SFOverlayMgr.removeEventListener("escKeyPressed",this),this.dispatch("action",{actionCommand:"hide"}),this.dispatch("hide"),this._handleRefocus()},_handleClose:function(){this.close.apply(this,arguments)},_onFormSubmit:function(){this.dispatch("action",{actionCommand:"submitForm"})},_updateStyles:function(e){this._super(e),e||this._handleDialogResized()},_updateClassName:function(e){this._super(e),this._handleDialogResized()},_setSectionContent:function(){this._super.apply(this,arguments),this._handleDialogResized()},_handleDialogResized:function(){this.isDialogVisible()&&(this._modal?SFOverlayMgr.centerComponent(this.id):this.dispatch("changeDimensions"))},_onDialogRendered:function(e){e.componentId==this.id&&(SFOverlayMgr.removeEventListener("overlayRendered",this),this.adjustDOM(),this.setFocus())},setFocus:function(e){this._focusLoop.setFocus(e),this._super(e)},getDialogTitleText:function(){return this.getTitle()},setDialogTitle:function(e){this.setTitle(e)},setOuterHeight:function(e){this.setHeight(e)},getOuterHeight:function(){return this.getHeight()},setContentHeight:function(e){this.setInnerHeight(e),this._handleDialogResized()},setNewButtons:function(e){this.getButtonLayout().setModel(e)},disableButtons:function(){this.getButtonLayout().setButtonsEnabled(!1)},enableButtons:function(){this.getButtonLayout().setButtonsEnabled(!0)},disableButton:function(e){this.getButtonLayout().setButtonEnabled(e,!1)},enableButton:function(e){this.getButtonLayout().setButtonEnabled(e,!0)},isButtonEnabled:function(e){var t=this.getButtonModel().get(e);return t&&t.enabled},setButtonLabel:function(e,t){this.getButtonLayout().setButtonLabel(e,t)},setButtonActionCommand:function(e,t){this.getButtonLayout().setButtonActionCommand(e,t)},setButtonVisible:function(e,t){this.getButtonLayout().setButtonVisible(e,t)},setInnerWidth:function(e){this.setWidth(e)},getInnerWidth:function(){return this.getWidth()}})})();function SFDialogBoxCloseButton(e,t,i,o,n,s){this._super(e,t,i,o),this._superId=n,this._display=s}juic.extend(SFDialogBoxCloseButton,SFSimpleLink,{_renderLinkContent:function(e){e.push("<button id=\"",this._superId,"dialogCloseIcon\" type=\"button\" class=\"closeDialog globalPortletCloseIcon globalIconFont1Support\" title=\"",MSGS.COMMON_Close,"\""),e.push(" onclick=\"",this.fireCode("_click"),";return false;\"","onmouseover=\"",this.fireCode("_mouseover"),";return false;\" ","onmouseout=\"",this.fireCode("_mouseout"),";return false;\" "),e.push("style=\"",this._display,"\""),e.push("><span class=\"legacyFont1Icon\"></span></button>")}}),function(){function e(e,t,i){this._message=e,this._value=null==t?"":t,this._required=i,this.register()}function t(e,t){return e=e?set({},e):{},set(e,t)}function i(e,t,i){i=i||{};var o=i.context||window,n="function"==typeof i[e]?i[e]:i.callback;"function"==typeof n&&(!Array.isArray(t)&&(t=null==t?[]:[t]),n.apply(o,t))}function o(e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++)t.push(n(e[i]));return t}return"string"==typeof e&&a[e]?o(a[e]):[n(e)]}function n(e){switch(e=e||SFMessageBox.OK,typeof e){case"string":return s[e]?set({},s[e]):{label:e,active:!1,enabled:!0,eventName:e};break;case"object":return{label:e.label,active:!!e.active,enabled:null==e.enabled||e.enabled,eventName:e.actionCommand||e.eventName||e.command,refocusId:e.refocusId};break;default:assert(!1,"[SFMessageBox] Invalid button: "+e);}}window.SFMessageBox={OK:"ok",SAVE:"save",CANCEL:"cancel",OK_CANCEL:"okCancel",SAVE_CANCEL:"saveCancel",CLOSE:"close"};var s={};s[SFMessageBox.OK]={label:MSGS.COMMON_Ok,active:!0,enabled:!0,eventName:SFMessageBox.OK},s[SFMessageBox.SAVE]={label:MSGS.COMMON_Save,active:!0,enabled:!0,eventName:SFMessageBox.SAVE},s[SFMessageBox.CANCEL]={label:MSGS.COMMON_Cancel,active:!1,enabled:!0,eventName:"cancel"};var a={};a[SFMessageBox.OK]=[SFMessageBox.OK],a[SFMessageBox.OK_CANCEL]=[SFMessageBox.OK,SFMessageBox.CANCEL],a[SFMessageBox.SAVE_CANCEL]=[SFMessageBox.SAVE,SFMessageBox.CANCEL];var r={error:"error",info:"information",confirm:"confirmation",alert:"warning"};set(SFMessageBox,{alert:function(e,o){return this.show(t(o,{buttons:SFMessageBox.OK,message:e,messageBoxType:"alert",callback:function(e){i(e,null,o)}}))},confirm:function(e,o){return this.show(t(o,{buttons:"okCancel",message:e,messageBoxType:"confirm",callback:function(e){i(e,e==SFMessageBox.OK,o)}}))},prompt:function(n,s,a){var r=a&&a.required,l=new e(n,s,r),d=o(r?SFMessageBox.OK:"okCancel");r&&(d[0].enabled=!1);var n=this.show(t(a,{buttons:d,message:l,messageBoxType:"info",showClose:!r&&a.showClose,callback:function(e){try{var t=l.getValue();(e==SFMessageBox.CANCEL||e==SFMessageBox.CLOSE)&&(t=null),i(e,t,a)}finally{}}}));return a.required&&l.addEventListener("change",{handleEvent:function(e){n.setButtonEnabled(SFMessageBox.OK,!!l.getValue())}}),n},show:function(e){function t(){d.cleanup()}e=e||{};var n=!0,s=o(e.buttons),a=e.content||e.message,l=null;!Util.isFioriFDEnabled()&&"string"==typeof a&&e.messageType&&(l=new SFSysMsg(e.messageType,a,e.detail,!1));var d=new SFDialogBox({title:e.title||document.title,content:l||a,buttons:s,width:e.width,innerHeight:e.height,scrollable:e.scrollable,escapeHTML:e.escapeHTML,useNameAnchor:e.useNameAnchor,messageBoxType:r[e.messageBoxType||"info"],ariaLabel:e.ariaLabel}),u=set(new juic.EventTarget,{setButtonEnabled:function(e,t){for(var i=0;i<s.length;i++)s[i].eventName==e&&d[t?"enableButton":"disableButton"](i)},close:function(){try{n&&i(SFMessageBox.CLOSE,SFMessageBox.CLOSE,e)}finally{d.close(),t()}}});return d.addEventListener("action",{handleEvent:function(o){var s=o.actionCommand;switch(s){case"hide":if(n)try{i(SFMessageBox.CLOSE,SFMessageBox.CLOSE,e)}finally{setTimeout(function(){t()},1)}break;default:n=!1;try{i(s,s,e)}finally{u.close()}}u.dispatch("action",{actionCommand:s})}}),d.showDialog(e.isModal,e.targetId),!1===e.showClose&&d.setShowCloseIcon(!1),u}}),juic.extend(e,juic.Component,{renderHtml:function(e){e.push("<div class=\"promptContent\"><p>",this._message,"</p><p><input id=\"",this.id,"value\" type=\"text\" value=\"",juic.escapeHTML(this._value),"\" style=\"width:100%\""),this._required&&e.push(" onkeyup=\"",this.fireCode("_onChange"),"\""),e.push("></p></div>")},_onChange:function(){this._value=juic.$(this.id+"value").value,this.dispatch("change")},getValue:function(){return this._value}})}();