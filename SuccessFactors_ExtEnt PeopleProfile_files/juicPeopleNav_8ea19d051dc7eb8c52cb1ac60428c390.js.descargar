function SFPeopleSelectDAO(){this.ajaxService=AjaxService.getMBeanInstance("peopleNavigationController"),juic.assert(this.ajaxService,"Error loading People Navigation. Please check if peopleNavigationController ajax service is included in current page.")}SFPeopleSelectDAO.prototype=function(){return set(new juic.EventTarget,{loadHierarchy:function(a){var b={me:this,callback:function(a){b.me.dispatch("employeeHierarchyLoaded",{hierarchyData:a})},exceptionHandler:function(a){b.me.dispatch("failedLoad",{errObj:a})}};this.ajaxService.getEmployeesHierarchy(a,b)},getPermittedURL:function(a,b,c){var d={me:this,callback:function(b){d.me.dispatch("urlready",{url:b,userId:a})},exceptionHandler:function(a){d.me.dispatch("failedURLLoad",{errObj:a})}};this.ajaxService.getPermittedURL(a,b,c,d)},findUser:function(a,b){var c={me:this,callback:function(d){c.me.dispatch("searchResultReady",{data:d,tokens:a,inactiveUsers:b})},exceptionHandler:function(a){c.me.dispatch("failedSearchLoad",{errObj:a})}};this.ajaxService.findUser(a,b,c)}})}();var SFNameFormatter={};SFNameFormatter.formatters={DEFAULT:function(a,b){var c=a.isHaveMiddleNamePermission,d=null==a.firstName?"":a.firstName,e=null==a.mi?"":a.mi,f=null==a.lastName?"":a.lastName;if(c||(e=""),b(d)||b(e)||b(f)){var g=MSGS.get("User_Display_Name",d,e,f);return g=g.trim(),g=g.replace(/\s{2,}/g," "),g}return""},FORMATTED_NAME:function(a){return a.formattedName}},SFNameFormatter.format=function(a,b){var c=function(a){return a&&0!==a.length&&!/^\s*$/.test(a)};if(!a)return"";"undefined"==typeof b&&(b=!0),a.isHaveMiddleNamePermission=b;var d=this.formatters.DEFAULT;return c(a.formattedName)&&(d=this.formatters.FORMATTED_NAME),d(a,c)},function(){var a={"012":[[0,1],[2]],"021":[[0],[2,1]],120:[[1,2],[0]],102:[[1,0],[2]],201:[[2],[0,1]],210:[[2],[1,0]]},b=function(b){for(var c,d=[],e=0,f=0;3>f;f++)c=b.indexOf("{"+f+"}"),0<=c&&e++,d.push({index:f,included:0<=c,formatIndex:c});switch(e){case 0:return null;case 1:return[b];case 2:if(d[1].included)return[b];case 3:var g=d.concat();g.sort(function(a,b){return a.included&&b.included?a.formatIndex<b.formatIndex?-1:1:a.included?-1:b.included?1:0});for(var h="",f=0;3>f;f++)if(h+=g[f].index,g[f].included){for(var i=f-1;0<=i&&!g[i].included;)i--;var j=0>i?"^":"\\{"+g[i].index+"\\}[^\\s\\{]*";j+="(.*\\{"+g[f].index+"\\}",j+=2==f?".*)$":"[^\\s\\{]*)",g[f].message=new RegExp(j).exec(b)[1]}for(var k=a[h],l=[],f=0;f<k.length;f++){for(var m,n=k[f],o="",p=0;p<n.length;p++)m=d[n[p]],m.included&&(o+=m.message);l.push(o)}return l;}}(MSGS.COMMON_User_Display_Name);SFNameFormatter.splitFullName=function(a){for(var c,d=[],e=0;e<b.length;e++)c=sfMessageFormat.format(b[e],a.firstName||"",a.middleInitial||"",a.lastName||""),/^\s*$/.exec(c)||d.push(c);return d}}(),function(){var a=MSGS.COMMON_User_Display_Name.indexOf(MSGS.COMMON_First_Name),b=MSGS.COMMON_User_Display_Name.indexOf(MSGS.COMMON_Last_Name);SFNameFormatter.isFirstNameFirst=function(){return a<b}}();function SFLazyLoadingPicture(a,b,c,d){this.register(),this.init(a,b,c,d)}SFLazyLoadingPicture.defaultPicture=IMAGES["/ui/uicore/img/silhouette.jpg"],SFLazyLoadingPicture.defaultDelay=1e3,SFLazyLoadingPicture.prototype=function(){return set(new Component,{init:function(a,b,c,d){this.userId=a,this.directory=b,this.photoMod=b.photoMod,this.delay=c?c:SFLazyLoadingPicture.defaultDelay,this.isInteractive=d},renderHtml:function(a){var b=this.directory[this.userId],c="";b&&(c=EDUNameFormatter.format(b)),this.isInteractive?a.push("<img  alt=\"",c,"\" title=\"",c,"\"  onmouseover=\"",this.fireCode("_handleMouseover"),"\" onmouseout=\"",this.fireCode("_handleMouseout"),"\" onclick=\"",this.fireCode("_handleClick"),"\" id=\"",this.id,"\" class=\"photo\" src=\"",SFLazyLoadingPicture.defaultPicture,"\"/>"):a.push("<img  alt=\"",c,"\" title=\"",c,"\"  id=\"",this.id,"\" class=\"photo currentEmployee\" src=\"",SFLazyLoadingPicture.defaultPicture,"\"/>"),this._onRender()},_handleMouseover:function(){this._showHighlighted()},_handleMouseout:function(){this._hideHighlighted()},_handleClick:function(){this.dispatch("gotoProfile",{userId:this.userId})},_onRender:function(){var a=this;this.loadId=setTimeout(function(){a.initLoading()},this.delay)},_showHighlighted:function(){juic.$(this.id).className+=" selectedEmployee"},_hideHighlighted:function(){juic.$(this.id).className=juic.$(this.id).className.replace(/\bselectedEmployee\b/,"")},initLoading:function(){if(juic.$(this.id)){var a=null;if("string"==typeof this.directory.photoSrc)a=this.directory.photoSrc;else{var b=[],c="";c=this.photoMod?this.photoMod:SFPhoto.getPhotoMod(this.photoId,this.photoLastModified);var d={urlType:SFPhoto.URL_TYPE_EDU,photoType:SFPhoto.PHOTO_TYPE.QUICK_CARD,userId:this.userId,mod:c};b.push(SFPhoto.url(d)),a=b.join("")}juic.$(this.id).src=a}else this.loadId&&(clearTimeout(this.loadId),delete this.loadId)},navigateToProfile:function(){this.dispatch("gotoProfile",{userId:this.userId})},handleEvent:function(a){"action"==a.type?"gotoOrgChart"==a.actionCommand||"gotoOrgChart"==a.actionCommand:"gotoProfileNewPage"==a.type?this.dispatch("gotoProfileNewPage",{userId:a.userId}):"gotoProfile"==a.type&&this.dispatch("gotoProfile",{userId:a.userId})}})}();var labelsMenuGroup={EMPFILE_EDU_NAV_GROUP_EMPLOYEE_RECORDS:MSGS.COMMON_PEOPLE_SELECT_EMPLOYEE_RECORDS};function SFNavigationDropDown(a,b){this.register(),this.init(a,b)}SFNavigationDropDown.prototype=function(){return set(new Component,{init:function(a,b){this.intialLabel=a,this._domIdForLabel="label_"+this.id,this.sfList=new SFList("CheckBoxList"),this.wrapper=new SFOptionsWrapper(this.sfList),this.wrapper.setType("moduleNavigation"),this._popup=new SFContextPopup(this.wrapper,{originId:this.getDomIdForLabel(),offset:{vertical:0,horizontal:-9}}),this._popup.addEventListener("clickedOutsidePopup",this,"_lostFocus"),b?this.setNavList(b):this.setLoading();this._triangleIcon=new SFTriangle({direction:"bottom",inherit:!0})},getDomIdForLabel:function(){return this._domIdForLabel},renderHtml:function(a){a.push("<a href=\"Javascript:void(0);\" rel=\"noopener\" id=\"",this.getDomIdForLabel(),"\" class=\"label globalPlacematNavigationText\" onclick=\"",this.fireCode("_showMenu"),"return false;\" >"),this._renderContent(a),a.push("</a>")},_renderContent:function(a){a.push(escapeHTML(this.intialLabel)),a.push(this._triangleIcon)},changeInitialLabel:function(a){this.intialLabel=this._getLabelFromId(a);var b=juic.createRenderContext();this._renderContent(b),juic.$(this.getDomIdForLabel()).innerHTML=b.join("")},_getLabelFromId:function(a){for(var b,c=0;c<this.navItems.length;c++){b=this.navItems[c];for(var d,e=0;e<b.items.length;e++)if(d=b.items[e],a==d.id)return d.label}},_isPopupOpen:function(){return this._popup&&this._popup.isShown()},_showMenu:function(){this._isPopupOpen()||(this._popup.show(),SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this))},setNavList:function(a){if(a){this.navItems=a,this.navItemList=[];this.groups=[],this.cleanupNavItemList(),this.sfList=new SFList("CheckBoxList"),this.wrapper.setNumberOfColl(this.navItems.length);for(var b=0;b<this.navItems.length;b++){var c=new SFList("CheckBoxList"),d=[],e=this.navItems[b],f=e.label;if(f){labelsMenuGroup[e.label]&&(f=MSGS[e.label]);var g=new SFLink(f);g.setCss("groupHeader first"),this.navItemList.push(g),d.push(g)}for(var h=0;h<e.items.length;h++){var k=e.items[h],l=new SFLink(k.label,{clickParam:this._createItemRef(b,h,k.id),onMouseOut:!0,onMouseOver:!0});l.setCss("globalMenuItem"),window.isV2Enabled&&window.isMyBenefitAvailable&&0<=k.label.indexOf("(***$$#***)")?(l.setValue(k.label.replace(/\(\*\*\*\$\$\#\*\*\*\)/i,"")),l.addEventListener("click",this,"_openBenefit")):0<=k.label.indexOf("(***$$#***)")?(l.setValue(k.label.replace(/\(\*\*\*\$\$\#\*\*\*\)/i,"")),l.addEventListener("click",this)):l.addEventListener("click",this),this.navItemList.push(l),d.push(l)}c.add(d),this.groups.push(c)}this.sfList.add(this.groups),this.wrapper.setContent(this.sfList),this._isPopupOpen()&&this.reRenderWrapperContent()}},_openBenefit:function(){window.open("https://www.benefitenroll.com","myBenefits","noopener,noreferrer")},setLoading:function(){var a=new SFLoading("",null,{isNewLoadingIndicator:!0,isSectionLoadingIndicator:!0});this.sfList.add(a),this.wrapper.setContent(this.sfList),this._isPopupOpen()&&this.reRenderWrapperContent()},reRenderWrapperContent:function(){this.wrapper.reRenderContent()},_lostFocus:function(){var a=this;setTimeout(function(){a._hideMenu()},0)},_hideMenu:function(){this._popup&&this._popup.hide(),SFDOMEvent.removeListener(window.document,"keydown",this._onWindowKeyDown,this)},_onWindowKeyDown:function(a){switch(a=a||window.event,SFDOMEvent.getKeyName(a)){case"ESCAPE":this._hideMenu(),SFDOMEvent.stopEvent(a);}},handleEvent:function(a){switch(a.type){case"click":var b={newViewId:a.param};b.externalURL=this._getExternalUrl(a.param),this._hideMenu(),this.dispatch("actionMenuClicked",b);}},_createItemRef:function(a,b,c){var d=c;return"CUSTOM"==c&&(d+="_"+a+"_"+b),d},_getExternalUrl:function(a){for(var b,c=0;c<this.navItems.length;c++){b=this.navItems[c];for(var d,e=0;e<b.items.length;e++)if(d=b.items[e],a==this._createItemRef(c,e,d.id))return d.url}},postProcess:function(){},cleanupNavItemList:function(){for(var a=0;a<this.navItemList.length;a++)this.navItemList[a].cleanup();for(var b=0,c=this.groups.length;b<c;b++)this.groups[b].cleanup();this.sfList.cleanup()},cleanup:function(){this.cleanupNavItemList(),this._popup.hide(),this.unregister()}})}();function SFOptionsWrapper(a,b){this.register(),this.init(a,b)}SFOptionsWrapper.prototype=function(){return set(new Component,{init:function(a){this.wrapped=a,this._type=""},setType:function(a){this._type=a},setNumberOfColl:function(a){this._numberOfCollClass=2==a?"eduModuleNavTwoColumn ":"eduModuleNavOneColumn "},renderHtml:function(a){a.push("<div id='",this.id,"' class='module-nav eduViewNavigationDropDown globalRoundedCorners globalContainerHoverSansFocus ",this._numberOfCollClass,this._type),Util.browserInfo.ie&&9>Util.ieVersion()&&a.push(" edudropdownborder "),a.push(" '>"),this.wrapped.renderHtml(a),a.push("</div>")},setContent:function(a){this.wrapped=a},reRenderContent:function(){var a=[];this.wrapped.renderHtml(a),juic.$(this.id).innerHTML=a.join("")},setFixedHeight:function(){}})}();function SFPeopleSelect(a,b,c){this.register(),this.init(a,b,c)}(function(){var a={dao:[juic.EventTarget,null]},b={dao:void 0};juic.extend(SFPeopleSelect,juic.Component,{init:function(c,d,e){juic.assert(c,"Error initializing People navigation. User information not specified"),d=d?d:{},d.type||(d.type=window.PEOPLE_NAVIGATION_VIEW_TYPE?window.PEOPLE_NAVIGATION_VIEW_TYPE:"scorecard"),d.id||(d.id=window.PEOPLE_NAVIGATION_VIEW_VIEWID),e=new juic.Config(e,b,a),this.userInfo=c,this.viewInfo=d,this.config=e,this._peopleData=null,this.setKeywordTO={},this._searchStore={},this.createDAO(e.dao),this.createDropdown(e.useGenericGroups),this._loaded=!1},_createDAO:function(){return new SFPeopleSelectDAO},createDAO:function(a){a=a||this._createDAO(),a.addEventListener("employeeHierarchyLoaded",this),a.addEventListener("failedLoad",this),a.addEventListener("urlready",this),a.addEventListener("failedURLLoad",this),a.addEventListener("searchResultReady",this),a.addEventListener("failedSearchLoad",this),this.peopleNavigationDAO=a},renderHtml:function(a){this.navigationDropDown.renderHtml(a)},_createPeopleSelectDropDown:function(a,b){return new SFPeopleSelectDropDown(a,b)},createDropdown:function(a){var b=this._createPeopleSelectDropDown(this.viewInfo,{useGenericGroups:a});b.addEventListener("personSelected",this),b.addEventListener("showMenu",this),b.addEventListener("setSearchKeyword",this),this.navigationDropDown=b},setPeople:function(a){this.navigationDropDown.setPeopleLinks(a)},setSearchResult:function(a,b){this.navigationDropDown.setSearchLinks(a,b)},_cleanSearchresultsFromNavigationDropDown:function(){this.navigationDropDown._cleanSearchResults()},showNoAccessDialog:function(){SFMessageBox.alert(new SFProfileAccessDenied,{title:MSGS.COMMON_PEOPLE_SELECT_NO_ACCESS_TITLE,width:320})},hide:function(){},showSearchAndUserList:function(a){this.navigationDropDown.showMenu(a)},handleEvent:function(a){if("personSelected"==a.type)(null==a.userId||null==a.userId)&&alert("Error SFPeopleSelect: Invalid userid!!"),this.viewInfo.uriNavigate?this._getAuthorizedUrl(a.userId):this.dispatchEvent(a);else if("showMenu"==a.type)this._loaded||(this._loaded=!0,this.loadPeopleNavigation());else if("employeeHierarchyLoaded"==a.type)this._peopleData=a.hierarchyData,this.setPeople(a.hierarchyData);else if("urlready"==a.type)a.url?(this.dispatchEvent(a),this._applyUrl(a.url)):this.showNoAccessDialog();else if("setSearchKeyword"==a.type){this.setKeywordTO&&(clearTimeout(this.setKeywordTO),delete this.setKeywordTO);var b=this,c=this._getSearchStoreKey(a);if(this._searchStore[c])return void this.setSearchResult(this._searchStore[c],a.tokens);if(""==a.tokens)return this._cleanSearchresultsFromNavigationDropDown(),void this.setPeople(this._peopleData);this.setKeywordTO=setTimeout(function(){b.peopleNavigationDAO.findUser(a.tokens,a.inactiveUsers)},400)}else if("searchResultReady"==a.type){var c=this._getSearchStoreKey(a);this._searchStore[c]=a.data,this.setSearchResult(a.data,a.tokens)}},_getSearchStoreKey:function(a){var b=a.tokens;return a.inactiveUsers&&(b+="_inactive"),b},cleanup:function(){delete this._searchStore,this.navigationDropDown.cleanup(),this._super()},_getAuthorizedUrl:function(a){this.peopleNavigationDAO.getPermittedURL(a,this.viewInfo.type,this.viewInfo.id)},loadPeopleNavigation:function(){this.peopleNavigationDAO.loadHierarchy(this.userInfo.userId)},_applyUrl:function(a){Util.gotoURL(a)},postProcess:function(){}})})();function SFFindUser(){this.register(),this.init()}(function(){var a=MSGS.COMMON_PEOPLE_SELECT_INACTIVE_EMPLOYEE_SEARCH;juic.extend(SFFindUser,juic.Component,{init:function(){this._focused=!1,this.inactiveEmployeeSearchEnabled=!1,this._inactiveEmployeeSearchrendered=!1,this.minSearchKeyLength=2,this._value="",this._inactiveCheckSelected=!1},renderHtml:function(a){var b=this.isInactiveEmployeeSearchEnabled(),c="invalidUserCheck"+(b?" inactiveUserSearchEnabled":"");a.push("<div class=\"sfFinduser\">"),this._renderFindUserInput(a),a.push("<div id=\"",this._getCheckContainerId(),"\" class=\"",c,"\">"),b&&this._renderInactiveCheckBox(a),a.push("</div>"),a.push("</div>")},_renderFindUserInput:function(a){a.push("<div class=\"sfFinduserField "),Util.browserInfo.ie&&9>Util.ieVersion()&&a.push(" sfdropdownborder "),a.push("\"><div class=\"sfFinduserFieldIcon\">"),a.push("<input id=\"",this.id,"_input\" type=\"text\" onkeyup=\"",this.fireCode("_onKeyUp"),"\" value=\"",this._value,"\"oninput=\"",this.fireCode("_onInput"),"\" aria-describedby=\"",this.id,"_desc\" aria-label=\"",MSGS.COMMON_Search_for_people,"\" aria-autocomplete=\"list\" />"),a.push("<div class=\"hiddenAriaContent\" id=\"",this.id,"_desc\">",MSGS.get("COMMON_PEOPLE_SELECT_SEARCH_PEOPLE",this.minSearchKeyLength),"</div>"),a.push("</div></div>")},setAriaControlsId:function(a){var b=juic.$(this.id+"_input");b&&b.setAttribute("aria-controls",a)},setActiveDescendantId:function(a){var b=juic.$(this.id+"_input");b&&b.setAttribute("aria-activedescendant",a)},_renderInactiveCheckBox:function(b){b.push("<div class=\"","sfFindUserInactiveSearchBox","\"><span class=\"globalFloatLeft ","sfFindUserInactiveSearchCheckBox","\"><input id=\"",this.id,"_inactiveSearch\" type=\"checkbox\" "),this._inactiveCheckSelected&&b.push(" checked=\"checked\" "),b.push(" /></span><label for=\"",this.id,"_inactiveSearch\" class=\"globalFloatLeft ","sfFindUserInactiveSearchText","\" title=\"",a,"\">",a,"</label>"),b.push("</div>");var c=juic.$(this._getCheckContainerId());c&&Util.addClass(c,"inactiveUserSearchEnabled")},setFieldFocus:function(){var a=juic.$(this.id+"_input");if(a){a.focus();var b=a.value;a.value="",a.value=b}},isInactiveEmployeeSearchEnabled:function(){return this.inactiveEmployeeSearchEnabled},isInactiveUserSearchSelected:function(){var a=!1;return this.isInactiveEmployeeSearchEnabled()&&(a=!!juic.$(this.id+"_inactiveSearch").checked),a},setInactiveEmployeeSearchEnabled:function(a){var b=[],c=!1,d=juic.$(this._getCheckContainerId());!1===this.inactiveEmployeeSearchEnabled&&!0===a?(this._renderInactiveCheckBox(b),c=!0):!0===this.inactiveEmployeeSearchEnabled&&!1==a&&(c=!0),c&&d&&(d.innerHTML=b.join("")),this.inactiveEmployeeSearchEnabled=!!a},_onKeyUp:function(a){switch(SFDOMEvent.getKeyName(a||window.event)){case"ALPHA":case"NUMERIC":case"SPACEBAR":case"BACKSPACE":case"OTHER":this._onInput();break;default:}},_onInput:function(){var a=juic.$(this.id+"_input").value;if(this._value=a,a&&a.length>=this.minSearchKeyLength){var b=this.isInactiveUserSearchSelected();this._inactiveCheckSelected=b,this.dispatch("setSearchKeyword",{tokens:a,inactiveUsers:b})}else a||(this._inactiveCheckSelected=!1,this.dispatch("setSearchKeyword",{tokens:"",inactiveUsers:this.isInactiveUserSearchSelected()}))},_getCheckContainerId:function(){return this.id+"_checkContainer"},cleanup:function(){this._super()}})})();function SFPeopleSelectPopupContainer(a,b){this.register(),this.init(a,b)}(function(){var a=220;juic.extend(SFPeopleSelectPopupContainer,SFAbstractAdjustableHeight,{init:function(a,b){assert(a,"Error while creating people navigation popup container. Wrong Finduser component supplied"),assert(b,"Error while creating people navigation popup container. Wrong People Links component supplied"),this.findUserComponent=a,this.linksArray=b},renderHtml:function(a){var b=AccessibilityPrefs.getLowVisionType()+"LowVision";a.push("<div id=\"",this.id,"\" class=\"module-nav sfPeopleSelect globalRoundedCorners globalContainerHoverSansFocus ",b,"\" >"),this.findUserComponent.renderHtml(a),a.push("<div id=\"",this.id,"_scrollDiv\" >"),a.push("<ul class=\"sfPeopleSelectPopupContainer "),a.push(" \" id=\"",this.getListDomId(),"\" role=\"listbox\" >");for(var c=0;c<this.linksArray.length;c++)a.push("<li id=\"",this.getListItemDomId(c),"\" role=\"option\">"),this._renderLink(c,a),a.push("</li>");if(a.push("</ul>"),a.push("</div>"),a.push("</div>"),a.addAfterRenderListener)a.addAfterRenderListener(this,"_afterRender");else{var d=this;setTimeout(function(){d._afterRender()},0)}},_afterRender:function(){this.findUserComponent&&this.findUserComponent.setAriaControlsId(this.getListDomId())},setWidth:function(){var b=juic.$(this.id);if(b){b.style.width="auto";var c=juic.$(this.getListDomId()).offsetWidth;c=c<a?a:c,b.style.width=c+"px"}},getWidth:function(){var a=juic.$(this.id);return a&&a.style?a.style.width:""},setHeight:function(a){var b=Math.max(100,a-100)+"px",c=juic.$(this.id+"_scrollDiv");this.setWidth(),c&&c.style.height!=b&&(SFDom.addClass(c,"sfPeopleSelectFixedHeight"),c.style.height=b,this.dispatch("changeDimensions"))},scrollTo:function(a){var b=juic.$(this.id+"_scrollDiv");if(SFDom.hasClass(b,"sfPeopleSelectFixedHeight")){var c=juic.$(a.id),d=SFDom.getY(b),e=SFDom.getY(c),f=e-d,g=e+c.offsetHeight-d-b.offsetHeight;(0>f||0<g)&&(b.scrollTop+=0>f?f:g)}},_renderLink:function(a,b){this.linksArray[a].renderHtml(b)},reRenderLinks:function(){var a=juic.$(this.getListDomId());if(a){for(;1<=a.children.length;)a.removeChild(a.lastChild);for(var b,c=0;c<this.linksArray.length;c++){b=a.appendChild(document.createElement("li")),b.setAttribute("id",this.getListItemDomId(c)),b.setAttribute("role","option");var d=[];this._renderLink(c,d),a.children[c].innerHTML=d.join("")}}var e=juic.$(this.id+"_scrollDiv");e&&(SFDom.removeClass(e,"sfPeopleSelectFixedHeight"),e.style.height="auto",this.dispatch("changeDimensions"))},setLinks:function(a){this.linksArray=a},setSelectedIndex:function(a){this.findUserComponent&&this.findUserComponent.setActiveDescendantId(-1<a&&a<this.linksArray.length?this.getListItemDomId(a):"")},getListDomId:function(){return this.id+"_peoplecontainer"},getListItemDomId:function(a){return this.getListDomId()+"_li_"+a},cleanup:function(){this.findUserComponent&&"function"==typeof this.findUserComponent.cleanup&&this.findUserComponent.cleanup();for(var a=0;a<this.linksArray.length;a++)"finction"==typeof this.linksArray[a].cleanup&&this.linksArray[a].cleanup();this._super()}})})();function SFPeopleSelectDropDown(a){this._super(this,a)}(function(){var a={managers:MSGS.Managers,peers:MSGS.COMMON_PEOPLE_SELECT_PEERS,reports:MSGS.COMMON_PEOPLE_SELECT_DIRECT_REPORTS},b=["managers","peers","reports"];juic.extend(SFPeopleSelectDropDown,SFNavigationDropDown,{init:function(a){this.inactiveEmployeeSearchEnabled=!!a.inactiveEmployeeSearchEnabled,this.isPhotoDisabled=!1,this._isInactiveSearchEnabled=!1,this._isHaveMiddleNamePermission=!0,this._createPeoplePopup()},_createFindUser:function(){return new SFFindUser},_createPopupContainer:function(a,b){return new SFPeopleSelectPopupContainer(a,b)},_createPopup:function(a,b){return new SFContextPopup(a,b)},_createLoading:function(){return new SFLoading("",null,{isNewLoadingIndicator:!0,isSectionLoadingIndicator:!0})},_createEmployeePhotoNameOptions:function(a,b){return new SFEmployeePhotoNameOption(a,b)},_createPeoplePopup:function(){if(this._findUser=this._createFindUser(),this._findUser.addEventListener("setSearchKeyword",this),!this._links){var a=this._getLoading();this._links=[a]}this._container=this._createPopupContainer(this._findUser,this._links),this._container.addEventListener("focusOut",this,"_hideMenu");var b={originId:this.id,offset:{vertical:1,horizontal:-9}};Util.isRTL()&&(b.offset={vertical:1,horizontal:11}),this._popup=this._createPopup(this._container,b),this._popup.addEventListener("clickedOutsidePopup",this,"_hideMenu"),this._popup.addEventListener("focusOutside",this,"_hideMenu")},_getLoading:function(){var a=this._createLoading();return a},setInactiveSearchEnabled:function(a){this._isInactiveSearchEnabled=a,this._findUser.setInactiveEmployeeSearchEnabled(this._isInactiveSearchEnabled)},setPhotoDisabled:function(a){this.isPhotoDisabled=a},setHaveMiddleNamePermission:function(a){this._isHaveMiddleNamePermission=a},setIdToPhotoModMap:function(a){this._idToPhotoModMap=a?a:null},setPeopleLinks:function(c){this._data=c,this.setPhotoDisabled(c.photoDisabled),this.setInactiveSearchEnabled(c.inactiveSearchEnabled),this.setHaveMiddleNamePermission(c.haveMiddleNamePermission),this.setIdToPhotoModMap(c.idToPhotoModMap);var d=[];this._resetSelectList();var e=this._data.groups||b;if(this._data)for(var f,g=0,h=e.length;g<h;g++)f=e[g],this._data[f]&&this._getPeopleNavGroupItems(d,{groupName:f,groupTitle:this._data[f].title||a[f],groupHeaderCss:"groupHeader first"});this._links=d,this._isPopupOpen()&&(this.renderLinks(),this._popup.reposition(),this._container.setWidth())},setSearchLinks:function(a,b){this._resetSelectList(),a=a?a:{},this._searchTokens=b||"";var c=[];a.result&&this._getNavLink(a.result,c),this._links=c,this.renderLinks(),this._popup.reposition(),this._container.setWidth()},_resetSelectList:function(){this._selectableItems=[],this._selectedIndex=-1,this._container&&this._container.setSelectedIndex(this._selectedIndex)},_cleanSearchResults:function(){this._links=[],this._searchTokens=""},moveFocusUp:function(){0<this._selectedIndex&&this.focusTo(this._selectedIndex-1)},moveFocusDown:function(){this._selectedIndex<this._selectableItems.length-1&&this.focusTo(this._selectedIndex+1)},focusTo:function(a){0<=this._selectedIndex&&this._selectedIndex<this._selectableItems.length&&this._selectableItems[this._selectedIndex].setFocus(!1),this._selectedIndex=a;var b=this._selectableItems[this._selectedIndex];b.setFocus(!0),this._container.scrollTo(b),this._container.setSelectedIndex(this._selectedIndex),SFDom.setFocus(b.id+"_link")},selectFocus:function(){0<=this._selectedIndex&&this._selectedIndex<this._selectableItems.length&&this._selectableItems[this._selectedIndex].selectUser()},renderLinks:function(){this._container.setLinks(this._links),this._container.reRenderLinks()},_setPhotoModToEmployeePhotoInfo:function(a){var b=this._idToPhotoModMap;b&&b[a.userId]&&(a.photoMod=b[a.userId])},_getNavLink:function(a,b){if(0<a.length)for(var c,d=0;d<a.length;d++){c=a[d],this._setPhotoModToEmployeePhotoInfo(c);var e={photoDisabled:this.isPhotoDisabled,highlight:this._searchTokens,isHaveMiddleNamePermission:this._isHaveMiddleNamePermission},f=this._createEmployeePhotoNameOptions(c,e);f.addEventListener("personSelected",this,"dispatchEvent"),f.addEventListener("focus",this,"_focusFindUser"),b.push(f),this._selectableItems.length==this._selectedIndex&&f.setFocus(!0),this._selectableItems.push(f)}else{var f=new SFSpan("&#160;");f._escapeHTML=!1,b.push(f)}},_getPeopleNavGroupItems:function(a,b){b=b?b:{};var c=b.groupName,d=b.groupHeaderCss,e=b.isLastGroup;if(c){var f=b.groupTitle,g=this._data[c],h=new SFSpan(f);h.setCSSClass(d),a.push(h),this._getNavLink(g,a),e&&1<a.length&&"function"==typeof a[a.length-1].setLast&&a[a.length-1].setLast()}},showMenu:function(a){var b=juic.$(this.id);b&&(b.className="floatleft SFPeopleSelectIcon toggle"),this._popup.show(a),SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this);var c=this,d=null;clearInterval(this._intervalId),this._intervalId=setInterval(function(){var b=SFDom.getXY(a);d=d||b,(b[0]!=d[0]||b[1]!=d[1])&&c._hideMenu()},500);var c=this;setTimeout(function(){c._findUser&&(c._focusFindUser(),c._container.setWidth())},200),this.dispatch("showMenu")},setRefocusId:function(a){this._popup.setRefocusId(a)},_focusFindUser:function(){this._findUser.setFieldFocus()},_hideMenu:function(){this._popup&&this._popup.hide(),SFDOMEvent.removeListener(window.document,"keydown",this._onWindowKeyDown,this);var a=juic.$(this.id);a&&(a.className="floatleft SFPeopleSelectIcon"),clearInterval(this._intervalId)},_isPopupOpen:function(){return this._popup&&this._popup.isShown()},_onWindowKeyDown:function(a){switch(a=a||window.event,SFDOMEvent.getKeyName(a)){case"ESCAPE":case"TAB":this._hideMenu(),SFDOMEvent.stopEvent(a);break;case"ARROWUP":this.moveFocusUp(),SFDOMEvent.stopEvent(a);break;case"ARROWDOWN":this.moveFocusDown(),SFDOMEvent.stopEvent(a);break;case"RETURN":this.selectFocus(),SFDOMEvent.stopEvent(a);}},_isFindUserFocused:function(){return this._findUser.isFocused()},renderHtml:function(a){a.push("<div class=\"floatleft SFPeopleSelectIcon\" id=\"",this.id,"\"><a href=\"#\" rel=\"noopener\" onclick=\"",this.fireCode("showMenu"),"; return false;\" >&#160;</a></div>")},handleEvent:function(a){switch(a.type){case"setSearchKeyword":this.dispatch("setSearchKeyword",{tokens:a.tokens,inactiveUsers:a.inactiveUsers});}},cleanup:function(){this._popup&&(this._popup.hide(),this._popup.cleanup()),this.unregister()}})})();function SFEmployeePhotoNameOption(a,b){this.register(),this.init(a,b)}(function(){juic.extend(SFEmployeePhotoNameOption,juic.Component,{init:function(a,b){this.userId=a.userId,this._photoDisabled=b.photoDisabled,this._photoDisabled||this._createPicture(a),this._fullName=this._formattedFN=Util.escapeHTML(this._getNameFormatter(a,b.isHaveMiddleNamePermission)),this._inactive=a.inactive||!1,this._highlight=b.highlight,this._highlight&&this._formattedFN&&this._highlightNameForSearch()},_getNameFormatter:function(a,b){return SFNameFormatter.format(a,b)},_createPicture:function(a){this.photo=new SFLazyLoadingPicture(this.userId,a,0,!1)},setLast:function(){this._isLast=!0},renderHtml:function(a){a.push("<div class=\"sfPhotoNameOption "),this._inactive&&a.push(" sfPhotoNameOptionDisabled"),a.push("\" id=\"",this.id,"\" >"),a.push("<a id=\"",this.id,"_link\" href=\"javascript:void(0);\" rel=\"noopener\" class=\"link globalMenuItem "),this._isLast&&a.push(" last"),a.push("\" onclick=\"",this.fireCode("_click"),";return false;\" onfocus=\"",this.fireCode("_focusUser"),"\" >"),this._photoDisabled||(this.photo.renderHtml(a),a.push("&#160;&#160;")),a.push("<span class=\"sfPeopleSelectLabel\">",this._formattedFN,"</span></a>"),a.push("</div>")},handleEvent:function(){},setFocus:function(a){this._focus=a;var b=juic.$(this.id+"_link");b&&SFDom[a?"addClass":"removeClass"](b,"fieldFocus")},selectUser:function(){this._click()},_click:function(){this.dispatch("personSelected",{userId:this.userId,fullName:this._fullName})},_focusUser:function(){var a=this;setTimeout(function(){a.dispatch("focus")},0)},cleanup:function(){this.unregister()},_highlightNameForSearch:function(){var a=this._formattedFN,b=Util.escapeHTML(this._highlight),c=b.indexOf(",");if(-1!=c){var d=b.substring(0,c);this._formattedFN=this._replaceMatchWithHighlightMarkup(a,d.trim());var e=b.substring(c+1);this._formattedFN=this._replaceMatchWithHighlightMarkup(this._formattedFN,e.trim())}else this._formattedFN=this._replaceMatchWithHighlightMarkup(a,b)},_replaceMatchWithHighlightMarkup:function(a,b){var c=a||"";if(b&&a){var d=new RegExp(RegExp.escape(b),"i");c=a.replace(d,function(a){return["<strong>",a,"</strong>"].join("")})}return c}})})();function SFProfileAccessDenied(){this.register()}(function(){juic.extend(SFProfileAccessDenied,juic.Component,{renderHtml:function(a){a.push("<div class='accessdeniedBox'>"+MSGS.COMMON_PEOPLE_SELECT_NO_ACCESS+"</div>")}})})();