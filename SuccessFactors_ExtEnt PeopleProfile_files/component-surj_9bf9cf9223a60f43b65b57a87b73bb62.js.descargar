(function(a){function b(a){this._control=a,this.register()}function c(a,b){return a+b.substring(0,1).toUpperCase()+b.substring(1)}juic._idCharacter="_",sap.sf.surj.core.Control.setGlobalLibraryRBName(sap.sf.surj.core.Control.BIZX_LIBRARY_RB),a.sap.declare("sap.sf.juic.core.Component"),a.sap.declare("sap.sf.juic.surj.Wrapper"),sap.sf.surj.core.Control.extend("sap.sf.juic.core.Component",{metadata:{abstract:!0},renderer:function(a,b){a.write(b.renderHtml())},createComponent:function(){throw"sap.sf.juic.core.Component: Must override createComponent"},renderHtml:function(){this._initializeComponent();var a=this._renderContext=juic.createRenderContext();return a.push(this._component),a.join("")},getComponent:function(){return this._component},handleChange:function(a){if(this._component&&!this._bSynchModel){var b=a.getParameters(),d=c("set",b.name);"function"==typeof this._component[d]&&this._component[d](b.newValue)}},synchronizeProperties:function(){var a=this.getMetadata().getProperties();for(var b in a){var d=this._component[c("get",b)];if("function"==typeof d){var e=d.call(this._component),f=this.getProperty(b);f!==e&&this.setProperty(b,e,!0)}}},onAfterRendering:function(){var a=Math.pow;if(this._renderContext)this._renderContext.dispatch("afterRender"),delete this._renderContext._events,delete this._renderContext;else{var b=this;if(this._renderTimeouts=(this._renderTimeouts||0)+1,juic.Logger.error("[SURJ] After rendering called but no context, attempt "+this._renderTimeouts),5>=this._renderTimeouts){var c=5*a(2,this._renderTimeouts-1);window.setTimeout(function(){b.onAfterRendering()},c)}}},handleEvent:function(a){this.synchronizeProperties(),this.fireEvent(a.type,a)},destroy:function(){this._super(),this._component&&(this._component.cleanup(),delete this._component)},_initializeComponent:function(){if(!this._component){var a=this,b=juic._nextId=this.getId();this._component=this.createComponent(),this._component.setId(b),delete juic._nextId,this._component.registerAutomationName=function(b,c){a.registerAutomationName(b,c)};var c=this.getMetadata().getEvents();if(c)for(var d in c)this._component.addEventListener(d,this);this.attachEvent("_change",this.handleChange,this)}}}),sap.sf.juic.core.Component.extend=function(){var a=sap.sf.juic.core.Component.extend;return function(){var b=a.apply(sap.sf.juic.core.Component,arguments),c=b.prototype;return b.getMetadata().getPublicMethods().forEach(function(a){c[a]=c[a]||function(){return this._initializeComponent(),this._component[a].apply(this._component,arguments)}}),b}}(),sap.sf.juic.core.Component.extend("sap.sf.juic.surj.Wrapper",{createComponent:function(){var a=this.getContent();return a.setId(this.getId()),a},renderer:{},metadata:{properties:{content:{type:"sap.sf.juic.ComponentType",defaultValue:null}}},destroy:function(){this.getContent().cleanup()}}),a.sap.declare("sap.sf.juic.ComponentType"),sap.sf.juic.ComponentType=sap.ui.base.DataType.createType("sap.sf.juic.ComponentType",{defaultValue:null,isValid:function(a){return a instanceof juic.Component}}),juic.addRenderer(sap.ui.core.Control,function(a,c){this.push(new b(c))}),juic.extend(b,juic.Component,{renderHtml:function(a){a.push("<span id=\"",this.id,"\"></span>"),a.addAfterRenderListener(this,"afterRender")},afterRender:function(){var b=juic.$(this.id);this._control.placeAt(b),a(b).children().unwrap(b),this.cleanup()}})})(jQuery);