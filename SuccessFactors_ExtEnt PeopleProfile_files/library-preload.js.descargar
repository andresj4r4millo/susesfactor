sap.ui.predefine('sap/extent/uilib/HoursAndMinutes',['jquery.sap.global','sap/m/InputBase','sap/m/MaskInput','sap/m/MaskInputRule','sap/ui/core/EnabledPropagator'],function(q,I,M,a,E){"use strict";var H=M.extend("sap.extent.uilib.HoursAndMinutes",{metadata:{library:"sap.extent.uilib",properties:{maxHour:{type:"int",group:"Misc",defaultValue:24}},aggregations:{}}});E.call(H.prototype);H.prototype.init=function(){var m=new a({maskFormatSymbol:"5",regex:"[0-5]"});this.addRule(m);var o=new a({maskFormatSymbol:"9",regex:"[0-9]"});this.addRule(o);var b=new a({maskFormatSymbol:"X",regex:"[0-9 ]"});this.addRule(b);M.prototype.init.call(this);};H.prototype.onBeforeRendering=function(){var m=this.getProperty("maxHour");var b=m.toString().length;var s="9:59";for(var i=1;i<b;i++){s="X"+s;}this.setMask(s);var v=this.getValue();if(v){this._addLeadingZeros(v);this.setValue(v);}M.prototype.onBeforeRendering.call(this);};H.prototype._addLeadingZeros=function(v){while(v.length<this.getMask().length){v=" "+v;}return v;};H.prototype.setValue=function(v){if(this.getEditable()&&this.getEnabled()){v=this._addLeadingZeros(v);}M.prototype.setValue.call(this,v);};H.prototype.onChange=function(e){var v=e.value;if(this.getEditable()&&this.getEnabled()&&(!v||v.indexOf("_"))>=0){var f="hh:mm";var m=this.getProperty("maxHour");for(var i=2;i<m.toString().length;i++){f="h"+f;}this.setValueState(sap.ui.core.ValueState.Error);this.setValueStateText(sap.ui.getCore().getModel("i18n").getResourceBundle().getText("ECT_PP3_HOURS_AND_MINUTES_INVALID",f));this.fireChangeEvent(v,{valid:false});return false;}else{this.setValueState(sap.ui.core.ValueState.None);this.fireChangeEvent(v,{valid:true});}return true;};H.prototype._feedReplaceChar=function(c,p,C){var h=this.getMask().indexOf(":");var m=this.getProperty("maxHour");if(p===0){if(m.toString().substring(0,1)<c){return" "+c;}}else if(p<h){var s=C.substring(0,h).replace(/_/g,"0");var n=s.substring(0,p)+c+s.substring(p+1,h);if(n>m){return m.toString().substring(p)+":00";}}else{var b=C.substring(0,h).replace(/_/g,"0");if(b===m.toString()){return"0";}}return c;};return H;});sap.ui.predefine('sap/extent/uilib/TagRenderer',["jquery.sap.global"],function(q){"use strict";var T={};T.render=function(r,c){if(!c.getVisible()){return;}r.write("<div tabindex=\"-1\"");r.writeControlData(c);r.addClass("sapExtentUilibTag");r.writeClasses();var t=c.getTooltip_AsString();if(t){r.writeAttributeEscaped("title",t);}r.write(">");T._renderInnerControl(r,c);if(c.getEditable()){r.renderControl(c.getAggregation("deleteIcon"));}r.write("</div>");};T._renderInnerControl=function(r,c){r.write("<span>");r.renderControl(c.getAggregation("tagLink"));r.write("</span>");};return T;},true);sap.ui.predefine("sap/extent/uilib/util/position/PositionHelper",["sap/ui/core/Fragment"],function(F){var P={};P.ShowUI5IncumentsDialog=function(c){var t=this;return new Promise(function(r,a){t._checkConfig(c);var j=new sap.ui.model.json.JSONModel();F.load({name:"sap.extent.uilib.util.position.view.PositionSync",type:"XML",}).then(function(d){d.setModel(j,"IncumbentsModel");d.getButtons()[1].attachPress(function(e){e.getSource().getParent().close();});var h=d.getButtons()[0];h.attachPress(function(e){F.load({name:"sap.extent.uilib.util.position.view.HelpPopOver",id:d.getId(),type:"XML",}).then(function(H){H.getEndButton().setText(MSGS.COMMON_Close);H.getEndButton().attachPress(function(e){e.getSource().getParent().getParent().close();});var C=MSGS.ORGCHART_SYNC_INC_POPUP_Text_Help_Name;C=C.replace(/<\/br>/g,"<br/>");C=C.replace(/<b>/g,"<strong>");C=C.replace(/<\/b>/g,"<strong/>");C=C.replace(/<i>/g,"<em>");C=C.replace(/<\/i>/g,"<em/>");H.getContent()[0].setHtmlText(C);H.openBy(h);});});d.attachBeforeClose(function(e){var B=e.getSource().getButtons();t._resetPressEvents([B[2],B[3]]);});d.attachAfterClose(function(){d.destroy();});var p="";var b;var i=c.incumbentsToBeSynced;var D=PositionService.DateFormatterServer.format(c.date);t._getPositionIncumbentData(i,D,d);b=MSGS.ORGCHART_SYNC_INC_POPUP_Header_Text;if(t._isOnlySyncInfoPopup(c)){p="150px";}else{p="350px";}t._resetDialogIncumbents(d);t._enableSyncButtons(c,d);d.setTitle(b);d.setContentWidth("300px");d.setContentHeight(p);d.getContent()[0].setHtmlText(MSGS.ORGCHART_SYNC_INC_POPUP_Text_Header.replace("<i>{0}</i>","<em>"+PositionService.formatServerDateStringToUserDateString(c.date)+"</em>"));d.open();r(d);});});};P._getPositionIncumbentData=function(i,d,D){var a={callback:function(o){this._createAndSetIncumbentsModel(o,D);}.bind(this),exceptionHandler:function(e){sap.extent.uilib.util.EditFormGeneratorHelper.displayBackendResponse(e,null,this);},};smrfLazyLoader.getControllerInstance("positionOrgChartController","hris","getIncumbentInformation",[i,d,a]);};P._checkConfig=function(c){assert(PositionService.DateFormatterServer.parse(c.date)!=null,"Invalid date provided.");};P._createAndSetIncumbentsModel=function(d,D){var m=D.getModel("IncumbentsModel");if(d&&d.length!==0){d.forEach(function(i){i.fte="FTE: "+i.fte;});m.setData(d);}};P._resetDialogIncumbents=function(d){d.getModel("IncumbentsModel").setData(null);};P._isOnlySyncInfoPopup=function(c){return!!(c.incumbentsActualAssigned.length>0&&c.incumbentsToBeSynced.length==0);};P._enableSyncButtons=function(c,d){var b=d.getButtons();b[0].setTooltip(MSGS.COMMON_Help);if(this._isOnlySyncInfoPopup(c)){b[1].setVisible(false);b[2].setVisible(true);b[2].setText(MSGS.COMMON_Ok);b[3].setVisible(false);}else{b[1].setVisible(true);b[1].setText(MSGS.COMMON_Cancel);b[2].setVisible(true);b[2].setText(MSGS.COMMON_No);b[3].setVisible(true);b[3].setText(MSGS.COMMON_Yes);}};P._resetPressEvents=function(b){b.forEach(function(B){var f=null;var l=null;if(B.mEventRegistry.press&&B.mEventRegistry.press.length!==0){B.mEventRegistry.press.forEach(function(e){f=e.fFunction;l=e.oListener;B.detachEvent("press",f,l);});}});};return P;});sap.ui.predefine('sap/extent/uilib/util/position/controller/PositionSync.controller',["sap/ui/core/mvc/Controller"],function(C){"use strict";return C.extend("sap.extent.uilib.util.position.controller.PositionSync",{onInit:function(){},onBeforeRendering:function(){},onAfterRendering:function(){},_getPositionIncumbentData:function(i,d){var D=new jQuery.Deferred();var a={callback:function(b){D.resolve(b);},exceptionHandler:function(e){D.reject(e);}};D.done(jQuery.proxy(function(o){this._createAndSetIncumbentsModel(o);},this));smrfLazyLoader.getControllerInstance("positionOrgChartController","hris","getIncumbentInformation",[i,d,a]);},_createAndSetIncumbentsModel:function(d){var m=this.oDialog.getModel("IncumbentsModel");if(d&&d.length!==0){m.setData(d);}}})});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5/OpenUI5)
 * (c) Copyright 2009-2014 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/extent/uilib/SFObjectPageLayoutRenderer',['jquery.sap.global','sap/ui/core/Renderer','sap/uxap/ObjectPageLayoutRenderer'],function(q,R,O){"use strict";var S=R.extend(O);return S;},true);sap.ui.require.preload({"sap/extent/uilib/fragments/addressValidation.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog contentHeight="400px" contentWidth="75%" horizontalScrolling="false" verticalScrolling="true" icon="sap-icon://validate" title="Validation Response" class="sapExtentUilibEditDialog"><content><FormattedText htmlText="{/message}"/><List items="{path:\'/addrSuggList\'}" includeItemInSelection="true" class="sapExtentUilibFormPatternSubsequentBlock" showNoData="false"><items><CustomListItem><HBox><RadioButton text="{suggAddrSelection}" select="onSelectAddressOption" class="addressValidationRadio"/><Text text="{suggAddrSingleAddress}"><layoutData><FlexItemData growFactor=".5"/></layoutData></Text><Input width="150px" visible="{= ${showTextBox} === true }" value="{rangeSelection}" tooltip="{textBoxPlaceHolder}" placeholder="{textBoxPlaceHolder}" valueState="{path:\'showTextBoxAsError\',formatter:\'.displayErrorValidation\'}" valueStateText="{textBoxErrorToolTip}"/></HBox></CustomListItem></items></List></content><buttons><Button text="{i18n&gt;EMPFILE_HRIS_IGNORE_MATCH}" press="onCloseAddressValidation" visible="{= ${/status} === \'SUCCESS\' }"/><Button text="{i18n&gt;ECT_NEWHIRE_CONTINUE}" press="onValidateAddress" type="Emphasized" visible="{= ${/status} === \'SUCCESS\' }"/><Button text="{i18n&gt;COMMON_Close}" press="onCloseAddressValidation" type="Emphasized" visible="{= ${/status} === \'ERROR\' }"/></buttons></Dialog></core:FragmentDefinition>',"sap/extent/uilib/manifest.json":'{"_version":"1.9.0","sap.app":{"id":"sap.extent.uilib","type":"library","embeds":[],"applicationVersion":{"version":"1.0.2-SNAPSHOT"},"title":"sap.extent.uilib","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.93","libs":{}},"library":{"i18n":false,"css":false,"content":{"controls":[],"elements":[],"types":["sap.extent.uilib.ChartType"],"interfaces":[]}}}}',"sap/extent/uilib/util/position/view/HelpPopOver.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><ResponsivePopover class="sapUiPopupWithPadding" placement="Bottom"><endButton><Button/></endButton><content><FormattedText/></content></ResponsivePopover></core:FragmentDefinition>',"sap/extent/uilib/util/position/view/PositionSync.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ex="sap.extent.uilib" xmlns:mvc="sap.ui.core.mvc"><Dialog title="" contentWidth="96%" contentHeight="96%" stretchOnPhone="true" initialFocus="syncInfoLabel"><content><FormattedText id="syncInfoLabel" class="sapUiTinyMargin" wrapping="true"/><List id="idList" items="{path:\'IncumbentsModel&gt;/\'}"><items><CustomListItem><ex:EmployeeCard id="" userID="{IncumbentsModel&gt;userId}" name="{IncumbentsModel&gt;incumbentName}" role="{IncumbentsModel&gt;jobTitle}" additionalText="{IncumbentsModel&gt;fte}" company="{IncumbentsModel&gt;fte}" class="sapUiSmallMarginBegin sapUiSmallMarginTop sapUiSmallMarginBottom" width="150px"/></CustomListItem></items></List></content><buttons><Button visible="true" icon="sap-icon://sys-help" type="Transparent"/><Button visible="false" text="Cancel"/><Button visible="false" text="No" press="onDialogNoButton"/><Button visible="false" text="Yes" press="onDialogSubmitButton"/></buttons></Dialog></core:FragmentDefinition>',"sap/extent/uilib/AdditionalAddresses.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
jQuery.sap.declare("sap.extent.uilib.AdditionalAddresses");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.AdditionalAddresses",{metadata:{library:"sap.extent.uilib",properties:{linkText:{type:"string",group:"Misc",defaultValue:null},addressList:{type:"object",group:"Misc",defaultValue:null}}}});sap.extent.uilib.AdditionalAddresses.prototype.init=function(){this.oLink=new sap.m.Link({press:jQuery.proxy(this.openPopover)});this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.AdditionalAddresses.prototype.openPopover=function(){if(!this.oResponsivePopover){this.oResponsivePopover=new sap.m.ResponsivePopover({afterClose:jQuery.proxy(this.onAfterClose,this),showHeader:false});}if(!(this.oResponsivePopover.isOpen())){if(!this.oLayout){var l=new sap.ui.layout.VerticalLayout({width:'100%'});}var a=this.getAddressList().length;var b=this.getAddressList();for(var i=0;i<a;i++){var A=new sap.m.Label({width:'10em',text:b[i].street});var o=new sap.m.Label({width:'10em',text:b[i].cityName});var c=new sap.m.Label({width:'10em',text:b[i].region});var d=new sap.m.Label({text:this.oBundle.getText("ECT_PP3_ALTERNATIVE_LANGUAGE_LABEL")});l.addContent(d);l.addContent(A);l.addContent(o);l.addContent(c);}this.oResponsivePopover.addContent(l);this.oResponsivePopover.addStyleClass("sapExtentUilibAdditionalAddressesPopover");this.oResponsivePopover.openBy(this.oLink);}};sap.extent.uilib.AdditionalAddresses.prototype.onAfterRendering=function(){if(!(this.getAddressList()==null)){var l=this.getAddressList().length;if(l>1){this.oLink.setText(" "+l+" "+this.oBundle.getText("ECT_PP3_ALTERNATIVE_LANGUAGES"));}else if(l<=1){this.oLink.setText(" "+l+" "+this.oBundle.getText("ECT_PP3_ALTERNATIVE_LANGUAGE"));}this.oLink.addStyleClass("sapExtentUilibAdditionalAddressesHelpIcon");}sap.extent.uilib.AdditionalAddresses.prototype.onAfterClose=function(){this.oResponsivePopover.destroyContent();};sap.extent.uilib.AdditionalAddresses.prototype.onExit=function(){this.oResponsivePopover.destroy();this.oLink.destroy();};};},"sap/extent/uilib/AdditionalAddressesRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.AdditionalAddressesRenderer");sap.extent.uilib.AdditionalAddressesRenderer={};sap.extent.uilib.AdditionalAddressesRenderer.render=function(r,c){r.write("<span");r.writeControlData(c);r.addClass("sapExtentUilibAdditionalAddresses");r.writeClasses();r.write(">");r.renderControl(c.oLink);r.renderControl(c.oResponsivePopover);r.write("</span>");};},"sap/extent/uilib/AdvancesChart.js":function(){jQuery.sap.declare("sap.extent.uilib.AdvancesChart");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.extent.uilib.MaskableCore");jQuery.sap.require('sap.ui.thirdparty.d3');jQuery.sap.require('sap.m.ObjectNumber');jQuery.sap.require("sap.ui.core.format.NumberFormat");sap.extent.uilib.MaskableCore.extend("sap.extent.uilib.AdvancesChart",{metadata:{library:"sap.extent.uilib",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"280px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"66px"},advancesAmount:{type:"float",group:"Misc"},totalAmount:{type:"string",group:"Misc"},currencyCode:{type:"string",group:"Misc"},totalLabel:{type:"string",group:"Misc"},amountLabel:{type:"string",group:"Misc"}}}});sap.extent.uilib.AdvancesChart.prototype.init=function(){this.chartSvg=null;if(sap.ui.Device.system.phone){this.setWidth("18.75em");this.setHeight("7.56em");}if(sap.ui.Device.system.tablet){this.setWidth("34.375em");this.setHeight("7.56em");}};sap.extent.uilib.AdvancesChart.prototype.onAfterRendering=function(){if(this._render()===true){if(sap.ui.Device.system.desktop){jQuery(window).bind('resize',jQuery.proxy(this._onResize,this));}}};sap.extent.uilib.AdvancesChart.prototype.onBeforeRendering=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._deregisterEvent();};sap.extent.uilib.AdvancesChart.prototype._deregisterEvent=function(){if(sap.ui.Device.system.desktop){jQuery(window).unbind('resize',jQuery.proxy(this._onResize,this));}else{sap.ui.Device.resize.detachHandler(this._onResize,this);}};sap.extent.uilib.AdvancesChart.prototype._onResize=function(){'use strict';var p=this.$().parent().parent().parent().width();d3.select(this.chartSvg.node().parentNode).style('width',p).style('height',Math.round(p*this.iHeight/this.iWidth));};sap.extent.uilib.AdvancesChart.prototype._getAdvancesChart=function(){var c=544.96,a=168;var t=1000;function _(s){return function(d){return Math.abs(s(d.value));};}function A(g){g.each(function(d,i){var g=d3.select(this);var p=-13,b=2,e=2,f=20,h=8;var j=c-b-e;if(sap.ui.Device.system.phone){j=c-h;}if(sap.ui.Device.system.tablet){j=c-h;}var k=Math.ceil(a*0.23);var l=k+10;var v=21;g.attr('transform','translate('+b+','+p+')');var m=false;if(d.ranges[0].value===0){d.ranges[0].value=888888;d.values[0].formatedTotal='';m=true;}var r=d.ranges;var n=d.values;var o=r.length,q=r[o-1].value;var x=d3.scale.linear().domain([q,r[0].value]).range([0,j]);var s=this.__chart__||d3.scale.linear().domain([q,Infinity]).range(x.range());this.__chart__=x;var w=_(s),u=_(x);var y=[r[0].value];var z=[];var B=m?"":n[0].currencyCode;z.push({xPos:x(r[0].value),anchor:"Right",label:n[0].formatedTotal+" "+B,labelLine:n[0].totalLabel});for(var C=1;C<o-1;C++){z.push({xPos:x(r[C].value),anchor:(r[C].value<r[0].value/2)?"":"Right",up:true,label:n[0].amountLabel});}var D=g.selectAll('text.sapExtentUilibMaskableCoreRangeText').data(z);var E=3;var G=9;var F=5;D.enter().append('text').attr('class',function(d){return(d.anchor)?'sapExtentUilibMaskableCoreRangeText sapExtentUilibTextRight':'sapExtentUilibMaskableCoreRangeText sapExtentUilibTextLeft';}).attr('x',function(d){return(d.xPos-E)+((d.up&&(!d.anchor))?F:0);}).attr('y',function(d){return d.up?v+G-F:f+l+v+G;}).text(function(d){return d.label;});D.enter().append('text').attr('class',function(d){return(d.anchor)?'sapExtentUilibMaskableCoreRangeText sapExtentUilibTextRight':'sapExtentUilibMaskableCoreRangeText sapExtentUilibTextLeft';}).attr('x',function(d){return d.xPos-E;}).attr('y',function(d){return d.up?G:l+v+G+F;}).text(function(d){return d.labelLine;});var H=g.selectAll('rect.sapExtentUilibMaskableCoreRect').data(y).enter().append('rect').attr('class','sapExtentUilibMaskableCoreRect').attr('width',s).attr('height',k).attr('y',v+10);if(m){H.style('fill',"#d8d8d8");}H.transition().duration(t).attr('width',x);if(n[0].value>=r[o-1].value){var I=n;if(n[0].value>r[0].value){I[0].value=r[0].value;}var J=g.selectAll('rect.sapEBValue').data(I);J.enter().append('rect').attr('class','sapEBValue sapExtentUilibMaskableCoreRangeBackground').attr('width',function(d){return s(d.value);}).attr('height',k).style('fill',function(d){if(d.hcbThemeEnabled)return"rgb(92,186,230)";}).attr('y',v+10);J.transition().duration(t).attr('width',function(d){return x(d.value);});}var K=g.selectAll('line.sapEBRangeTick').data(r.splice(0,2));var L=6;K.enter().append('line').attr('class','sapEBRangeTick').attr('x1',w).attr('y1',function(d){return(d.max)?(v+10):v-6;}).attr('x2',w).attr('y2',function(d){return(d.max)?(l+v+16):(l+v);});K.transition().duration(t).attr('x1',u).attr('x2',u);g.append('text').attr('class',(z[1].anchor)?'sapExtentUilibMaskableCoreLabelReverse sapExtentUilibTextRight':'sapExtentUilibMaskableCoreValueLabel sapExtentUilibTextLeft').attr('dx',(z[1].anchor)?Math.max(L,z[1].xPos-E):z[1].xPos+E).attr('y',(k/2)+11+v).attr("dy","0.25em").text(n[0].label+' '+n[0].currencyCode);});d3.timer.flush();}A.width=function(x){if(!arguments.length){return c;}c=x;return A;};A.height=function(x){if(!arguments.length){return a;}a=x;return A;};return A;};sap.extent.uilib.AdvancesChart.prototype._render=function(){if(!this.getVisible()){this.setVisible(false);return;}var b=sap.ui.getCore().getModel("i18n").getResourceBundle();var n=sap.ui.core.format.NumberFormat.getFloatInstance({groupingEnabled:true});var t=this.getTotalLabel()||b.getText('ECT_HRIS_JI_TOTAL_AMOUNT');var a=this.getAmountLabel()||b.getText('ECT_PP3_AMOUNT_PAID');var h=(window.pageHeaderJsonData&&window.pageHeaderJsonData.accessibilityPreferences&&window.pageHeaderJsonData.accessibilityPreferences.lowVisionType==='dark')?true:false;var d=[{"ranges":[{value:this.getTotalAmount(),max:true},{value:this.getAdvancesAmount()},{value:0}],"values":[{value:this.getAdvancesAmount(),label:n.format(this.getAdvancesAmount()),hcbThemeEnabled:h,currencyCode:this.getCurrencyCode(),formatedTotal:n.format(this.getTotalAmount()),totalLabel:t,amountLabel:a}]}];var w,H;w=this.$().outerWidth();H=this.$().outerHeight();if(sap.ui.Device.system.phone){w=288;H=H+18;}if(sap.ui.Device.system.tablet){w=280;H=H+18;}w=w||400;H=H||250;var c=document.getElementById(this.getId());this.chartSvg=d3.select(c).append('svg').attr('class','sapExtentUilibMaskableBox').attr('width',w).attr('height',H).attr('preserveAspectRatio','xMidYMid').attr('viewBox','0 0 '+w+' '+H);this.chart=this._getAdvancesChart().width(w).height(H);this.chartSvg.selectAll('g').data(d).enter().append('g').call(this.chart);return true;};},"sap/extent/uilib/AdvancesChartRenderer.js":function(){jQuery.sap.require("sap.extent.uilib.MaskableCoreRenderer");jQuery.sap.declare("sap.extent.uilib.AdvancesChartRenderer");sap.extent.uilib.AdvancesChartRenderer=sap.ui.core.Renderer.extend(sap.extent.uilib.MaskableCoreRenderer);sap.extent.uilib.AdvancesChartRenderer.renderContent=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibAdvancesChart");r.writeClasses();r.addStyle('width',c.getWidth());r.addStyle('height',c.getHeight());r.writeStyles();r.write(">");r.write("</div>");};},"sap/extent/uilib/AlternateSectionLayout.js":function(){jQuery.sap.declare("sap.extent.uilib.AlternateSectionLayout");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.layout.VerticalLayout");jQuery.sap.require("sap.extent.uilib.util.EditFormGeneratorHelper");sap.ui.layout.VerticalLayout.extend("sap.extent.uilib.AlternateSectionLayout",{metadata:{library:"sap.extent.uilib",properties:{addAlternateSectionText:{type:"string",group:"Misc",defaultValue:null}},aggregations:{_addAlternateSectionButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"}}}});jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.ButtonType");sap.extent.uilib.AlternateSectionLayout.prototype.init=function(){if(sap.ui.layout.VerticalLayout.prototype.init){sap.ui.layout.VerticalLayout.prototype.init.apply(this);}this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._oAddAlternateSectionButton=null;this._aHiddenContent=[];};sap.extent.uilib.AlternateSectionLayout.prototype._getAddAltnernateSectionButton=function(){if(!this._oAddAlternateSectionButton){this._oAddAlternateSectionButton=new sap.m.Button({type:sap.m.ButtonType.Transparent,icon:"sap-icon://add",text:this.getAddAlternateSectionText()||this._oBundle.getText("ECT_PP3_ADD_ALT_LANGUAGE"),press:[this._handleAddAlternateSection]});this._oAddAlternateSectionButton.addStyleClass("sapExtentUilibAlternateSectionLayoutAddAlternateButton");this.setAggregation("_addAlternateSectionButton",this._oAddAlternateSectionButton,true);}return this._oAddAlternateSectionButton;};sap.extent.uilib.AlternateSectionLayout.prototype._handleAddAlternateSection=function(){if(this._aHiddenContent.length>0){var c=this._aHiddenContent.shift();this.addContent(c,true);}this._getAddAltnernateSectionButton().setVisible(this._aHiddenContent.length!==0);};sap.extent.uilib.AlternateSectionLayout.prototype.hideContent=function(c){var C=this._aHiddenContent.indexOf(c);if(C>0){this._aHiddenContent.splice(C,1);}this.removeContent(c);this._aHiddenContent.push(c);this._getAddAltnernateSectionButton().setVisible(true);};sap.extent.uilib.AlternateSectionLayout.prototype.addContent=function(n,a){if(n instanceof sap.m.Panel&&n.getHeaderToolbar()&&!sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(n,"hideContentAttached")){n.addStyleClass("sapExtentUilibAlternateSectionLayoutContent");var h=n.getHeaderToolbar();if(h.getContent().length>0){var l=h.getContent()[h.getContent().length-1];if(l instanceof sap.m.Button){sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(n,"hideContentAttached",true);var _=n;l.unbindProperty("visible");l.setVisible(true);l.attachPress(function(e){this.hideContent(_);},this);}}}if(!a){this._aHiddenContent.push(n);}else{if(sap.ui.layout.VerticalLayout.prototype.addContent){sap.ui.layout.VerticalLayout.prototype.addContent.apply(this,[n]);}}this._getAddAltnernateSectionButton().setVisible(this._aHiddenContent.length!==0);return this;};sap.extent.uilib.AlternateSectionLayout.prototype.removeAllContent=function(){if(sap.ui.layout.VerticalLayout.prototype.removeAllContent){sap.ui.layout.VerticalLayout.prototype.removeAllContent.apply(this);}for(var i=0;i<this._aHiddenContent.length;i++){this._aHiddenContent[i].destroy();}this._aHiddenContent=[];};},"sap/extent/uilib/ArcChart.js":function(){jQuery.sap.declare("sap.extent.uilib.ArcChart");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.ArcChart",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},height:{type:"int",group:"Misc",defaultValue:120},width:{type:"int",group:"Misc",defaultValue:120},backgroundColor:{type:"sap.ui.core.CSSColor",group:"Misc",defaultValue:''},foregroundColor:{type:"sap.ui.core.CSSColor",group:"Misc",defaultValue:''},value:{type:"int",group:"Misc",defaultValue:0},autoResize:{type:"boolean",group:"Misc",defaultValue:false},needOpenCompleteforPP3:{type:"boolean",group:"Misc",defaultValue:false}}}});jQuery.sap.require("sap.ui.thirdparty.d3");sap.extent.uilib.ArcChart.prototype.onAfterRendering=function(){if(this._render()===true&&this.getAutoResize()){if(sap.ui.Device.system.desktop){jQuery(window).bind('resize',jQuery.proxy(this._onResize,this));}else{sap.ui.Device.orientation.attachHandler(this._onResize,this);sap.ui.Device.resize.attachHandler(this._onResize,this);}}if(this.getNeedOpenCompleteforPP3()){this.addOpenCompleteWizardEventforPP3();}};sap.extent.uilib.ArcChart.prototype.addOpenCompleteWizardEventforPP3=function(){var p=jQuery(this.getEventingParent().getParent().getDomRef());p.attr({'tabindex':'0'});p.find("a").attr({'tabindex':'-1'});p.addClass("sapExtentUilibArcChartFocus");if(!this.hasAddOpenCompleteWizardEventforPP3){p.click(function(e){e.preventDefault();sap.ui.getCore().getEventBus().publish("peopleProfile","openCompleteWizard",{});});p.keypress(function(e){e.preventDefault();if(e.which==13){sap.ui.getCore().getEventBus().publish("peopleProfile","openCompleteWizard",{});}});}this.hasAddOpenCompleteWizardEventforPP3=true;};sap.extent.uilib.ArcChart.prototype.onBeforeRendering=function(){sap.ui.core.ResizeHandler.deregister(this);};sap.extent.uilib.ArcChart.prototype._deregisterEvent=function(){if(sap.ui.Device.system.desktop){jQuery(window).unbind('resize',jQuery.proxy(this._onResize,this));}else{sap.ui.Device.orientation.detachHandler(this._onResize,this);sap.ui.Device.resize.detachHandler(this._onResize,this);}};sap.extent.uilib.ArcChart.prototype._onResize=function(){var p=this.$().parent().parent().width();this.oChart.style("width",p).style("height",Math.round(p*this.iHeight/this.iWidth));};sap.extent.uilib.ArcChart.prototype._render=function(){if(this.getVisible()===false){return false;}if(this.getWidth()>0){this.iWidth=this.getWidth();}else{this.iWidth=120;}if(this.getHeight()>0){this.iHeight=this.getHeight();}else{this.iHeight=120;}var i="#"+this.getId();var T=2*Math.PI,o=(Math.min(this.iWidth,this.iHeight-6))/2,a=(Math.min(this.iWidth,this.iHeight-14))/2,b=(this.getBackgroundColor()!=="")?this.getBackgroundColor():"#d8d8d8",f=(this.getForegroundColor()!=="")?this.getForegroundColor():"#00BAD6",v=this.getValue();var c=d3.svg.arc().innerRadius(a).outerRadius(o).startAngle(0);this.oChart=d3.select(i).append("svg").attr('preserveAspectRatio','xMidYMid').attr('viewBox','0 0 '+Math.min(this.iWidth,this.iHeight)+' '+Math.min(this.iWidth,this.iHeight)).attr('width',this.iWidth).attr('height',this.iHeight);var C=this.oChart.append("g").attr("transform","translate("+Math.min(this.iWidth,this.iHeight)/2+","+Math.min(this.iWidth,this.iHeight)/2+")");var e=C.append("text").attr("text-anchor","middle").style("font-size",(a-(this.getValue()<100?2:12))+'px').attr("class","sapExtentUilibArcChartText");C.append("path").datum({endAngle:T}).style("fill",b).attr("d",c).attr("class","sapExtentUilibArcChartBackground");function g(j,n){j.attrTween("d",function(d){var k=d3.interpolate(d.endAngle,n);return function(t){d.endAngle=k(t);e.text(Math.round((d.endAngle/T)*100)).append('tspan').style("font-size",(a-2)/2+"px").text('%');return c(d);};});}var h=C.append("path").datum({endAngle:0}).style("fill",f).attr("d",c).attr("class","sapExtentUilibArcChartForeground globalDiagramColor1");h.transition().duration(1500).ease('linear').call(g,(v/100)*T);C.selectAll("text").attr("dy",o/3);return true;};},"sap/extent/uilib/AttachmentButton.js":function(){jQuery.sap.declare("sap.extent.uilib.AttachmentButton");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.ui.core.ValueState");sap.m.Button.extend("sap.extent.uilib.AttachmentButton",{metadata:{library:"sap.extent.uilib",properties:{valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:"sap.ui.core.ValueState.None"},valueStateText:{type:"string",group:"Appearance",defaultValue:""}}},renderer:sap.m.ButtonRenderer});sap.extent.uilib.AttachmentButton.prototype.init=function(){if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.call(this);}this.setType(sap.m.ButtonType.Transparent);this.setIcon("sap-icon://attachment");};sap.extent.uilib.AttachmentButton.prototype.setValueState=function(v){this.setProperty("valueState",v);if(v===sap.ui.core.ValueState.None){this.removeStyleClass("sapExtentUilibFileUploadFixError");}else if(v===sap.ui.core.ValueState.Error){this.addStyleClass("sapExtentUilibFileUploadFixError");}};sap.extent.uilib.AttachmentButton.prototype.setText=function(t){var n=0;if(Array.isArray(t)&&Array.isArray(t[0])){n=t[0].length;}else if(Array.isArray(t)){n=t.length;}else if(t&&typeof t==="object"){n=1;}this.setProperty("text",n);if(n>0){this.setValueState(sap.ui.core.ValueState.None);this.setValueStateText("");}};},"sap/extent/uilib/AudioUploader.js":function(){jQuery.sap.declare("sap.extent.uilib.AudioUploader");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.AudioUploader",{metadata:{library:"sap.extent.uilib",properties:{src:{type:"string",group:"Misc",defaultValue:null},type:{type:"string",group:"Misc",defaultValue:null},src2:{type:"string",group:"Misc",defaultValue:null},type2:{type:"string",group:"Misc",defaultValue:null},fileName:{type:"string",group:"Misc",defaultValue:null},hasChanged:{type:"boolean",defaultValue:false}},events:{audioRemoved:{},refreshAudio:{},saveSuccess:{},saveFailed:{}}}});sap.extent.uilib.AudioUploader.prototype.init=function(){this._oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.sf.peopleprofile.i18n");};sap.extent.uilib.AudioUploader.prototype.getAudioFileNameSizeString=function(){var f;if(this._oSelectedAudio){var e=this._oSelectedAudio.name.substr(this._oSelectedAudio.name.indexOf(".")+1,this._oSelectedAudio.name.length);f=this._oBundle.getText("COMMON_Selected")+" "+e+" "+this._oBundle.getText("EMPFILE_HRIS_MDF_IMPORTEXPORT_FILE")+"("+this._formatBytes(this._oSelectedAudio.size)+")";}return f;};sap.extent.uilib.AudioUploader.prototype.destroy=function(){this._getRemoveButton().destroy();if(sap.ui.core.Control.prototype.destroy){sap.ui.core.Control.prototype.destroy.call(this);}};sap.extent.uilib.AudioUploader.prototype.getAudioFile=function(){return this._oSelectedAudio;};sap.extent.uilib.AudioUploader.prototype._showAudio=function(){var i=document.getElementById(this.getId()+"-audioInput");var f=i.files[0];if(f){this._oSelectedAudio=f;var a=this.getId()+"-fileName";jQuery(this._escapeSpecialCharacters(a)).text(this.getAudioFileNameSizeString());var r=this.getId()+"-removeButton";jQuery(this._escapeSpecialCharacters(r)).removeClass('sapExtentUilibAudioHide');this.setHasChanged(true);}};sap.extent.uilib.AudioUploader.prototype._getUploadButton=function(){if(!this._oUploadButton){this._oUploadButton=new sap.m.Button({text:this._oBundle.getText("EMPFILE_PP3_UPLOAD_AUDIO"),press:[this._launchUploadDialog,this]});}this._oUploadButton.addStyleClass('sapExtentUilibAudioUploadBtn');return this._oUploadButton;};sap.extent.uilib.AudioUploader.prototype._getRemoveButton=function(){if(!this._oRemoveButton){this._oRemoveButton=new sap.m.Button({text:this._oBundle.getText("EMPFILE_PP3_REMOVE_AUDIO"),press:[this._removeAudio,this],id:this.getId()+"-removeButton"});this._oRemoveButton.addStyleClass('sapExtentUilibAudioRemoveBtn');}if(!this.getSrc()){this._oRemoveButton.addStyleClass('sapExtentUilibAudioHide');}return this._oRemoveButton;};sap.extent.uilib.AudioUploader.prototype._launchUploadDialog=function(){var a=this.getId()+"-audioInput";jQuery(this._escapeSpecialCharacters(a)).trigger('click');};sap.extent.uilib.AudioUploader.prototype._removeAudio=function(){this._oSelectedAudio="";var f=this.getId()+"-fileName";jQuery(this._escapeSpecialCharacters(f)).text("");var r=this.getId()+"-removeButton";jQuery(this._escapeSpecialCharacters(r)).addClass('sapExtentUilibAudioHide');var a=this.getId()+"-audioControl";var b=jQuery(this._escapeSpecialCharacters(a));if(b){b.addClass('sapExtentUilibAudioHide');this.fireAudioRemoved();}var e=this.getId()+"-emptyAudioContainer";jQuery(this._escapeSpecialCharacters(e)).removeClass('sapExtentUilibAudioHide');this.setHasChanged(true);};sap.extent.uilib.AudioUploader.prototype.setSources=function(s){var a=document.getElementById(this.getId()+"-audioControl");if(s[0]){a.setAttribute("src",s[0].src);a.setAttribute("type",s[0].type);}if(s[1]){a.setAttribute("src2",s[1].src);a.setAttribute("type2",s[1].type);}};sap.extent.uilib.AudioUploader.prototype.onAfterRendering=function(){var a=this.getId()+"-audioInput";jQuery(this._escapeSpecialCharacters(a)).change(jQuery.proxy(this._showAudio,this));};sap.extent.uilib.AudioUploader.prototype._formatBytes=function(b){if(b<1024){return b+" Bytes";}else if(b<1048576){return(b/1024).toFixed(3)+" KB";}else if(b<1073741824){return(b/1048576).toFixed(3)+" MB";}else{return(b/1073741824).toFixed(3)+" GB";}};sap.extent.uilib.AudioUploader.prototype._escapeSpecialCharacters=function(i){return"#"+i.replace(/(:|\.|\[|\])/g,"\\$1");};sap.extent.uilib.AudioUploader.prototype._geMicrophoneIcon=function(){var w=sap.ui.core.IconPool.getIconURI("microphone");var W=sap.ui.core.IconPool.createControlByURI({src:w,color:"#BCBDC0",width:"50px",height:"72px"}).addStyleClass("sapExtentUilibAudioMicrophoneIcon");return W;};sap.extent.uilib.AudioUploader.prototype._getAudioUploadNotSupportedText=function(){if(!this._oUnsupportedText){this._oUnsupportedText=new sap.m.Text({text:this._oBundle.getText("EMPFILE_PP3_UNSUPPORTED_AUDIO_UPLOAD")});this._oUnsupportedText.addStyleClass('sapExtentUilibAudioUnsuppoorted');}return this._oUnsupportedText;};sap.extent.uilib.AudioUploader.prototype.updateViewForUploading=function(i){if(this._oRemoveButton){this._oRemoveButton.addStyleClass('sapExtentUilibAudioHide');}if(this._oUploadButton){this._oUploadButton.addStyleClass('sapExtentUilibAudioHide');}};sap.extent.uilib.AudioUploader.prototype._getTranscodingStatus=function(){if(!this._oTranscodingStatus){this._oTranscodingStatus=new sap.m.Text({text:this._oBundle.getText("EMPFILE_PP3_AUDIO_TRANSCODING_IN_PROGRESS")});this._oTranscodingStatus.addStyleClass('sapExtentUilibAudioTranscoding');}return this._oTranscodingStatus;};sap.extent.uilib.AudioUploader.prototype._getRefreshButton=function(){if(!this._oRefreshButton){this._oRefreshButton=new sap.m.Button({text:this._oBundle.getText("EMPFILE_PP3_REFRESH_AUDIO"),press:[this._refreshVideo,this]});}this._oRefreshButton.addStyleClass('sapExtentUilibAudioRefreshBtn');return this._oRefreshButton;};sap.extent.uilib.AudioUploader.prototype._refreshVideo=function(){this.fireRefreshAudio();};sap.extent.uilib.AudioUploader.prototype.updateViewDoneUploading=function(){if(this._oRemoveButton){this._oRemoveButton.removeStyleClass('sapExtentUilibAudioHide');}if(this._oUploadButton){this._oUploadButton.removeStyleClass('sapExtentUilibAudioHide');}};},"sap/extent/uilib/AudioUploaderRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.AudioUploaderRenderer");sap.extent.uilib.AudioUploaderRenderer={};sap.extent.uilib.AudioUploaderRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");if(c.getSrc()||c.getSrc2()){r.write("<div>");r.write("<audio controls='true' class='sapExtentUilibAudioCtrl'");r.writeAttributeEscaped("id",c.getId()+"-audioControl");r.write(">");if(c.getSrc()){r.write("<source ");r.writeAttributeEscaped("src",c.getSrc());if(c.getType()){r.writeAttributeEscaped("type",c.getType());}r.write(">");}if(c.getSrc2()){r.write("<source ");r.writeAttributeEscaped("src",c.getSrc2());if(c.getType2()){r.writeAttributeEscaped("type",c.getType2());}r.write(">");}r.write("</audio><p>");r.write("</div>");r.write("<div class='sapExtentUilibAudioEmpty sapExtentUilibAudioHide'");r.writeAttributeEscaped("id",c.getId()+"-emptyAudioContainer");r.write(">");r.renderControl(c._geMicrophoneIcon());r.write("</div>");r.write("<div class='sapExtentUilibAudioFileName'");r.writeAttributeEscaped("id",c.getId()+"-fileName");r.write(">");r.writeEscaped(c.getFileName());r.write("</div>");if(!(sap.ui.Device.os.name===sap.ui.Device.os.OS.IOS)){r.write("<div");r.addClass('sapExtentUilibAudioUpload');r.writeClasses();r.write(">");r.write("<input");r.writeAttributeEscaped("id",c.getId()+"-audioInput");r.write("type='file' accept='audio/*' capture='microphone'>");r.write("</div>");r.renderControl(c._getUploadButton());r.renderControl(c._getRemoveButton());}else{r.renderControl(c._getAudioUploadNotSupportedText());}}else if(c.getFileName()&&!c.getSrc()){r.renderControl(c._getTranscodingStatus());r.renderControl(c._getRefreshButton());}else{r.write("<div class='sapExtentUilibAudioEmpty'");r.writeAttributeEscaped("id",c.getId()+"-emptyAudioContainer");r.write(">");r.renderControl(c._geMicrophoneIcon());r.write("</div>");r.write("<div class='sapExtentUilibAudioFileName'");r.writeAttributeEscaped("id",c.getId()+"-fileName");r.write(">");r.writeEscaped(c.getFileName());r.write("</div>");if(!(sap.ui.Device.os.name===sap.ui.Device.os.OS.IOS)){r.write("<div");r.addClass('sapExtentUilibAudioUpload');r.writeClasses();r.write(">");r.write("<input");r.writeAttributeEscaped("id",c.getId()+"-audioInput");r.write("type='file' accept='audio/*' capture='microphone'>");r.write("</div>");r.renderControl(c._getUploadButton());r.renderControl(c._getRemoveButton());}else{r.renderControl(c._getAudioUploadNotSupportedText());}}r.write("</div>");};},"sap/extent/uilib/BackTo.js":function(){jQuery.sap.declare("sap.extent.uilib.BackTo");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.Link");sap.ui.core.Control.extend("sap.extent.uilib.BackTo",{metadata:{library:"sap.extent.uilib",properties:{backToUrl:{type:"string",group:"Misc",defaultValue:null},backToText:{type:"string",group:"Misc",defaultValue:null}},aggregations:{_backTo:{type:"sap.m.Link",multiple:false,visibility:"hidden"}},}});sap.extent.uilib.BackTo.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.BackTo.prototype._getBackToUrl=function(){var b=this.getAggregation('_backTo');if(!b){b=new sap.m.Link({text:this.getBackToText(),href:this.getBackToUrl()});}return b;};},"sap/extent/uilib/BackToRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.BackToRenderer");jQuery.sap.require("sap.ui.core.Renderer");sap.extent.uilib.BackToRenderer={};sap.extent.uilib.BackToRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibBackTo");r.writeClasses();r.write(">");r.write("<span>");r.writeEscaped(c.oBundle.getText("ECT_PP3_BACK_TO"));r.write("&nbsp;");r.write("</span>");r.renderControl(c._getBackToUrl());r.write("</div>");};},"sap/extent/uilib/BackgroundPictureUploader.js":'jQuery.sap.declare("sap.extent.uilib.BackgroundPictureUploader");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.util.CommonPictureUploadUtils");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.m.MessageBox");\nsap.ui.core.Control.extend("sap.extent.uilib.BackgroundPictureUploader",{metadata:{library:"sap.extent.uilib",events:{retrieveGalleryImages:{},saveSelectedGalleryImage:{}},properties:{pictureLoaded:{type:"boolean",defaultValue:false},hasChanged:{type:"boolean",defaultValue:false},allowUpload:{type:"boolean",defaultValue:true},showMessageStrip:{type:"boolean",defaultValue:false},bGImageUploadDisabled:{type:"boolean",defaultValue:false}}}});\nsap.extent.uilib.BackgroundPictureUploader.SIZE_2_MEGABYTES=2097153;sap.extent.uilib.BackgroundPictureUploader.MAX_PHOTO_SIZE_MB=2;var bgphotoCropConfig={};bgphotoCropConfig.maskSize={"width":400,"height":220};bgphotoCropConfig.maskPreviewSize={"width":245,"height":145};bgphotoCropConfig.targetImgDim={"width":980,"height":580};bgphotoCropConfig.previewVisbleSize={"width":473,"height":280};\nsap.extent.uilib.BackgroundPictureUploader.prototype.init=function(){this.maskSize=bgphotoCropConfig.maskSize;this.maskPreviewSize=bgphotoCropConfig.maskPreviewSize;this.targetImgDim=bgphotoCropConfig.targetImgDim;this.previewVisbleSize=bgphotoCropConfig.previewVisbleSize;this.targetImgDimToMaskPreviewRatio=this.targetImgDim.width/this.maskPreviewSize.width;var a=jQuery(".sapUxAPObjectPageScroll .sapUxAPObjectPageHeaderDetails");this.actualBgDim={width:a.width(),height:a.height()};this.previewCssHeight=this.actualBgDim.height*this.previewVisbleSize.width/this.actualBgDim.width;this.topBtmGap=(this.previewVisbleSize.width*this.targetImgDim.height/this.targetImgDim.width-this.previewVisbleSize.height);this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this.defaultSrc="";this.renderingDone=false;this.oUploadLabel=new sap.ui.core.HTML({sanitizeContent:true});this.oUploadLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderLabels");this.oUploadNew=new sap.m.Button({press:jQuery.proxy(this.onOpenFilePicker,this),text:this._oBundle.getText("EMPFILE_PP3_BACKGROUND_PHOTO_UPLOAD_IMAGE")});this.oUploadNew.addStyleClass("sapExtentUILibBackgroundPictureUploaderUploadNew");this.oMessageStrip=new sap.m.MessageStrip({type:"Error",showIcon:true,showCloseButton:false});this.oMessageStrip.addStyleClass("sapExtentUILibPictureUploaderMessageStrip");this.oChooseExisting=new sap.m.Button({press:jQuery.proxy(this.onOpenExisting,this),text:this._oBundle.getText("EMPFILE_PP3_BACKGROUND_PHOTO_CHOOSE_IMAGE")});this.oChooseExisting.addStyleClass("sapExtentUILibBackgroundPictureUploaderChooseExisting");this.oRemoveButton=new sap.m.Button({press:jQuery.proxy(this.onRemoveImage,this),text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_DELETE_PICTURE")});this.oRemoveButton.addStyleClass("sapExtentUILibBackgroundPictureUploaderRemove");this.oDropLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_DROP")});this.oDropLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderDropLabel");this.oDropLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderCenter");this.oDropLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderLabels");this.oDropLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oOrLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_OR")});this.oOrLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderOrLabel");this.oOrLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderCenter");this.oOrLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderLabels");this.oOrLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oLink=new sap.m.Link({press:jQuery.proxy(this.onOpenFilePicker,this),text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SELECT")});this.oLink.addStyleClass("sapExtentUILibBackgroundPictureUploaderFileLink");this.oSizeLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SIZE")});this.oSizeLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderSizeLabel");this.oSizeLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderCenter");this.oSizeLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderLabels");this.oSizeLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oSelectLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SELECT")});this.oSelectLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderUploadLabelIE");this.oSelectLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderCenter");this.oSelectLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderLabels");this.oSelectLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oUploadingLabel=new sap.m.Label({text:this._oBundle.getText("COMMON_Uploading_Text")});this.oUploadingLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderUploadingLabel");this.oUploadingLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderCenter");this.oUploadingLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderLabels");this.oUploadingLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oProgressIndicator=new sap.m.ProgressIndicator({showValue:false,state:"None",width:"70%"});this.oProgressIndicator.addStyleClass("sapExtentUILibBackgroundPictureUploaderProgressIndicator");this.oSlider=new sap.m.Slider({min:1,max:200,value:100,change:jQuery.proxy(this.onResizeImage,this)});this.oSlider.setWidth("82%");this.oSlider.addStyleClass("sapExtentUilibPictureUploaderSlider");this.oIncreaseIcon=new sap.ui.core.Icon({src:"sap-icon://zoom-in",size:"1.4rem",tooltip:this._oBundle.getText("COMMON_ZOOM_IN"),press:jQuery.proxy(this.onIncreaseSize,this)});this.oIncreaseIcon.addStyleClass("sapExtentUILibBackgroundPictureUploaderSizeIcons");this.oDecreaseIcon=new sap.ui.core.Icon({src:"sap-icon://zoom-out",size:"1.4rem",tooltip:this._oBundle.getText("COMMON_ZOOM_OUT"),press:jQuery.proxy(this.onDecreaseSize,this)});this.oDecreaseIcon.addStyleClass("sapExtentUILibBackgroundPictureUploaderSizeIcons");this.percentageFactor=1;this.originalFile=null;this.resizeCanvas=document.createElement("canvas");this.commonBackgroundPictureUploadUtils=new sap.extent.uilib.util.CommonPictureUploadUtils();};\nsap.extent.uilib.BackgroundPictureUploader.prototype.getUploadLabel=function(){var i;if(this.getBGImageUploadDisabled()){i="<div>"+this._oBundle.getText("EMPFILE_PP3_BACKGROUND_PHOTO_UPLOADER_MSG_FOR_DISABLE_UPLOAD")+"</div>";}else{i="<div>"+this._oBundle.getText("EMPFILE_PP3_BACKGROUND_PHOTO_UPLOADER_MSG")+"</div>";}this.oUploadLabel.setContent(i);return this.oUploadLabel;};\nsap.extent.uilib.BackgroundPictureUploader.prototype.initializeCrop=function(p){this.commonBackgroundPictureUploadUtils._calcImageDrwDimForFit.call(this);this._updateImgSize(this._ratio);this.commonBackgroundPictureUploadUtils._updateSlider.call(this,this._minRatio,this._ratio,1,true);};\nsap.extent.uilib.BackgroundPictureUploader.prototype._updateImgSize=function(r){var t=this.targetImgDimToMaskPreviewRatio;var i=this.originalImage;var w=i.width*r/t;var h=i.height*r/t;var c=this.previewVisbleSize.width/this.maskPreviewSize.width;this.originalHeight=Math.round(h*c);this.originalWidth=Math.round(w*c);var b=this.$().find("#"+this.getId()+"-backgroundImage");var a=this.$().find("#"+this.getId()+"-backgroundImageContainer");b.width(this.originalWidth);b.height(this.originalHeight);this._setResizeCanvas(this.originalHeight,this.originalWidth);var d=b.offset().top;var e=b.offset().left;var f=a.offset().top;var g=a.offset().left;var j=f-d;var k=g-e;var l=b.height()-280-j;var m=b.width()-473-k;if(j<1||l<this.topBtmGap+0.5){b.offset({top:f});}if(k<0.5||m<0.5){b.offset({left:g});}};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onIncreaseSize=function(){if(this._ratio<1){var r=this._ratio+0.01;if(r<this.oSlider.getMax()/100){this.oSlider.setValue(r*100);this._updateImgSize(r);this._ratio=r;}}};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onDecreaseSize=function(){if(this._ratio>this.oSlider.getMin()/100){var r=this._ratio-0.01;if(r>this.oSlider.getMin()/100){this.oSlider.setValue(r*100);this._updateImgSize(r);this._ratio=r;}}};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onOpenExisting=function(){this.fireRetrieveGalleryImages();};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onOpenFilePicker=function(){var f=this.$().find("#"+this.getId()+"-fileSelect");f.click();};\nsap.extent.uilib.BackgroundPictureUploader.prototype.getCroppedImage=function(c){var u=this.$().find("#"+this.getId()+"-backgroundImageContainer");var a=this.$().find("#"+this.getId()+"-backgroundImage");var b;var l=u.offset().left-a.offset().left;var t=u.offset().top-a.offset().top;var w=u.width();var h=u.height();b=document.createElement("canvas");b.width=w;b.height=h;var r=new Image();r.onload=function(){b.getContext("2d").drawImage(r,l,t,w,h,0,0,w,h);c(b.toDataURL("image/webp"));};r.src=this.resizeCanvas.toDataURL("image/webp");};\nsap.extent.uilib.BackgroundPictureUploader.prototype.getCropData=function(u,p){var a=this.$().find("#"+this.getId()+"-backgroundImageContainer");var b=this.$().find("#"+this.getId()+"-backgroundImage");var c=this.originalImage.width/this.originalWidth;var x=(a.offset().left-b.offset().left)*c*this._ratio;var d=this.originalImage.width*this._ratio-bgphotoCropConfig.targetImgDim.width-1;d=d<0?0:d;var e=this.originalImage.height/this.originalHeight;var y=(a.offset().top-b.offset().top)*e*this._ratio;var f=this.originalImage.height*this._ratio-bgphotoCropConfig.targetImgDim.height-1;f=f<0?0:f;var r=this._ratio;x=x<0?0:(x>d?d:x);y=y<0?0:(y>f?f:y);var g={userId:u,photoType:"userExpressivePhoto",x:Math.floor(x),y:Math.floor(y),width:980,height:580,photoId:p,ratio:this._ratio,isInsertNewPhoto:false};return g;};\nsap.extent.uilib.BackgroundPictureUploader.prototype.getOriginalImage=function(){return this.originalImage.src;};\nsap.extent.uilib.BackgroundPictureUploader.prototype.getOriginalImageFile=function(){return this.originalFile;};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onResizeImage=function(e){var r=e.getParameter("value")/100;this._ratio=r<=this._minRatio?this._minRatio:r;this._updateImgSize(this._ratio);};\nsap.extent.uilib.BackgroundPictureUploader.prototype._setResizeCanvas=function(h,w){this.resizeCanvas.width=w;this.resizeCanvas.height=h;this.resizeCanvas.getContext("2d").drawImage(this.originalImage,0,0,w,h);};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onRemoveImage=function(e){this.defaultSrc="";this.setPictureLoaded(false);this.setShowMessageStrip(false);this.$().find("#"+this.getId()+"-backgroundImageContainer").addClass("sapExtentUILibBackgroundPictureUploaderHidden");jQuery(".sapExtentUILibBackgroundPictureUploaderFileRelativeLower").addClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oRemoveButton.addStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDragLabels").removeClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileSelect").removeClass("sapExtentUILibPictureUploaderHidden");this.originalFile=null;};\nsap.extent.uilib.BackgroundPictureUploader.prototype.setDefaultSrc=function(s){this.defaultSrc=s;if(this.renderingDone){if(this.defaultSrc&&this.defaultSrc!=""){this.setImageSrc(this.defaultSrc);}}};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onAfterRendering=function(){var f=this.$().find("#"+this.getId()+"-fileDrag");var a=this.$().find("#"+this.getId()+"-fileSelect");var b=this.$().find("#"+this.getId()+"-fileSelectIE");var u=this.$().find("#"+this.getId()+"-backgroundImage");a.on("change",jQuery.proxy(this.fileSelectHandler,this));if(b){b.on("change",jQuery.proxy(this.fileSelectHandler,this));}if(this.getAllowUpload()){f.on("dragover",jQuery.proxy(this.fileDragOver,this));f.on("dragleave",jQuery.proxy(this.fileDragOverLeave,this));f.on("drop",jQuery.proxy(this.fileSelectHandler,this));f.hover(jQuery.proxy(this.fileDragHover,this),jQuery.proxy(this.fileDragLeave,this));}jQuery(".sapExtentUILibBackgroundPictureUploaderFileRelativeLower").addClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oRemoveButton.addStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oProgressIndicator.addStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oUploadingLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDragLabels").addClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileSelect").addClass("sapExtentUILibPictureUploaderHidden");u.on("mousedown",jQuery.proxy(this.startMoving,this));u.on("touchstart",jQuery.proxy(this.startMoving,this));this.renderingDone=true;if(this.defaultSrc&&this.defaultSrc!=""){this.setImageSrc(this.defaultSrc);}else{this.$().find("#"+this.getId()+"-fileDragLabels").removeClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileSelect").removeClass("sapExtentUILibPictureUploaderHidden");}var c=jQuery("#backgroundPicture-fileSelect");if(c&&c.length>0){c[0].setAttribute("tabindex","-1");}this.oIncreaseIcon.rerender();this.oDecreaseIcon.rerender();};\nsap.extent.uilib.BackgroundPictureUploader.prototype.startMoving=function(e){e.preventDefault();e.stopPropagation();this.saveEventState(e);jQuery(document).on("mousemove",jQuery.proxy(this.moving,this));jQuery(document).on("mouseup",jQuery.proxy(this.endMoving,this));jQuery(document).on("touchmove",jQuery.proxy(this.moving,this));jQuery(document).on("touchend",jQuery.proxy(this.endMoving,this));};\nsap.extent.uilib.BackgroundPictureUploader.prototype.endMoving=function(e){e.preventDefault();jQuery(document).off("mousemove",jQuery.proxy(this.moving,this));jQuery(document).off("mouseup",jQuery.proxy(this.endMoving,this));jQuery(document).off("touchend",jQuery.proxy(this.endMoving,this));jQuery(document).off("touchmove",jQuery.proxy(this.moving,this));};\nsap.extent.uilib.BackgroundPictureUploader.prototype.moving=function(e){var b=this.$().find("#"+this.getId()+"-backgroundImage");var a=this.$().find("#"+this.getId()+"-backgroundImageContainer");var m={},t={};t[0]={};t[0].clientX=0;t[0].clientY=0;e.preventDefault();e.stopPropagation();if(e.originalEvent&&e.originalEvent.touches){t=e.originalEvent.touches;}m.x=(e.clientX||e.pageX||t[0].clientX);m.y=(e.clientY||e.pageY||t[0].clientY);var i=m.y-(this.eventState.mouse_y-this.eventState.container_top);var c=m.x-(this.eventState.mouse_x-this.eventState.container_left);var d=a.offset().top;var f=a.offset().left;var g=d-i;var h=f-c;var j=b.height()-280-g;var k=b.width()-473-h;if(g<0||h<0||j<this.topBtmGap||k<0){return;}b.offset({"left":m.x-(this.eventState.mouse_x-this.eventState.container_left),"top":m.y-(this.eventState.mouse_y-this.eventState.container_top)});};\nsap.extent.uilib.BackgroundPictureUploader.prototype.saveEventState=function(e){var u=this.$().find("#"+this.getId()+"-backgroundImage");if(this.eventState==undefined||this.eventState==null){this.eventState={};}this.eventState.container_left=u.offset().left;this.eventState.container_top=u.offset().top;this.eventState.mouse_x=(e.clientX||e.pageX||e.originalEvent.touches[0].clientX);this.eventState.mouse_y=(e.clientY||e.pageY||e.originalEvent.touches[0].clientY);if(e.originalEvent.touches!==undefined){this.eventState.touches=[];for(var i=0;i<e.originalEvent.touches.length;i++){this.eventState.touches[i]={};this.eventState.touches[i].clientX=e.originalEvent.touches[i].clientX;this.eventState.touches[i].clientY=e.originalEvent.touches[i].clientY;}}this.eventState.evnt=e;};\nsap.extent.uilib.BackgroundPictureUploader.prototype.fileDragHover=function(e){e.stopPropagation();e.preventDefault();this.$().find("#"+this.getId()+"-fileDrag").addClass("sapExtentUILibBackgroundPictureUploaderFileDragHover");};\nsap.extent.uilib.BackgroundPictureUploader.prototype.fileDragLeave=function(e){e.stopPropagation();e.preventDefault();this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibBackgroundPictureUploaderFileDragHover");};\nsap.extent.uilib.BackgroundPictureUploader.prototype.fileDragOver=function(e){e.stopPropagation();e.preventDefault();if(this.timer){clearTimeout(this.timer);}this.$().find("#"+this.getId()+"-fileDrag").addClass("sapExtentUILibBackgroundPictureUploaderFileDragHover");this.$().find("#"+this.getId()+"-fileDragLabels").addClass("sapExtentUILibBackgroundPictureUploaderHidden");};\nsap.extent.uilib.BackgroundPictureUploader.prototype.fileDragOverLeave=function(e){e.stopPropagation();e.preventDefault();this.timer=setTimeout(jQuery.proxy(function(){this.fileDragOverLeaveReset();},this),100);};\nsap.extent.uilib.BackgroundPictureUploader.prototype.fileDragOverLeaveReset=function(){this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibBackgroundPictureUploaderFileDragHover");this.$().find("#"+this.getId()+"-fileDragLabels").removeClass("sapExtentUILibBackgroundPictureUploaderHidden");};\nsap.extent.uilib.BackgroundPictureUploader.prototype.fileSelectHandler=function(e){this.fileDragHover(e);this.fileDragOverLeaveReset();var f=[];if(e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files){f=e.originalEvent.dataTransfer.files;}else if(e.target&&e.target.files){f=e.target.files;}else{return;}for(var i=0,a;i<f.length;i++){this.setHasChanged(true);var a=f[i];if(!this.commonBackgroundPictureUploadUtils.isFileSupportedByPhotoCrop(a)){this.showMessageStrip(this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_IMAGE_TYPE"));return;}if(a.size>sap.extent.uilib.BackgroundPictureUploader.SIZE_2_MEGABYTES){this.showMessageStrip(this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_IMAGE_SIZE_WARNING"));return;}var r=new FileReader();this.originalFile=a;r.onload=jQuery.proxy(this._loadFile,this,a.name);r.readAsDataURL(a);}};\nsap.extent.uilib.BackgroundPictureUploader.prototype._loadFile=function(f,e){if(!e.target.result||e.target.result=="data:"){this.showMessageStrip(this._oBundle.getText("EMPFILE_EDU_ERROR_PHOTO_SIZE_TOO_LARGE",[f,sap.extent.uilib.BackgroundPictureUploader.MAX_PHOTO_SIZE_MB]));return;}this.setImageSrc(e.target.result);this.setShowMessageStrip(false);};\nsap.extent.uilib.BackgroundPictureUploader.prototype.showMessageStrip=function(m){this.oMessageStrip.setText(m);this.oMessageStrip.rerender();this.setShowMessageStrip(true);};\nsap.extent.uilib.BackgroundPictureUploader.prototype._loadLargeFile=function(e){var r=new Image();var m=1200;r.onload=jQuery.proxy(function(r,i){var a=this.commonBackgroundPictureUploadUtils.getResizedCanvas(r,r.height,r.width,m);var b=a.toDataURL();this.originalFile=this.commonBackgroundPictureUploadUtils.dataURItoBlob(b);jQuery.proxy(this.setImageSrc(b),this);},this,r);r.src=event.target.result;};\nsap.extent.uilib.BackgroundPictureUploader.prototype.setImageSrc=function(s){this.defaultSrc=s;this.setPictureLoaded(true);var b=this.$().find("#"+this.getId()+"-backgroundImage");var a=this.$().find("#"+this.getId()+"-backgroundImageContainer");this.originalImage=new Image();this.originalImage.onload=jQuery.proxy(this.initializeCrop,this);this.originalImage.src=s;a.removeClass("sapExtentUILibBackgroundPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDragLabels").addClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileSelect").addClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDrag").css("background-color","transparent");b.attr("src",s);if(sap.ui.getCore().getConfiguration().getRTL()){b.css("left","50%");b.css("right","auto");}jQuery(".sapExtentUILibBackgroundPictureUploaderFileRelativeLower").removeClass("sapExtentUILibBackgroundPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibBackgroundPictureUploaderFileDragHover");this.oRemoveButton.removeStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");this.setProgressIndicatorVisible(false);};\nsap.extent.uilib.BackgroundPictureUploader.prototype.setProgressIndicatorVisible=function(i){var b=this.$().find("#"+this.getId()+"-backgroundImageContainer");if(i){jQuery(".sapExtentUILibBackgroundPictureUploaderFileRelativeMiddle").css("height",200+"px");this.oProgressIndicator.setPercentValue(0);b.addClass("sapExtentUILibBackgroundPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDragLabels").addClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oProgressIndicator.removeStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oUploadingLabel.removeStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");}else{b.removeClass("sapExtentUILibBackgroundPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDragLabels").removeClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oProgressIndicator.addStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");this.oUploadingLabel.addStyleClass("sapExtentUILibBackgroundPictureUploaderHidden");}};\nsap.extent.uilib.BackgroundPictureUploader.prototype.setProgressValue=function(v){this.oProgressIndicator.setPercentValue(v);};\nsap.extent.uilib.BackgroundPictureUploader.prototype.showImageGalleryChooser=function(p){var g=new sap.m.Dialog({title:this._oBundle.getText("EMPFILE_PP3_BACKGROUND_PHOTO_LIBRARY"),contentWidth:"72rem",contentHeight:"42rem"});var o=new sap.m.Button({text:this._oBundle.getText("COMMON_Ok"),type:sap.m.ButtonType.Emphasized,press:jQuery.proxy(this.onGalleryOk,this,g)});g.addButton(o);var c=new sap.m.Button({text:this._oBundle.getText("COMMON_Cancel"),press:jQuery.proxy(this.onGalleryCancel,this,g)});g.addButton(c);var e=[];for(var a=0,l=p.length;a<l;++a){var b=p[a];if(b.photoStatus==="ENABLED"){e.push(b);}}var h=e.length+" "+this._oBundle.getText("COMMON_IMAGES");var H=new sap.m.Label({text:h,width:"90%"});H.addStyleClass("sapExtentUILibBackgroundPictureUploaderDialogLabel");g.addContent(H);for(var i=0;i<e.length;i++){var d="";var f="";if(e&&e[i]&&e[i].photoId){if(e[i].resource){d=e[i].resource;}else if(e[i].photoHash){d="/eduPhoto/view?photo_hash="+e[i].photoHash+"&mod=0";}else{var m=e[i].lastModified?e[i].lastModified:Date.now();d="/eduPhoto/view?photo_id="+e[i].photoId+"&mod="+m;}f=e[i].photoId;}var B=new sap.m.Image({src:d,densityAware:false,press:jQuery.proxy(this.onImageSelection,this),width:"22rem",height:"12.3rem",alt:f});if(sap.ui.Device.system.phone){B.setWidth("13rem");}B.addStyleClass("sapExtentUILibBackgroundPictureUploaderDialogImages");g.addContent(B);}g.open();};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onImageSelection=function(e){if(this.selectedGalleryImage){this.selectedGalleryImage.removeStyleClass("sapExtentUILibBackgroundPictureUploaderDialogImageBorder");if(sap.ui.Device.system.phone){this.selectedGalleryImage.setWidth("13rem");}else{this.selectedGalleryImage.setWidth("22rem");}this.selectedGalleryImage.setHeight("12.3rem");}this.selectedGalleryImage=e.oSource;if(sap.ui.Device.system.phone){e.oSource.setWidth("12.375rem");}else{e.oSource.setWidth("21.375rem");}e.oSource.setHeight("11.675rem");e.oSource.addStyleClass("sapExtentUILibBackgroundPictureUploaderDialogImageBorder");};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onGalleryOk=function(g,e){if(this.selectedGalleryImage){var s=this.selectedGalleryImage.getAlt();if(s&&s!=""){this.fireSaveSelectedGalleryImage({sourceId:s,dialog:g});}}};\nsap.extent.uilib.BackgroundPictureUploader.prototype.onGalleryCancel=function(g,e){g.close();};\nFunction.prototype.bindToEventHandler=function a(){var h=this;var b=Array.prototype.slice.call(arguments);return function(e){e=e||window.event;b.unshift(e);h.apply(this,b);};};\n',"sap/extent/uilib/BackgroundPictureUploaderRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.BackgroundPictureUploaderRenderer");jQuery.sap.require("sap.ui.core.Renderer");sap.extent.uilib.BackgroundPictureUploaderRenderer={};sap.extent.uilib.BackgroundPictureUploaderRenderer.render=function(r,c){r.write("<div class='sapExtentUilibPictureUploader'");r.writeControlData(c);r.write(">");if(c.getShowMessageStrip()){r.renderControl(c.oMessageStrip);}r.write("<div class='sapExtentUILibBackgroundPictureUploaderFileRelativeIntro'>");r.renderControl(c.getUploadLabel());r.write("</div>");r.write("<div class='sapExtentUILibBackgroundPictureUploaderFileRelativeUpper'>");if(c.getAllowUpload()&&!c.getBGImageUploadDisabled()){r.renderControl(c.oUploadNew);}r.renderControl(c.oChooseExisting);if(!c.getBGImageUploadDisabled()){r.renderControl(c.oRemoveButton);}r.write("</div>");if(!c.getBGImageUploadDisabled()){r.write("<div class='sapExtentUILibBackgroundPictureUploaderFileRelativeMiddle'>");r.write("<input id='");r.writeEscaped(c.getId()+"-fileSelect");r.write("' type='file' accept='image/*' class='sapExtentUILibBackgroundPictureUploaderFileChooser' aria-hidden='true'/>");r.write("<div id='");r.writeEscaped(c.getId()+"-fileDrag");r.write("' class='sapExtentUILibBackgroundPictureUploaderFileDrag'>");if(c.getAllowUpload()&&!c.getBGImageUploadDisabled()){r.write("<div id='");r.writeEscaped(c.getId()+"-fileDragLabels");r.write("'>");r.write("<!--[if IE 9]>");r.renderControl(c.oUploadIcon);r.write("<form id='");r.writeEscaped(c.getId()+"-ie9uploadform");r.write("'>");r.write("<input id='");r.writeEscaped(c.getId()+"-fileSelectIE");r.write("' type='file' name='fileData1' size='50' accept='image/*' class='sapExtentUILibBackgroundPictureUploaderFileChooserIE'/>");r.write("</form>");r.renderControl(c.oSelectLabel);r.write("<![endif]-->");r.write("<!--[if !IE]><!-->");r.renderControl(c.oDropLabel);r.renderControl(c.oOrLabel);r.renderControl(c.oLink);r.write("<!--<![endif]-->");r.renderControl(c.oSizeLabel);r.write("</div>");}r.write("<div id='");r.writeEscaped(c.getId()+"-fileUploadingControls");r.write("'>");r.renderControl(c.oProgressIndicator);r.renderControl(c.oUploadingLabel);r.write("</div>");r.write("<div id='");r.writeEscaped(c.getId()+"-backgroundImageContainer");r.write("' class='sapExtentUILibBackgroundPictureUploaderImageContainer sapExtentUILibBackgroundPictureUploaderHidden'>");r.write("<img id='");r.writeEscaped(c.getId()+"-backgroundImage");r.write("' class='sapExtentUILibBackgroundPictureUploaderImage'></img>");r.write("</div>");r.write("</div>");r.write("</div>");}if(!c.getBGImageUploadDisabled()){r.write("<div class='sapExtentUILibBackgroundPictureUploaderFileRelativeLower'>");r.write("<div class='sapExtentUILibBackgroundPictureUploaderFileRelativeLowerInner'>");r.renderControl(c.oDecreaseIcon);r.renderControl(c.oSlider);r.renderControl(c.oIncreaseIcon);r.write("</div>");r.write("</div>");}r.write("</div>");};},"sap/extent/uilib/BigNumber.js":function(){jQuery.sap.declare("sap.extent.uilib.BigNumber");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.VBox");jQuery.sap.require("sap.m.HBox");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.Label");sap.ui.core.Control.extend("sap.extent.uilib.BigNumber",{metadata:{library:"sap.extent.uilib",aggregations:{_oVBox:{type:"sap.m.VBox",multiple:false,visibility:"hidden"}},properties:{headerText:{type:"string",group:"Misc",defaultValue:null},bigNumber:{type:"string",group:"Misc",defaultValue:null},bigNumberDescription:{type:"string",group:"Misc",defaultValue:null},alertColor:{type:"string",group:"Misc",defaultValue:null},buttonText:{type:"string",group:"Misc",defaultValue:null},showButton:{type:"boolean",group:"Misc",defaultValue:true},showHeader:{type:"boolean",group:"Misc",defaultValue:true},showBigNumber:{type:"boolean",group:"Misc",defaultValue:true},bigNumberSmall:{type:"boolean",group:"Misc",defaultValue:false}}}});sap.extent.uilib.BigNumber.prototype.init=function(){var v=new sap.m.VBox();this.oHBoxBigNumber=new sap.m.HBox();this.oHBoxHeader=new sap.m.HBox();this.oHBoxBody=new sap.m.HBox();this.oHBoxBody.setVisible(true);this.oHeaderLabel=new sap.m.Label();this.oHeaderLabel.addStyleClass("sapExtentUILibBigNumberHeader");this.oHBoxHeader.addItem(this.oHeaderLabel);v.addItem(this.oHBoxHeader);this.oBigNumberLabel=new sap.m.Label();this.oBigNumberLabel.addStyleClass("sapExtentUILibBigNumberLabel");this.oBigNumberLabel.addStyleClass("sapExtentUILibBigNumberStandard");this.oBigNumberDescription=new sap.m.Label();this.oBigNumberDescription.addStyleClass("sapExtentUILibBigNumberDescription");this.oBigNumberDescription.addStyleClass("sapExtentUILibBigNumberDescriptionStandard");this.oHBoxBigNumber.setHeight("3rem");this.oHBoxBigNumber.addItem(this.oBigNumberLabel);this.oHBoxBigNumber.addItem(this.oBigNumberDescription);v.addItem(this.oHBoxBigNumber);v.addItem(this.oHBoxBody);this.oEnrollButton=new sap.m.Button();this.oEnrollButton.addStyleClass("sapExtentUILibBigNumberTopMargin");v.addItem(this.oEnrollButton);this.setAggregation("_oVBox",v);};sap.extent.uilib.BigNumber.prototype.setHeaderText=function(v){this.setProperty("headerText",v,true);if(this.oHeaderLabel){this.oHeaderLabel.setText(v);}};sap.extent.uilib.BigNumber.prototype.setBigNumber=function(v){this.setProperty("bigNumber",v,true);if(this.oBigNumberLabel){this.oBigNumberLabel.setText(v);}};sap.extent.uilib.BigNumber.prototype.setBigNumberSmall=function(v){this.setProperty("bigNumberSmall",v,true);if(v){this.oHBoxBigNumber.setHeight("2rem");this.oBigNumberLabel.removeStyleClass("sapExtentUILibBigNumberStandard");this.oBigNumberLabel.addStyleClass("sapExtentUILibBigNumberSmall");this.oBigNumberDescription.removeStyleClass("sapExtentUILibBigNumberDescriptionStandard");this.oBigNumberDescription.addStyleClass("sapExtentUILibBigNumberDescriptionSmall");}else{this.oHBoxBigNumber.setHeight("3rem");this.oBigNumberLabel.addStyleClass("sapExtentUILibBigNumberStandard");this.oBigNumberLabel.removeStyleClass("sapExtentUILibBigNumberSmall");this.oBigNumberDescription.addStyleClass("sapExtentUILibBigNumberDescriptionStandard");this.oBigNumberDescription.removeStyleClass("sapExtentUILibBigNumberDescriptionSmall");}};sap.extent.uilib.BigNumber.prototype.setBigNumberDescription=function(v){this.setProperty("bigNumberDescription",v,true);if(this.oBigNumberDescription){this.oBigNumberDescription.setText(v);}};sap.extent.uilib.BigNumber.prototype.setAlertColor=function(v){this.setProperty("alertColor",v,true);if(this.oBigNumberLabel){if(v==="HIGH"){this.oBigNumberLabel.addStyleClass("sapExtentUILibBigNumberHigh");this.oBigNumberDescription.addStyleClass("sapExtentUILibBigNumberHigh");}else if(v==="MEDIUM"){this.oBigNumberLabel.addStyleClass("sapExtentUILibBigNumberMedium");this.oBigNumberDescription.addStyleClass("sapExtentUILibBigNumberMedium");}else if(v==="LOW"){this.oBigNumberLabel.addStyleClass("sapExtentUILibBigNumberLow");this.oBigNumberDescription.addStyleClass("sapExtentUILibBigNumberLow");}}};sap.extent.uilib.BigNumber.prototype.setButtonText=function(v){this.setProperty("buttonText",v,true);if(this.oEnrollButton){this.oEnrollButton.setText(v);}};sap.extent.uilib.BigNumber.prototype.getButton=function(){return this.oEnrollButton;};sap.extent.uilib.BigNumber.prototype.setShowButton=function(v){this.setProperty("showButton",v,true);if(this.oEnrollButton){if(v){this.oEnrollButton.setVisible(true);}else{this.oEnrollButton.setVisible(false);}}};sap.extent.uilib.BigNumber.prototype.setShowHeader=function(v){this.setProperty("showHeader",v,true);if(this.oHeaderLabel){if(v){this.oHeaderLabel.setVisible(true);}else{this.oHeaderLabel.setVisible(false);}}};sap.extent.uilib.BigNumber.prototype.setShowBigNumber=function(v){this.setProperty("showBigNumber",v,true);if(this.oBigNumberLabel&&this.oBigNumberDescription){if(v){this.oHBoxBigNumber.setVisible(true);}else{this.oHBoxBigNumber.setVisible(false);this.oEnrollButton.removeStyleClass("sapExtentUILibBigNumberTopMargin");}}};sap.extent.uilib.BigNumber.prototype.addAdditionalHeaderContent=function(v){if(this.oHBoxHeader&&v){this.oHBoxHeader.addItem(v);}};sap.extent.uilib.BigNumber.prototype.addAdditionalBodyContent=function(v){if(this.oHBoxBody&&v){this.oHBoxBody.setVisible(true);this.oHBoxBody.addStyleClass("sapExtentUILibBigNumberTopMargin");this.oHBoxBody.addItem(v);}};sap.extent.uilib.BigNumber.prototype.setAdditionalBottomPadding=function(){var v=this.getAggregation("_oVBox");if(v){v.addStyleClass("sapExtentUILibBigNumberBottomMargin");}};},"sap/extent/uilib/BigNumberRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.BigNumberRenderer");jQuery.sap.require("sap.ui.core.Renderer");sap.extent.uilib.BigNumberRenderer={};sap.extent.uilib.BigNumberRenderer.render=function(r,c){r.write("<div class='sapExtentUilibBigNumber'");r.writeControlData(c);r.write(">");r.renderControl(c.getAggregation("_oVBox"));r.write("</div>");};},"sap/extent/uilib/BlockInlineDescription.js":function(){jQuery.sap.declare("sap.extent.uilib.BlockInlineDescription");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.extent.uilib.util.HelpManager");jQuery.sap.require("sap.ui.layout.VerticalLayout");sap.ui.core.Control.extend("sap.extent.uilib.BlockInlineDescription",{metadata:{library:"sap.extent.uilib",properties:{blockDescription:{type:"string",group:"Misc",defaultValue:null}}}});sap.extent.uilib.BlockInlineDescription.prototype.init=function(){if(!this.toggleButton){this.toggleButton=new sap.ui.core.Icon({src:"sap-icon://navigation-down-arrow",color:"#999999",press:jQuery.proxy(function(e){var o=e.getSource().getSrc();if(o=="sap-icon://navigation-up-arrow"){e.getSource().setSrc("sap-icon://navigation-down-arrow");}else{e.getSource().setSrc("sap-icon://navigation-up-arrow")}this.blockDescContent.toggleStyleClass("blockDescContent");e.getSource().rerender();},this)});}this.container=new sap.ui.layout.VerticalLayout();};sap.extent.uilib.BlockInlineDescription.prototype.setBlockDescription=function(b){this.setProperty("blockDescription",b,true);this.blockDescContent=new sap.ui.layout.VerticalLayout();this.blockDescContent.addStyleClass("blockDescContent");sap.extent.uilib.util.HelpManager.addHelpContentToLayout(this.blockDescContent,this.getBlockDescription());this.container.addContent(this.blockDescContent);this.container.addContent(this.toggleButton);}},"sap/extent/uilib/BlockInlineDescriptionRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.BlockInlineDescriptionRenderer");sap.extent.uilib.BlockInlineDescriptionRenderer={};sap.extent.uilib.BlockInlineDescriptionRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.renderControl(c.container);r.write("</div>");};},"sap/extent/uilib/BulletChart.js":function(){jQuery.sap.declare("sap.extent.uilib.BulletChart");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.BulletChart",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},dataSet:{type:"object",group:"Misc",defaultValue:null}}}});jQuery.sap.require('sap.ui.thirdparty.d3');jQuery.sap.require('sap.m.ObjectNumber');sap.extent.uilib.BulletChart.prototype.init=function(){this.chartSvg=null;if(sap.ui.Device.system.phone){this.setWidth("18.75em");this.setHeight("7.56em");}if(sap.ui.Device.system.tablet){this.setWidth("34.375em");this.setHeight("7.56em");}};sap.extent.uilib.BulletChart.prototype.onAfterRendering=function(){if(this._render()===true){if(sap.ui.Device.system.desktop){jQuery(window).bind('resize',jQuery.proxy(this._onResize,this));}}};sap.extent.uilib.BulletChart.prototype.onBeforeRendering=function(){this._deregisterEvent();};sap.extent.uilib.BulletChart.prototype._deregisterEvent=function(){if(sap.ui.Device.system.desktop){jQuery(window).unbind('resize',jQuery.proxy(this._onResize,this));}else{sap.ui.Device.resize.detachHandler(this._onResize,this);}};sap.extent.uilib.BulletChart.prototype._onResize=function(){'use strict';var p=this.$().parent().parent().parent().width();d3.select(this.chartSvg.node().parentNode).style('width',p).style('height',Math.round(p*this.iHeight/this.iWidth));};sap.extent.uilib.BulletChart.prototype._getBulletChart=function(){var c=544.96,a=214;var t=1000;if(sap.ui.Device.system.phone){c=540;a=188.96;}if(sap.ui.Device.system.tablet){c=964;a=200.96;}var b=d3.select("#"+this.getId()).append("div").attr("class","sapEBTooltip");};sap.extent.uilib.BulletChart.prototype._getBulletChart=function(){var c=544.96,e=214;var t=1000;var f=d3.select("#"+this.getId()).append("div").attr("class","sapEBTooltip").style("opacity",0).style('display','none');function _(s){return function(d){return Math.abs(s(d.value));};}function h(g){g.each(function(d,i){var B=sap.ui.getCore().getModel("i18n").getResourceBundle();var g=d3.select(this);var p=0,j=2,k=20,l=8;var B=sap.ui.getCore().getModel("i18n").getResourceBundle();var m=c-j-k;if(sap.ui.Device.system.phone){m=c-l;}if(sap.ui.Device.system.tablet){m=c-l;}var n=Math.ceil(e/5);var o=n+10;var q=o+16;var v=76;g.attr('transform','translate('+j+','+p+')');var r=function(a,b){return b.value-a.value;};var s=d.ranges.sort(r);var u=d.values.sort(r);var w=s.length,x=s[w-1].value;var y=d3.scale.linear().domain([x,s[0].value]).range([0,m]);var z=this.__chart__||d3.scale.linear().domain([x,Infinity]).range(y.range());this.__chart__=y;var A=_(z),C=_(y);var D=[s[0].value];var E=[];var F=0;E.push({xPos:y(s[0].value),anchor:"end",label:s[0].label+' '+B.getText("ECT_PP3_MAX")});for(var G=1;G<w-1;G++){E.push({xPos:y(s[G].value),anchor:"middle",label:s[G].label+' '+B.getText("ECT_PP3_MID")});F=s[G].value;}E.push({xPos:y(s[w-1].value),anchor:"start",label:s[w-1].label+' '+B.getText("ECT_PP3_MIN")});g.append('text').attr('class','standardTextPattern').attr('x',0).attr('y',20).text(B.getText("ECT_PP3_PAYRANGE",[u[0].payRange,u[0].currencyCode]));var H=g.selectAll("text.sapEBStaticPerc").data([0,100]);H.enter().append('text').attr('class','sapEBStaticPerc').attr('x',function(a){if(a==0)return 0;else return m-20;}).text('').attr('y',o+v+25);var I=g.selectAll('text.sapEBRangeText').data(E);I.enter().append('text').attr('class','sapEBRangeText').attr('text-anchor',function(d){return d.anchor;}).attr('x',function(d){return d.xPos;}).attr('y',54).text(function(d){return d.label.split(" ")[1];}).append('tspan').attr('dx',0).attr('dy',18).attr('x',function(d){return d.xPos;}).text(function(d){return d.label.split(" ")[0];});var J=g.selectAll('rect.sapEBRect').data(D).enter().append('rect').attr('class','sapEBRect').attr('width',z).attr('height',n).attr('y',v+10);J.transition().duration(t).attr('width',y);if(u[0].value>=s[w-1].value){var K=u;if(u[0].value>s[0].value){K[0].value=s[0].value;}var L=g.selectAll('rect.sapEBValue').data(K);L.enter().append('rect').attr('class','sapEBValue').attr('width',function(d){return z(d.value);}).attr('height',n).style('fill',function(d){return d.color;}).attr('y',v+10);L.transition().duration(t).attr('width',function(d){return y(d.value);});}var M=g.selectAll('line.sapEBRangeTick').data(s);M.enter().append('line').attr('class','sapEBRangeTick').attr('x1',A).attr('y1',v).attr('x2',A).attr('y2',o+v+10);M.transition().duration(t).attr('x1',C).attr('x2',C);var N='sapEBLessValueLabel';var O='sapEBPecentageNumber';var P='sapEBRatioText';var Q=20;if(u[0].value<F){N='sapEBMoreValueLabel';if(sap.ui.Device.system.phone)Q=164;else if(sap.ui.Device.system.desktop)Q=230;}g.append('text').attr('class',N).attr('dx',Q-10).attr('y',(n/2)+15+v).text(u[0].label+' '+u[0].currencyCode);if(d.values[0].rangePenetration){var R=g.append('text').attr('class',O).attr('x',0).attr('y',(n/2)+15+v+72).text(d.values[0].rangePenetration);R.append('tspan').attr('class',P).attr('dx',8).attr('y',(n/2)+15+v+72).text(B.getText("EMPFILE_HRIS_COMPENSATION_RANGE_PENETRATION"));}if(d.values[0].compaRatio){var S=g.append('text').attr('class',O).attr('x',0).attr('y',(n/2)+15+v+98).text(d.values[0].compaRatio);S.append('tspan').attr('class',P).attr('dx',8).attr('y',(n/2)+15+v+98).text(B.getText("ECT_PP3_COMPARATIO"));}});d3.timer.flush();}h.width=function(x){if(!arguments.length)return c;c=x;return h;};h.height=function(x){if(!arguments.length)return e;e=x;return h;};return h;};sap.extent.uilib.BulletChart.prototype._render=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();if(this.getVisible()===false){return false;}var c=(window.pageHeaderJsonData&&window.pageHeaderJsonData.accessibilityPreferences&&window.pageHeaderJsonData.accessibilityPreferences.lowVisionType==='dark')?"rgb(8,84,160)":"rgb(92,186,230)";var d=this.getDataSet();var a=[{"ranges":[{value:d[0].minPoint,label:d[0].minPointFormatted,},{value:d[0].midPoint,label:d[0].midPointFormatted,},{value:d[0].maxPoint,label:d[0].maxPointFormatted,}],"values":[{value:d[0].salary,label:d[0].salaryFormatted,color:c,payRange:d[0].payRange,currencyCode:d[0].currencyCode,rangePenetration:d[0].rangePenetration,compaRatio:d[0].compaRatio}]}];if(!a)return;var w,h;w=this.$().outerWidth();h=this.$().outerHeight();var D=sap.ui.getCore().getModel("device");var i=D&&D.getProperty("/isMobileObjectPage");if(i){if(sap.ui.Device.system.phone){w=288;h=h+18;}if(sap.ui.Device.system.tablet){w=550;h=h+18;}}w=w?w:400;h=h?h:250;var t=document.getElementById(this.getId());this.chartSvg=d3.select(t).append('svg').attr('class','sapEBChartSVG').attr('width','100%').attr('height',h).attr('preserveAspectRatio','xMidYMid').attr('viewBox','0 0 '+w+' '+h);this.chart=this._getBulletChart().width(w).height(h);this.chartSvg.selectAll('g').data(a).enter().append('g').call(this.chart);if(sap.ui.getCore().getConfiguration().getRTL()){this.chartSvg.attr('direction','ltr')}return true;};},"sap/extent/uilib/BulletChartRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.BulletChartRenderer");sap.extent.uilib.BulletChartRenderer={};sap.extent.uilib.BulletChartRenderer.render=function(r,c){var d=c.getDataSet();if(!d||d.length<1){return;}r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibBulletChart");r.writeClasses();r.addStyle('width',c.getWidth());r.addStyle('height',c.getHeight());r.writeStyles();r.write(">");r.write("</div>");};},"sap/extent/uilib/CalculatorField.js":function(){jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.ui.core.IconPool");jQuery.sap.require("sap.m.Input");jQuery.sap.require("sap.m.Popover");jQuery.sap.require("sap.m.Toolbar");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.Title");jQuery.sap.require("sap.ui.core.format.NumberFormat");jQuery.sap.require("sap.ui.layout.VerticalLayout");sap.m.Input.extend("sap.extent.uilib.CalculatorField",{renderer:"sap.m.InputRenderer",metadata:{library:"sap.extent.uilib",showValueHelp:{type:"boolean",group:"Behavior",defaultValue:false},properties:{valueType:{type:"string",group:"Misc",defaultValue:"amount"},rowID:{type:"int",group:"Misc",defaultValue:"-1"}},aggregations:{_changeAmountField:{type:"sap.m.Input",multiple:false,visibility:"hidden"},_changePercentField:{type:"sap.m.Input",multiple:false,visibility:"hidden"},_totalAmountField:{type:"sap.m.Input",multiple:false,visibility:"hidden"}}}});sap.extent.uilib.CalculatorField.prototype.init=function(){if(sap.m.Input.prototype.init){sap.m.Input.prototype.init.apply(this);}this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();var d={groupingSeparator:this._oBundle.getText("COMMON_NumericGroupingSeperator"),decimalSeparator:this._oBundle.getText("COMMON_DecimalPoint"),minusSign:this._oBundle.getText("ECT_PP3_NEGATIVESIGN")};this._oFloatNumberFormat=sap.ui.core.format.NumberFormat.getFloatInstance(d,sap.ui.getCore().getConfiguration().getLocale());var t=this;this.calcField=new sap.m.Input({width:'200px'});this.calcField.addStyleClass('calcFieldInput');this.changeAmountField=new sap.m.Input({width:'200px',name:'ChangeAmount'+this.sId,maxLength:20}).attachLiveChange(function(e){t.onChangeAmount(e);});this.setAggregation("_changeAmountField",this.changeAmountField);this.changePercentField=new sap.m.Input({width:'200px',name:'ChangePercent'+this.sId,maxLength:20}).attachLiveChange(function(e){t.onChangePercent(e);});this.setAggregation("_changePercentField",this.changePercentField);this.totalAmountField=new sap.m.Input({width:'200px',name:'totalAmount'+this.sId,maxLength:20}).attachLiveChange(jQuery.proxy(function(e){this.onChangeTotal(e,{originalTotal:this.getValue()});}),this);this.setAggregation("_totalAmountField",this.totalAmountField);this._initDialog();this.calcDialog.addContent(this._getCalcForm(this));this.calcDialog.setTitle(this._oBundle.getText("EMPFILE_HRIS_CHANGE_CALCULATOR"));this.attachBrowserEvent('keyup',jQuery.proxy(function(e){this.handleCalcFieldKeyUp(e);}),this);};sap.extent.uilib.CalculatorField.prototype.onAfterRendering=function(){if(sap.m.Input.prototype.onAfterRendering){sap.m.Input.prototype.onAfterRendering.apply(this,arguments);}this.validateInput();};sap.extent.uilib.CalculatorField.prototype._getValueHelpIcon=function(){if(!this._oValueHelpIcon){var t=this;var u=sap.ui.core.IconPool.getIconURI("collections-management");var _={id:this.getId()+"__vhi",decorative:false,src:u,press:function(e){if(!t.getValueHelpOnly()){t.fireValueHelpRequest({fromSuggestions:false});}if(e.oSource.hasStyleClass('sapExtentUilibMaskableCoreInactive')){t._oValueHelpIcon.setDecorative(true);}else{t._oValueHelpIcon.setDecorative(false);if(!t.calculatorCancelBtnClick){t.onPressCalculator(e,e.oSource);t.calculatorCancelBtnClick=false;}}},};this._oValueHelpIcon=this.addEndIcon(_);this._oValueHelpIcon.addStyleClass("sapMInputValHelpInner");this._oValueHelpIcon.addStyleClass('calcFieldIcon');var T=this._oBundle.getText("ECT_PP3_CALCULATE_THE_PERCENT_CHANG");this._oValueHelpIcon.setTooltip(T);}else{this._oValueHelpIcon.setSrc(sap.ui.core.IconPool.getIconURI("collections-management"));}return this._oValueHelpIcon;};sap.extent.uilib.CalculatorField.prototype._initDialog=function(){if(!this.calcDialog){var t=this;this.calcDialog=new sap.m.Popover({placement:sap.m.PlacementType.Auto,showHeader:true,contentWidth:'auto',afterClose:function(e){t.afterDialogClose(e);},footer:this._getDialogButtons()});this.calcDialog.addStyleClass('calcFieldPopover');}};sap.extent.uilib.CalculatorField.prototype._normalize=function(v){var r=(isNaN(v)||v==='')?0:v;var m='1e+8';if(r!=0){r=Math.round(r*m)/m;}return r;};sap.extent.uilib.CalculatorField.prototype.setCalcFieldValue=function(v){this.setValue(v);};sap.extent.uilib.CalculatorField.prototype._resetDialog=function(e){this.calculatorCancelBtnClick=false;this.setPopoverFieldValueAndTooltip(this.changeAmountField,"");this.setPopoverFieldValueAndTooltip(this.changePercentField,"");this.setPopoverFieldValueAndTooltip(this.totalAmountField,this._normalize(this.getValue()));};sap.extent.uilib.CalculatorField.prototype.setPopoverFieldValueAndTooltip=function(f,v){f.setValue(v);if(!sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){f.setTooltip(v);}};sap.extent.uilib.CalculatorField.prototype._getDialogButtons=function(){var t=this;var b=new sap.m.Toolbar();this._cancelButton=new sap.m.Button({text:this._oBundle.getText("COMMON_Cancel"),type:sap.m.ButtonType.Default,enabled:true,width:'101px',press:function(e){t.calculatorCancelBtnClick=true;t.calcDialog.close();}});this._saveButton=new sap.m.Button({text:this._oBundle.getText("COMMON_Save"),type:sap.m.ButtonType.Emphasized,enabled:true,width:'101px',press:[this._handleSavePress,this]});b.addContent(this._saveButton);b.addContent(this._cancelButton);return b;};sap.extent.uilib.CalculatorField.prototype._handleSavePress=function(e){var t=this.totalAmountField.getValue();if(!t){t="0";}var p=this._oFloatNumberFormat.parse(t);p=this._parseToNumber(p);var f=this._oFloatNumberFormat.format(p);this.setCalcFieldValue(f);this.fireChangeEvent(t);this.calcDialog.close();};sap.extent.uilib.CalculatorField.prototype._getCalcForm=function(c){var f=new sap.ui.layout.VerticalLayout({width:'auto'});f.addStyleClass('calcDialogField');f.addContent(this._getField(c,c._oBundle.getText("ECT_PP3_CALC_CHANGE_AMOUNT"),'changeAmount',c.changeAmountField));f.addContent(this._getField(c,c._oBundle.getText("ECT_PP3_CALC_CHANGE_PERCENT"),'changePercent',c.changePercentField));f.addContent(this._getField(c,c._oBundle.getText("ECT_HRIS_JI_TOTAL_AMOUNT"),'totalAmount',c.totalAmountField));return f;};sap.extent.uilib.CalculatorField.prototype._getField=function(c,l,i,f){var a=new sap.m.Label(i+c.sId);a.setText(l);var b=new sap.ui.layout.VerticalLayout({width:'auto'});b.addContent(a);b.addContent(f);a.setLabelFor(f);return b;};sap.extent.uilib.CalculatorField.prototype.validateNumericInput=function(v){var i=true;if(v==='-'){return i;}if(v[v.length-1]===this._decimalSeparator){v+='0';}i=!isNaN(this._parseToNumber(this._oFloatNumberFormat.parse(v)));return i;};sap.extent.uilib.CalculatorField.prototype.validateInput=function(){if(!this._oValueHelpIcon){this._oValueHelpIcon=this._getValueHelpIcon();}var v=this.getValue();this.setShowValueHelp(v.length>0);if(this.getValueType()=="PERCENTAGE"){this.addStyleClass("amountTypePercent");}var r=this.getRowID();if(r<=0){this.addStyleClass("amountTypePercentNoCalc");}var i=this.validateNumericInput(v);if(i||v===''){this.setValueState(sap.ui.core.ValueState.None);if(i&&v!='-'){this._oValueHelpIcon.removeStyleClass('sapExtentUilibMaskableCoreInactive');}else{this._oValueHelpIcon.addStyleClass('sapExtentUilibMaskableCoreInactive');return false;}}else{this.setValueStateText(this._oBundle.getText('ECT_PP3_CALC_VALUE_STATE_ERROR'));this.setValueState(sap.ui.core.ValueState.Error);this._oValueHelpIcon.addStyleClass('sapExtentUilibMaskableCoreInactive');return false;}return true;};sap.extent.uilib.CalculatorField.prototype._handleChangePercent=function(e){var o=this._oFloatNumberFormat.parse(this.getValue());o=this._parseToNumber(o);var p=this.changePercentField.getValue();var v=p;if(!sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){this.changePercentField.setTooltip(v);}if(v==='-'){return true;}var i=this.validateNumericInput(p);if(i||v===''){this.changePercentField.setValueState(sap.ui.core.ValueState.None);this.changeAmountField.setValueState(sap.ui.core.ValueState.None);this.totalAmountField.setValueState(sap.ui.core.ValueState.None);this._saveButton.setEnabled(true);if(v===''){this.setPopoverFieldValueAndTooltip(this.totalAmountField,this._oFloatNumberFormat.format(o));this.setPopoverFieldValueAndTooltip(this.changeAmountField,0);return true;}}else{this.changePercentField.setValueStateText(this._oBundle.getText('ECT_PP3_CALC_VALUE_STATE_ERROR'));this.changePercentField.setValueState(sap.ui.core.ValueState.Error);this._saveButton.setEnabled(false);this.setPopoverFieldValueAndTooltip(this.totalAmountField,"");this.setPopoverFieldValueAndTooltip(this.changeAmountField,"");return false;}p=this._oFloatNumberFormat.parse(v);p=this._parseToNumber(p);var n=this._normalize(o+(o*p*0.01));this.setPopoverFieldValueAndTooltip(this.totalAmountField,this._oFloatNumberFormat.format(n));var c=this._normalize(n-o);this.setPopoverFieldValueAndTooltip(this.changeAmountField,this._oFloatNumberFormat.format(c));};sap.extent.uilib.CalculatorField.prototype._parseToNumber=function(v){if((typeof v==="string")&&v!=""){return(v*1);}return v;};sap.extent.uilib.CalculatorField.prototype._handleChangeTotal=function(e,d){var v=this.totalAmountField.getValue();if(!sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){this.totalAmountField.setTooltip(v);}var o=this._oFloatNumberFormat.parse(this.getValue());o=this._parseToNumber(o);if(v==='-'){return true;}var i=this.validateNumericInput(v);if(i||v===''){this.totalAmountField.setValueState(sap.ui.core.ValueState.None);this.changeAmountField.setValueState(sap.ui.core.ValueState.None);this.changePercentField.setValueState(sap.ui.core.ValueState.None);this._saveButton.setEnabled(true);if(v===''){if(o===0){this.setPopoverFieldValueAndTooltip(this.changePercentField,"");this.setPopoverFieldValueAndTooltip(this.changeAmountField,"");}else{this.setPopoverFieldValueAndTooltip(this.changePercentField,'-100');this.setPopoverFieldValueAndTooltip(this.changeAmountField,this._oFloatNumberFormat.format(o*-1));}return true;}}else{this.totalAmountField.setValueStateText(this._oBundle.getText('ECT_PP3_CALC_VALUE_STATE_ERROR'));this.totalAmountField.setValueState(sap.ui.core.ValueState.Error);this.setPopoverFieldValueAndTooltip(this.changePercentField,"");this.setPopoverFieldValueAndTooltip(this.changeAmountField,"");this._saveButton.setEnabled(false);return false;}v=this._oFloatNumberFormat.parse(v);v=this._parseToNumber(v);var c=v-o;var p;this.setPopoverFieldValueAndTooltip(this.changeAmountField,this._oFloatNumberFormat.format(c));p=this._calculatePercentage(o,c);if(!isNaN(p)){this.setPopoverFieldValueAndTooltip(this.changePercentField,this._oFloatNumberFormat.format(p));}};sap.extent.uilib.CalculatorField.prototype._handlePressCalculator=function(){var c=this.getValue();if(c===''){c=0;}this.setPopoverFieldValueAndTooltip(this.totalAmountField,c);this.changePercentField.setValueState(sap.ui.core.ValueState.None);this.changeAmountField.setValueState(sap.ui.core.ValueState.None);this.totalAmountField.setValueState(sap.ui.core.ValueState.None);};sap.extent.uilib.CalculatorField.prototype.onPressCalculator=function(e,s){this._handlePressCalculator(e);this.calcDialog.openBy(s);};sap.extent.uilib.CalculatorField.prototype.onChangeAmount=function(e){var n=this.changeAmountField.getValue();if(!sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){this.changeAmountField.setTooltip(n);}if(n==='-'){return true;}var i=this.validateNumericInput(n);var o=this._oFloatNumberFormat.parse(this.getValue());o=this._parseToNumber(o);if(i||n===' '||n===''){this.changeAmountField.setValueState(sap.ui.core.ValueState.None);this.totalAmountField.setValueState(sap.ui.core.ValueState.None);this.changePercentField.setValueState(sap.ui.core.ValueState.None);this._saveButton.setEnabled(true);if(n===' '||n===''){this.setPopoverFieldValueAndTooltip(this.totalAmountField,this._oFloatNumberFormat.format(o));this.setPopoverFieldValueAndTooltip(this.changePercentField,"");return true;}}else{this.changeAmountField.setValueStateText(this._oBundle.getText('ECT_PP3_CALC_VALUE_STATE_ERROR'));this.changeAmountField.setValueState(sap.ui.core.ValueState.Error);this._saveButton.setEnabled(false);this.setPopoverFieldValueAndTooltip(this.totalAmountField,"");this.setPopoverFieldValueAndTooltip(this.changePercentField,"");return false;}var p;if(n){n=this._oFloatNumberFormat.parse(n);n=this._parseToNumber(n);var s=n+o;s=this._oFloatNumberFormat.format(s);this.setPopoverFieldValueAndTooltip(this.totalAmountField,s);}else{this.setPopoverFieldValueAndTooltip(this.totalAmountField,this._oFloatNumberFormat.format(o));}p=this._calculatePercentage(o,n);this.setPopoverFieldValueAndTooltip(this.changePercentField,this._oFloatNumberFormat.format(p));};sap.extent.uilib.CalculatorField.prototype.onChangePercent=function(e){this._handleChangePercent();};sap.extent.uilib.CalculatorField.prototype.onChangeTotal=function(e,d){this._handleChangeTotal(e,d);};sap.extent.uilib.CalculatorField.prototype.afterDialogClose=function(e){this._resetDialog();};sap.extent.uilib.CalculatorField.prototype.handleCalcFieldKeyUp=function(e){if(e.keyCode===jQuery.sap.KeyCodes.F4){e.preventDefault();if(this.validateInput(e)){this.onPressCalculator(e,this._getValueHelpIcon());}}this.validateInput(e);};sap.extent.uilib.CalculatorField.prototype._decimalAdjust=function(t,v,e){if(typeof e==='undefined'||+e===0){return Math[t](v);}v=+v;e=+e;if(isNaN(v)||!(typeof e==='number'&&e%1===0)){return NaN;}v=v.toString().split('e');v=Math[t](+(v[0]+'e'+(v[1]?(+v[1]-e):-e)));v=v.toString().split('e');return+(v[0]+'e'+(v[1]?(+v[1]+e):e));};sap.extent.uilib.CalculatorField.prototype._round10=function(v,e){return this._decimalAdjust('round',v,e);};sap.extent.uilib.CalculatorField.prototype._calculatePercentage=function(d,n){var p='';if(d!=0){p=this._normalize(n/d*100);}return p;};sap.extent.uilib.CalculatorField.prototype.exit=function(){if(this._saveButton){this._saveButton.destroy();}if(this._cancelButton){this._cancelButton.destroy();}sap.m.Input.prototype.exit.apply(this);};},"sap/extent/uilib/CalculatorFieldRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.CalculatorFieldRenderer");jQuery.sap.require("sap.m.InputRenderer");sap.extent.uilib.CalculatorFieldRenderer=sap.ui.core.Renderer.extend(sap.m.InputRenderer);},"sap/extent/uilib/ColorBox.js":function(){jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.ColorBox",{metadata:{library:"sap.extent.uilib",properties:{boxColor:{type:"string",group:"Misc",defaultValue:'#ffffff'},height:{type:"string",group:"Misc",defaultValue:'400px'},width:{type:"string",group:"Misc"},boxText:{type:"string",group:"Misc",defaultValue:''},boxIndex:{type:"string",group:"Misc",defaultValue:'0'}},events:{click:{},mouseover:{},mouseout:{},touchstart:{},touchend:{},keydown:{},press:{}}}});sap.extent.uilib.ColorBox.prototype.onAfterRendering=function(){this.attachBrowserEvent('click',jQuery.proxy(this._onCellClick),this);};sap.extent.uilib.ColorBox.prototype.getSingleBoxText=function(i){var t=this.getBoxText()['text'+i];return(t===undefined)?'':t;};sap.extent.uilib.ColorBox.prototype.setBackgroundColor=function(c,b){var d='#cccccc';return(c===undefined)?d:c;};sap.extent.uilib.ColorBox.prototype._onCellClick=function(e){this.fireClick({color:this.boxColor,colorBox:this});};},"sap/extent/uilib/ColorBoxRenderer.js":function(){jQuery.sap.declare('sap.extent.uilib.ColorBoxRenderer');sap.extent.uilib.ColorBoxRenderer={};sap.extent.uilib.ColorBoxRenderer.render=function(r,c){var a=c.boxColor;var b=c.boxText;r.write('<div');r.writeControlData(c);r.addClass('box');r.addClass('nineboxcell'+c.sId);r.writeClasses();r.writeAttributeEscaped('style','background-color:'+a);r.writeAttributeEscaped('boxindex',c.getProperty('boxIndex'));r.write('">');if(b){r.writeEscaped(b);}r.write('</div>');};},"sap/extent/uilib/ColorLabel.js":function(){jQuery.sap.declare("sap.extent.uilib.ColorLabel");jQuery.sap.require("sap.m.Label");sap.m.Label.extend('sap.extent.uilib.ColorLabel',{metadata:{library:"sap.extent.uilib",properties:{cssStyle:{type:"object[]",group:"Misc",defaultValue:[]}}},setCssStyle:function(c){this.setProperty('cssStyle',c,true);for(var i=0;i<c.length;i++){this.$().css(c[i].key,c[i].value);}return this;}});},"sap/extent/uilib/ColorLabelRenderer.js":'jQuery.sap.declare("sap.extent.uilib.ColorLabelRenderer");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.LabelRenderer");var LabelRenderer=sap.m.LabelRenderer;sap.extent.uilib.ColorLabelRenderer=sap.ui.core.Renderer.extend(LabelRenderer);\nsap.extent.uilib.ColorLabelRenderer.render=function(a,l){var r=LabelRenderer;var c=l.getCssStyle();if(c&&c.length){for(var i=0;i<c.length;i++){a.addStyle(c[i].key,c[i].value);}}a.addStyle("padding","0.1em 0.3em");r.render.apply(this,arguments);};\n',"sap/extent/uilib/ColorSelect.js":function(){jQuery.sap.declare("sap.extent.uilib.ColorSelect");jQuery.sap.require("sap.m.Select");jQuery.sap.require("sap.extent.uilib.ColorSelectList");jQuery.sap.require("sap.extent.uilib.ColorSelectListItem");sap.m.Select.extend('sap.extent.uilib.ColorSelect',{onSelectionChange:function(c){var l=this.$('label');if(l){var i=this.getSelectedItem();if(i instanceof sap.extent.uilib.ColorSelectListItem){var I=i.getItemClass();var a=i.getCustomStyle();if(I){l.removeClass(I);}if(a){l.css(a);}}}sap.m.Select.prototype.onSelectionChange.apply(this,arguments);var i=this.getSelectedItem();if(i instanceof sap.extent.uilib.ColorSelectListItem){var I=i.getItemClass();var a=i.getCustomStyle();if(a){document.getElementById(l[0].id).style.cssText=a;}}},createList:function(){this._oList=new sap.extent.uilib.ColorSelectList({width:"100%"}).addEventDelegate({ontap:function(e){this.close();}},this).attachSelectionChange(this.onSelectionChange,this);return this._oList;}});},"sap/extent/uilib/ColorSelectList.js":function(){jQuery.sap.declare("sap.extent.uilib.ColorSelectList");jQuery.sap.require("sap.m.SelectList");sap.m.SelectList.extend('sap.extent.uilib.ColorSelectList',{});},"sap/extent/uilib/ColorSelectListItem.js":function(){jQuery.sap.declare("sap.extent.uilib.ColorSelectListItem");jQuery.sap.require("sap.extent.uilib.library");sap.ui.core.Item.extend("sap.extent.uilib.ColorSelectListItem",{metadata:{properties:{itemClass:'string',customStyle:'string'}}});},"sap/extent/uilib/ColorSelectListRenderer.js":'jQuery.sap.declare("sap.extent.uilib.ColorSelectListRenderer");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.SelectListRenderer");jQuery.sap.require("sap.extent.uilib.ColorSelectListItem");var SelectListRenderer=sap.m.SelectListRenderer;sap.extent.uilib.ColorSelectListRenderer=sap.ui.core.Renderer.extend(SelectListRenderer);\nsap.extent.uilib.ColorSelectListRenderer.renderItem=function(r,l,i,s){if(i instanceof sap.extent.uilib.ColorSelectListItem){var I=i.getItemClass();if(I){r.addClass(I);}}SelectListRenderer.renderItem.apply(this,arguments);};\nsap.extent.uilib.ColorSelectListRenderer.writeItemAccessibilityState=function(r,l,i,s){if(i instanceof sap.extent.uilib.ColorSelectListItem){var c=i.getCustomStyle();r.writeCustomStyle=function(){this.write(" style=\\""+c+"\\" ");return this;};if(c){r.writeCustomStyle();}}SelectListRenderer.writeItemAccessibilityState.apply(this,arguments);};\n',"sap/extent/uilib/ColorSelectRenderer.js":'jQuery.sap.declare("sap.extent.uilib.ColorSelectRenderer");jQuery.sap.require("sap.extent.uilib.ColorSelectListItem");jQuery.sap.require("sap.m.SelectRenderer");jQuery.sap.require("sap.extent.uilib.library");var SelectRenderer=sap.m.SelectRenderer;sap.extent.uilib.ColorSelectRenderer=sap.ui.core.Renderer.extend(SelectRenderer);\nsap.extent.uilib.ColorSelectRenderer.renderLabel=function(r,s){r.writeCustomStyle=function(){var i=s.getSelectedItem();if(i instanceof sap.extent.uilib.ColorSelectListItem){if(i.getCustomStyle()){this.write(" style=\\""+i.getCustomStyle()+"\\" ");}return this;}};var S=s.getSelectedItem(),t=s.getTextDirection(),T=sap.ui.core.Renderer.getTextAlign(s.getTextAlign(),t);r.write(\'<label class="\'+SelectRenderer.CSS_CLASS+\'Label"\');r.writeAttribute("id",s.getId()+"-label");r.writeAttribute("for",s.getId());if(t!==sap.ui.core.TextDirection.Inherit){r.writeAttribute("dir",t.toLowerCase());}if(T){r.addStyle("text-align",T);}r.writeCustomStyle();r.write(">");r.write(\'<span class="sapMSelectListItemText">\');r.writeEscaped(S?S.getText():"");r.write("</span>");r.write("</label>");};\n',"sap/extent/uilib/ComboBox.js":function(){jQuery.sap.declare("sap.extent.uilib.ComboBox");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.ComboBox");jQuery.sap.require("sap.m.ComboBoxBase");jQuery.sap.require("sap.m.ComboBoxTextField");sap.m.ComboBox.extend("sap.extent.uilib.ComboBox",{metadata:{library:"sap.extent.uilib"}});sap.extent.uilib.ComboBox.DELETE_KEY_CODE=8;sap.extent.uilib.ComboBox.prototype.init=function(){if(sap.m.ComboBox.prototype.init){sap.m.ComboBox.prototype.init.call(this);}this.setFilterFunction(function(t,i){var e=t&&t.hasOwnProperty("value")&&t.value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');return i.getText().match(new RegExp(e,"i"))||i.getKey().match(new RegExp(e,"i"));});this._commonUtils=sap.extent.uilib.util.CommonUtils.getInstance();this._inputLock=false;};sap.extent.uilib.ComboBox.prototype.onAfterRendering=function(){if(sap.m.ComboBox.prototype.onAfterRendering){sap.m.ComboBox.prototype.onAfterRendering.call(this);}this._commonUtils.calculateComboWidth(this.getValue(),this,true);sap.extent.uilib.util.CommonUtils.setStrikedSpanId(this);};sap.extent.uilib.ComboBox.prototype.matchItemValue=function(v){var b=false;var i=this.getItems();jQuery.each(i,function(a,c){if(c.getText()==v){b=true;}});return b;};sap.extent.uilib.ComboBox.prototype.setValue=function(v){if(this.getSelectedKey().length==0&&!this.matchItemValue(v)){sap.m.ComboBoxBase.prototype.setValue.call(this,"");return false;}sap.m.ComboBoxBase.prototype.setValue.call(this,v);setTimeout(jQuery.proxy(function(){this._commonUtils.calculateComboWidth(v,this);},this),500);};sap.extent.uilib.ComboBox.prototype.oncompositionend=function(e){sap.m.ComboBoxTextField.prototype.oncompositionend.apply(this,arguments);this._inputLock=false;this.oninput(e);};sap.extent.uilib.ComboBox.prototype.oninput=function(e){if(this.onInputTime){clearTimeout(this.onInputTime)}this.onInputTime=setTimeout(function(){sap.m.ComboBoxBase.prototype.oninput.apply(this,arguments);if(typeof e.isMarked==="function"&&e.isMarked("invalid")){return;}this.syncPickerContent();var t=(this.getPickerType()==="Dropdown");this.loadItems(function(){var s=this.getSelectedItem(),v=e.target.value,E=v==="",c=e.srcControl,V;if(E&&!this.bOpenedByKeyboardOrButton){V=this.getItems();}else{V=this.filterItems({properties:["text"],value:v}).items;V.forEach(function(a){if(a.getEnabled()==false){this.getListItem(a).setVisible(false);}}.bind(this));}var i=!!V.length;var f=V[0];this.getItems().forEach(function(a){var l=a.data("InputWithSuggestionsListItem");l.setVisible(false)});this.getItems().forEach(function(a){var l=a.data("InputWithSuggestionsListItem");V.forEach(function(b){if(l.getId()===b.data("InputWithSuggestionsListItem").getId()){l.setVisible(true)}})});if(E||!i){this.setSelection(null);if(s!==this.getSelectedItem()){this.fireSelectionChange({selectedItem:this.getSelectedItem()});}}if(i){if(E&&!this.bOpenedByKeyboardOrButton){this.close();}else if(t){this.open();this.scrollToItem&&this.scrollToItem(this.getSelectedItem());}}else if(this.isOpen()){if(t){this.close();}}else{this.clearFilter();}},{name:"input",busyIndicator:false});if(this.bProcessingLoadItemsEvent&&t){this.open();}}.bind(this),500);};},"sap/extent/uilib/ComboBoxRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.ComboBoxRenderer");jQuery.sap.require("sap.m.ComboBoxRenderer");sap.extent.uilib.ComboBoxRenderer=sap.ui.core.Renderer.extend(sap.m.ComboBoxRenderer);},"sap/extent/uilib/ConfigurableLabel.js":function(){jQuery.sap.declare("sap.extent.uilib.ConfigurableLabel");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.sf.peopleprofile.util.pp3core.SFAPIHelper");jQuery.sap.require("sap.extent.uilib.util.FieldValueExtractor");jQuery.sap.require("sap.ui.core.format.DateFormat");jQuery.sap.require("sap.sf.peopleprofile.model.pp3core.DWRJSONUtils");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");sap.ui.core.Control.extend("sap.extent.uilib.ConfigurableLabel",{metadata:{library:"sap.extent.uilib",properties:{isRenderedInEditForm:{type:"boolean",group:"Misc",defaultValue:false},isMaskable:{type:"boolean",group:"Misc",defaultValue:false},masked:{type:"boolean",group:"Misc",defaultValue:true},unit:{type:"string",group:"Misc",defaultValue:null},technicalValue:{type:"string",group:"Misc",defaultValue:null},originalType:{type:"string",group:"Misc",defaultValue:null},type:{type:"string",group:"Misc",defaultValue:null},href:{type:"string",group:"Misc",defaultValue:null},target:{type:"string",group:"Misc",defaultValue:null},oldValue:{type:"string",group:"Misc",defaultValue:null},oldTechnicalValue:{type:"string",group:"Misc",defaultValue:null},oldUnit:{type:"string",group:"Misc",defaultValue:null},otherValue:{type:"string",group:"Misc",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null},style:{type:"string",group:"Misc",defaultValue:null},labelledBy:{type:"object",group:"Misc",defaultValue:null},encryptedText:{type:"string",group:"Misc",defaultValue:null},fieldId:{type:"string",group:"Misc",defaultValue:null},errorFromServer:{type:"string",group:"Misc",defaultValue:null},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:null},fieldMetaData:{type:"object",group:"Misc",defaultValue:null},blockId:{type:"string",group:"Misc",defaultValue:null},compId:{type:"string",group:"Misc",defaultValue:null},grid:{type:"object",group:"Misc",default:false}},aggregations:{value:{type:"sap.m.Text",multiple:false,visibility:"hidden"},oldValue:{type:"sap.m.Text",multiple:false,visibility:"hidden"},valueTech:{type:"sap.m.Text",multiple:false,visibility:"hidden"},valueUnit:{type:"sap.m.Text",multiple:false,visibility:"hidden"}}}});sap.extent.uilib.ConfigurableLabel.prototype.init=function(){"use strict";this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.ConfigurableLabel.prototype._getTheValue=function(v){var V=v;if(sap.sf.peopleprofile.model.pp3core.DWRJSONUtils.isJSON(v)){V=sap.sf.peopleprofile.model.pp3core.DWRJSONUtils.getConsumableValue(v);}if(V&&typeof V=="object"){V=V.userDisplayValue||V.primaryDisplayText||V.label}return V||"-"};sap.extent.uilib.ConfigurableLabel.prototype.getRatingSources=function(e){var u=sap.ui.getCore().getModel("user").getProperty("/userId");var t=this;var l=e.oSource;var c={callback:function(d){d=JSON.parse(d);if(d&&d.success){var p=new sap.m.Popover({contentWidth:"400px",title:t.oBundle.getText("EMPLOYEE_LEARNING_COMPETENCIES_PORTLET_LAST_RATING_SOURCES",d.ratings.length)});var r=sap.ui.xmlfragment("sap.sf.peopleprofile.view.pp3core.viewpage.RatingSources",t);var m=new sap.ui.model.json.JSONModel();m.setData(d);r.setModel(m);p.addContent(r);p.openBy(l);}}};smrfLazyLoader.getControllerInstance("competencyPortletController",null,"getRatingSourcesForPP3",[this.getBlockId(),u,this.getCompId(),c]);};sap.extent.uilib.ConfigurableLabel.prototype.getDecriptedValue=function(e){this._controllerInstance=AjaxService.getMBeanInstance();var t=this;var l=e.oSource;var f=this.getFieldId().replace(/FIELD_WITH_CONTEXT/ig,"");if(this.getType()=="MDFRALField"||this.getType()=="MDFPIIField"){var c={callback:function(d){if(d.actionResultVO&&d.actionResultVO.status==="success"){var n=d.value;var v=sap.extent.uilib.util.EditFormGeneratorHelper.standardInputOldFormatter(n);if(t.getOriginalType()=="DATE"){v=sap.extent.uilib.util.FieldValueExtractor.getItemFromDate(n);}else if(t.getOriginalType()=="DateTime"&&v.length>0){v=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"medium"}).format(new Date(v));}t.setText(v);t.setEncryptedText("");t.maskField(l)}else{var o={messages:d.actionResultVO.global,icon:sap.m.MessageBox.Icon.ERROR,orderedList:true,data:d.actionResultVO};sap.extent.uilib.util.EditFormGeneratorHelper.showAlertMessageBox(o);}}};smrfLazyLoader.getControllerInstance("genericObjectController","go","getDecryptedFieldValue",[{fieldId:f,encryptedString:this.getEncryptedText()},c]);}else{var c={callback:function(d){if(d.status==="success"){var n=t._getTheValue(d.values&&d.values.nv);var o=t._getTheValue(d.values&&d.values.ov);var m=t.getFieldMetaData();if(m){n=sap.extent.uilib.util.FieldValueExtractor.getItemFromPicklist(n,m);o=sap.extent.uilib.util.FieldValueExtractor.getItemFromPicklist(o,m);}if(t.getOriginalType()=="DATE"){n=sap.extent.uilib.util.FieldValueExtractor.getItemFromDate(n);o=sap.extent.uilib.util.FieldValueExtractor.getItemFromDate(o);}t.setText(n);if(n!==o){t.setOldValue(o)}else{t.setOldValue("")}t.setEncryptedText("");t.maskField(l)}else{var a={messages:d.global,icon:sap.m.MessageBox.Icon.ERROR,orderedList:true,data:d};sap.extent.uilib.util.EditFormGeneratorHelper.showAlertMessageBox(a);}}};smrfLazyLoader.getControllerInstance("FieldValueDecryptionController","hris","getDecryptedFieldValue",[sap.ui.getCore().getModel("user").getProperty("/userId"),f,this.getEncryptedText(),c]);}};sap.extent.uilib.ConfigurableLabel.prototype._ast="*******";sap.extent.uilib.ConfigurableLabel.prototype.maskField=function(l){var t=this.getAggregation("value");var o=this.getAggregation("oldValue");var a=this.getAggregation("valueTech");var b=this.getAggregation("valueUnit");var c=this.getTechnicalValue();var v=this.getText();var d=this.getOldValue();var u=this.getUnit();l=l.oSource?l.oSource:l;if(l.getText()===this.oBundle.getText("COMMON_Hide")){l.setText(this.oBundle.getText("COMMON_Show"));t.setText(this._ast);t.removeStyleClass("updatedTextPattern");o.setText("");a.setText("");b.setText("");}else{l.setText(this.oBundle.getText("COMMON_Hide"));t.setText(v);if(d&&v!=d){t.addStyleClass("updatedTextPattern");o.setText(d);o.addStyleClass("strikethroughTextPattern")}if(c&&c.length>0){a.setText(" ("+c+")");}if(u&&u.length>0){b.setText(" "+u);}}l.rerender();var s=jQuery(this.getDomRef()).find(".linkShowHidePattern");if(s&&s.length>0){for(var i=0;i<s.length;i++){var e=jQuery(this.getDomRef()).find(".linkShowHidePattern")[i].closest('tr');var f=jQuery(this.getDomRef()).find(".linkShowHidePattern")[i].id;if(e&&e.children&&e.children[0]){var g=e.children[0].firstChild&&e.children[0].firstChild.hasAttribute("id")&&e.children[0].firstChild.id;if(g){s[i].setAttribute('aria-labelledby',g+' '+f);}}}}t.rerender();o.rerender();a.rerender();b.rerender();};sap.extent.uilib.ConfigurableLabel.prototype.generateTelLinkValue=function(v){return v.replace(/ext\.|\s/gi,"");};sap.extent.uilib.ConfigurableLabel.prototype.onBeforeRendering=function(){"use strict";if(this.oLink){var m=jQuery(this.getDomRef()).find('#'+this.oLink.getId()).length>0?false:true;this.setProperty('masked',m);}var t=new sap.m.Text();t.setText(this.getText());this.setAggregation("value",t);if(this.getGrid()&&sap.extent.uilib.util.CommonUtils.prototype.isNumberColumnType(this.getOriginalType())){t.setTextAlign(sap.ui.core.TextAlign.Right);}if(this.getIsMaskable()){t.addStyleClass("valuePattern");t.setText(this._ast);var o=new sap.m.Text();o.setText("");this.setAggregation("oldValue",o);var T=new sap.m.Text({text:""});T.addStyleClass("secondaryTextPattern");this.setAggregation("valueTech",T);var u=new sap.m.Text({text:""});u.addStyleClass("secondaryTextPattern");this.setAggregation("valueUnit",u);var b=this.oBundle;var v=this.getText();this.oLink=new sap.m.Button({text:this.oBundle.getText("COMMON_Show"),type:"Transparent",press:jQuery.proxy(function(e){if(this.getEncryptedText()){this.getDecriptedValue(e);}else{this.maskField(e);}},this)});this.oLink.addStyleClass("linkShowHidePattern");if(!this.getMasked()){t.setText(v);this.oLink.setText(b.getText("COMMON_Hide"));}}else if(this.getIsMaskable()&&this.getMasked()){t.setText(this._ast);}else if(this.getType()==="window.open"){var h=this.getHref();h=h.replace(/\'/g,"");var a=h.split(/[()]/);a=a[1].split(",");var U=a[0];var w=a[1];var W=a.slice(2,a.length);this.oLink=new sap.m.Link({text:this.getText(),href:"javascript:void(0);",target:this.getTarget(),press:jQuery.proxy(function(){window.open(U,w,W.join(","));})});}else if(this.getType()==="RATING"){this.oLink=new sap.m.Link({text:this.getText(),href:"javascript:void(0);",press:jQuery.proxy(function(e){this.getRatingSources(e);},this)});}};sap.extent.uilib.ConfigurableLabel.prototype.setStyle=function(s){this._style=s;};sap.extent.uilib.ConfigurableLabel.prototype.getStyle=function(){return this._style||null;};},"sap/extent/uilib/ConfigurableLabelRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.ConfigurableLabelRenderer");jQuery.sap.require("sap.ui.core.Renderer");jQuery.sap.require("sap.ui.core.HTML");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");sap.extent.uilib.ConfigurableLabelRenderer={};sap.extent.uilib.ConfigurableLabelRenderer.render=function(r,c){"use strict";var v=c.getAggregation("value").getText();r.write("<span");if(c.getTextDirection()==sap.ui.core.TextDirection.LTR){r.write(" dir='ltr'");}r.writeControlData(c);if(!c.getIsMaskable()){if(!c.getMasked()||!c.getIsMaskable()){var t=c.getType();if(t==="mailto"||t==="tel"){var l=v;if(t==="tel"){l=c.generateTelLinkValue(v)}var m=new sap.m.Link({wrapping:true,href:t+":"+l});if(t==="tel"){m.setTextDirection(sap.ui.core.TextDirection.LTR);}this._renderLink(r,c,m,v);}else if(t==="RATING"){this._renderLink(r,c,c.oLink);}else if(t==="link"||t==="window.open"){var C=sap.extent.uilib.util.CommonUtils.getInstance();var a=c.oLink||new sap.m.Link({target:c.getTarget(),validateUrl:true});if(c.getHref().includes("/attachmentdownload?")){a.attachPress(function(){C.getDownloadReasonEnable(c.getHref())},c);}else{a.setHref(c.getHref())}this._renderLink(r,c,a);}else if(t==="HTML"){r.write(">");r.renderControl(this._createSanitizedHTML(v));}else if((c.getOldValue()&&c.getOldValue()!==v)||(c.getOtherValue()&&c.getOtherValue().length>0&&c.getOtherValue()!==v)){if(c.getOldValue()&&c.getOldValue()!==v){r.write(">");if(!c.getIsRenderedInEditForm()){r.write("<span");r.writeAttributeEscaped("id",c.getId()+"-updatedValue");r.addClass("updatedTextPattern");r.writeClasses();r.write("title='"+c.oBundle.getText("ECT_PP3_NEW_VALUE_OF_CHANGED_FIELD")+": ");r.writeEscaped(v);r.write("'>");r.writeEscaped(v);r.write(" ");if(c.getTechnicalValue()&&c.getTechnicalValue().length>0){var s="updatedTextPattern";this._renderTechnicalValue(r,c,v,s);r.write(" ");}r.write("</span>");}if(c.getOldValue()!==' '){r.write("<span");r.writeAttributeEscaped("id",c.getId()+"-oldValue");if(c.getParent()&&c.getParent().getDomRef()&&c.getParent().getDomRef().className.indexOf("sapExtentUilibUtilEditFormGeneratorField")>-1){r.addStyle('width',"100%");r.addStyle('text-overflow',"ellipsis");r.writeStyles();}r.addClass("strikethroughTextPattern");r.writeAccessibilityState({role:"note",label:c.oBundle.getText("ECT_PP3_OLD_VALUE")+" "+c.getOldValue()});r.writeClasses();r.write("title='"+c.oBundle.getText("ECT_PP3_OLD_VALUE_OF_CHANGED_FIELD")+": ");r.writeEscaped(c.getOldValue());r.write("'>");r.writeEscaped(c.getOldValue());r.write(" ");if(c.getOldTechnicalValue()&&c.getOldTechnicalValue().length>0){var s="strikethroughTextPattern";this._renderOldTechnicalValue(r,c,c.getOldValue(),s);r.write(" ");}if(c.getOldUnit()&&c.getOldUnit().length>0){r.write("</span><span");r.writeAttributeEscaped("id",c.getId()+"-unitOfMeasure");r.addClass("strikethroughTextPattern");r.writeClasses();r.write(">");r.writeEscaped(" "+c.getOldUnit());}if(c.getParent()&&c.getParent().getDomRef()){jQuery(c.getParent().getDomRef()).find("input").attr("aria-describedby",c.getId());}}}if(c.getOtherValue()&&c.getOtherValue().length>0&&c.getOtherValue()!==v){r.write("</span>");if(c.getOldValue()!==""){r.write("</br>");}r.write("<span");r.writeAttributeEscaped("id",c.getId()+"-otherValue");r.addClass("otherValueTextPattern");r.writeAccessibilityState({role:"note",label:c.oBundle.getText("ECT_PP3_OLD_VALUE")});r.writeClasses();r.write("title='"+c.oBundle.getText("ECT_PP3_OLD_VALUE_OF_CHANGED_FIELD")+": ");r.writeEscaped(c.getOtherValue());r.write("'>");r.writeEscaped(c.getOtherValue());r.write(" ");}}else if(c.getTechnicalValue()&&c.getTechnicalValue().length>0){r.write("><span");r.writeAttributeEscaped("id",c.getId()+"-mainValue");r.addClass("valuePattern");r.writeClasses();r.write(">");r.writeEscaped(v);var s="secondaryTextPattern";this._renderTechnicalValue(r,c,v,s);}else if(c.getUnit()&&c.getUnit().length>0){r.write("><span");r.writeAttributeEscaped("id",c.getId()+"-mainValue");r.addClass("valuePattern");r.writeClasses();r.write(">");r.writeEscaped(v);r.write("</span><span");r.writeAttributeEscaped("id",c.getId()+"-unitOfMeasure");r.addClass("secondaryTextPattern");r.writeClasses();r.write(">");r.writeEscaped(" "+c.getUnit());}else{if(c.getStyle()&&c.getStyle().length){var b=c.getStyle();for(var i=0;i<b.length;i++){r.addStyle(b[i].key,b[i].style);}r.writeStyles();}if(v.indexOf("<br/>")>0){r.write(">");v="<span class=\"valuePattern\">"+v+"</span>";v=new sap.ui.core.HTML({sanitizeContent:true}).setContent(v);r.renderControl(v);}else{r.addClass("valuePattern");r.writeClasses();r.write(">");r.writeEscaped(v);}}}else{if(c.getStyle()&&c.getStyle().length){var b=c.getStyle();for(var i=0;i<b.length;i++){r.addStyle(b[i].key,b[i].style);}r.writeStyles();}r.addClass("valuePattern");r.writeClasses();r.write(">");r.writeEscaped(v);}}else{r.write(">");r.renderControl(c.getAggregation("value"));r.renderControl(c.getAggregation("oldValue"));if(c.getTechnicalValue()&&c.getTechnicalValue().length>0){r.write(" ");r.renderControl(c.getAggregation("valueTech"));}if(c.getUnit()&&c.getUnit().length>0){r.write(" ");r.renderControl(c.getAggregation("valueUnit"));}r.write("<br>");r.renderControl(c.oLink);}if(c.getErrorFromServer()&&c.getErrorFromServer().length>0){this._renderErrorFromServer(r,c);}r.write("</span>");};sap.extent.uilib.ConfigurableLabelRenderer._renderLink=function(r,c,l,v){l.setText(v?v:c.getText());if(c.getLabelledBy()){l.addAriaLabelledBy(c.getLabelledBy());}if(c&&c.getParent()){var p=c.getParent();if(p instanceof sap.ui.layout.HorizontalLayout&&p.getContent()&&p.getContent().length>0){p.getContent().forEach(function(a){if(a instanceof sap.ui.core.Icon){l.addAriaLabelledBy(a);if(a.getId()){l.addAriaDescribedBy(a.getId()+"-label");}}});}}r.addClass("linkPattern");r.writeClasses();r.write(">");r.renderControl(l);};sap.extent.uilib.ConfigurableLabelRenderer._renderErrorFromServer=function(r,c){r.write("</span><span");r.writeAttributeEscaped("id",c.getId()+"-serverError");r.addClass("sapExtentUILibBigNumberHigh");r.writeClasses();r.write("title='"+c.getErrorFromServer()+"'");r.write(">");r.writeEscaped(c.getErrorFromServer());};sap.extent.uilib.ConfigurableLabelRenderer._renderTechnicalValue=function(r,c,v,C){r.write("</span><span");r.writeAttributeEscaped("id",c.getId()+"-techValue");r.addClass(C);r.writeClasses();r.write(">");r.writeEscaped(" ("+c.getTechnicalValue());r.write(")&#x200E;");};sap.extent.uilib.ConfigurableLabelRenderer._renderOldTechnicalValue=function(r,c,v,C){r.write("</span><span");r.writeAttributeEscaped("id",c.getId()+"-oldTechValue");r.addClass(C);r.writeClasses();r.write(">");r.writeEscaped(" ("+c.getOldTechnicalValue());r.write(")&#x200E;");};sap.extent.uilib.ConfigurableLabelRenderer._createSanitizedHTML=function(t){var U=["mailto","http","https"];jQuery.each(U,function(i,p){jQuery.sap.addUrlWhitelist(p);});var h=new sap.ui.core.HTML({content:"<div class=\"sapExtentUilibConfigurableLabelHTMLItem\">"+t+"</div>",sanitizeContent:true});jQuery.each(U,function(i,p){jQuery.sap.removeUrlWhitelist(p);});return h;};},"sap/extent/uilib/ContentSummary.js":function(){jQuery.sap.require('sap.extent.uilib.library');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.declare('sap.extent.uilib.ContentSummary');sap.ui.core.Control.extend('sap.extent.uilib.ContentSummary',{metadata:{library:'sap.extent.uilib',events:{},properties:{'title':{type:'string'},'titlePath':{type:'string'},'description':{type:'string'},'footer':{type:'string'},'iconPath':{type:'string'},'compStatus':{type:'string'}},aggregations:{}},init:function(){}});},"sap/extent/uilib/ContentSummaryRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.ContentSummaryRenderer");sap.extent.uilib.ContentSummaryRenderer={render:function(r,c){var a,i,t,b,d,e,f,g;r.write('<div');r.writeControlData(c);r.addClass('sapExtentUilibContentSummaryWrapper');r.writeClasses();r.write('>');i=new sap.ui.layout.VerticalLayout();i.addStyleClass('sapUiSmallMarginEnd');t=new sap.ui.layout.VerticalLayout();b=new sap.ui.layout.HorizontalLayout();b.addStyleClass('sapUiMediumMarginBottom');if(c.getIconPath()){d=new sap.m.Image({src:c.getIconPath(),densityAware:false,alt:c.getTitle(),width:'40px'});i.addContent(d);}if(c.getTitlePath()){a=new sap.m.Link({text:c.getTitle(),href:c.getTitlePath()});a.addStyleClass('sapLinkColor');}else{a=new sap.m.Label({text:c.getTitle(),design:sap.m.LabelDesign.Bold});}t.addContent(a);e=new sap.m.Label({text:c.getDescription()});t.addContent(e);f=new sap.m.Label({text:c.getFooter()});t.addContent(f);g=new sap.m.Label({text:c.getCompStatus()});t.addContent(g);b.addContent(i);b.addContent(t);r.renderControl(b);r.write('</div>');}};},"sap/extent/uilib/CountryFlag.js":function(){jQuery.sap.declare("sap.extent.uilib.CountryFlag");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.CountryFlag",{metadata:{library:"sap.extent.uilib",properties:{countryCode:{type:"string",group:"Misc",defaultValue:null}}}});sap.extent.uilib.CountryFlag.prototype.init=function(){this._oFlagCssModel=sap.ui.getCore().getModel("flag");if(!this._oFlagCssModel){sap.ui.getCore().setModel(new sap.ui.model.json.JSONModel((this._getCountryFlagCSS())),"flag");this._oFlagCssModel=sap.ui.getCore().getModel("flag");}};sap.extent.uilib.CountryFlag.prototype.getStyleCSSClass=function(){if(this._isHideCountryFlagIcon()){return"";}var c=this.getCountryCode();if(c.length==3){var r=this._oFlagCssModel.getData();var s=".flag_s_"+c.toLowerCase();for(var i=0,l=r.length;i<l;i++){if(r[i].selectorText==s){return"sapExtentUilibCountryFlagStyle flag_s flag_s_"+c.toLowerCase();}}}return"";};sap.extent.uilib.CountryFlag.prototype._getCountryFlagCSS=function(){for(var i=0,l=document.styleSheets.length;i<l;i++){var f=document.styleSheets[i].href;if(f&&(f.indexOf("peopleprofileGroupViewCSS")>0||f.indexOf("uicore/css/flags")>0)){return document.styleSheets[i].cssRules;}}};sap.extent.uilib.CountryFlag.prototype._isHideCountryFlagIcon=function(){var h=false;var m=sap.ui.getCore().getModel("countryFlagIcon");var d=null;if(m&&(d=m.getData())){h=!!d.hideCountryFlagIcon;}return h;}},"sap/extent/uilib/CountryFlagRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.CountryFlagRenderer");sap.extent.uilib.CountryFlagRenderer={};sap.extent.uilib.CountryFlagRenderer.render=function(r,c){r.write("<div ");r.writeAttributeEscaped("class",c.getStyleCSSClass());r.writeControlData(c);r.write(">");r.write("</div>");};},"sap/extent/uilib/EDITMashupDialog.js":function(){jQuery.sap.declare("sap.extent.uilib.EDITMashupDialog");jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.DialogRenderer");sap.m.Dialog.extend("sap.extent.uilib.EDITMashupDialog",{metadata:{library:"sap.extent.uilib",properties:{closeCallback:{type:"function"},callbackListener:{type:"object"}}},renderer:sap.m.DialogRenderer});sap.extent.uilib.EDITMashupDialog.prototype.init=function(){if(sap.m.Dialog.prototype.init){sap.m.Dialog.prototype.init.apply(this,arguments);}this.setHorizontalScrolling(false);this.setVerticalScrolling(false);this.setStretch(true);this.addStyleClass("sapExtentUilibEditDialog");if(sap.ui.getCore().getModel("device").getProperty("/mobileEdit")){this.addStyleClass("bizxMobileEditDialog");}var c=new sap.m.Bar(this.getId()+"customHeader",{contentLeft:[new sap.m.Button(this.getId()+'backButton',{icon:"sap-icon://arrow-left",press:[this._closeDialog,this]})],contentMiddle:[new sap.m.Title(this.getId()+"IconHeader",{text:this.getTitle()})],contentRight:[]});this.setCustomHeader(c);this.setProperty("stretch",true,true);};sap.extent.uilib.EDITMashupDialog.prototype.setTitle=function(t){return sap.ui.getCore().getControl(this.getId()+"IconHeader").setText(t);};sap.extent.uilib.EDITMashupDialog.prototype.setHTMLContent=function(h){return this.addContent(new sap.ui.core.HTML({content:h,sanitizeContent:true}));};sap.extent.uilib.EDITMashupDialog.prototype.setCloseCallback=function(c){var b=sap.ui.getCore().byId(this.getId()+'backButton');b.detachPress(this._closeDialog,this);b.attachPress(c,this.getCallbackListener());};sap.extent.uilib.EDITMashupDialog.prototype._closeDialog=function(){this.close();}},"sap/extent/uilib/EditDialog.js":function(){jQuery.sap.declare("sap.extent.uilib.EditDialog");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.Dialog");sap.m.Dialog.extend("sap.extent.uilib.EditDialog",{metadata:{library:"sap.extent.uilib",properties:{addButtonText:{type:"string",group:"Misc",defaultValue:null},formData:{type:"object",group:"Misc",defaultValue:null},listener:{type:"object",group:"Misc",defaultValue:null},showAddButton:{type:"boolean",group:"Misc",defaultValue:true}},events:{submitPress:{allowPreventDefault:true},cancelPress:{allowPreventDefault:true},deletePress:{allowPreventDefault:true},addPress:{},donePress:{},effectiveDateChange:{},quickCardPress:{},inlineEditPress:{},pageFormRenderComplete:{},youMayAlsoPress:{},afterPageDelete:{}}}});jQuery.sap.require("sap.extent.uilib.EffectiveDate");jQuery.sap.require("sap.extent.uilib.util.EditFormGenerator");jQuery.sap.require("sap.m.MessageBox");jQuery.sap.require("sap.sf.commons.DatePicker");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.ButtonType");jQuery.sap.require("sap.extent.uilib.EditPage");sap.extent.uilib.EditDialog.prototype.init=function(){if(sap.m.Dialog.prototype.init){sap.m.Dialog.prototype.init.apply(this);}this.addStyleClass("sapExtentUilibEditDialog");this.removeStyleClass("sapUiPopupWithPadding");if(sap.ui.getCore().getModel("device").getProperty("/mobileEdit")){this.addStyleClass("bizxMobileEditDialog");}this._oEditPage=new sap.extent.uilib.EditPage({cancelPress:[this._handleCancel,this],listener:this,submitPress:[this._handleSubmit,this],deletePress:[this._handleDelete,this],effectiveDateChange:[function(e){var r;var p=e.getParameters();p.result=this.getEditFormGenerator().validate();this.fireEffectiveDateChange(p);},this],youMayAlsoPress:[function(e){this.fireYouMayAlsoPress(e.getParameters());},this],formRenderComplete:jQuery.proxy(this._handleFormRenderComplete,this)});this.addAggregation("content",this._oEditPage,true);if(!sap.ui.Device.system.desktop){this.setStretch(true);}else{this.setContentHeight("76%");this.setContentWidth("76%");}this.attachAfterClose(function(e){this.getEditPage().destroy();},this);};sap.extent.uilib.EditDialog.prototype.addFooterButton=function(b){return this._oEditPage.addFooterButton(b);};sap.extent.uilib.EditDialog.prototype.getEditPage=function(){return this._oEditPage;};sap.extent.uilib.EditDialog.prototype.getSubmitButton=function(){return this._oEditPage.getSubmitButton();};sap.extent.uilib.EditDialog.prototype.addFormDataToCurrent=function(n){return this._oEditPage.addFormDataToCurrent(n);};sap.extent.uilib.EditDialog.prototype.getCancelButton=function(){return this._oEditPage.getCancelButton();};sap.extent.uilib.EditDialog.prototype.getDeleteButton=function(){return this._oEditPage.getDeleteButton();};sap.extent.uilib.EditDialog.prototype.getDatePicker=function(){return this._oEditPage.getDatePicker();};sap.extent.uilib.EditDialog.prototype.addPage=function(n){this._oEditPage.addPage(n);return this;};sap.extent.uilib.EditDialog.prototype.back=function(){this._oEditPage.back();return this;};sap.extent.uilib.EditDialog.prototype.addCustomContent=function(c){this._oEditPage.addCustomContent(c);return this;};sap.extent.uilib.EditDialog.prototype.removeCustomContent=function(c){this._oEditPage.removeContent(c);return this;};sap.extent.uilib.EditDialog.prototype.getCustomContent=function(){return this._oEditPage.getContent();};sap.extent.uilib.EditDialog.prototype.hasFormChanged=function(){return this._oEditPage.hasFormChanged();};sap.extent.uilib.EditDialog.prototype.attachFieldChange=function(d,f,l,b){this._oEditPage.attachFieldChange(d,f,l,b);};sap.extent.uilib.EditDialog.prototype.detachFieldChange=function(f,l,b){this._oEditPage.detachFieldChange(f,l,b);};sap.extent.uilib.EditDialog.prototype.attachLiveFieldChange=function(d,f,l,b){this._oEditPage.attachLiveFieldChange(d,f,l,b);};sap.extent.uilib.EditDialog.prototype.detachLiveFieldChange=function(f,l,b){this._oEditPage.detachLiveFieldChange(f,l,b);};sap.extent.uilib.EditDialog.prototype.attachQuickCardPress=function(d,f,l){this._oEditPage.attachQuickCardPress(d,f,l);};sap.extent.uilib.EditDialog.prototype.detachQuickCardPress=function(f,l){this._oEditPage.detachQuickCardPress(f,l);};sap.extent.uilib.EditDialog.prototype.attachInlineEditPress=function(d,f,l){this._oEditPage.attachInlineEditPress(d,f,l);};sap.extent.uilib.EditDialog.prototype.detachInlineEditPress=function(f,l){this._oEditPage.detachInlineEditPress(f,l);};sap.extent.uilib.EditDialog.prototype.attachFormRenderComplete=function(d,f,l){this._oEditPage.attachFormRenderComplete(d,f,l);};sap.extent.uilib.EditDialog.prototype.detachFormRenderComplete=function(d,f,l){this._oEditPage.detachFormRenderComplete(d,f,l);};sap.extent.uilib.EditDialog.prototype.getEditFormGenerator=function(b){return this._oEditPage.getEditFormGenerator(b);};sap.extent.uilib.EditDialog.prototype.setShowEffectiveDate=function(n){this._oEditPage.setShowEffectiveDate(n);};sap.extent.uilib.EditDialog.prototype.setEffectiveDate=function(n){this._oEditPage.setEffectiveDate(n);return this;};sap.extent.uilib.EditDialog.prototype.setShowAddButton=function(n){this._oEditPage.setShowAddButton(n);return this.setProperty("showAddButton",n,true);};sap.extent.uilib.EditDialog.prototype.getEffectiveDate=function(){return this._oEditPage.getEffectiveDate();};sap.extent.uilib.EditDialog.prototype.deleteContent=function(c){this._oEditPage.deleteContent(c);};sap.extent.uilib.EditDialog.prototype.allowInlineAddButton=function(){var l=this.getListener();if(l&&typeof l.allowInlineAddButton==="function"){return l.allowInlineAddButton();}};sap.extent.uilib.EditDialog.prototype.allowInlineEditButton=function(){var l=this.getListener();if(l&&typeof l.allowInlineEditButton==="function"){return l.allowInlineEditButton();}};sap.extent.uilib.EditDialog.prototype.allowDeleteButton=function(){var l=this.getListener();if(l&&typeof l.allowDeleteButton==="function"){return l.allowDeleteButton();}};sap.extent.uilib.EditDialog.prototype.fakebuttons=function(){var l=this.getListener();if(l&&typeof l.fakebuttons==="function"){return l.fakebuttons();}};sap.extent.uilib.EditDialog.prototype.getCascadeData=function(i,p,v,c,C,s,g){var l=this.getListener();if(l&&typeof l.getCascadeData==="function"){return l.getCascadeData(i,p,v,c,C,s,g);}};sap.extent.uilib.EditDialog.prototype.getRuleData=function(i,v,r,I,R){var l=this.getListener();if(l&&typeof l.getRuleData==="function"){return l.getRuleData(i,v,r,I,R);}};sap.extent.uilib.EditDialog.prototype.getPicklistValues=function(p,a,b,i,r){var l=this.getListener();if(l&&typeof l.getPicklistValues==="function"){return l.getPicklistValues(p,a,b,i,r);}};sap.extent.uilib.EditDialog.prototype.getPicklistLabel=function(p,o){var l=this.getListener();if(l&&typeof l.getPicklistLabel==="function"){return l.getPicklistLabel(p,o);}};sap.extent.uilib.EditDialog.prototype.getAjaxKey=function(){var l=this.getListener();if(l&&typeof l.getAjaxKey==="function"){return l.getAjaxKey();}};sap.extent.uilib.EditDialog.prototype.getFACValues=function(u,s,c){var l=this.getListener();if(l&&typeof l.getFACValues==="function"){return l.getFACValues(u,s,c);}return null;};sap.extent.uilib.EditDialog.prototype.requestPropagationValues=function(s,v,p,c,r){var l=this.getListener();if(l&&typeof l.requestPropagationValues==="function"){return l.requestPropagationValues(s,v,p,c,r);}return null;};sap.extent.uilib.EditDialog.prototype.searchByInternalCode=function(s,v,c,u){var l=this.getListener();if(l&&typeof l.searchByInternalCode==="function"){return l.searchByInternalCode(s,v,c,u);}return null;};sap.extent.uilib.EditDialog.prototype.getNationalIdFormat=function(c,n){var l=this.getListener();if(l&&typeof l.getNationalIdFormat==="function"){return l.getNationalIdFormat(c,n);}return null;};sap.extent.uilib.EditDialog.prototype.getUploadUrl=function(c,m,a){var l=this.getListener();if(l&&typeof l.getUploadUrl==="function"){return l.getUploadUrl(c,m,a);}return null;};sap.extent.uilib.EditDialog.prototype.submitOnFieldChange=function(d,f,D,b){var l=this.getListener();if(l&&typeof l.submitOnFieldChange==="function"){return l.submitOnFieldChange(d,f,D,b);}return null;};sap.extent.uilib.EditDialog.prototype.validateAddress=function(d,s,b,a,c,i){var l=this.getListener();if(l&&typeof l.validateAddress==="function"){return l.validateAddress(d,s,b,a,c,i);}return null;};sap.extent.uilib.EditDialog.prototype.onFieldChange=function(e,o){var l=this.getListener();if(l&&typeof l.onFieldChange==="function"){return l.onFieldChange(e,o);}return null;};sap.extent.uilib.EditDialog.prototype.validate=function(s,v,c,f){var l=this.getListener();if(l&&typeof l.submitOnFieldChange==="function"){return l.validate(s,v,c,f);}return null;};sap.extent.uilib.EditDialog.prototype.getEditLayout=function(i,m){var l=this.getListener();if(l&&typeof l.getEditLayout==="function"){return l.getEditLayout(i,m);}return null;};sap.extent.uilib.EditDialog.prototype.getCustomPopinTable=function(){var l=this.getListener();if(l&&typeof l.getCustomPopinTable==="function"){return l.getCustomPopinTable();}return null;};sap.extent.uilib.EditDialog.prototype.openOrgChart=function(p,e){var l=this.getListener();if(l&&typeof l.openOrgChart==="function"){return l.openOrgChart(p,e);}return null;};sap.extent.uilib.EditDialog.prototype.onsapescape=function(e){if(this.hasFormChanged()===true){this._oEditPage._handleCancel(e);}else if(e.originalEvent&&e.originalEvent._sapui_handledByControl&&!e.originalEvent._sapui_UploadCollectionPP3){return;}else if(this._oEditPage.currentPageIsTopPage()){this.close();}else{this._oEditPage._handleCancel(e);}e.preventDefault();e.stopPropagation();};sap.extent.uilib.EditDialog.prototype.getDetailedInfo=function(r,a){var l=this.getListener();if(l&&typeof l.getDetailedInfo==="function"){return l.getDetailedInfo(r,a);}return null;};sap.extent.uilib.EditDialog.prototype.getLazyDataGridItems=function(r,a,p){var l=this.getListener();if(l&&typeof l.getLazyDataGridItems==="function"){return l.getLazyDataGridItems(r,a,p);}return null;};sap.extent.uilib.EditDialog.prototype.cacheAttachmentsInfo=function(a,d,i){var l=this.getListener();if(l&&typeof l.cacheAttachmentsInfo==="function"){l.cacheAttachmentsInfo(a,d,i);}};sap.extent.uilib.EditDialog.prototype._handleSubmit=function(e){this.fireSubmitPress({data:e.getParameter("data"),isForceSave:e.getParameter("isForceSave")});};sap.extent.uilib.EditDialog.prototype._handleDelete=function(e){this.fireDeletePress({formData:e.getParameter("formData")});};sap.extent.uilib.EditDialog.prototype._handleCancel=function(e){if(this.fireCancelPress(e.getParameters())){if(e.getParameter("currentPageIsTopPage")){this.close();}}};sap.extent.uilib.EditDialog.prototype.setAddButtonText=function(n){this._oEditPage.setAddButtonText(n);return this.setProperty("addButtonText",n,true);};sap.extent.uilib.EditDialog.prototype.setFormData=function(n,i,e){this._oEditPage.setFormData(n,i,e);if(sap.ui.Device.support.touch&&this.getSubmitButton()){this.setInitialFocus(this.getSubmitButton());this.oPopup.setInitialFocusId(this.getSubmitButton().getId());}this.toggleMobileEditDialogNoAddButton();return this.setProperty("formData",n,true);};sap.extent.uilib.EditDialog.prototype.toggleMobileEditDialogNoAddButton=function(){if(sap.ui.getCore().getModel("device").getProperty("/mobileEdit")){if(!this._oEditPage.getProperty("showAddButton")){this.addStyleClass("bizxMobileEditDialogNoAddButton");}else{this.removeStyleClass("bizxMobileEditDialogNoAddButton");}}};sap.extent.uilib.EditDialog.prototype.addFormData=function(n,u,p){this._oEditPage.addFormData(n,u,p);return this;};sap.extent.uilib.EditDialog.prototype.updateFormDataPartiallyEC=function(i,r,R){this._oEditPage.updateFormDataPartiallyEC(i,r,R);};sap.extent.uilib.EditDialog.prototype.updatePropagateFieldsOnRequest=function(d,r){this._oEditPage.updatePropagateFieldsOnRequest(d,r);};sap.extent.uilib.EditDialog.prototype.displayBackendResponse=function(b,c,a){if(this._oEditPage.displayBackendResponse(b,c,a)){var C=this._oEditPage.currentPageIsTopPage();if(!C&&!this._oEditPage.shouldPreventNavBack()){var o=this._oEditPage.getCurrentPage();this._oEditPage.back();this._oEditPage.removePage(o);o.destroy();this.fireAfterPageDelete({action:a});}else{this.close();}}};sap.extent.uilib.EditDialog.prototype._handleFormRenderComplete=function(e){this.firePageFormRenderComplete(e.getParameters());};sap.extent.uilib.EditDialog.prototype.addPanel=function(c){this._oEditPage.addPanel(c);};sap.extent.uilib.EditDialog.prototype.isGenericMDFEntity=function(){var l=this.getListener();if(l&&typeof l.isGenericMDFEntity==="function"){return l.isGenericMDFEntity();}};},"sap/extent/uilib/EditDialogRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.EditDialogRenderer");jQuery.sap.require("sap.m.DialogRenderer");sap.extent.uilib.EditDialogRenderer=sap.ui.core.Renderer.extend(sap.m.DialogRenderer);},"sap/extent/uilib/EditPage.js":function(){jQuery.sap.declare("sap.extent.uilib.EditPage");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.NavContainer");jQuery.sap.require("sap.m.OverflowToolbar");jQuery.sap.require("sap.m.ToolbarSpacer");jQuery.sap.require("sap.extent.uilib.util.EditFormGeneratorHelper");jQuery.sap.require("sap.extent.uilib.YouMayAlso");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.m.Panel");jQuery.sap.require("sap.ui.layout.VerticalLayout");jQuery.sap.require("sap.extent.uilib.util.BusyLoading");jQuery.sap.require("sap.sf.peopleprofile.model.genericobject.DWRConfigUIAdapter");jQuery.sap.require("sap.sf.peopleprofile.util.pp3core.CommonHelper");jQuery.sap.require("sap.extent.uilib.FormPattern");sap.m.NavContainer.extend("sap.extent.uilib.EditPage",{metadata:{library:"sap.extent.uilib",properties:{addButtonText:{type:"string",group:"Misc",defaultValue:null},formData:{type:"object",group:"Misc",defaultValue:null},saveData:{type:"object",group:"Misc",defaultValue:null},listener:{type:"object",group:"Misc",defaultValue:null},showAddButton:{type:"boolean",group:"Misc",defaultValue:true},title:{type:"string",group:"Misc",defaultValue:""}},events:{submitPress:{allowPreventDefault:true},cancelPress:{allowPreventDefault:true},deletePress:{allowPreventDefault:true},addPress:{},donePress:{},effectiveDateChange:{},quickCardPress:{},inlineEditPress:{},formRenderComplete:{},youMayAlsoPress:{}}}});jQuery.sap.require("sap.extent.uilib.EffectiveDate");jQuery.sap.require("sap.extent.uilib.util.EditFormGenerator");jQuery.sap.require("sap.m.MessageBox");jQuery.sap.require("sap.sf.commons.DatePicker");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.ButtonType");jQuery.sap.require("sap.m.Page");sap.extent.uilib.EditPage.prototype.init=function(){if(sap.m.NavContainer.prototype.init){sap.m.NavContainer.prototype.init.apply(this);}this._oPreventNavBack={};this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._oEditFormGenerators={};this._oAdditionalEditInfo={};this._oEffectiveDateToolbar={};this._aForms=[];this._bScrollToLastItem=false;this._isHelpContentCached=false;this._aCustomContent=[];this._oPageBeingAdded=null;this._sPreviousContentWidth=null;this._oCommonUtils=sap.extent.uilib.util.CommonUtils.getInstance();this._bOnChangeFired=false;this._aSelectedBlockIds=[];this._isYouCanAlso=false;this._oBusyLoading=new sap.extent.uilib.util.BusyLoading();this._oConfigUIAdapter=new sap.sf.peopleprofile.model.genericobject.DWRConfigUIAdapter();sap.ui.getCore().getEventBus().subscribe("peopleProfile",sap.extent.uilib.util.EditFormGenerator.FORM_DIRTY_EVENT_ID,this._handleFormDirtyEvent,this);};sap.extent.uilib.EditPage.prototype.addFooterButton=function(b){if(b instanceof sap.m.Button){var t=this.getCurrentPage().getFooter();t.insertContent(b,2);}return this;};sap.extent.uilib.EditPage.prototype.setCustomTextForEffectiveDate=function(t){var e=this._oEffectiveDateToolbar[this.getCurrentPage().getId()];var l=e.getAggregation('content')[0].getContent()[0];var d=e.getAggregation('content')[1];l.setText(t);d.setEnabled(false);d.setEditable(false);};sap.extent.uilib.EditPage.prototype.applyShowHideDeleteButton=function(){var e=this.getEditFormGenerator(this.getCurrentPage());var f=e.getEditFormData();if(f.id){this.getDeleteButton().setVisible(true);}else{this.getDeleteButton().setVisible(false);}};sap.extent.uilib.EditPage.prototype.onAfterRendering=function(){setTimeout(resizeFieldInTheDialog,0);if(jQuery(this.getDomRef()).find("header, div[role='heading']")&&jQuery(this.getDomRef()).find("header, div[role='heading']").length>0){if(this.getParent()&&this.getParent().getDomRef().getAttribute("aria-labelledby")===null&&jQuery(this.getDomRef()).find("div[role='heading']").length>0){this.getParent().getDomRef().setAttribute("aria-labelledby",jQuery(this.getDomRef()).find("div[role='heading']")[0].id);}sap.extent.uilib.util.CommonUtils.removeHeadings(this.getDomRef());}};sap.extent.uilib.EditPage.prototype.getSubmitButton=function(){return this._getSubmitButton(this.getCurrentPage());};sap.extent.uilib.EditPage.prototype.getCancelButton=function(){return this._getCancelButton(this.getCurrentPage());};sap.extent.uilib.EditPage.prototype.getDeleteButton=function(){return this._getDeleteButton(this.getCurrentPage());};sap.extent.uilib.EditPage.prototype.getDatePicker=function(){return this._getDatePicker(this.getCurrentPage());};sap.extent.uilib.EditPage.prototype.addCustomContent=function(c){this.getCurrentPage().addContent(c);this._aCustomContent.push(c);return this;};sap.extent.uilib.EditPage.prototype.removeCustomContent=function(c){this.getCurrentPage().removeContent(c);var i=this._aCustomContent.indexOf(c);if(i>-1){this._aCustomContent.splice(i,1);}return this;};sap.extent.uilib.EditPage.prototype.getCustomContent=function(){return this.getCurrentPage().getContent();};sap.extent.uilib.EditPage.prototype.hasFormChanged=function(){var e=this.getEditFormGenerator();return e?e.isFormDirty():null;};sap.extent.uilib.EditPage.prototype._getEffectiveDateToolbar=function(p){return this._oEffectiveDateToolbar[p.getId()];};sap.extent.uilib.EditPage.prototype._getAdditionalEditInfo=function(p){return this._oAdditionalEditInfo[p.getId()];};sap.extent.uilib.EditPage.prototype._getEffectiveDatePicker=function(p){var e=this._getEffectiveDateToolbar(p);if(e){return e.getContent()[1];}return null;};sap.extent.uilib.EditPage.prototype._setEffectiveDateTooltip=function(d){if(!d||!(d instanceof sap.sf.commons.DatePicker)){return;}if(!sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){if(d.getDateValue()){d.setTooltip(sap.extent.uilib.util.EditFormGeneratorHelper._oUIDateFormat.format(d.getDateValue()));}else{d.setTooltip(this._oBundle.getText("DATETIME_NUMBER_FORMATS_ECT_PP3"));}}};sap.extent.uilib.EditPage.prototype._getAddButton=function(p){return this._getButton(p,0);};sap.extent.uilib.EditPage.prototype._getCancelButton=function(p){return this._getButton(p,-1);};sap.extent.uilib.EditPage.prototype._getDeleteButton=function(p){return this.allowDeleteButton()&&this._getButton(p,-2);};sap.extent.uilib.EditPage.prototype._getDatePicker=function(p){return this._getEffectiveDatePicker(p);};sap.extent.uilib.EditPage.prototype._getSubmitButton=function(p){var c=null;var t=p&&p.getFooter();if(t){var T=t.getContent();var i=T.length-1;while(T[i]instanceof sap.m.Button){c=T[i--];if(c.getType()===sap.m.ButtonType.Emphasized){break;}}}return c;};sap.extent.uilib.EditPage.prototype._getButton=function(p,i){var t=p&&p.getFooter();if(t){var T=t.getContent();if(i<0){i=T.length+i;}return T[i];}return null;};sap.extent.uilib.EditPage.prototype.attachFieldChange=function(d,f,l,b){this.getEditFormGenerator(b).attachFieldChange(d,f,l);};sap.extent.uilib.EditPage.prototype.detachFieldChange=function(f,l,b){this.getEditFormGenerator(b).detachFieldChange(f,l);};sap.extent.uilib.EditPage.prototype.attachLiveFieldChange=function(d,f,l,b){this.getEditFormGenerator(b).attachLiveFieldChange(d,f,l);};sap.extent.uilib.EditPage.prototype.detachLiveFieldChange=function(f,l,b){this.getEditFormGenerator(b).detachLiveFieldChange(f,l);};sap.extent.uilib.EditPage.prototype.attachQuickCardPress=function(d,f,l){this.getEditFormGenerator().attachQuickCardPress(d,f,l);};sap.extent.uilib.EditPage.prototype.detachQuickCardPress=function(f,l){this.getEditFormGenerator().detachQuickCardPress(f,l);};sap.extent.uilib.EditPage.prototype.attachInlineEditPress=function(d,f,l){this.getEditFormGenerator().attachInlineEditPress(d,f,l);};sap.extent.uilib.EditPage.prototype.detachInlineEditPress=function(f,l){this.getEditFormGenerator().detachInlineEditPress(f,l);};sap.extent.uilib.EditPage.prototype.getEditFormGenerator=function(b){var p=this._oPageBeingAdded||this.getCurrentPage();if(b){var e=this._getEditFormGenerator(p);for(var i=0;i<e.length;i++){if(b===e[i].getBlockId()){return e[i];}}return e[0];}var E=this._getEditFormGenerator(p);return E?E[0]:null;};sap.extent.uilib.EditPage.prototype._getEditFormGenerator=function(p){return this._oEditFormGenerators[p.getId()];};sap.extent.uilib.EditPage.prototype._getEditPage=function(u,p,n){var e=new sap.m.Page({showHeader:false,titleLevel:"H2"});e.addStyleClass("sapExtentUilibEditPage");var a=new sap.extent.uilib.util.EditFormGenerator(this);a.attachFormReady(function(i){this.fireFormRenderComplete(i.getParameters());},this);this._oEditFormGenerators[e.getId()]=[a];this._oPreventNavBack[e.getId()]=p;var t=new sap.m.OverflowToolbar({});t.setDesign(sap.m.ToolbarDesign.Auto);var A=this._getEditPageButton(this._oBundle.getText("COMMON_Add"),[this._handleAdd,this]);A.addStyleClass("sapExtentUILibDialogAddButton");t.addContent(A);this._helpIcon=sap.extent.uilib.util.HelpManager.createHelpIcon(this._oBundle.getText("ECT_HELP"),"sapExtentUilibHelpTextIcon");t.addContent(this._helpIcon);this._helpIcon.setVisible(false);t.addContent(new sap.m.ToolbarSpacer());e.setAggregation("footer",t);if(u){var d=this._getEditPageButton(this._oBundle.getText("COMMON_Done"),[this._handleDone,this]);t.addContent(d);if(!n){var c=this._getEditPageButton(this._oBundle.getText("COMMON_Cancel"),[this._handleCancel,this]);t.addContent(c);}}else{var s=this._getEditPageButton(this._oBundle.getText("COMMON_Save"),[this._handleSubmit,this]);s.setType(sap.m.ButtonType.Emphasized);s.setEnabled(false);var c=this._getEditPageButton(this._oBundle.getText("COMMON_Cancel"),[this._handleCancel,this]);t.addContent(s);if(this.allowDeleteButton()){var D=this._getEditPageButton(this._oBundle.getText("COMMON_Delete"),[this._handleDelete,this]);t.addContent(D);}t.addContent(c);}var b={tooltip:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?"":this._oBundle.getText("DATETIME_NUMBER_FORMATS_ECT_PP3"),placeholder:this._oBundle.getText("DATETIME_NUMBER_FORMATS_ECT_PP3"),width:sap.extent.uilib.util.EditFormGenerator.DEFAULT_DATE_WIDTH,valueFormat:sap.extent.uilib.util.EditFormGeneratorHelper.DATE_FORMAT,displayFormat:sap.ui.getCore().getModel("i18n").getResourceBundle().getText("ECT_PP3_MMMDDYYYY"),displayFormatType:sap.ui.getCore().getModel("user").getProperty("/userLocaleIslamic"),change:[function(i){var P=i.getParameters();var j=i.getSource();var S=this.getSubmitButton();P.formChanged=this.hasFormChanged();if(P.value&&P.valid){j.setValueState('None');this.fireEffectiveDateChange(P);S.setEnabled(true);}else{j.setValueState('Error');if(P.value){j.setValueStateText(this._oBundle.getText("ECT_PP3_ERROR_INVALID_DATE_FORMAT",[this._oBundle.getText("ECT_PP3_DateFormat")]));}else{j.setValueStateText(this._oBundle.getText("ECT_PP3_EFFECTIVE_DATE_ERR"));}S.setEnabled(false);}this._setEffectiveDateTooltip(j);},this]};var f=sap.ui.getCore().getModel("user").getProperty("/userSecondaryLocale");if(f){b.secondaryCalendarType=sap.ui.core.CalendarType.Islamic;b.displayFormatType=sap.ui.core.CalendarType.Gregorian;}var E=new sap.sf.commons.DatePicker(b);E.attachChange(function(i){var j=i.getSource().getDateValue();sap.ui.getCore().getModel("RDP")&&sap.ui.getCore().getModel("RDP").setProperty("/effectiveStartDate",j);},this);var o=new sap.m.Label({text:this._oBundle.getText(sap.ui.Device.system.phone?"ECT_PP3_EFFECTIVE_DATE_LABEL_ASOF":"ECT_PP3_EFFECTIVE_DATE_LABEL"),required:true,wrapping:true});o.setLabelFor(E);var h=sap.extent.uilib.util.HelpManager.createHelpIcon(this._oBundle.getText("COMMON_Help"),"sapExtentUilibHelpTextIcon");h.setVisible(false);var g=new sap.ui.layout.VerticalLayout({content:[new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[o,h]}),E]}).addStyleClass("sapExtentUilibEditPageEffectiveDateVLToolbar sapMLabelRequiredThemeMapped");sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(g,"isEffectiveDateToolbar",true);this._oEffectiveDateToolbar[e.getId()]=g;return e;};sap.extent.uilib.EditPage.prototype.scrollTo=function(y,t){var p=this.getCurrentPage();if(p){p.scrollTo(y,t);}};sap.extent.uilib.EditPage.prototype.setTitle=function(n){this.getCurrentPage().setShowHeader(true);this.getCurrentPage().setTitle(n);return this.setProperty("title",n);};sap.extent.uilib.EditPage.prototype.setShowEffectiveDate=function(n,h){var p=this._oPageBeingAdded||this.getCurrentPage();this._getEffectiveDateToolbar(p).setVisible(n);this.setShowEffectiveDateHelp(n,h,p);return this;};sap.extent.uilib.EditPage.prototype.setShowEffectiveDateHelp=function(n,h,p){if(!h){n=false;}var H=this._getEffectiveDateToolbar(p).getContent()[0].getContent()[1];H.setVisible(n);if(n){sap.extent.uilib.util.HelpManager.registerHelpElement(H,h);}return this;};sap.extent.uilib.EditPage.prototype.setEffectiveDate=function(n){var p=this._oPageBeingAdded||this.getCurrentPage();var e=this._getEffectiveDatePicker(p);if(e){if(typeof n==="string"){e.setValue(n);}else if(n instanceof Date){e.setDateValue(n);}this._setEffectiveDateTooltip(e);}return this;};sap.extent.uilib.EditPage.prototype.setEffectiveDateEditable=function(e){var p=this._oPageBeingAdded||this.getCurrentPage();var E=this._getEffectiveDatePicker(p);if(E){E.setEditable(e);}return this;};sap.extent.uilib.EditPage.prototype.destroy=function(){if(sap.m.NavContainer.prototype.destroy){sap.m.NavContainer.prototype.destroy.apply(this);}this._oBundle=null;this._oEditFormGenerators=null;this._aForms=null;this._aCustomContent=null;sap.ui.getCore().getEventBus().unsubscribe("peopleProfile",sap.extent.uilib.util.EditFormGenerator.FORM_DIRTY_EVENT_ID,this._handleFormDirtyEvent,this);};sap.extent.uilib.EditPage.prototype.setShowAddButton=function(n){var p=this._oPageBeingAdded||this.getCurrentPage();this._getAddButton(p).setVisible(n);return this.setProperty("showAddButton",n,true);};sap.extent.uilib.EditPage.prototype.getEffectiveDate=function(){var d=this._getEffectiveDatePicker(this.getCurrentPage());if(d){return d.getDateValue();}return null;};sap.extent.uilib.EditPage.prototype._getEditPageButton=function(t,p){t=this._oBundle.hasText(t)?this._oBundle.getText(t):t;var a;if(sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){a="";}else{a=t;}return new sap.m.Button({text:t,press:p,tooltip:a});};sap.extent.uilib.EditPage.prototype._isAllFormsClean=function(){var p=this._oPageBeingAdded||this.getCurrentPage();var e=this._getEditFormGenerator(p);var r=true;jQuery.each(e,function(i,a){if(a.isFormDirty()){r=false}});return r;};sap.extent.uilib.EditPage.prototype._handleFormDirtyEvent=function(c,e,d){var i=d.formModified;var s=this.getSubmitButton();var I=this.getListener()&&this.getListener().isGenericMDFEntity();if(i||!this._isAllFormsClean()||I){s&&s.setEnabled(true);}else{s&&s.setEnabled(false);}};sap.extent.uilib.EditPage.prototype.deleteContent=function(c){if(this.getCurrentPage().removeContent(c)){c.destroy();}};sap.extent.uilib.EditPage.prototype.allowInlineAddButton=function(){var l=this.getListener();if(l&&typeof l.allowInlineAddButton==="function"){return l.allowInlineAddButton();}};sap.extent.uilib.EditPage.prototype.allowInlineEditButton=function(){var l=this.getListener();if(l&&typeof l.allowInlineEditButton==="function"){return l.allowInlineEditButton();}};sap.extent.uilib.EditPage.prototype.allowDeleteButton=function(){var l=this.getListener();if(l&&typeof l.allowDeleteButton==="function"){return l.allowDeleteButton();}};sap.extent.uilib.EditPage.prototype.fakebuttons=function(){var l=this.getListener();if(l&&typeof l.fakebuttons==="function"){return l.fakebuttons();}};sap.extent.uilib.EditPage.prototype.getMetadataForAction=function(c,t,a){var d=new jQuery.Deferred();this._oConfigUIAdapter.getMetadataForAction(d,c,t,a);this._openBusyDialog(d);return d;};sap.extent.uilib.EditPage.prototype.getMeta=function(s){var d=new jQuery.Deferred();this._oConfigUIAdapter.getMeta(d,s);this._openBusyDialog(d);return d;};sap.extent.uilib.EditPage.prototype.getContentWidth=function(){var l=this.getListener();if(l&&typeof l.getContentWidth==="function"){return l.getContentWidth();}};sap.extent.uilib.EditPage.prototype.setContentWidth=function(c,r,i){var l=this.getListener();var p=this._oPageBeingAdded||this.getCurrentPage();var n=null;var a=this._getAdditionalEditInfo(p);var A=a&&a.getContent&&a.getContent();if(A){A.forEach(function(C){if(C.getCheckBox().getSelected()){n++;}});if((n!=null&&n>1)&&l&&typeof l.setContentWidth==="function"){l.setContentWidth("76%");return;}}if((r!=false)&&l&&typeof l.setContentWidth==="function"){sap.extent.uilib.util.CommonUtils.getInstance().layoutColumnWidth=null;if(!i){return l.setContentWidth(c);}}};sap.extent.uilib.EditPage.prototype.getCascadeData=function(i,p,v,c,C,s,g){var l=this.getListener();if(l&&typeof l.getCascadeData==="function"){return l.getCascadeData(i,p,v,c,C,s,g);}};sap.extent.uilib.EditPage.prototype.getPicklistValues=function(p,a,b,i,r){var l=this.getListener();if(l&&typeof l.getPicklistValues==="function"){return l.getPicklistValues(p,a,b,i,r);}};sap.extent.uilib.EditPage.prototype.getPicklistLabel=function(p,o){var l=this.getListener();if(l&&typeof l.getPicklistLabel==="function"){return l.getPicklistLabel(p,o);}};sap.extent.uilib.EditPage.prototype.getAjaxKey=function(){var l=this.getListener();if(l&&typeof l.getAjaxKey==="function"){return l.getAjaxKey();}};sap.extent.uilib.EditPage.prototype.getNationalIdFormat=function(c,n){var l=this.getListener();if(l&&typeof l.getNationalIdFormat==="function"){return l.getNationalIdFormat(c,n);}return null;};sap.extent.uilib.EditPage.prototype.getRuleData=function(i,v,r,I,R){var l=this.getListener();if(l&&typeof l.getRuleData==="function"){var e=this._getEditFormGenerator(this.getCurrentPage());var f=[];for(var a=0,b=e.length;a<b;a++){f.push(e[a].getEditFormData());}return l.getRuleData(i,f,r,I,R);}};sap.extent.uilib.EditPage.prototype.getFACValues=function(u,s,c){var l=this.getListener();if(l&&typeof l.getFACValues==="function"){return l.getFACValues(u,s,c);}return null;};sap.extent.uilib.EditPage.prototype.requestPropagationValues=function(s,v,p,c,r){var l=this.getListener();if(l&&typeof l.requestPropagationValues==="function"){return l.requestPropagationValues(s,v,p,c,r);}return null;};sap.extent.uilib.EditPage.prototype.searchByInternalCode=function(s,v,c,u){var l=this.getListener();if(l&&typeof l.searchByInternalCode==="function"){return l.searchByInternalCode(s,v,c,u);}return null;};sap.extent.uilib.EditPage.prototype.getUploadUrl=function(c,m,a){var l=this.getListener();if(l&&typeof l.getUploadUrl==="function"){return l.getUploadUrl(c,m,a);}return null;};sap.extent.uilib.EditPage.prototype.submitOnFieldChange=function(d,f,D,b){var l=this.getListener();if(l&&typeof l.submitOnFieldChange==="function"){var e=this._getEditFormGenerator(this.getCurrentPage());var s=[D];for(var i=0,a=e.length;i<a;i++){if(D.portletID!=e[i].getBlockId()){s.push(e[i].getEditFormData());}}return l.submitOnFieldChange(d,f,s,b);}return null;};sap.extent.uilib.EditPage.prototype.validateAddress=function(d,s,b,a,c,i){var l=this.getListener();if(l&&typeof l.validateAddress==="function"){return l.validateAddress(d,s,b,a,c,i);}return null;};sap.extent.uilib.EditPage.prototype.onFieldChange=function(e,o){var l=this.getListener();if(l&&typeof l.onFieldChange==="function"){this._bOnChangeFired=true;var p=l.onFieldChange(e,o);p.then(jQuery.proxy(function(){this._bOnChangeFired=false;},this));return p;}return null;};sap.extent.uilib.EditPage.prototype.validate=function(s,v,c){var l=this.getListener();if(l&&typeof l.submitOnFieldChange==="function"){var e=this._getEditFormGenerator(this.getCurrentPage());var f=[];for(var i=0,a=e.length;i<a;i++){f.push(e[i].getEditFormData());}return l.validate(s,v,c,f);}return null;};sap.extent.uilib.EditPage.prototype.getEditLayout=function(i,m){var l=this.getListener();if(l&&typeof l.getEditLayout==="function"){return l.getEditLayout(i,m);}return null;};sap.extent.uilib.EditPage.prototype.getCustomPopinTable=function(){var l=this.getListener();if(l&&typeof l.getCustomPopinTable==="function"){return l.getCustomPopinTable();}return null;};sap.extent.uilib.EditPage.prototype.openOrgChart=function(p){var l=this.getListener();if(l&&typeof l.openOrgChart==="function"){return l.openOrgChart(p,this.getEditFormGenerator()._getEffectiveDate());}return null;};sap.extent.uilib.EditPage.prototype.getDetailedInfo=function(r,b,a){var l=this.getListener();if(l&&typeof l.getDetailedInfo==="function"){return l.getDetailedInfo(r,a);}return null;};sap.extent.uilib.EditPage.prototype.getLazyDataGridItems=function(r,a,p){var l=this.getListener();if(l&&typeof l.getLazyDataGridItems==="function"){return l.getLazyDataGridItems(r,a,p);}return null;};sap.extent.uilib.EditPage.prototype.cacheAttachmentsInfo=function(a,d,i){var l=this.getListener();if(l&&typeof l.cacheAttachmentsInfo==="function"){l.cacheAttachmentsInfo(a,d,i);}};sap.extent.uilib.EditPage.prototype._checkWhetherNeedFocusBackAttachIcon=function(){var p=this.getParent();var c;if(p&&p.getCustomData()[0]){c=p.getCustomData()[0];}if(c&&c.getKey()=="FocusIdforAttachmentIcon"){typeof p.setInitialFocus==="function"&&p.setInitialFocus(c.getValue());}};sap.extent.uilib.EditPage.prototype._handleDone=function(e){var r=this.getEditFormGenerator().validate();if(!r.hasErrors){var f=this.getEditFormGenerator().getEditFormData();this.fireDonePress({data:f});var c=this.getCurrentPage();var C=this.currentPageIsTopPage();if(!C){this.back();if(this._sPreviousContentWidth){this.setContentWidth(this._sPreviousContentWidth);this._sPreviousContentWidth=null;}this.removePage(c);c.destroy();if(e.getSource()&&e.getSource()instanceof sap.m.Dialog){e.getSource().setShowHeader(true);}else if(this.getParent()&&this.getParent()instanceof sap.m.Dialog){if(jQuery(this.getDomRef()).find("header").length===0){this.getParent().setShowHeader(true);}}var E=this instanceof sap.extent.uilib.EditPage?this:this.getEditPage();E.reEnableSubmitButton();this._checkWhetherNeedFocusBackAttachIcon();}}else{var o={messages:r.errors,icon:sap.m.MessageBox.Icon.ERROR,orderedList:true};sap.extent.uilib.util.EditFormGeneratorHelper.showAlertMessageBox(o);}};sap.extent.uilib.EditPage.prototype._handleSubmit=function(e){if(this._bOnChangeFired){return;}var f={hasErrors:false,errors:[]};var E=this._getEffectiveDatePicker(this.getCurrentPage());if(E&&(E.getValueState()==sap.ui.core.ValueState.Error)){f.hasErrors=true;f.errors.push(E.getValueStateText());}var a=this._getEditFormGenerator(this.getCurrentPage());var F=[];for(var i=0;i<a.length;i++){var o=a[i];var b=o.validate();f.hasErrors=f.hasErrors||b.hasErrors;f.errors=f.errors.concat(b.errors);if(!f.hasErrors){F.push(o.getEditFormData());}}if(f.hasErrors){var c={messages:f.errors,icon:sap.m.MessageBox.Icon.ERROR,orderedList:true,firstErrorField:b.firstErrorField};sap.extent.uilib.util.EditFormGeneratorHelper.showAlertMessageBox(c);}else{this.setSaveData(F.length===1?F[0]:F);this.fireSubmitPress({data:this.getSaveData()});}};sap.extent.uilib.EditPage.prototype.shouldPreventNavBack=function(){return this._oPreventNavBack[this.getCurrentPage().getId()];};sap.extent.uilib.EditPage.prototype._handleProceed=function(c){if(c=="save"){if(!this.getSaveData()){var s=[];var e=this._getEditFormGenerator(this.getCurrentPage());for(var i=0;i<e.length;i++){s.push(e[i].getEditFormData());}this.setSaveData(s.length===1?s[0]:s);}this.fireSubmitPress({data:this.getSaveData(),isForceSave:true});}};sap.extent.uilib.EditPage.prototype._handleCancel=function(e){if(this._bOnChangeFired){return;}var c=this.getCurrentPage();var C=this.currentPageIsTopPage();var a=this.getEditFormGenerator();var h=this.hasFormChanged();var r;if(h){r=a.validate();}this.fireCancelPress({"currentPageIsTopPage":C,"formChanged":h,"result":r,"editNavContainer":this,"currentPage":c});this._checkWhetherNeedFocusBackAttachIcon();};sap.extent.uilib.EditPage.prototype._handleDelete=function(e){var E=this.getEditFormGenerator(this.getCurrentPage());var f=E.getEditFormData();this.fireDeletePress({formData:f});};sap.extent.uilib.EditPage.prototype._handleAdd=function(e){this._getAddButton(this.getCurrentPage()).setEnabled(false);setTimeout(jQuery.proxy(function(){this._getAddButton(this.getCurrentPage()).setEnabled(true);},this),2000);var n=this.getEditFormGenerator().addNew();if(n){this.getCurrentPage().addContent(n);this._aForms.push(n);this._bScrollToLastItem=true;}this.fireAddPress(e);};sap.extent.uilib.EditPage.prototype.setAddButtonText=function(n){var p=this._oPageBeingAdded||this.getCurrentPage();this._getAddButton(p).setText(n);var t;if(sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){t="";}else{t=n;}this._getAddButton(p).setTooltip(t);return this.setProperty("addButtonText",n,true);};sap.extent.uilib.EditPage.prototype.reEnableSubmitButton=function(){if(!this._isAllFormsClean()){var s=this.getSubmitButton();s.setEnabled(true);}};sap.extent.uilib.EditPage.prototype.getCurrentPage=function(){var c=null;if(sap.m.NavContainer.prototype.getCurrentPage){c=sap.m.NavContainer.prototype.getCurrentPage.apply(this);}if(!this._bIsBeingDestroyed&&!c){c=this._getEditPage();this.addPage(c);}return c;};sap.extent.uilib.EditPage.prototype.setAdditionalEntities=function(p){this._aSelectedBlockIds.push(p);};sap.extent.uilib.EditPage.prototype.addBlockHelpLinks=function(e,a,s,i){if((this._aSelectedBlockIds.length>0)&&(typeof i==="undefined")){var t=this;jQuery.each(this._aSelectedBlockIds,function(I,b){t.addHelpLinksContentToPage(e,b,s,I);})}else{this.addHelpLinksContentToPage(e,a,s,i);}};sap.extent.uilib.EditPage.prototype.addHelpLinksContentToPage=function(e,a,s,i){var A=sap.sf.peopleprofile.model.hris.DWRConstants.ALIAS_BLOCK_ID[a];a=A||a;var I=this.getBlockIdByExternalPath(a)||this.getBlockIdByExternalPath(s);var t=null;if(I){t="blockId";}else{I=sap.sf.peopleprofile.model.hris.DWRConstants.PORTLET_ID_2_BLOCK_TYPE[a];if(!I&&(a===sap.sf.peopleprofile.model.hris.DWRConstants.ONE_TIME_EMP_INFO)){I="ONETIME_DEDUCTION_BLOCK";}if(I){t="blockType"}else{I=a||s;t="screenId";}}if(!I||!t){return;}var l=new sap.ui.layout.VerticalLayout().addStyleClass("sapExtentUilibEditPageBlockHelpLinks");e.insertContent(l,i||0);sap.sf.peopleprofile.util.pp3core.CommonHelper.addBlockHelpLinksOrMakeCall(this,l,I,t);};sap.extent.uilib.EditPage.prototype.getBlockIdByExternalPath=function(e){e="/"+e;var b=null;if(sap.ui.getCore().getModel("objectPageMetaData")){var o=sap.ui.getCore().getModel("objectPageMetaData").getData();jQuery.each(o.sections,function(i,s){jQuery.each(s.subSections,function(a,S){jQuery.each(S.blocks,function(I,B){if(B&&B.modelMapping&&(B.modelMapping.externalPath==e)){b=B.blockId;return false;}});if(b){return false;}});if(b){return false;}});return b;}};sap.extent.uilib.EditPage.prototype._addAdditionalEditOptions=function(e,n){if(this._getAdditionalEditInfo(e)){var y=this._getAdditionalEditInfo(e).getContent();for(var i=0,l=y.length;i<l;i++){var Y=y[i];if(Y&&n&&(Y.getBlockId()==n.portletID)&&Y.getCheckBox()&&!Y.getCheckBox().getSelected()){Y.getCheckBox().setSelected(true);this.setAdditionalEntities(n.portletID);}}e.addContent(this._getAdditionalEditInfo(e));return;}var o=n&&n.youCanAlso;if(!o){return;}var O=o.options||[];if(O.length>0){var p=new sap.m.Panel({headerText:this._oBundle.getText("ECT_PP3_YOU_MAY_ALSO"),expandable:true,width:"auto"}).addStyleClass("sapExtentUilibEditPageYouCanChange");for(var i=0,l=O.length;i<l;i++){var a=O[i];var A=new sap.extent.uilib.YouMayAlso({blockId:a.blockId,label:a.question,description:a.description||this._oBundle.getText("ECT_PP3_YOU_MAY_ALSO_"+a.blockId),selected:a.selected,boxSelect:[function(E){var b=E.getParameter("blockId");var I=E.getParameter("isSelected");if(I){this._aSelectedBlockIds.push(b);}else{var s=this._aSelectedBlockIds.indexOf(b);this._aSelectedBlockIds.splice(s,1);}if(this.getSelectedBlockIds().length>0){this.addEffectiveDateToolbarToPage();}var c=(this._aForms.length>0&&E.getParameter("isSelected"));this.fireYouMayAlsoPress({blockId:b,isSelected:I,isLoadData:c});if(!E.getParameter("isSelected")){this.onYouMayAlsoDeselect(E.getParameter("blockId"));}else if(!c&&I){this.addBlockHelpLinks(e,b,null,this._aSelectedBlockIds.indexOf(b));}},this]});if(a.selected&&a.blockId){this.setAdditionalEntities(a.blockId);}p.addContent(A);}p.setExpanded(this.getSelectedBlockIds().length==0);e.addAggregation("content",p,false);e.addStyleClass("sapExtentUilibEditPageYouCanChangeContainer");this._oAdditionalEditInfo[e.getId()]=p;}else if(n.portletID&&this._aSelectedBlockIds.indexOf(n.portletID)==-1){this.setAdditionalEntities(n.portletID);}if(this.getSelectedBlockIds().length>0){this.addEffectiveDateToolbarToPage();}this.setShowAddButton(false);};sap.extent.uilib.EditPage.prototype.addEffectiveDateToolbarToPage=function(){var e=this.getCurrentPage();var E=e.getContent();var b=false;for(var i=0,l=E.length;i<l;i++){if(sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(e.getContent()[i],"isEffectiveDateToolbar")){b=true;break;}}if(!b){e.addContent(this._getEffectiveDateToolbar(e));}this.setShowEffectiveDate(true);};sap.extent.uilib.EditPage.prototype.resetEffectiveDate=function(e){var E=this._getEffectiveDateToolbar(e);if(E.getContent()[1]){E.getContent()[1].setValue("");}};sap.extent.uilib.EditPage.prototype.isFormDataInvalid=function(n){return!n.fieldGroups||n.fieldGroups.length===0;};sap.extent.uilib.EditPage.prototype._setHelpText=function(b,n){b=[b];var o=n&&n.youCanAlso&&n.youCanAlso.options;if(o){b=[];jQuery.each(o,function(i,a){b.push(a.blockId);})}var h=new jQuery.Deferred();sap.sf.peopleprofile.model.pp3core.DWRUtilsAdapter.getHelpData(h,b);h.fail(jQuery.proxy(function(){}));h.done(jQuery.proxy(function(a){this._isHelpContentCached=true;var i=jQuery.isEmptyObject(a.values);this._helpIcon.setVisible(!i);if(!i){sap.extent.uilib.util.HelpManager.registerHelpElement(this._helpIcon,a.values,o);}},this));};sap.extent.uilib.EditPage.prototype.setFormData=function(n,a,e,r){this._isYouCanAlso=this._isYouCanAlso||(n&&(n.youCanAlso!=undefined));if(n&&n.youCanAlso&&n.youCanAlso.emptyLayout){this._isYouCanAlso=false;}var b=n.actionResult;var c=n.instructionalText||"";if((b&&(b.status==="error"||b.status==="failure"))||c.length>0){if(c.length>0){b={};b.status="failure";b.global=[c];sap.extent.uilib.util.EditFormGeneratorHelper.displayBackendResponse(b);}a={invalidFOMsgsTitle:"",detailInvalidFOMsgs:b.global.join(" ")}}var B=n.portletID;this.stripPIRChartFieldGroup(n);if(!this._isHelpContentCached&&window.isHelpAvailable&&this._helpIcon){this._setHelpText(B,n);}if(this._aForms&&(this._aForms.length>0)&&B&&!this.isFormExist(B)){this.addFormDataToCurrent(n);return;}var E=this.getCurrentPage();var d=this._getEditFormGenerator(E);var C=this.getEditFormGenerator(B);this.stripEventFields(n);E.removeAllContent();if(a){this._setErrorContent(a,E)}this._addAdditionalEditOptions(E,n);if(n&&n.youCanAlso&&n.youCanAlso.emptyLayout){return;}if(!n.fieldGroups){this.addBlockHelpLinks(E,e||B,(n&&n.screenId));return;}E.addContent(this._getEffectiveDateToolbar(E));var f=C.getEditForm(n,a);if(d.length>1){for(var i=this._aForms.length-1;i>=0;i--){var s=sap.extent.uilib.util.EditFormGeneratorHelper.getBlockId(this._aForms[i]);if(B===s){this._aForms.splice(i,1);}}for(var i=0,l=f.length;i<l;i++){this._aForms.push(f[i]);}this.moveEventFieldsToTop();var F=[];var S=this.getSelectedBlockIds();for(var i=0,l=S.length;i<l;i++){for(var g=0;g<this._aForms.length;g++){var B=sap.extent.uilib.util.EditFormGeneratorHelper.getBlockId(this._aForms[g]);var D=this._aForms[g].getContent()[0].getModel().getData();if(D.isEventFields||S[i]==B){F.push(this._aForms[g]);this._aForms.splice(g,1);g=-1;}}}this._aForms=F;f=this._aForms;}else{this._aForms=[];}for(var i=0;i<f.length;i++){E.addAggregation("content",f[i],true);if(d.length===1){this._aForms.push(f[i]);}}if(c.length>0){this.setShowAddButton(false);}else{this.toggleShowAddButton();}for(var i=0;i<this._aCustomContent.length;i++){E.addAggregation("content",this._aCustomContent[i],true);}this.addBlockHelpLinks(E,e||B,(n&&n.screenId));setTimeout(function(){var h=sap.extent.uilib.EditPage._sSetInputFieldForFocusAfterRendering;if(h){var G=sap.extent.uilib.EditPage._sGroupIdForFocusAfterRendering;var j=C.getInputById(h,r,"",G);if(j){j.focus();delete sap.extent.uilib.EditPage._sSetInputFieldForFocusAfterRendering;delete sap.extent.uilib.EditPage._sGroupIdForFocusAfterRendering;}}else{jQuery(this.getDomRef()).find("button, input").eq(0).focus();}}.bind(this),500,C,r);return this.setProperty("formData",n);};sap.extent.uilib.EditPage.prototype.stripPIRChartFieldGroup=function(n){if(!n||!n.fieldGroups||!n.totalCompHistoryData){return;}var t=0;var a=0;jQuery.each(n.totalCompHistoryData,function(b,c){if(c&&(((b==="getMultiplePayComponentGroupVOList"||b==="getTeamSalaryInfo")&&(c.length==0))||(b==="getSalaryPositioningInfoVO"&&(jQuery.isEmptyObject(c)||c.salary==null)))){a++;}t++;});if(t&&(t==a)){for(var i=0,l=n.fieldGroups.length;i<l;i++){if(n.fieldGroups[i]&&(n.fieldGroups[i].id=="PAY_COMPONENT_PIRCHART")){n.fieldGroups.splice(i,1);break;}}}};sap.extent.uilib.EditPage.prototype.isFormExist=function(b){var e=this._getEditFormGenerator(this.getCurrentPage())||[];for(var i=0,l=e.length;i<l;i++){var c=e[i].getBlockId();if(b===c){return true;}}return false;};sap.extent.uilib.EditPage.prototype.toggleShowAddButton=function(){if(!this._isYouCanAlso){return;}var e=this._getEditFormGenerator(this.getCurrentPage());var i=false;var I=false;for(var a=0,l=e.length;a<l;a++){var b=e[a].getBlockId();if(b=="JOB_RELATIONSHIP_INFORMATION"){i=true;}else if(b=="COMPENSATION_INFORMATION"){I=true;}}this.setShowAddButton(i&&!I);var L=this.getListener();if(L&&typeof L.toggleMobileEditDialogNoAddButton==="function"){return L.toggleMobileEditDialogNoAddButton();}};sap.extent.uilib.EditPage.prototype.onYouMayAlsoDeselect=function(d){var e=this.getCurrentPage();e.removeAllContent();this._addAdditionalEditOptions(e);var s=this.getSelectedBlockIds();if(s.length>0){this.addEffectiveDateToolbarToPage();}else{this.resetEffectiveDate(e);this.getSubmitButton().setEnabled(false);}for(var i=this._aForms.length-1;i>=0;i--){var b=sap.extent.uilib.util.EditFormGeneratorHelper.getBlockId(this._aForms[i]);var D=this._aForms[i].getContent()[0].getModel().getData();if(d===b&&!D.isEventFields){this._aForms.splice(i,1);}}this.moveEventFieldsToTop();var E=this._getEditFormGenerator(this.getCurrentPage());var D=null;var o=null;for(var a=E.length-1;a>=0;a--){if(E[a].getBlockId()==d){if(this._aForms&&this._aForms[0]){D=this._aForms[0].getContent()[0].getModel().getData();if(D&&D.isEventFields){o=this._getEditFormGenerator(this.getCurrentPage())[a]._oFields[D._sMainGroupId];}}this._getEditFormGenerator(this.getCurrentPage()).splice(a,1);}}if(o){for(var a=E.length-1;a>=0;a--){var c=this._getEditFormGenerator(this.getCurrentPage())[a];if(c._oForm&&c._oForm.hasEventFieldsStripped){c._aPanels.unshift(this._aForms[0]);c._oFields[D._sMainGroupId]=o;}}}this.toggleShowAddButton();this._createEditFormGeneratorInstance();for(var i=0;i<this._aForms.length;i++){e.addAggregation("content",this._aForms[i],true);}this.addBlockHelpLinks(e);};sap.extent.uilib.EditPage.prototype.moveEventFieldsToTop=function(){var e=null;for(var i=this._aForms.length-1;i>=0;i--){var d=this._aForms[i].getContent()[0].getModel().getData();if(d.isEventFields){e=this._aForms[i];this._aForms.splice(i,1);}}if(this._aForms.length==0){return;}var s=this.getSelectedBlockIds();if(e&&(s.indexOf("JOB_INFORMATION")!==-1||s.indexOf("COMPENSATION_INFORMATION")!==-1)){this._aForms.splice(0,0,e);}};sap.extent.uilib.EditPage.prototype._createEditFormGeneratorInstance=function(){if(this._oEditFormGenerators[this.getCurrentPage().getId()].length==0){var e=new sap.extent.uilib.util.EditFormGenerator(this);e.attachFormReady(function(E){this.fireFormRenderComplete(E.getParameters());},this);this._oEditFormGenerators[this.getCurrentPage().getId()]=[e];}};sap.extent.uilib.EditPage.prototype.getSelectedBlockIds=function(){return this._aSelectedBlockIds;};sap.extent.uilib.EditPage.prototype.stripEventFields=function(n){var e=false;var E=-1;var N=-1;var o=this._getEditFormGenerator(this.getCurrentPage());o.forEach(function(a,i){if(a.getPanel(0)&&a.getPanel(0).getContent()[0]&&a.getPanel(0).getContent()[0].getModel().getData().isEventFields&&a.getBlockId()!=n.portletID){e=true;E=i;}if(a.getBlockId()==n.portletID){N=i;}});if(e&&(E!=N)&&n.fieldGroups[0]&&n.fieldGroups[0].isEventFields){n.fieldGroups.splice(0,1);n.hasEventFieldsStripped=true;}};sap.extent.uilib.EditPage.prototype._checkErrorResponse=function(a,i){if((a&&(a.status==="error"||a.status==="failure"))||i.length>0){if(i.length>0){a={};a.status="failure";a.global=[i];}sap.extent.uilib.util.EditFormGeneratorHelper.displayBackendResponse(a);return{invalidFOMsgsTitle:"",detailInvalidFOMsgs:a.global.join("")}}return null;};sap.extent.uilib.EditPage.prototype._setErrorContent=function(i,e){var E=(i.invalidFOMsgsTitle?(i.invalidFOMsgsTitle+"\n"):"")+i.detailInvalidFOMsgs;var m=new sap.m.MessageStrip({showIcon:true,showCloseButton:true,text:E,type:sap.ui.core.MessageType.Error}).addStyleClass("sapUiSmallMargin");e.addContent(m);};sap.extent.uilib.EditPage.prototype.addFormDataToCurrent=function(n){this.stripPIRChartFieldGroup(n);this.stripEventFields(n);var a=n.actionResult;var b=n.instructionalText||"";var c=this._checkErrorResponse(a,b);var e=this.getCurrentPage();e.removeAllContent();if(c){this._setErrorContent(c,e);this._addAdditionalEditOptions(e,n);var x=this._getEffectiveDateToolbar(e);e.addContent(x);}else{n.bIgnoreDateSetValue=true;this._addAdditionalEditOptions(e,n);var x=this._getEffectiveDateToolbar(e);e.addContent(x);var f=this._getEditFormGenerator(e);var N=new sap.extent.uilib.util.EditFormGenerator(this);N.attachFormReady(function(E){this.fireFormRenderComplete(jQuery.extend({blockId:N.getBlockId()},E.getParameters()));},this);f.push(N);var F=N.getEditForm(n);for(var i=0;i<F.length;i++){this._aForms.push(F[i]);}this.moveEventFieldsToTop();}for(var i=0;i<this._aForms.length;i++){e.addAggregation("content",this._aForms[i],true);}for(var i=0;i<this._aCustomContent.length;i++){e.addAggregation("content",this._aCustomContent[i],true);}this.toggleShowAddButton();this.addBlockHelpLinks(e);return this;};sap.extent.uilib.EditPage.prototype.addFormData=function(n,u,p,a){if((n&&n.actionResult&&(n.actionResult.status==="error"||n.actionResult.status==="failure"))){sap.extent.uilib.util.EditFormGeneratorHelper.displayBackendResponse(n.actionResult);return;}this._sPreviousContentWidth=this.getContentWidth();var e=this._getEditPage(u,p,a);if(!n.isFromDetailsDialog){e.setShowHeader(true);if(n.portletTitle){e.setTitle(n.portletTitle);}else{if(n.fieldGroups&&n.fieldGroups.length>0&&n.fieldGroups[0].metadata){e.setTitle(n.fieldGroups[0].metadata.portletTitle);this.oInvisibleMessage=new sap.ui.core.InvisibleMessage();sap.extent.uilib.util.CommonUtils.getInstance().announceInvisibleMessage(n.fieldGroups[0].metadata.portletTitle+" Modal dialog",sap.ui.core.InvisibleMessageMode.Assertive,1000,this);}}e.addContent(this._getEffectiveDateToolbar(e));}this._oPageBeingAdded=e;var f=this._getEditFormGenerator(e)[0].getEditForm(n);for(var i=0;i<f.length;i++){e.addAggregation("content",f[i],true);this._aForms.push(f[i]);}this.addPage(e);this.to(e);this._oPageBeingAdded=null;if(jQuery(this.getDomRef()).find("header").length>0){if(this.getPages()&&this.getPages().length>0){var g=this.getPages();var P=this.getParent();var b=P&&typeof P.setShowHeader=="function";for(var i=0;i<g.length;i++){if(g[i].getTitle()&&g[i].getTitle()!==""){b&&P.setShowHeader(false);break;}else{g[i].setShowHeader(false);b&&P.setShowHeader(true);}}}}return this.setProperty("formData",n);};sap.extent.uilib.EditPage.prototype._moveAllDeleteItemsToBeginning=function(r){var n=[];var m=r.modifiedObjects;for(var i=0;i<m.length;i++){if(m[i]&&(m[i].actionType==="DELETE")){n.push(m.splice(i,1)[0]);i=-1;}}r.modifiedObjects=n.concat(m);};sap.extent.uilib.EditPage.prototype.updateFormDataPartiallyEC=function(I,r,R){var e=this._getEditFormGenerator(this.getCurrentPage());for(var a=0,b=e.length;a<b;a++){e[a].updateFormDataPartiallyEC(I,r.fieldGroups,R);}if(r.modifiedObjects&&r.modifiedObjects.length>0){this._moveAllDeleteItemsToBeginning(r);for(var a=0,b=r.modifiedObjects.length;a<b;a++){var c=r.modifiedObjects[a];var d=c.actionType;var s=c.sectionId;var f=c.data;f.noUpdateBindings=((b-a)>1)?true:false;if(b>1){r.modifiedObjects.forEach(function(x,y){if(s!==x.sectionId&&a!==y){f.noUpdateBindings=false;}});}for(var i=0,E=e.length;i<E;i++){var p=e[i]._aPanels;for(var j=0,P=p.length;j<P;j++){var g=p[j].getContent();for(var k=0,h=g.length;k<h;k++){var n=g[k];if(n instanceof sap.m.Table){var t=n.getModel();var o=t.getData();if(o.metadata.sectionId===s){if(d==="DELETE"){for(var l=0;l<o.dataList.length;l++){var v=o.dataList[l].v;for(var m=0,q=v.length;m<q;m++){var u=c.data.fields[v[m].id];var w=v[m].value;if(u&&w&&u.code==w.code&&u.primaryDisplayText==w.primaryDisplayText&&u.id==w.id&&u.name==w.name){e[i]._tableRowOperation("delete",t,n.getAggregation("items")[l].getBindingContext(),p[j],f,null);}}}}else if(d==="NEW"){e[i]._tableRowOperation("add",t,null,p[j],f,null);}else if(d==="MODIFY"){e[i]._tableRowOperation("update",t,null,p[j],f,null);}}}}}}}}if(r.hasOwnProperty("securityKey")){sap.extent.uilib.EditPage._cacheSecurityKeyInForm=r.securityKey;}};sap.extent.uilib.EditPage.prototype.updatePropagateFieldsOnRequest=function(d,r){this.getEditFormGenerator().updatePropagateFieldsOnRequest(d,r);};sap.extent.uilib.EditPage.prototype.displayBackendResponse=function(b,c,a){var r=sap.extent.uilib.util.EditFormGeneratorHelper.displayBackendResponse(b,a,this);if(c){c();}return r;};sap.extent.uilib.EditPage.prototype.setOControlData=function(n){this.getEditFormGenerator().setEditFormData(n);};sap.extent.uilib.EditPage.prototype.addPage=function(p){sap.m.NavContainer.prototype.addPage.call(this,p);this.to(p);};sap.extent.uilib.EditPage.prototype.addPanel=function(c){this.getCurrentPage().addContent(c);};sap.extent.uilib.EditPage.prototype.getOtherCSFField=function(f){var e=this._getEditFormGenerator(this.getCurrentPage());for(var i=0,l=e.length;i<l;i++){var E=e[i];var I=E.getInputById(f);if(I){return E._getFromFields(sap.extent.uilib.util.EditFormGeneratorHelper.getMainGroupId(I),f);}}};sap.extent.uilib.EditPage.prototype.getFieldErrorMsg=function(f){var e=this._getEditFormGenerator(this.getCurrentPage());var r=[];for(var i=0,l=e.length;i<l;i++){var m=e[i].getFieldError(f);if(m.length>0){r=r.concat(m)}}return r;};sap.extent.uilib.EditPage.prototype._openBusyDialog=function(d,r){this._oBusyLoading.show(d,r);};sap.extent.uilib.EditPage.prototype._closeBusyDialog=function(){this._oBusyLoading.hide();};},"sap/extent/uilib/EditPageRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.EditPageRenderer");jQuery.sap.require("sap.m.NavContainerRenderer");sap.extent.uilib.EditPageRenderer=sap.ui.core.Renderer.extend(sap.m.NavContainerRenderer);},"sap/extent/uilib/EffectiveDate.js":function(){jQuery.sap.declare("sap.extent.uilib.EffectiveDate");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.EffectiveDate",{metadata:{library:"sap.extent.uilib",properties:{date:{type:"string",group:"Misc",defaultValue:null},showEffectiveDate:{type:"boolean",group:"Misc",defaultValue:true},editable:{type:"boolean",group:"Misc",defaultValue:false},futureChangesNotification:{type:"object",group:"Misc",defaultValue:null},pendingApprovalNotification:{type:"object",group:"Misc",defaultValue:null},workFlowUrl:{type:"string",group:"Misc",defaultValue:null},employementHistoryUrl:{type:"string",group:"Misc",defaultValue:null},portletId:{type:"string",group:"Misc",defaultValue:null},userId:{type:"string",group:"Misc",defaultValue:null},blockLabel:{type:"string",group:"Misc",defaultValue:null},blockUrl:{type:"string",group:"Misc",defaultValue:null}},aggregations:{_datePicker:{type:"sap.sf.commons.DatePicker",multiple:false,visibility:"hidden"}},events:{dateChange:{},pendingFutureChangeLinkClicked:{}}}});sap.ui.require('sap/sf/commons/DatePicker');sap.extent.uilib.EffectiveDate.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._oDatePicker=null;this.month=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.oIcon=new sap.ui.core.Icon();this.oLinkInFlight=new sap.m.Link({press:jQuery.proxy(this.openInFlightPopover,this)});this.oLinkFuture=new sap.m.Link({press:jQuery.proxy(function(){this.firePendingFutureChangeLinkClicked({blockId:this.getPortletId()});},this)});};sap.extent.uilib.EffectiveDate.prototype._getDatePickerControl=function(){if(!this._oDatePicker){var d=this.getDate().split(" ");this._oDatePicker=new sap.sf.commons.DatePicker({dateValue:new Date(d[2],this.month.indexOf(d[0]),d[1]),change:[this._handleDateChange,this],width:"11.6em"});this.setAggregation("_datePicker",this._oDatePicker,true);}return this._oDatePicker;};sap.extent.uilib.EffectiveDate.prototype._handleDateChange=function(e){var n=e.getParameter("value");this.setProperty("date",n,true);this.fireDateChange({date:n});};sap.extent.uilib.EffectiveDate.prototype.openInFlightPopover=function(){var w=this.getWorkFlowUrl();var p=this.getPortletId();var t=this.oBundle.getText("ECT_PP3_IN_FLIGHT_CHANGE");this.createPopover(w,p,this.inFlightModel,t,"IN_FLIGHT_CHANGE");};sap.extent.uilib.EffectiveDate.prototype.createPopover=function(u,p,m,t,P){var l=0;var t;var i;if(m!=null&&m.length>1){if(!this.oResponsivePopover){this.oResponsivePopover=new sap.m.ResponsivePopover({afterClose:jQuery.proxy(this.onAfterClose,this)});}if(!this.oResponsivePopover.isOpen()){if(m){l=m.length;var a;if(P=="FUTURE_CHANGE"){a=this._createPortletUrl(m,u+"?type="+p+"&selected_user="+this.userId+"&id=",false).slice();i=true;}else if(P=="IN_FLIGHT_CHANGE"){a=this._createPortletUrl(m,u,true).slice();i=false;}}}this._setPopover(this.createLinksWithLayout(t,a,l,m),i);}};sap.extent.uilib.EffectiveDate.prototype.createLinksWithLayout=function(t,u,l,m){var v=new sap.ui.layout.VerticalLayout({});for(var i=0;i<l;i++){var a=new sap.m.Link({text:m?m[i].label:t});if(u[i]!=null){a.setHref(u[i]);a.setEnabled(true);a.setTarget("_self");a.addStyleClass("linkPattern");}else{a.setEnabled(false);a.addStyleClass("secondaryTextPattern");}var I=new sap.ui.core.Icon();var h=new sap.ui.layout.HorizontalLayout({});I.addStyleClass("sapExtentUilibEffectiveDateHelpIcon");h.addContent(I);h.addContent(a);v.addContent(h);a.addStyleClass("sapExtentUilibLinkPadding");}return v;};sap.extent.uilib.EffectiveDate.prototype._setPopover=function(v,i){v.addStyleClass("sapExtentUilibNotificationLayout");this.oResponsivePopover.addContent(v);this.oResponsivePopover.setPlacement(sap.m.PlacementType.Vertical);this.oResponsivePopover.setShowHeader(false);this.oResponsivePopover.setShowCloseButton(false);this.oResponsivePopover.setVerticalScrolling(false);this.oResponsivePopover.addStyleClass("sapExtentUilibNotificationPopover");if(sap.ui.Device.system.phone){this.oResponsivePopover.setShowHeader(true);this.oResponsivePopover.setShowCloseButton(true);this.oResponsivePopover.setVerticalScrolling(true);this.oResponsivePopover.setHorizontalScrolling(false);this.oResponsivePopover.removeStyleClass("sapExtentUilibNotificationPopover");v.removeStyleClass("sapExtentUilibNotificationLayout");}if(i){this.oResponsivePopover.openBy(this.oLinkFuture);}else{this.oResponsivePopover.openBy(this.oLinkInFlight);}};sap.extent.uilib.EffectiveDate.prototype.onBeforeRendering=function(){var l=0;var a=0;this.futureModel=this.getFutureChangesNotification();this.inFlightModel=this.getPendingApprovalNotification();var w=this.getWorkFlowUrl();var e=this.getEmployementHistoryUrl();var p=this.getPortletId();this.userId=this.getUserId();if(this.inFlightModel!=null){l=this.inFlightModel.length;if(l>1){this.oLinkInFlight.setText(" "+l+" "+this.oBundle.getText("ECT_PP3_IN_FLIGHT_CHANGES"));this.oLinkInFlight.addStyleClass("linkPattern");}else if(l===1){this.oLinkInFlight.setText(this.inFlightModel[0].label);if(this.inFlightModel[0].readOnly===false){this.oLinkInFlight.setEnabled(true);this.oLinkInFlight.setTarget("_self");this.oLinkInFlight.addStyleClass("linkPattern");}else{this.oLinkInFlight.setEnabled(false);this.oLinkInFlight.addStyleClass("secondaryTextPattern");}this.urlInFlight=this._createPortletUrl(this.inFlightModel,w,true);this.oLinkInFlight.setHref(this.urlInFlight[0]);}}if(this.futureModel!=null){a=this.futureModel.length;if(a>1){this.oLinkFuture.setText(this.oBundle.getText("ECT_PP3_FUTURE_CHANGES",[a]));this.oLinkFuture.addStyleClass("linkPattern");}else if(a===1){this.oLinkFuture.setText(" "+this.futureModel[0].label);if(this.futureModel[0].readOnly===false){this.oLinkFuture.setEnabled(true);this.oLinkFuture.setTarget("_self");this.oLinkFuture.addStyleClass("linkPattern");}else{this.oLinkFuture.setEnabled(false);this.oLinkFuture.addStyleClass("secondaryTextPattern");}this.urlFuture=this._createPortletUrl(this.futureModel,e+"?type="+p+"&selected_user="+this.userId+"&id=",false).slice();}}this.oIcon.addStyleClass("sapExtentUilibEffectiveDateHelpIcon");this.oLinkFuture.addStyleClass("sapExtentUilibLinkPadding");this.oLinkInFlight.addStyleClass("sapExtentUilibLinkPadding");};sap.extent.uilib.EffectiveDate.prototype.onAfterClose=function(){this.oResponsivePopover.destroyContent();};sap.extent.uilib.EffectiveDate.prototype.onExit=function(){this.oResponsivePopover.destroy();this.oLink.destroy();this.oLinkInFlight.destroy();this.oLinkFuture.destroy();};sap.extent.uilib.EffectiveDate.prototype._getPrevLocationUrlParameter=function(){if(this.getBlockUrl()){return"&prevLocation="+encodeURIComponent(this.getBlockUrl());}else{return"&prevLocation="+encodeURIComponent(window.location.pathname+window.location.search);}};sap.extent.uilib.EffectiveDate.prototype._createPortletUrl=function(l,b,i){var u=[];if(l){for(var a=0,c=l.length;a<c;a++){var r=!!l[a].readOnly;if(i){u.push(this._createWorkflowUrl(b,l[a]));}else{u.push(r?null:(b+(l[a].id||l[a].effectiveDate)+this._getPrevLocationUrlParameter()));}}return u;}};sap.extent.uilib.EffectiveDate.prototype._createWorkflowUrl=function(b,i){var u=null;if(b&&i.encodedWorkflowRequestId){if(!i.readOnly){u=b+"?workflowRequestId="+i.encodedWorkflowRequestId;u+="&prevPage=PEOPLE_PROFILE";u+="&selected_user="+this.userId;u+=this._getPrevLocationUrlParameter();}}return u;};},"sap/extent/uilib/EmployeeCard.js":function(){jQuery.sap.declare("sap.extent.uilib.EmployeeCard");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.MaskableCore");jQuery.sap.require("sap.extent.uilib.QuickCard");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");sap.extent.uilib.MaskableCore.extend("sap.extent.uilib.EmployeeCard",{metadata:{library:"sap.extent.uilib",properties:{name:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},role:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'340px'},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},additionalText:{type:"string",group:"Misc",defaultValue:null},company:{type:"string",group:"Misc",defaultValue:null},userName:{type:"string",group:"Misc",defaultValue:null},userID:{type:"string",group:"Misc",defaultValue:null},userIdEncoded:{type:"string",group:"Misc",defaultValue:null},status:{type:"string",group:"Misc",defaultValue:null},isGroup:{type:"boolean",group:"Misc",defaultValue:false},enableEmployeeCardFocusMode:{type:"boolean",group:"Misc",defaultValue:false},employeeCardAriaRole:{type:"string",group:"Misc",defaultValue:'button'}},aggregations:{_employeeCard:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_additionalText:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_quickCard:{type:"sap.extent.uilib.QuickCard",multiple:false,visibility:"hidden"}}}});jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Link");sap.extent.uilib.EmployeeCard.prototype.init=function(){this._oTitle=null;this._oLink=null;this._oRole=null;this._oStatus=null;this._oSecondColumn=null;this._userPhoto=null;this._oImage=null;this._currentID=null;this._previousID=null;var _=new sap.ui.layout.HorizontalLayout().addStyleClass("sapExtentUilibEmployeeCardTopRow");this.setAggregation("_employeeCard",_,true);var a=new sap.m.Text({text:this.getAdditionalText()}).addStyleClass("sapExtentUilibEmployeeAdditionalText");this.setAggregation("_additionalText",a,true);var b=new sap.extent.uilib.QuickCard();this.setAggregation("_quickCard",b,true);};sap.extent.uilib.EmployeeCard.prototype._getTitleControl=function(){this._oTitle=this._getLabelControl(this._oTitle,this.getTitle(),"labelPattern");return this._oTitle;};sap.extent.uilib.EmployeeCard.prototype._getLinkControl=function(){var d=sap.ui.getCore().getModel("device");var i=d&&d.getProperty("/isMobileObjectPage");if(this.getUserID()&&this.getCompany()&&!i){var l=new sap.m.Link({text:this.getName(),href:"javascript:void(0)",width:'200px'}).addStyleClass("linkPattern");l.addStyleClass("hideOnPDF");l.attachPress(jQuery.proxy(function(){sap.ui.getCore().getEventBus().publish("peopleProfile","selectUserFromCard",{company:this.getCompany(),userID:this.getUserID(),userName:this.getUserName()});},this));var L=new sap.m.Label({text:this.getName(),width:'200px',design:sap.m.LabelDesign.Bold});L.addStyleClass("ShowOnPDF");L.setVisible(!!this.getName());l.setVisible(!!this.getName());this._oLink=new sap.m.HBox();this._oLink.addItem(l);this._oLink.addItem(L);}else{this._oLink=new sap.m.Label({text:this.getName(),width:'200px',design:sap.m.LabelDesign.Bold});this._oLink.setVisible(!!this.getName());}return this._oLink;};sap.extent.uilib.EmployeeCard.prototype.onAfterRendering=function(){if(sap.extent.uilib.MaskableCore.prototype.onAfterRendering){sap.extent.uilib.MaskableCore.prototype.onAfterRendering.apply(this);}var t=this;if(this._oLink instanceof sap.m.Label){this._oLink.$().attr("title",this.getName());}if(this.getTitle()&&this._oTitle){this._oTitle.$().attr("title",this.getTitle());}if(this.getRole()&&this._oRole){this._oRole.$().attr("title",this.getRole());}if(this.getStatus()&&this._oStatus){this._oStatus.$().attr("title",this.getStatus());}if(this.getEnableEmployeeCardFocusMode()){if(this._oImage)this._oImage.$().removeAttr('aria-label');this.addEventDelegate({onAfterRendering:function(){var T=t.$();if(t.getEmployeeCardAriaRole()){T.attr('role',t.getEmployeeCardAriaRole());}T.attr('tabindex',0);T.attr('aria-label',t._getAriaLabel());},onkeydown:function(e){var k;if(e.ctrlKey&&e.shiftKey&&e.keyCode==49){k='control-shift-1';}var i=e.srcControl.sId;t.qc.onKeydown(new sap.ui.base.Event(i,t,{keyEvent:e,keyCombo:k}));}});}};sap.extent.uilib.EmployeeCard.prototype._getRoleControl=function(){this._oRole=this._getLabelControl(this._oRole,this.getRole());return this._oRole;};sap.extent.uilib.EmployeeCard.prototype._getStatusControl=function(){this._oStatus=this._getLabelControl(this._oStatus,this.getStatus());return this._oStatus;};sap.extent.uilib.EmployeeCard.prototype._getSecondColumnControl=function(){if(!this._oSecondColumn){this._oSecondColumn=new sap.ui.layout.VerticalLayout().addStyleClass("sapExtentUilibEmployeeRight");}else{this._oSecondColumn.removeAllContent();}if(this.getName()){this._oSecondColumn.addContent(this._getLinkControl());}if(this.getTitle()){this._oSecondColumn.addContent(this._getTitleControl());}if(this.getRole()){this._oSecondColumn.addContent(this._getRoleControl());}if(this.getStatus()){this._oSecondColumn.addContent(this._getStatusControl());}return this._oSecondColumn;};sap.extent.uilib.EmployeeCard.prototype._createUserPhoto=function(){var u=this.getUserID();var a=!!(u&&u!="NO_MANAGER");this._userPhoto=this._oCommonUtils.getUserPhotoJSON(u,this.getUserIdEncoded(),this.getName(),{focusable:this.getEnableEmployeeCardFocusMode()?false:a});this._oImage=new sap.sf.surj.shell.controls.UserPhoto(this._userPhoto);var U=this._oImage&&this._oImage.getProperty("user");if(U&&a){this.qc=this._getQuickCardControl();this._oImage.attachMouseover(jQuery.proxy(this.qc.onHover,this.qc));this._oImage.attachMouseout(jQuery.proxy(this.qc.onHoverLeave,this.qc));if(!this.getEnableEmployeeCardFocusMode()){this._oImage.setAriaLabel(this._getAriaLabel());this._oImage.attachKeydown(jQuery.proxy(this.qc.onKeydown,this.qc));}}return this._oImage;};sap.extent.uilib.EmployeeCard.prototype._getAriaLabel=function(){var r=sap.ui.getCore().getModel("i18n").getResourceBundle();var J=r.getText("EMPFILE_HRIS_PORTLET_JOB_INFORMATION");var P=r.getText("ECT_PP3_PHOTO_BUTTON_HELPTEXT",this._userPhoto&&this._userPhoto.ariaLabel?this._userPhoto.ariaLabel:this.getTitle());return J+' '+P;};sap.extent.uilib.EmployeeCard.prototype._getPhoto=function(t){if(!this._oCommonUtils){this._oCommonUtils=sap.extent.uilib.util.CommonUtils.getInstance();}return this._createUserPhoto();};sap.extent.uilib.EmployeeCard.prototype._getEmployeeCardControl=function(l){this._previousID=this._currentID;this._currentID=this.getUserID();if(this.getUserID()&&(this.getUserID()===this._previousID)){return this.getAggregation("_employeeCard");}var t=this;var _=this.getAggregation("_employeeCard");_.removeAllContent();_.addContent((this._currentID!=this._previousID)?this._getPhoto(123):this._oImage);_.addContent(this._getSecondColumnControl());if(l){_.rerender()}return _;};sap.extent.uilib.EmployeeCard.prototype._getLabelControl=function(p,f,s){if(!p){p=new sap.m.Label({text:f});}else{p.setText(f);}if(s){p.addStyleClass(s);}p.setVisible(!!f);return p;};sap.extent.uilib.EmployeeCard.prototype._getAdditionalTextControl=function(){var _=this.getAggregation("_additionalText");_.setText(this.getAdditionalText());_.setVisible(!!this.getAdditionalText());return _;};sap.extent.uilib.EmployeeCard.prototype._getQuickCardControl=function(){var _=this.getAggregation("_quickCard");return _;};sap.extent.uilib.EmployeeCard.prototype.getUser=function(){return this._userPhoto.user;};sap.extent.uilib.EmployeeCard.prototype.exit=function(){};},"sap/extent/uilib/EmployeeCardRenderer.js":function(){jQuery.sap.require("sap.extent.uilib.MaskableCoreRenderer");jQuery.sap.declare("sap.extent.uilib.EmployeeCardRenderer");sap.extent.uilib.EmployeeCardRenderer=sap.ui.core.Renderer.extend(sap.extent.uilib.MaskableCoreRenderer);sap.extent.uilib.EmployeeCardRenderer.renderContent=function(r,c){"use strict";r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibEmployeeCard");if(c.getEnableEmployeeCardFocusMode()){r.addClass("sapExtentUilibEmployeeCardActive");}r.writeClasses();if(c.getWidth()){r.addStyle('width',c.getWidth());}if(c.getHeight()){r.addStyle('height',c.getHeight());}r.writeStyles();r.write(">");r.renderControl(c._getEmployeeCardControl());r.renderControl(c._getAdditionalTextControl());r.write("</div>");};},"sap/extent/uilib/FileUploadFix.js":function(){jQuery.sap.declare("sap.extent.uilib.FileUploadFix");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ca.ui.FileUpload");sap.ca.ui.FileUpload.extend("sap.extent.uilib.FileUploadFix",{metadata:{library:"sap.extent.uilib",properties:{valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:"sap.ui.core.ValueState.None"},valueStateText:{type:"string",group:"Appearance",defaultValue:""}}}});sap.extent.uilib.FileUploadFix.prototype.setValueState=function(v){this.setProperty("valueState",v);if(v==sap.ui.core.ValueState.None){this._oAddButton.removeStyleClass("sapExtentUilibFileUploadFixError");}else if(v==sap.ui.core.ValueState.Error){this._oAddButton.addStyleClass("sapExtentUilibFileUploadFixError");}};sap.extent.uilib.FileUploadFix.prototype.onAfterRendering=function(e,d){if(sap.ca.ui.FileUpload.prototype.onAfterRendering)sap.ca.ui.FileUpload.prototype.onAfterRendering.apply(this);this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._oAddButton.setTooltip(this.oBundle.getText("ECT_PP3_ADD_ATTACHMENT"));this.$().find("input").attr("name","fileData1");};sap.extent.uilib.FileUploadFix.prototype.setUrl=function(v){var o=this.getUrl();if(o!==v){this._oFileNameLabel.bindProperty("href",{path:v});this.setProperty("url",v);}};sap.extent.uilib.FileUploadFix.prototype.uploadDone=function(e,d){try{var f=this._findFileIndexByInternalId(d.files[0].internalId);if(f===-1){return;}this.setValueState(sap.ui.core.ValueState.None);this.setValueStateText("");if(this._isIE9OrBelow()){var E;if(this.getUseMultipart()){E=jQuery('pre',d.result).text();var j=jQuery.parseJSON(E);this.fireUploadFile(j);}else{if(null!==d&&null!==d.result){var F=d.files[0].name;var s=d.files[0];E=jQuery('pre',d.result).text();var J;try{J=jQuery.parseJSON(E);}catch(e){}if(J&&J.error&&J.error.code&&J.error.code==='413'){throw new Error(this._oBundle.getText("FileUploader.error.fileUploadFail"));}var m;try{m=E.match(/^data\:(.*);base64,/)[1];}catch(e){throw new Error(this._oBundle.getText("FileUploader.error.fileUploadFail"));}E=E.replace(/^data\:(.*);base64,/,'');if(null!==E){var x=jQuery.ajax({contentType:m,data:E,type:"POST",url:this.getUploadUrl(),success:jQuery.proxy(function(d,b){var D=d.d?d.d:d;this.fireUploadFile(D);},this),error:function(X,t,b){if(t!=='abort')throw new Error(this._oBundle.getText("FileUploader.error.fileUploadFail")+" "+b);},beforeSend:jQuery.proxy(function(b,d){this.getModel().setProperty(this.getItems()+"/"+f+"/abortUplXhr",jQuery.proxy(b.abort,b));this.fireBeforeUploadFile(s);this._setRequestHeaders(b);b.setRequestHeader("Content-Transfer-Encoding",'Base64');b.setRequestHeader("Content-Disposition",'attachment; filename="'+F+'"');},this)});}else if(null!==d.result[0]&&null!==d.result[0].title){throw new Error(this._oBundle.getText("FileUploader.error.base64Error")+": "+d.result[0].title);}else{throw new Error(this._oBundle.getText("FileUploader.error.base64Error"));}}}}else if(d&&d.result){this.fireUploadFile({result:d.result,files:d.files});}else{throw new Error(this._oBundle.getText("FileUploader.error.invalidResponse"));}}catch(a){this._cancelPendingUpload(d.files[0].internalId);this.fireFileUploadFailed({exception:a,response:d});}};},"sap/extent/uilib/FileUploadFixRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.FileUploadFixRenderer");jQuery.sap.require("sap.ca.ui.FileUploadRenderer");sap.extent.uilib.FileUploadFixRenderer=sap.ui.core.Renderer.extend(sap.ca.ui.FileUploadRenderer);},"sap/extent/uilib/FormPattern.js":function(){jQuery.sap.declare("sap.extent.uilib.FormPattern");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.LinkWithIcon");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.extent.uilib.ConfigurableLabel");jQuery.sap.require("sap.extent.uilib.TextWithIcon");jQuery.sap.require("sap.extent.uilib.CountryFlag");jQuery.sap.require("sap.extent.uilib.EmployeeCard");jQuery.sap.require("sap.extent.uilib.TimeOffItem");jQuery.sap.require("sap.extent.uilib.TitleAndButtons");jQuery.sap.require("sap.extent.uilib.util.JobCodeUtil");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.extent.uilib.util.HelpManager");jQuery.sap.require("sap.extent.uilib.util.PayGroupPopup");jQuery.sap.require("sap.extent.uilib.util.FieldValueExtractor");jQuery.sap.require("sap.extent.uilib.FormPatternHelper");jQuery.sap.require("sap.extent.uilib.EffectiveDate");sap.ui.core.Control.extend("sap.extent.uilib.FormPattern",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},expanded:{type:"boolean",group:"Misc",defaultValue:false},collapsedItemCount:{type:"int",group:"Misc",defaultValue:-1},largeBlock:{type:"boolean",group:"Misc",defaultValue:false},showNMore:{type:"boolean",group:"Misc",defaultValue:false},showTechnicalValues:{type:"boolean",group:"Misc",defaultValue:true},blockDescription:{type:"string",group:"Misc",defaultValue:null},blockData:{type:"object",group:"Misc",defaultValue:null},inValidData:{type:"object",group:"Misc",defaultValue:null},detailsCallback:{type:"object",group:"Misc",defaultValue:null},customContentTop:{type:"object",group:"Misc",defaultValue:null},customContentBottom:{type:"object",group:"Misc",defaultValue:null},userId:{type:"string",group:"Misc",defaultValue:null},blockUrl:{type:"string",group:"Misc",defaultValue:null},showHistory:{type:"boolean",group:"Misc",defaultValue:false},showTitle:{type:"boolean",group:"Misc",defaultValue:true},firstGroup:{type:"boolean",group:"Misc",defaultValue:true},ignoreOrderPos:{type:"boolean",group:"Misc",defaultValue:false},hasPadding:{type:"boolean",group:"Misc",defaultValue:true},totalCompHistoryData:{type:"object",group:"Misc",defaultValue:null}},events:{resolveUrlTokens:{}}}});sap.extent.uilib.FormPattern.prototype.init=function(){sap.extent.uilib.FormPattern.maxPhoneWidth=379;this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this.hasContent=false;this.masked=true;this.controls=[];this.columns=[];this._aConditionalGroups=[];this.hasMoreContent=false;this.bSmallSize=window.innerWidth<768;this.bPhone=window.innerWidth<=sap.extent.uilib.FormPattern.maxPhoneWidth;sap.ui.Device.resize.attachHandler(jQuery.proxy(this.onResize,this));this.HIGH="HIGH";this.MEDIUM="MEDIUM";this.repeatTitle=false;this.invisibleFieldCount=0;this.isOneColumnLayoutForLargeBlock=false;this._commonUtils=sap.extent.uilib.util.CommonUtils.getInstance();this._childForm=[];this._detailsLink=[];};sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled=window.pageHeaderJsonData&&window.pageHeaderJsonData.accessibilityPreferences&&window.pageHeaderJsonData.accessibilityPreferences.blindnessSupport?true:false;sap.extent.uilib.FormPattern.prototype.setExpanded=function(e){if(e!=this.getProperty("expanded")){this.addStyleClass("sapExtentUilibFormPatternFadeIn");this.setProperty("expanded",e,true);this.calcLayout();this._childForm.forEach(function(a){a.setExpanded(e)});if(sap.ui.getCore().getModel("objectPageMetaDataForPrint")&&sap.ui.getCore().getModel("objectPageMetaDataForPrint").getData()){var _=this;this._detailsLink.forEach(function(a){_.expandDetails(0,0,a)});}setTimeout(jQuery.proxy(this.smoothScroll,this,e),150);setTimeout(jQuery.proxy(this.removeStyleClass,this,"sapExtentUilibFormPatternFadeIn"),2000);}};sap.extent.uilib.FormPattern.prototype.smoothScroll=function(e){var d=this.expandedHeight-this.collapsedHeight;var s=Math.ceil(d/40);var m=e?this.collapsedHeight:this.expandedHeight;var a=e?this.expandedHeight:this.collapsedHeight;var t=this;var b=setInterval(function(){var S=false;if(e){m+=s;S=(m>=a);}else{m-=s;S=(m<=a);}t.$().css("max-height",m);if(S){clearInterval(b);t.$().css("max-height",9999999);}},5);};sap.extent.uilib.FormPattern.prototype.setBlockData=function(b){this.setProperty("blockData",b,true);if(this.hasContent){this.controls=[];this.columns=[];this.hasContent=false;}this.isOneColumnLayoutForLargeBlock=b.layout&&b.layout.isOneColumnLayoutForLargeBlock;this.createContent();};sap.extent.uilib.FormPattern.prototype.setTotalCompHistory=function(){var c=sap.ui.view({viewName:"sap.sf.peopleprofile.view.hris.block.CompensationCharts",type:sap.ui.core.mvc.ViewType.XML});c.getController().updateModel(this.getTotalCompHistoryData());this.chartsItem={control:c,type:"charts",visible:true,columns:2,rows:0};};sap.extent.uilib.FormPattern.prototype.hasTotalCompHistoryData=function(){var c=this.getTotalCompHistoryData();if(c){if(Array.isArray(c.getMultiplePayComponentGroupVOList)&&c.getMultiplePayComponentGroupVOList.length){return true;}else if(Array.isArray(c.getTeamSalaryInfo)&&c.getTeamSalaryInfo.length){return true;}else if(c.getSalaryPositioningInfoVO){var S=c.getSalaryPositioningInfoVO;for(var k in S){if(S[k]){return true;}}}}return false;};sap.extent.uilib.FormPattern.prototype.setCollapsedItemCount=function(c){if(c||c==0){c=parseInt(c,10);this.setProperty("collapsedItemCount",c,true);this.updateShowMore();}};sap.extent.uilib.FormPattern.prototype.hasShowMore=function(){return this.hasMoreContent;};sap.extent.uilib.FormPattern.prototype.getFieldCount=function(){return this.controls.length+this.invisibleFieldCount;};sap.extent.uilib.FormPattern.prototype.getVisibleFieldCount=function(){return this.controls.length;};sap.extent.uilib.FormPattern.prototype.onResize=function(p){var P=p.width<=sap.extent.uilib.FormPattern.maxPhoneWidth;var s=p.width<600;var c=false;if(s!=this.bSmallSize){this.bSmallSize=s;c=true;}if(P!=this.bPhone){this.bPhone=P;c=true;}if(c){var h=this.hasMoreContent;this.controls=[];this.columns=[];this.hasContent=false;this.createContent();if(!h&&this.hasMoreContent){this.setProperty("expanded",true,true);this.calcLayout();}}};sap.extent.uilib.FormPattern.prototype.getDisplayValue=function(f,r){var a=this.getValue(f,r);if(typeof a=="object"){return a.primaryDisplayText||a.name;}return a;};sap.extent.uilib.FormPattern.prototype.getValue=function(f,r){var d=this.getBlockData().data;if(d.fields[f]){return d.fields[f].value[r]||"";}return"";};sap.extent.uilib.FormPattern.prototype.createContent=function(){this.controlCount=0;var m=this.getBlockData().metadata;var d=this.getBlockData().data;var l=this.getBlockData().layout;var h=l&&l.hideTitle;this.blockId=this.getBlockData().blockId;var p={};if(!this.getFirstGroup()){this.addStyleClass("sapExtentUilibFormPatternSubsequentBlock");}if(m.maxFieldsToShow&&!this.getExpanded()){this.maxFieldsToShow=parseInt(m.maxFieldsToShow,10);}var a=this.getBlockData().alternateSections;var b=[];sap.extent.uilib.FormPatternHelper.getSectionFields(a,b);if(m.label&&this.getShowTitle()&&!h){if(m.hasOwnProperty("titleType")&&m.titleType==="resolver"){this.repeatTitle=true;}else{this.title=m.label;}}if(m.label){this.tablesummary=m.label;}var f=[];for(var c in m.fields){if(m.fields.hasOwnProperty(c)){f.push(c);}}this.valueColumnSpan=1;var A=false;if(!d){return;}this.itemCount=d.fields[f[0]]&&d.fields[f[0]].value?d.fields[f[0]].value.length:0;var e=false;var g=null;var o=this.getIgnoreOrderPos();var t=d.technicalInfo;if(!o&&t){g=sap.extent.uilib.FormPatternHelper.getEduPosOrder(o,t)}var j=null;if(this.itemCount>1&&this.title&&!m.grid){this.childTitleControl=new sap.m.Title({text:this.title,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated});if(m.hasOwnProperty("fontConfig")){this._commonUtils.addClassesFromConfigForTitle(m.fontConfig,this.childTitleControl);}}for(var k=0;k<this.itemCount;k++){var n=k;if(g){for(idx=0;idx<d.technicalInfo.length;idx++){if(d.technicalInfo[idx].orderPos===g[k]){n=idx;break;}}}var q=true;var v=n;var s=true;var r=false;var u=null;var w={};var x=m.fieldsOrder;if(this.maxFieldsToShow>=m.fieldsOrder.length){this.maxFieldsToShow=undefined;}var y=m.fields;var z=d.fields;if(d.technicalInfo&&d.technicalInfo[n]&&d.technicalInfo[n].fieldsMeta&&!l.transformToForm){x=d.technicalInfo[n].fieldsMeta.fieldsOrder;y=d.technicalInfo[n].fieldsMeta.fields;}if(this.repeatTitle){var B=new sap.m.Title({text:this.getDisplayValue(m.label,k)});B.addStyleClass("sapExtentUilibFormPatternBlockTitle");this._commonUtils.addClassesFromConfigForTitle(m.fontConfig,B);w={name:"title",control:B,type:"control",visible:true,rows:1,columns:2};this.controls.push(w);this.controlCount++;}for(var C=0;C<x.length;C++){var D=x[C];var E=false;if(z[D]){var V=null;if(y[D].hasOwnProperty("visible")&&typeof y[D].visible=="object"){var V=y[D].visible[k];if(typeof V=="undefined"){V=true;}if(z[D].hasOwnProperty("isVisible")){V=z[D].isVisible;delete z[D].isVisible;}}else{V=y[D].visible}if((y[D].hasOwnProperty("visible")&&(!V||V=="none"))||(z[D].hasOwnProperty("visible")&&!z[D].visible[k])){this.invisibleFieldCount++;continue;}if(y[D].hasOwnProperty("metadata")&&(y[D].metadata.type==="FIELDSGROUP"||y[D].metadata.type==="DATAGRID")){var F={metadata:y[D].metadata,data:null,layout:y[D].layout};if(z[D].value[v]){F.data={fields:z[D].value[v].fields,technicalInfo:z[D].value[v].technicalInfo};}var G=this.createChildFormPattern(F);w={name:D,control:G,type:"control",rows:y[D].metadata.rows&&this.isLargeBlock()?y[D].metadata.rows:1,columns:2,visible:true};w=this.updateInvalidInfo(w,y[D].metadata.id);if((this.itemCount>1||(m.grid||m.hasMultiple))&&!e){if(!s){w.group=true;w.cascadeItem=r;}else{s=false;}}this.controls.push(w);this.controlCount++;E=true;}if(y[D].type==="control"){w={name:D,control:z[D].value[v],type:"control",rows:y[D].rows&&this.isLargeBlock()?y[D].rows:1,columns:y[D].columns||1,visible:q};w=this.updateInvalidInfo(w,y[D].id);if((this.itemCount>1||(m.grid||m.hasMultiple))&&!e){if(!s){w.group=true;w.cascadeItem=r;}else{s=false;}}this.controls.push(w);this.controlCount++;E=true;}if(l&&l.employeeCard){for(var i=0;i<l.employeeCard.length;i++){var H=l.employeeCard[i];var I=H.employeeId;var J=H.relationshipType;if((y[I]&&y[I].maskable)||(y[J]&&y[J].maskable)){delete l.employeeCard;break;}if(I===D||J===D){w={name:D,type:"employeeCard",rows:1,visible:q};if(I===D){u=z[D].value[v];var K=u?(u.name||this.getEmployeeCardFullName(u)):"";var L="";if(J&&y[J]&&!y[J].maskable&&u){L=(z[J].value[v].label||z[J].value[v].primaryDisplayText)}else if(!J){L=y[D]&&y[D].label;}w.control=new sap.extent.uilib.EmployeeCard({name:y[D].type==="HRIS_FINDUSER"?sap.extent.uilib.util.FieldValueExtractor.getFullName(u):K,userID:u?u.id||u.userId:"",userIdEncoded:u?u.userIdEncoded:"",company:window.company,title:L});this.controls.push(w);this.controlCount++;if((this.itemCount>1||(m.grid||m.hasMultiple))&&w&&!e){if(!s){w.group=true;w.cascadeItem=r;}else{s=false;}}if(this.controls.length===1){A=true;}}E=true;}}}if(l&&l.map){if(l.map.city===D||l.map.country===D||l.map.zipCode===D||l.map.timezone===D||l.map.countryName===D||l.map.countryCode===D||l.map.latitude===D||l.map.longitude===D){E=true;}}if(l&&l.timeOffItems){w={name:D,type:"timeOffItem",rows:1,columns:1,visible:q};w.control=new sap.extent.uilib.TimeOffItem({item:z[D].value[v]});E=true;this.controls.push(w);this.controlCount++;}if(y[D].type==="MDFQuickCardLink"){w={name:D,type:"controlWithCustomContent",rows:1,columns:y[D].columns||1,visible:q};p={id:z[D].value[v].id};if((this.itemCount>1||(m.grid||m.hasMultiple))&&w&&!e){if(!s){w.group=true;w.cascadeItem=r;}else{s=false;}}w.control=new sap.m.Link({text:y[D].linkName||z[D].value[v].name,press:jQuery.proxy(this.showDetails,this,y[D].actionFunction,p,z[D].value[v].name)});if(y[D].styleClass){w.control.addStyleClass(y[D].styleClass);}w.customContentRight=y[D].customContentRight;E=true;w=this.updateInvalidInfo(w,y[D].id);this.controls.push(w);this.controlCount++;}if(l&&l.payrollItems){w={name:D,type:"control",rows:1,columns:y[D].columns||1,visible:q};w.control=z[D].value[v];E=true;this.controls.push(w);this.controlCount++;}if(l&&l.payrollKPIItems){w={name:D,type:"name-value",rows:1,visible:q};w.name=new sap.m.Text({text:z[D].value[v].label,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated});var M=z[D].value[v].value;var N=z[D].value[v].currency;w.value=new sap.m.FlexBox({items:[new sap.extent.uilib.ConfigurableLabel({text:M,isMaskable:true,masked:true,grid:m.grid,}).addStyleClass('payrollAmountFigures'),new sap.m.Label({text:N}).addStyleClass('payrollCurrencyLabels')]});E=true;this.controls.push(w);this.controlCount++;}var O=null;if(y[D].type==="EDUMULTIPLERELATION"){var P=[];var Q=[];var R=[];w={name:this.getLabelField(y[D]),rows:1,cols:1,type:"name-value",visible:q};for(var S=0;S<z[D].value[v].defaultValue.length;S++){Q.push(z[D].value[v].defaultValue[S].displayValue);R.push("*******");P.push(new sap.extent.uilib.ConfigurableLabel({isMaskable:false,masked:false,type:"String",grid:m.grid,text:y[D].maskable?"*******":z[D].value[v].defaultValue[S].displayValue,fieldId:y[D].id}));}var l=new sap.ui.layout.VerticalLayout({content:P.length>0?P:new sap.extent.uilib.ConfigurableLabel({isMaskable:false,masked:false,type:"String",text:"-",grid:m.grid,fieldId:y[D].id})});var T=new sap.m.Link({text:this.oBundle.getText("COMMON_Show"),press:jQuery.proxy(function(l,R,Q,t1){var T=t1.getSource();var u1=T.getText()===this.oBundle.getText("COMMON_Hide")?R:Q;for(var v=0;v<R.length;v++){l.getContent()[v].setText(u1[v]);}T.setText(T.getText()===this.oBundle.getText("COMMON_Hide")?this.oBundle.getText("COMMON_Show"):this.oBundle.getText("COMMON_Hide"));this.rerender();},this,l,R,Q)});T.addStyleClass("linkShowHidePattern");y[D].maskable&&P.length>0&&l.addContent(T);if((this.itemCount>1||(m.grid||m.hasMultiple))&&w&&!e){if(!s){w.group=true;w.cascadeItem=r;}else{s=false;}}w.value=l;w=this.updateInvalidInfo(w,y[D].id);this.controls.push(w);this.controlCount++;E=true;}if(y[D].type==="HIDDEN"){E=true;}if(!E){A=false;for(var U=0;U<b.length;U++){if(b[U][D]){if(!O){O=[];}O.push({encryptedValue:b[U][D].data.encryptedValue?b[U][D].data.encryptedValue[v]:null,errorMessage:b[U][D].data.errorMessage?b[U][D].data.errorMessage[v]:null,value:b[U][D].data.value[v],oldValue:b[U][D].data.oldValue?b[U][D].data.oldValue[v]:""});}}w={name:D,type:"name-value",rows:1,visible:q};if(y[D].type==="name-value-date"){w.type="name-value-date";u=z[D].value[v].date;if(u&&u.length===10){u=sap.extent.uilib.util.FieldValueExtractor.getItemFromDate(u);}w.date=new sap.m.Text({text:u,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated});w.date.addStyleClass("sapExtentUilibFormPatternLabel");this.valueColumnSpan=2;}w.name=this.getLabelField(y[D]);w=this.updateInvalidInfo(w,y[D].id);p={};if(y[D].type==="TIMEOFFWORKSCHEDULE"&&z[D].value[v]&&!y[D].maskable){var W=z[D].value[v];var X=this.getProperty("blockData");w.icon=new sap.m.Link({text:this.oBundle.getText("ECT_HRIS_WORKSCHEDULE_DETAILS"),press:function(){sap.ui.require(["sap/employeecentral/timemanagement/workschedule/WorkScheduleDialog"],function(t1){var u1=new t1();var v1=sap.ui.getCore().getModel("user").getProperty("/userId");u1.openById(W.id,v1,X.effectiveDate,"");})}}).addStyleClass("workScheduleLink");}if(y[D].type==="ECTFieldWithCustomContext"&&z[D].value[v]){p={searchType:y[D].primaryFieldMeta.searchOptions.searchType,defaultScreenForQuickCard:y[D].defaultScreenForQuickCard,id:z[D].value[v].id};w.icon=new sap.m.Button({icon:"sap-icon://documents",type:sap.m.ButtonType.Transparent,tooltip:this.oBundle.getText("ECT_PP3_QUICKCARD_VIEW_BUTTON_TOOLTIP",y[D].label),press:jQuery.proxy(this.showDetails,this,y[D].actionFunction,p,z[D].value[v]?z[D].value[v].primaryDisplayText:"")});w.icon.addStyleClass("sapExtentUilibFormPatternQuickCard");if(pageHeaderJsonData.accessibilityPreferences.blindnessSupport){w.icon.setText(this.oBundle.getText("ECT_PP3_QUICK_CARD"));}}if(y[D].type==="multipleRelation"&&z[D].value[v]){var Y=w.name;for(var Z=0;Z<z[D].value[v].length;Z++){p={searchType:y[D].primaryFieldMeta.searchOptions.searchType,id:z[D].value[v][Z].value?z[D].value[v][Z].value.id:null};w={columns:1,rows:1};var u=sap.extent.uilib.util.FieldValueExtractor.getValueField(z[D].value[v][Z],y[D],O,z[D].oldValue?z[D].oldValue[v]:null,null,null,this.getShowHistory());w.name=(Z===0)?Y:"";w.value=u;w.type="name-value";w.icon=new sap.m.Button({icon:"sap-icon://documents",type:sap.m.ButtonType.Transparent,tooltip:this.oBundle.getText("ECT_PP3_QUICKCARD_VIEW_BUTTON_TOOLTIP",y[D].label),press:jQuery.proxy(this.showDetails,this,y[D].actionFunction,p,z[D].value[v][Z].value?z[D].value[v][Z].value.primaryDisplayText:"")});w.icon.addStyleClass("sapExtentUilibFormPatternQuickCard");if(pageHeaderJsonData.accessibilityPreferences.blindnessSupport){w.icon.setText(this.oBundle.getText("ECT_PP3_QUICK_CARD"));}this.controls.push(w);this.controlCount++;}if(z[D].value[v].length===0){w.value=sap.extent.uilib.util.FieldValueExtractor.getValueField({},y[D]);this.controls.push(w);this.controlsCount++;}continue;}if(y[D].varType==="Benefits"){if(z[D].value[v]===null){w.visible=false;}}if(y[D].type==="Benefits"||y[D].subType==="Benefits"){if(z[D].value[v]!==null){p={searchType:y[D].type,id:z[D].value[v].id};if(D==="enrollmentDate"&&(this.blockId==="BENEFIT_CURRENT_CLAIMS_PP3"||this.blockId==="CURRENT_CLAIMS_BLOCK_ID")){p.rowId=y[D].rowId[v];p.label=y[D].benefitNameAsLabel[v];}if(y[D].showEdit&&y[D].showEdit[k]===true){w.customContentAsIcon=[];var $=new sap.m.Button({icon:"sap-icon://documents",type:sap.m.ButtonType.Transparent,tooltip:this.oBundle.getText("ECT_PP3_QUICKCARD_VIEW_BUTTON_TOOLTIP",y[D].label),press:jQuery.proxy(this.showDetails,this,y[D].actionFunction,p,z[D].value[v].name)});$.addStyleClass("sapExtentUilibFormPatternQuickCard");var _=p.label?p.label:z[D].value[v].name;var a1=this.oBundle.getText("BENEFITS_BENEFIT_DETAILS_TEXT",_);$.addAriaLabelledBy(a1);if(pageHeaderJsonData.accessibilityPreferences.blindnessSupport){$.setText(a1);}w.customContentAsIcon.push($);if(y[D].customContentRight.length===1){w.customContentAsIcon.push(y[D].customContentRight[0]);}else{w.customContentAsIcon.push(y[D].customContentRight[v]);}}else{if(this.blockId!=="BENEFIT_OTHER_PP3"){if(this.blockId==="BENEFIT_OPENENROLMENTUI_PP3"){p.benefitOrEnrollment=z.enrollmentContextEnum.value[v];}w.icon=new sap.m.Button({icon:"sap-icon://documents",type:sap.m.ButtonType.Transparent,tooltip:this.oBundle.getText("ECT_PP3_QUICKCARD_VIEW_BUTTON_TOOLTIP",y[D].label),press:jQuery.proxy(this.showDetails,this,y[D].actionFunction,p,z[D].value[v].name)});}else{w.icon=new sap.m.Button({icon:"sap-icon://documents",type:sap.m.ButtonType.Transparent,tooltip:this.oBundle.getText("ECT_PP3_QUICKCARD_VIEW_BUTTON_TOOLTIP",y[D].label),press:jQuery.proxy(this.showDetails,this,y[D].actionFunction,p,z[D].initialValue[v])});}w.icon.addStyleClass("sapExtentUilibFormPatternQuickCard");var a1=this.oBundle.getText("BENEFITS_BENEFIT_DETAILS_TEXT",z[D].initialValue[v]);w.icon.addAriaLabelledBy(a1);if(pageHeaderJsonData.accessibilityPreferences.blindnessSupport){w.icon.setText(a1);}}}else{w.visible=false;}}if(y[D].id==="jobCode"&&y[D].module=="empprofile"&&isJDM_NG_ON){w.icon=new sap.m.Link({text:""}).addStyleClass("sapExtentUilibFormPatternJobProfileLink");this.userInfoJobCodeField=w;}if(y[D].type==="LOCALIZED"&&z[D].value[v]){p={data:{metadata:y[D].contextMeta,data:z[D].contextData[v]}};w.icon=new sap.m.Button({icon:"sap-icon://world",type:sap.m.ButtonType.Transparent,tooltip:this.oBundle.getText("ECT_PP3_QUICKCARD_TRANSLATION_BUTTON_TOOLTIP_READ",y[D].label),press:jQuery.proxy(this.showDetails,this,"LOCALIZED",p,this.oBundle.getText("ECT_PP3_LOCALIZED"))});w.icon.addStyleClass("sapExtentUilibFormPatternQuickCard");if(pageHeaderJsonData.accessibilityPreferences.blindnessSupport){w.icon.setText(this.oBundle.getText("ECT_PP3_LOCALIZED"));}}if(y[D].type==="ECTSIMPLELINKFIELD"&&z[D].value[v]){var b1=z[D].value[v].actionData;var c1=b1&&b1.urlInfo&&b1.urlInfo.tokens||null;if(b1&&b1.urlInfo&&b1.urlInfo.url){this.fireResolveUrlTokens({linkFieldId:D,url:b1.urlInfo.url,tokens:c1,valueIndex:v});}}if(y[D].isTrend){this.setForceDisplayValueAsLabel(y[D],d.technicalInfo&&d.technicalInfo[v]);}w.value=sap.extent.uilib.util.FieldValueExtractor.getValueField(z[D].value[v],y[D],O,z[D].oldValue?z[D].oldValue[v]:null,z[D].encryptedValue&&z[D].encryptedValue[v],z[D].errorMessage&&z[D].errorMessage[v],this.getShowHistory(),this.blockId,(d.technicalInfo?d.technicalInfo[v]:null));if(y[D].type==="FIELDSGROUP"){w.value="";w.cols=2;w.name.removeStyleClass("sapExtentUilibFormPatternLabel");w.type="valueAsLabel";}if(y[D].type==="LEARNINGLINK"&&z[D].value[v]){var b1=z[D].value[v];w.value=new sap.m.Button({icon:"sap-icon://education",type:sap.m.ButtonType.Transparent,press:jQuery.proxy(this.showLearningDetails,this,b1.data)});w.value.addStyleClass("sapExtentUilibFormPatternQuickCard");}if(l&&l.largeNumber){for(var i=0;i<l.largeNumber.length;i++){if(l.largeNumber[i].value===D){if(z[D].value[v].urgency===this.HIGH||z[D].value[v].urgency===this.MEDIUM){w.value.addStyleClass("sapExtentUilibFormPatternLargeNumberMedium");}else{w.value.addStyleClass("sapExtentUilibFormPatternLargeNumber");}}}}if(l&&l.valueAsLabel){for(var i=0;i<l.valueAsLabel.length;i++){if(l.valueAsLabel[i].value===D){if(z[l.valueAsLabel[i].name]&&z[l.valueAsLabel[i].name].value[v]){var d1={label:z[l.valueAsLabel[i].name].value[v]};if(y[l.valueAsLabel[i].name].selectOptions&&d1.label){d1.label=this.getItemFromPicklist(d1.label,y[l.valueAsLabel[i].name]);}if(l.valueAsLabel[i].linkName&&z[l.valueAsLabel[i].linkName]&&z[l.valueAsLabel[i].linkName].value){w.name=sap.extent.uilib.util.FieldValueExtractor.getValueField({text:z[l.valueAsLabel[i].name].value[v],href:z[l.valueAsLabel[i].linkName].value[v]},{type:"LINK"},null,false,false);}else{w.name=this.getLabelField(d1);}}}else if(l.valueAsLabel[i].name===D){w.name=w.value;if(l.valueAsLabel[i].value){w=null;}else{w.value="";w.cols=2;w.type="valueAsLabel";}}}}if(l&&l.iconValueAsName){for(var i=0;i<l.iconValueAsName.length;i++){if(l.iconValueAsName[i].name===D){w.name=w.value;if(y[D].customContentAsIcon){w.customContentAsIcon=[];w.customContentAsIcon.isLeft=y[D].customContentAsIcon.isLeft;w.customContentAsIcon.push(y[D].customContentAsIcon[v]);}if(l.iconValueAsName[i].value){w=null;}else{w.cols=2;w.type="iconValueAsName";w.value.removeStyleClass("sapExtentUilibFormPatternLabel");}}}}if((this.itemCount>1||m.grid||m.hasMultiple)&&w&&!e){if(!s){w.group=true;w.cascadeItem=r;}else{s=false;}}if(w){this.controls.push(w);this.controlCount++;}if(z[D].subFields){e=true;var e1="";for(e1 in z[D].subFields){if(z[D].subFields.hasOwnProperty(e1)){if(z[D].subFields[e1]){if(y[D].linkTypes==="BenefitLinks"){var f1={name:new sap.m.Text({text:y[D].subFields[e1].label,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated}),type:"valueAsLabel",rows:1,visible:true};f1.name.addStyleClass("sapExtentUilibFormPatternLabelIndent");f1.name=z[D].subFields[e1];f1.value="";}else{var f1={name:new sap.m.Text({text:y[D].subFields[e1].label,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated}),type:"subvalue",rows:1,visible:true};f1.name.addStyleClass("sapExtentUilibFormPatternLabelIndent");f1.value=sap.extent.uilib.util.FieldValueExtractor.getValueField(z[D].subFields[e1],y[D].subFields[e1],null,z[D].subFieldsOldValue?z[D].subFieldsOldValue[e1]:null,null,null,this.getShowHistory());f1.value.addStyleClass("sapExtentUilibFormPatternValueIndent");}f1.group=true;this.controls.push(f1);this.controlCount++;}}}}}if(this.maxFieldsToShow&&this.maxFieldsToShow===C+1){q=false;j={name:"__MDFdetailsLink",type:"control",rows:1,group:true,visible:true};j.control=new sap.extent.uilib.LinkWithIcon({text:this.oBundle.getText("COMMON_Details"),icon:"sap-icon://expand-group",press:jQuery.proxy(this.expandDetails,this,v,this.controlCount,j)});j.maxFieldsExpanded=false;this._detailsLink.push(j)}if(z[D].cascadeChildren&&z[D].cascadeChildren.length>0){var g1=z[D].value[n],h1="",i1;if(g1&&g1.hasOwnProperty("id")){g1=g1.id;}var j1=y[D].cascadeChildren||[];if(j1[n]&&!jQuery.isEmptyObject(j1[n].fields)){for(i1 in j1[n].fields){if(j1[n].fields.hasOwnProperty(i1)){h1=i1;break;}}}for(var k1=0;k1<j1.length;k1++){if(j1[k1]&&j1[k1].fields&&j1[k1].fields[h1]&&(j1[k1].fields[h1].cascadeParentValue==g1)){x=x.concat(j1[k1].fieldsOrder);var l1="";if(z[D].cascadeChildren.length>1){var m1=z[D];z={};z[D]=m1;var n1=j1[k1];for(l1 in n1.fields){if(n1.fields.hasOwnProperty(l1)){y[l1]=n1.fields[l1];z[l1]=m1.cascadeChildren[k1].fields[l1];if(z[l1]){z[l1].value[k1]=m1.cascadeChildren[k1].fields[l1].value[0];z[l1].oldValue[k1]=m1.cascadeChildren[k1].fields[l1].oldValue[0];}}}}else{for(l1 in j1[k1].fields){if(j1[k1].fields.hasOwnProperty(l1)){y[l1]=j1[k1].fields[l1];z[l1]=z[D].cascadeChildren[0].fields[l1];}}}r=true;break;}}}if(z[D].additionalMetaAndData){var o1=z[D].additionalMetaAndData[n];var p1=(o1&&o1.fieldGroups)||[];var q1=null;for(var r1=0,s1=p1.length;r1<s1;r1++){if(p1[r1].processed){continue;}q1=this.createChildFormPattern(p1[r1]);w={name:D,control:q1,type:"control",rows:p1[r1].metadata.rows&&this.isLargeBlock()?p1[r1].metadata.rows:1,columns:2,visible:true,group:q1.displayCount?true:false};if(!p1[r1].metadata.id){q1.setHasPadding(false);this.controls.push(w);this.controlCount++;}else{this._aConditionalGroups.push(w);}}}}}this.addConditionalGroupsToControlsList();if(j!=null){this.controls.push(j);this.controlCount++;j=null;}if(m.showDetailsLink){w={name:"detailsLink",type:"control",rows:1};w.control=new sap.extent.uilib.LinkWithIcon({text:this.oBundle.getText("COMMON_Details"),icon:"sap-icon://popup-window",press:jQuery.proxy(this.showDetails,this,v,null,this.getBlockData().metadata.label)});this.controls.push(w);w.group=true;this.controlCount++;}if(this.getTotalCompHistoryData()){this.setTotalCompHistory();}}if(l&&l.nMoreCount&&this.getCollapsedItemCount()>0){if(this.controlCount>this.getCollapsedItemCount()){this.setCollapsedItemCount(l.nMoreCount);}}if(m.grid&&!e&&(l&&!l.ignoreGroup)){this.groupSize=Math.floor(this.maxFieldsToShow?this.maxFieldsToShow+(this.repeatTitle?2:1):this.itemCount?this.controlCount/this.itemCount:0);}if(l&&l.nMoreCount){this.groupSize=undefined;for(var i=0;i<this.controls.length;i++){this.controls[i].group=false;}}if(A){for(var i=0;i<this.controls.length;i++){this.controls[i].rows=1;this.controls[i].columns=1;}}if(this.title){this.titleAndButtons=new sap.extent.uilib.TitleAndButtons({title:new sap.m.Title({text:this.title,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated}).addStyleClass("sapExtentUilibFormPatternBlockTitle"),blockDescription:this.getBlockDescription(),actionButtons:null});if(m.hasOwnProperty("fontConfig")){this._commonUtils.addClassesFromConfigForTitle(m.fontConfig,this.titleAndButtons);}}this.hasContent=true;this.updateShowMore();};sap.extent.uilib.FormPattern.prototype.setForceDisplayValueAsLabel=function(m,t){if((m.id=="rating"||m.id=="label")&&(((!!!t.editable||!!!t.matchingToScale)&&t.actionType!="Add")||!!t.forceDisplayValueAsLabel)){m.forceDisplayValueAsLabel=true;}else{m.forceDisplayValueAsLabel=false;}};sap.extent.uilib.FormPattern.prototype.addConditionalGroupsToControlsList=function(){for(var i=0,l=this._aConditionalGroups.length;i<l;i++){this.controls.push(this._aConditionalGroups[i]);this.controlCount++;}this._aConditionalGroups=[];};sap.extent.uilib.FormPattern.prototype.expandDetails=function(i,h,a){a.maxFieldsExpanded=!a.maxFieldsExpanded;var b=h,l=this.controls.length;while(b<l){if(this.controls[b]===a){a.control.setIcon(a.maxFieldsExpanded?"sap-icon://collapse-group":"sap-icon://expand-group");break;}this.controls[b].visible=a.maxFieldsExpanded;b++;}if(this.groupSize){this.groupSize=Math.floor(a.maxFieldsExpanded?this.controlCount/this.itemCount:this.maxFieldsToShow+(this.repeatTitle?2:1));}this.calcLayout();};sap.extent.uilib.FormPattern.prototype.showLearningDetails=function(d){window.smrfLazyLoader.loadLearningDetails(function(){var a=AjaxService2.getMBeanInstance('competencyPortletController');var l=new ActivityIntegrationSFLMS(a,d.proxyUserFullName);l.findInCatalog({'selectedUserId':sap.ui.getCore().getModel("user").getProperty("/userId"),'extURLType':14,'compids':d.compId,'currentRating':d.obj_comp_custom_rating.ratingStr,'expectedRating':d.expectedRating},true);});};sap.extent.uilib.FormPattern.prototype.showDetails=function(a,o,t,c){var b=c&&c.getSource?c.getSource():null;sap.ui.require(["sap/ui/util/Storage"],function(S){this.ORIGINAL_EVENT="original_event";this.SAVED_DATA="pp3_ref";this.oMyStorage=new S(S.Type.session,this.ORIGINAL_EVENT);var p=this.oMyStorage.get(this.SAVED_DATA);if(p){var j=JSON.parse(p);j.push(b.sId);this.oMyStorage.put(this.SAVED_DATA,JSON.stringify(j));}else{var k=[];k.push(b.sId);this.oMyStorage.put(this.SAVED_DATA,JSON.stringify(k));}}.bind(this));if(sap.extent.uilib.FormPattern.detailsDialogGlobal&&sap.extent.uilib.FormPattern.detailsDialogGlobal.isOpen()){var d=sap.extent.uilib.FormPattern.detailsDialogGlobal.getContent();for(var i=0;i<d.length;i++){d[i].setVisible(false);}var h=sap.extent.uilib.FormPattern.detailsDialogGlobal.getCustomHeader();if(h.getContentLeft().length===0){var e=new sap.m.Button({icon:"sap-icon://arrow-left",tooltip:this.oBundle.getText("COMMON_Back"),press:jQuery.proxy(this.navDialogBack,this)});h.addContentLeft(e);sap.extent.uilib.FormPattern.detailsDialogGlobal.setInitialFocus(e);}if(h.getContentMiddle().length===1){if(!sap.extent.uilib.FormPattern.detailsDialogGlobal.title){sap.extent.uilib.FormPattern.detailsDialogGlobal.title=[];}sap.extent.uilib.FormPattern.detailsDialogGlobal.title.push(h.getContentMiddle()[0].getText());h.getContentMiddle()[0].setText(t);h.getContentMiddle()[0].setTooltip(t);}}else{this.sectionIndex=a;this.closeDialogBtn=new sap.m.Button({icon:"sap-icon://decline",tooltip:this.oBundle.getText("COMMON_Cancel"),press:jQuery.proxy(this.closeDetails,this)}).addStyleClass("popupCloseButton");var f=new sap.m.Bar({contentMiddle:new sap.m.Title({text:this.oBundle.getText("ECT_HRIS_ASSIGNMENT_DETAILS",[t])}).addStyleClass("sapMDialogTitle"),contentRight:this.closeDialogBtn});sap.extent.uilib.FormPattern.detailsDialogGlobal=new sap.m.Dialog({customHeader:f,initialFocus:this.closeDialogBtn});sap.extent.uilib.FormPattern.detailsDialogGlobal.attachAfterOpen(jQuery.proxy(function(){this._commonUtils.setAriaHiddenOnMainContent(true);},this));sap.extent.uilib.FormPattern.detailsDialogGlobal.attachAfterClose(jQuery.proxy(function(){this._commonUtils.setAriaHiddenOnMainContent(false);if(b&&b.focus){b.focus();}this.oMyStorage&&this.oMyStorage.clear();},this));}if(window.innerWidth>480){sap.extent.uilib.FormPattern.detailsDialogGlobal.setContentWidth("480px");}if(typeof a==="function"){a.call(this,o,sap.extent.uilib.FormPattern.detailsDialogGlobal);}else if(a==="LOCALIZED"){var g=new sap.extent.uilib.FormPattern({showTechnicalValues:true,userId:null,expanded:true,largeBlock:false,showNMore:false,collapsedItemCount:0,showTitle:true,firstGroup:i===0,blockData:o.data,customContentTop:null,customContentBottom:null,detailsCallback:null});sap.extent.uilib.FormPattern.detailsDialogGlobal.addContent(g.addStyleClass("detailsDialog"));if(!sap.extent.uilib.FormPattern.detailsDialogGlobal.isOpen()){sap.extent.uilib.FormPattern.detailsDialogGlobal.open();}}else{if(this.getDetailsCallback()&&typeof this.getDetailsCallback()==="function"){this.getDetailsCallback().call(this,this.blockId,this.getBlockData().data.technicalInfo[a].id,sap.extent.uilib.FormPattern.detailsDialogGlobal);}}};sap.extent.uilib.FormPattern.prototype.navDialogBack=function(){var c=sap.extent.uilib.FormPattern.detailsDialogGlobal.getContent();var l=c.pop();var h=sap.extent.uilib.FormPattern.detailsDialogGlobal.getCustomHeader();if(h.getContentMiddle().length===1){var t=sap.extent.uilib.FormPattern.detailsDialogGlobal.title.pop();h.getContentMiddle()[0].setText(t);h.getContentMiddle()[0].setTooltip(t);}sap.extent.uilib.FormPattern.detailsDialogGlobal.removeContent(l);c[c.length-1].setVisible(true);if(c.length===1){h=sap.extent.uilib.FormPattern.detailsDialogGlobal.getCustomHeader();h.removeAllContentLeft();}this.oInvisibleMessage=new sap.ui.core.InvisibleMessage();this._commonUtils.announceInvisibleMessage(t+" Modal dialog",sap.ui.core.InvisibleMessageMode.Assertive,1000,this);sap.ui.require(["sap/ui/util/Storage"],function(S){this.oMyStorage=new S(S.Type.session,this.ORIGINAL_EVENT);var p=JSON.parse(this.oMyStorage.get(this.SAVED_DATA));setTimeout(jQuery.proxy(function(){if(p){document.getElementById(p[p.length-1]).focus();p.pop();this.oMyStorage.put(this.SAVED_DATA,JSON.stringify(p));}},this),500);}.bind(this));};sap.extent.uilib.FormPattern.prototype.closeDetails=function(){var s=0;sap.extent.uilib.FormPattern.detailsDialogGlobal.close();sap.extent.uilib.FormPattern.detailsDialogGlobal=null;sap.extent.uilib.FormPattern.detailsDialogList=[];for(var i=0;i<this.controls.length;i++){if(this.controls[i].type==='control'){if(this.sectionIndex===s){this.controls[i].control.focus();break;}else{s++;}}};this.oMyStorage&&this.oMyStorage.clear();};sap.extent.uilib.FormPattern.prototype.updateShowMore=function(){var m=0;var c=this.getCollapsedItemCount();var a=[];var t=0;var s=0;var i,r=1,l=this.controls.length;for(i=0;i<l;i++){a.push(i);for(;r<this.controls[i].rows;r++){a.push(-1);}if(this.controls[i]&&this.controls[i].type==="subvalue"){s+=1;}t+=this.controls[i].rows;}var S=this.isLargeBlock()&&!this.isOneColumnLayoutForLargeBlock;if(this.getTotalCompHistoryData()){S=(S&&!this.getTotalCompHistoryData());}var b=this.groupSize?Math.floor((c*this.groupSize)/2):c;this.splitPos=S?Math.min(Math.floor(t/2)+t%2,b):t;while(this.splitPos<a.length&&(a[this.splitPos]<0||(this.controls[a[this.splitPos]].group&&this.controls[a[this.splitPos]].visible))){this.splitPos++;}this.displayCount=this.isLargeBlock()&&!this.bSmallSize&&!this.isOneColumnLayoutForLargeBlock?this.splitPos:this.controlCount;if(c>0&&c<=this.displayCount){m=(this.groupSize)?this.itemCount-c:this.displayCount-c;this.displayCount=c;}if(!this.groupSize&&!this.getShowNMore()){this.hasMoreContent=this.isLargeBlock()?t>c*2:t>0&&t>c;}this._childForm.forEach(function(e){if(!e.getExpanded()){m++}});if(m>0){this.hasMoreContent=true;if((s>0)&&(m>s)){m=m-s;}this.moreItem=new sap.m.Link({text:this.oBundle.getText("SUCCESSION_PP3_NMORE",m),press:jQuery.proxy(this.onClickNMore,this)});this.moreItem.addStyleClass("sapExtentUilibFormPatternLinkText");}this.calcLayout();};sap.extent.uilib.FormPattern.prototype.onClickNMore=function(){var p=this.getParent();while(p&&!(p instanceof sap.uxap.ObjectPageSubSection)){p=p.getParent();}if(p){p.setMode("Expanded");}};sap.extent.uilib.FormPattern.prototype.isLargeBlock=function(){return this.getLargeBlock()&&window.innerWidth>=600;};sap.extent.uilib.FormPattern.prototype.updateInvalidInfo=function(o,f){if(this.getInValidData()){if(this.getInValidData().invalidFieldIdList.indexOf(f)>-1){o.isFieldInvalid=true;}else{o.isFieldInvalid=false;}}return o;};sap.extent.uilib.FormPattern.prototype.getRowsToDisplay=function(c){if(this.getExpanded()||!c){return this.splitPos;}else if(this.groupSize==1&&!this.isOneColumnLayoutForLargeBlock&&this.isLargeBlock()){return 1;}else{return Math.min(this.splitPos,c);}};sap.extent.uilib.FormPattern.prototype.calcLayout=function(){if(!this.hasContent){return;}var v=false;var c=-1;this.columns=[];var a=this.isLargeBlock()&&!this.bSmallSize&&!this.isOneColumnLayoutForLargeBlock?2:1;var t=0;var r=0;var i,b=this.controls.length;for(i=0;i<b;i++){if(a===1){this.controls[i].rows=1;}t+=this.controls[i].rows;}var d=this.getCollapsedItemCount();if(this.groupSize){d*=this.groupSize;}var e=this.getRowsToDisplay(d);if(!this.getLargeBlock()){var f=0;var h=false;for(i=0;i<b;i++){if(this.controls[i].type!=="subvalue"){f++;}else{h=true;}if(h&&f===e){var s=i+1;e=b;for(i=s;i<b;i++){if(this.controls[i].type!=="subvalue"){e=i;i=b;break;}}}}}this.columns[0]=[];if(a===2){this.columns[1]=[];}if(a>1){v=true;var g=this.splitPos;for(i=0;i<b&&r<=g;i++){r+=this.controls[i].rows;c=i;}if(c<1){if(c===0){c=1;}else{v=false;}}}if(!this.maxFieldsToShow){while(e<b&&this.controls[e]&&this.controls[e].group&&!this.controls[e].cascadeItem&&(!this.controls[e].hasOwnProperty("visible")||this.controls[e].visible)){e++;}}if(v){var l=[];var j=[];r=0;var n=0;for(i=0;i<b&&(r<e||(this.controls[i].group&&!this.controls[i].cascadeItem));i++){if(this.isControlVisible(this.controls[i])){l.push(i);r+=this.controls[i].rows;n=i+1;}}i=(r>i||this.maxFieldsToShow)?i:this.splitPos;r=0;for(;i<b;i++){if(this.hasMoreContent&&r>=e&&(!this.controls[i].group||this.controls[i].cascadeItem)){break;}if(this.isControlVisible(this.controls[i])){j.push(i);r+=this.controls[i].rows;n=i+1;}}if(this.getExpanded()){n=0;var l=[];var j=[];var k=n;if(k<b&&!this.controls[k].cascadeItem){k+=Math.ceil(t/2);while(k<b&&this.controls[k]&&this.controls[k].group){k++;}if(this.groupSize&&!this.maxFieldsToShow){while(k%this.groupSize){k++;}}}for(i=n;i<k&&i<b;i++){if(this.isControlVisible(this.controls[i])){l.push(i);r+=this.controls[i].rows;n=i+1;}}r=0;for(i=n;i<b&&r<b;i++){if(this.isControlVisible(this.controls[i])){j.push(i);r+=this.controls[i].rows;n=i+1;}}}if(window.innerWidth>sap.extent.uilib.FormPattern.maxPhoneWidth){for(i=0;i<l.length||i<j.length;i++){if(i<l.length&&l[i]>=0){this.controls[l[i]].rightCol=false;this.columns[0].push(this.controls[l[i]]);}if(i<j.length&&j[i]>=0){this.controls[j[i]].rightCol=true;this.columns[1].push(this.controls[j[i]]);}}}}else{var m=1;var o=1;var p;i=0;while(this.columns[0].length<e&&i<b){p=(a>1)?i*2:i;if((p<b)&&this.controls[p]&&this.isControlVisible(this.controls[p])){if(m===1){this.controls[p].rightCol=false;this.columns[0].push(this.controls[p]);m=this.controls[p].rows;}else{m--;}if(a>1&&p+1<b){if(o===1){this.controls[p+1].rightCol=true;this.columns[0].push(this.controls[p+1]);o=this.controls[p+1].rows;}else{o--;}}}i++;}}if(this.getTotalCompHistoryData()&&this.chartsItem){var q=sap.ui.getCore().getModel("objectPageMetaDataForPrint");var P=q&&q.getData()?q.getData().printPreview:false;if(this.columns[1]&&!P){this.columns[1].push(this.chartsItem);}else{this.columns[0].push(this.chartsItem);}}this.rerender();setTimeout(jQuery.proxy(this._saveHeights,this),100);};sap.extent.uilib.FormPattern.prototype.isControlVisible=function(c){return!c.hasOwnProperty("visible")||c.visible;};sap.extent.uilib.FormPattern.prototype._saveHeights=function(){if(this.getProperty("expanded")){this.expandedHeight=this.$().innerHeight();}else{this.collapsedHeight=this.$().innerHeight();}};sap.extent.uilib.FormPattern.prototype.getLabelField=function(m){var l=null;if(m.label&&m.label.primaryDisplayText){l=m.label.primaryDisplayText;}else if(m.textLabelValue){l=m.textLabelValue;}else{l=m.label;if(typeof l==="object"){l=l.hasOwnProperty("value")?l.value:"";}}var a=new sap.m.Text({text:l,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated});if(m.valueType==="LABEL-FLAG"){a.addStyleClass("sapExtentUilibFormPatternValueLabel");}else{a.addStyleClass("sapExtentUilibFormPatternLabel");}if(m.labelStyle){a.addStyleClass(m.labelStyle);}if(m.fontConfig){this._commonUtils.addClassesFromConfigForLabel(m.fontConfig.label,a);}if(m.type==="PAYGROUP"){var t=this.oBundle.getText("COMMON_Help");var i=new sap.ui.core.Icon({src:"sap-icon://sys-help",decorative:false,alt:l+" "+t,press:jQuery.proxy(sap.extent.uilib.util.PayGroupPopup.show,this,m)});i.addStyleClass("sapExtentUilibFormPatternLink");i.setTooltip(t);return new sap.extent.uilib.TextWithIcon({text:m.label,icon:i}).addStyleClass("sapExtentUilibFormPatternLabel");}return a;};sap.extent.uilib.FormPattern.prototype.getEmployeeCardFullName=function(v){if(v&&v.primaryDisplayText){var d=v.primaryDisplayText.substring(0,v.primaryDisplayText.indexOf("("));return(d?d.trim():"");}return v;};sap.extent.uilib.FormPattern.prototype.getItemFromPicklist=function(d,m){if(d.primaryDisplayText){return d.primaryDisplayText;}var s=d.value||d;var a=m.selectOptions||[];if(s!==null&&s!==undefined&&s!==""){for(var i=0,l=a.length;i<l;i++){if(a[i]&&a[i].value==s){s=a[i].label;}}}if(typeof s!=="string"){s="-";}return s;};sap.extent.uilib.FormPattern.prototype.onAfterRendering=function(){if(this.userInfoJobCodeField){var f=jQuery.proxy(sap.extent.uilib.util.JobCodeUtil.getAssociatedJobProfiles,this,this.userInfoJobCodeField);f(this.userInfoJobCodeField);}if(jQuery(this.getDomRef()).find("header, div[role='heading']")&&(jQuery(this.getDomRef()).find("header, div[role='heading']").length>0)){sap.extent.uilib.util.CommonUtils.removeHeadings(this.getDomRef());}var s=jQuery(this.getDomRef()).find(".linkShowHidePattern");if(s&&s.length>0){for(var i=0;i<s.length;i++){var c=jQuery(this.getDomRef()).find(".linkShowHidePattern")[i].closest('tr');var b=jQuery(this.getDomRef()).find(".linkShowHidePattern")[i].id;if(c&&c.children&&c.children[0]){s[i].setAttribute('aria-labelledby',c.children[0].firstChild.id+' '+b);}}}};sap.extent.uilib.FormPattern.prototype.createChildFormPattern=function(f){var a=new sap.extent.uilib.FormPattern({showTechnicalValues:true,userId:null,expanded:this.getExpanded(),largeBlock:false,showNMore:false,collapsedItemCount:0,showTitle:true,firstGroup:false,customContentTop:null,customContentBottom:null,detailsCallback:null});this._childForm.push(a);if(this.getInValidData()){a.setInvalidData(this.getInValidData());}a.setBlockData(f);a.removeStyleClass("sapExtentUilibFormPatternSubsequentBlock");a.addStyleClass("sapExtentUilibFormPatternChildBlock");if(f.metadata.visible===false||(a.getVisibleFieldCount()==0&&!a.title)){a.setVisible(false);}return a;};},"sap/extent/uilib/FormPatternHelper.js":function(){jQuery.sap.declare("sap.extent.uilib.FormPatternHelper");sap.extent.uilib.FormPatternHelper={};sap.extent.uilib.FormPatternHelper.getSectionFields=function(a,b){if(a){for(var i=0;i<a.fieldGroups.length;i++){var c={};for(var j=0;j<a.fieldGroups[i].metadata.fieldsOrder.length;j++){var f=a.fieldGroups[i].metadata.fieldsOrder[j];var p=f.lastIndexOf("-alt");var h=false;if(a.fieldGroups[i].data.fields[f]&&a.fieldGroups[i].data.fields[f].value){for(var k=0;k<a.fieldGroups[i].data.fields[f].value.length;k++){var d=a.fieldGroups[i].data.fields[f].value[k];if(d&&((typeof d==="string"&&d.length>0)||d.name)){h=true;break;}}}if(p>0&&h){var r=f.substring(0,p);c[r]={metadata:f,data:a.fieldGroups[i].data.fields[f]};}}b[i]=c;}}};sap.extent.uilib.FormPatternHelper.getEduPosOrder=function(o,t){var i=null;for(var c=0;c<t.length;c++){if(t[c].hasOwnProperty("orderPos")){if(!i){i=[];}i.push(t[c].orderPos);}}if(i){i.sort(function(a,b){return a-b;});}return i;};},"sap/extent/uilib/HistoryItem.js":function(){jQuery.sap.declare("sap.extent.uilib.HistoryItem");jQuery.sap.require("sap.extent.uilib.library");sap.ui.core.Control.extend("sap.extent.uilib.HistoryItem",{metadata:{library:"sap.extent.uilib",properties:{selected:{type:"boolean",group:"Misc",defaultValue:false},date:{type:"string",group:"Misc",defaultValue:null},eventReason:{type:"string",group:"Misc",defaultValue:null},numberChanges:{type:"int",group:"Misc",defaultValue:null},isInvalid:{type:"boolean",group:"Misc",defaultValue:false},hasFutureChanges:{type:"boolean",group:"Misc",defaultValue:false},instanceId:{type:"string",group:"Misc",defaultValue:null},spdMessage:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"rows",aggregations:{rows:{type:"sap.extent.uilib.HistoryItemRow",multiple:true}}}});sap.extent.uilib.HistoryItem.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.HistoryItem.prototype.onFutureChangesPressed=function(e,c){var b=sap.ui.getCore().getEventBus();b.publish("historyItemFutureChanges","showFutureChanges",{instance:c.getInstanceId()});};},"sap/extent/uilib/HistoryItemRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.HistoryItemRenderer");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Title");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.extent.uilib.ConfigurableLabelRenderer");jQuery.sap.require("sap.extent.uilib.HistoryItemRowRenderer");sap.extent.uilib.HistoryItemRenderer={};sap.extent.uilib.HistoryItemRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibHistoryItem");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapExtentUilibHistoryItemDate");if(c.getSelected()){r.addClass("sapExtentUilibHistoryItemDateSelected");}r.writeClasses();r.write(">");var d=new sap.m.Title({text:c.getDate()});r.renderControl(d);if(c.getHasFutureChanges()){var f=new sap.m.Button({lite:true,icon:'sap-icon://future',press:[c,c.onFutureChangesPressed]});r.renderControl(f);}r.write("</div>");if(c.getIsInvalid()){var a=new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"});a.addStyleClass("sapExtentUilibHistoryItemAlert");r.renderControl(a);}var n=c.getNumberChanges();var b=c.getEventReason();var s=c.getSpdMessage();if(s){var S=new sap.m.Text({text:s,tooltip:s,wrapping:true});S.addStyleClass("sapMMsgStripInformation");S.addStyleClass("sapMColorLabel");r.renderControl(S);}if(n||b){r.write("<div");r.addClass("sapExtentUilibHistoryUpdatedValues");if(c.getSelected()){r.addClass("sapExtentUilibHistoryUpdatedValuesSelected");}r.writeClasses();r.write(">");if(b&&b.length>0){var e=new sap.m.Label({text:b,tooltip:c.oBundle.getText("ECT_PP3_REASON_FOR_CHANGE",b)});e.addStyleClass("valuePattern");e.addStyleClass("sapExtentUilibHistoryReason");r.renderControl(e);}var g=c.getAggregation("rows");if(g){for(var i=0;i<g.length;i++){r.renderControl(g[i]);}}r.write("</div>");}r.write("</div>");};},"sap/extent/uilib/HistoryItemRow.js":function(){jQuery.sap.declare("sap.extent.uilib.HistoryItemRow");jQuery.sap.require("sap.extent.uilib.library");sap.ui.core.Control.extend("sap.extent.uilib.HistoryItemRow",{metadata:{library:"sap.extent.uilib",properties:{label:{type:"string",group:"Misc",defaultValue:null},childItem:{type:"boolean",group:"Misc",defaultValue:false},newValue:{type:"string",group:"Misc",defaultValue:null},oldValue:{type:"string",group:"Misc",defaultValue:null}}}});sap.extent.uilib.HistoryItemRow.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};},"sap/extent/uilib/HistoryItemRowRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.HistoryItemRowRenderer");jQuery.sap.require("sap.extent.uilib.ConfigurableLabelRenderer");sap.extent.uilib.HistoryItemRowRenderer={};sap.extent.uilib.HistoryItemRowRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.write(">");r.write("<div");if(c.getProperty("childItem")){r.addClass('sapHistoryChildItem');r.writeClasses();}r.write(">");var l=c.getProperty("label");var n=c.getProperty("newValue");var o=c.getProperty("oldValue");if(l){var a=new sap.m.Text({tooltip:c.oBundle.getText("ECT_PP3_NAME_CHANGE_FIELD_TOOLTIP")+": "+l,width:"100%"});a.setText(l);a.addStyleClass("labelPattern");a.addStyleClass("sapExtentUilibHistoryField");r.renderControl(a);}if(n){var b=new sap.m.Text({width:"100%"});b.setTooltip(c.oBundle.getText("ECT_PP3_NEW_VALUE_OF_CHANGED_FIELD")+": "+n);b.setText(n);b.addStyleClass("updatedTextPattern");r.renderControl(b);}if(o){var C=c.oBundle.getText("ECT_PP3_OLD_VALUE_OF_CHANGED_FIELD")+": "+o;r.write("<span");r.writeAttributeEscaped("id",c.getId()+"-oldValue");r.writeAttributeEscaped("tabindex","-1");r.writeAttributeEscaped("title",C);C+=' '+o;r.writeAccessibilityState({role:"note",label:C});r.addClass("strikethroughTextPattern sapMText");r.writeClasses();r.write(">");r.writeEscaped(o);r.write("</span>");}r.write("</div>");r.write("</div>");};},"sap/extent/uilib/JobAssignmentDetails.js":function(){jQuery.sap.declare("sap.extent.uilib.JobAssignmentDetails");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.ui.core.Icon");sap.m.Label.extend("sap.extent.uilib.JobAssignmentDetails",{renderer:"sap.extent.uilib.JobAssignmentDetailsRenderer",metadata:{properties:{tag:{type:"string",group:"Misc",defaultValue:null},tagVisible:{type:"boolean",group:"Misc",defaultValue:false},tagClass:{type:"string",group:"Misc"},tagIcon:{type:"string",group:"Misc"},tagIconSize:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"12.5pt"},tagIconClass:{type:"string",group:"Misc"},tagTextWithStyleClass:{type:"string",group:"Misc"},label:{type:"string",group:"Misc"},icon:{type:"string",group:"Misc",defaultValue:null},iconVisible:{type:"boolean",group:"Misc",defaultValue:false},iconSize:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"1em"},iconClass:{type:"string",group:"Misc"},iconTooltip:{type:"string",group:"Misc"},additionalTexts:{type:"string[]",group:"Misc"}}}});sap.extent.uilib.JobAssignmentDetails.prototype.onBeforeRendering=function(){var t=this.getTag();var a=this.getTagVisible();var b=this.getTagClass();var c=this.getTagIcon();var d=this.getTagIconSize();var e=this.getTagIconClass();var f=this.getTagTextWithStyleClass();var l=this.getLabel();var i=this.getIcon();var g=this.getIconVisible();var h=this.getIconSize();var j=this.getIconClass();var k=this.getIconTooltip();if(a&&(t||f)){this._oTag=new sap.m.Label({text:t});if(b){this._oTag.addStyleClass(b);}if(c){this._oTagIcon=new sap.ui.core.Icon({src:c,size:d});if(e){this._oTagIcon.addStyleClass(e);}}if(f){this._sTagTextWithStyleClass=f;}}if(l){this._oLabel=new sap.m.Label({text:l,tooltip:l});this._oLabel.addStyleClass("sfJobAssignmentDetailsLabel");}if(g&&i){this._oIcon=new sap.ui.core.Icon({src:i,size:h,tooltip:k});if(j){this._oIcon.addStyleClass(j);}}var m=this.getAdditionalTexts();var n=m.length;this._additionalTexts=[];for(var o=0;o<n;o++){var T=new sap.m.Label({text:m[o],tooltip:m[o]});T.addStyleClass("sfJobAssignmentDetailsLabel");this._additionalTexts.push(T);}};},"sap/extent/uilib/JobAssignmentDetailsRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.JobAssignmentDetailsRenderer");jQuery.sap.require("sap.m.LabelRenderer");sap.extent.uilib.JobAssignmentDetailsRenderer={};sap.extent.uilib.JobAssignmentDetailsRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibJobAssignmentDetails");r.writeClasses();r.write(">");if(c._oTagIcon){r.renderControl(c._oTagIcon);}if(c._oTag){r.renderControl(c._oTag);}if(c._sTagTextWithStyleClass){r.write(c._sTagTextWithStyleClass);}r.write("<div>");if(c._oLabel){r.renderControl(c._oLabel);}if(c._oIcon){r.renderControl(c._oIcon);}r.write("</div>");for(var i=0,l=c._additionalTexts.length;i<l;i++){r.write("<div>");r.renderControl(c._additionalTexts[i]);r.write("</div>");}r.write("</div>");};},"sap/extent/uilib/LinkWithIcon.js":function(){jQuery.sap.declare("sap.extent.uilib.LinkWithIcon");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.Link");jQuery.sap.require("sap.ui.core.IconPool");sap.m.Link.extend("sap.extent.uilib.LinkWithIcon",{metadata:{properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}},aggregations:{_image:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"}},library:"sap.extent.uilib"}});sap.extent.uilib.LinkWithIcon.prototype.init=function(){if(sap.m.Link.prototype.init){sap.m.Link.prototype.init.apply(this);}this._oIcon=undefined;this.addStyleClass("sapExtentUilibLinkWithIcon");};sap.extent.uilib.LinkWithIcon.prototype._getIcon=function(i,s){if(this._oIcon&&(this._oIcon.getSrc()!==s)){this._oIcon.destroy();this._oIcon=undefined;}var I=this._oIcon;if(!!I){I.setSrc(s);}else{I=sap.ui.core.IconPool.createControlByURI({id:i,src:s}).addStyleClass("sapExtentUilibLinkWithIconCustomIcon");}this._oIcon=I;this.setAggregation("_image",I,true);return I;};sap.extent.uilib.LinkWithIcon.prototype.onAfterRendering=function(){if(sap.m.Link.prototype.onAfterRendering){sap.m.Link.prototype.onAfterRendering.apply(this);}var i=this._getIcon(this.getId()+"-icon",this.getIcon());var r=sap.ui.getCore().getRenderManager();r.renderControl(i);r.flush(this.getDomRef(),false,true);r.destroy();};},"sap/extent/uilib/LinkWithIconRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.LinkWithIconRenderer");jQuery.sap.require("sap.m.LinkRenderer");sap.extent.uilib.LinkWithIconRenderer=sap.ui.core.Renderer.extend(sap.m.LinkRenderer);},"sap/extent/uilib/MaskableBox.js":function(){jQuery.sap.declare("sap.extent.uilib.MaskableBox");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.MaskableCore");sap.extent.uilib.MaskableCore.extend("sap.extent.uilib.MaskableBox",{metadata:{library:"sap.extent.uilib",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null}},defaultAggregation:"box",aggregations:{box:{type:"sap.ui.core.Control",multiple:false}}}});sap.extent.uilib.MaskableBox.prototype.onBeforeRendering=function(){if(this.getBox()){if(!this.getFittedSize()){this.setFittedSize(sap.ui.getCore().byId(this.getBox().getId()).getMetadata().getName()==='sap.viz.ui5.controls.VizFrame');}this.setBoxSize();}};sap.extent.uilib.MaskableBox.prototype.setBoxSize=function(){var _=this.getBox();if(this.getWidth()){this._bWidth=this.getWidth();}else if(typeof _.getWidth==="function"){this._bWidth=_.getWidth();}if(this.getHeight()){this._bHeight=this.getHeight();}else if(typeof _.getHeight==="function"){this._bHeight=_.getHeight();}};sap.extent.uilib.MaskableBox.prototype._updateDisplayCanvas=function(){var a=$("#"+this.sId+"-canvas");var b=$("#"+this.sId+"-content");var c=$("#"+this.sId+"-boxArea").children().first();a.width(this._bWidth||c.width());a.height(this._bHeight||c.height());if(this.getMasked()&&this.getFittedSize()){b.addClass('sapExtentUilibMaskableCoreNoDisplay');}};},"sap/extent/uilib/MaskableBoxRenderer.js":function(){jQuery.sap.require("sap.extent.uilib.MaskableCoreRenderer");jQuery.sap.declare("sap.extent.uilib.MaskableBoxRenderer");sap.extent.uilib.MaskableBoxRenderer=sap.ui.core.Renderer.extend(sap.extent.uilib.MaskableCoreRenderer);sap.extent.uilib.MaskableBoxRenderer.renderContent=function(r,c){r.write("<div id="+c.sId+'-boxArea');r.writeControlData(c);r.addClass("sapExtentUilibMaskableBox");r.writeClasses();if(c.getWidth()){r.addStyle('width',c.getWidth());}if(c.getHeight()){r.addStyle('height',c.getHeight());}r.write(">");try{if(c.getBox()){r.renderControl(c.getBox());}}catch(e){var a=sap.ui.getCore().byId(c.getBox().getId()).getMetadata().getName();jQuery.sap.require("sap.m.MessageBox");sap.m.MessageBox.alert(a+" "+e);}r.write("</div>");};},"sap/extent/uilib/MaskableCore.js":function(){jQuery.sap.declare("sap.extent.uilib.MaskableCore");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.MaskableCore",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},isMaskable:{type:"boolean",group:"Misc",defaultValue:false},masked:{type:"boolean",group:"Misc",defaultValue:true},showMaskLink:{type:"boolean",group:"Misc",defaultValue:true},fittedSize:{type:"boolean",group:"Misc",defaultValue:false}}}});sap.extent.uilib.MaskableCore.prototype.init=function(){this._oText=null;this._showHideLink=null;};sap.extent.uilib.MaskableCore.prototype.getMaskLink=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._oText=this.getMasked()?this.oBundle.getText("COMMON_Show"):this.oBundle.getText("COMMON_Hide");this._showHideLink=new sap.m.Link({text:this._oText,press:jQuery.proxy(function(e){jQuery.proxy(this._toggleDisplay((e.oSource.getProperty('text')==this.oBundle.getText("COMMON_Show"))),this);},this)}).addStyleClass("sapExtentUilibMaskableCoreLink");return this._showHideLink;};sap.extent.uilib.MaskableCore.prototype.onAfterRendering=function(){if(this.getIsMaskable()){this._updateDisplayCanvas();}};sap.extent.uilib.MaskableCore.prototype._toggleDisplay=function(c){this.setMasked(!this.getMasked());this._showHideLink.setText(c?this.oBundle.getText("COMMON_Hide"):this.oBundle.getText("COMMON_Show"));this.rerender();};sap.extent.uilib.MaskableCore.prototype._updateDisplayCanvas=function(){var a=$("#"+this.sId+"-canvas");var b=$("#"+this.sId+"-content");var c=b.children().first();a.width(c.width());a.height(c.height());if(this.getMasked()&&this.getFittedSize()){b.addClass('sapExtentUilibMaskableCoreNoDisplay');}};},"sap/extent/uilib/MaskableCoreRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.MaskableCoreRenderer");sap.extent.uilib.MaskableCoreRenderer={};sap.extent.uilib.MaskableCoreRenderer.render=function(r,c){if(!c.getVisible()){return;}if(!c.getIsMaskable()){this.renderContent(r,c);return;}r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibMaskableCore");r.writeClasses();r.write(">");r.write("<div>");if(c.getShowMaskLink()){r.renderControl(c.getMaskLink());}r.write("</div>");r.write("<div id="+c.sId+'-canvas');if(c.getMasked()){r.addClass('sapExtentUilibMaskableCoreMaskBackground');r.writeClasses();}r.write(">");r.write("<div id="+c.sId+"-content");if(c.getMasked()&&(!c.getFittedSize())){r.addClass('sapExtentUilibMaskableCoreInvisible');r.writeClasses();}r.write(">");try{this.renderContent(r,c);}catch(e){jQuery.sap.require("sap.m.MessageBox");sap.m.MessageBox.alert(e);}r.write("</div></div></div>");};sap.extent.uilib.MaskableCoreRenderer.renderContent=function(r,c){"use strict";};},"sap/extent/uilib/NineBox.js":function(){jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.ColorBox");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.NineBox",{metadata:{library:"sap.extent.uilib",properties:{id:{type:"string",group:"Misc",defaultValue:''},boxColors:{type:"object",group:"Misc"},forceFitLayout:{type:"boolean",group:"Misc",defaultValue:false},boxHeight:{type:"string",group:"Misc",defaultValue:'25rem'},yLabel:{type:"string",group:"Misc",defaultValue:''},xLabel:{type:"string",group:"Misc",defaultValue:''},yLabelPosition:{type:"string",group:"Misc",defaultValue:'bottom'},xLabelPosition:{type:"string",group:"Misc",defaultValue:'left'},label:{type:"string",group:"Misc",defaultValue:''},subLabel:{type:"string",group:"Misc",defaultValue:''},columns:{type:"int",group:"Misc",defaultValue:3},rows:{type:"int",group:"Misc",defaultValue:3},boxText:{type:"object",group:"Misc",defaultValue:{}},isIcon:{type:"boolean",group:"Misc",defaultValue:false},isEditable:{type:"boolean",group:"Misc",defaultValue:false},clickableCells:{type:"boolean",group:"Misc",defaultValue:false}},events:{cellClick:{},pressUpdate:{}},aggregations:{_mainLabel:{type:'sap.m.Label',multiple:false,visibility:'hidden'},_subLabel:{type:'sap.m.Label',multiple:false,visibility:'hidden'},_xLabel:{type:'sap.m.Label',multiple:false,visibility:'hidden'},_yLabel:{type:'sap.m.Label',multiple:false,visibility:'hidden'}}}});sap.extent.uilib.NineBox.prototype.init=function(){this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this.mainLabel=new sap.m.Label({design:sap.m.LabelDesign.Bold});this.mainLabel.addStyleClass('sapExtentUilibNineBoxLabel');this.setAggregation('_mainLabel',this.mainLabel);this.subLabel=new sap.m.Label();this.subLabel.addStyleClass('sapExtentUilibNineBoxSubLabel');this.setAggregation('_subLabel',this.subLabel);this.yLabelControl=new sap.m.Label();this.yLabelControl.addStyleClass('sapExtentUilibNineBoxYLabel');this.setAggregation('_yLabel',this.yLabelControl);this.xLabelControl=new sap.m.Label();this.xLabelControl.addStyleClass('sapExtentUilibNineBoxXLabel');this.setAggregation('_xLabel',this.xLabelControl);this._createEditButton();};sap.extent.uilib.NineBox.prototype.onAfterRendering=function(){var c=this.getColumns();var a=jQuery('#nineBox'+this.sId).width();var n=this.mProperties.boxHeight;var i=4*c;var w=1.5;var o=20;var b=25;jQuery('#nineBox'+this.sId).height(n);var e=jQuery('#nineBox'+this.sId+' .sapExtentUilibNineBox .box');var d=parseInt(this.getBoxHeight());var f=(!isNaN(d))?(d-o)/this.getRows():0;var g=f*w;var h=(g*c)+o+(i);var j=this.getForceFitLayout()?"calc(100%)":h;var k=100/c;var l=this.getForceFitLayout()?"calc("+k+"% - "+b/c+"px)":g+'px';jQuery('#nineBox'+this.sId).width(j);if(e){e.each(function(m){var $=jQuery(this);$.attr('style',$.attr('style')+';height:'+f+'px; width:'+l+';');});}this.renderYLabel(this);this._setYLabelPosition(this);this.renderXLabel(this);this._setXLabelPosition(this);if(d<=100){this.setIsIcon(true);jQuery(e).addClass('iconBox');if(!this.getForceFitLayout()){jQuery('#nineBox'+this.sId).width(j-i/2);}}};sap.extent.uilib.NineBox.prototype.renderYLabel=function(){this._getYLabelElement().text(this.getYLabel());};sap.extent.uilib.NineBox.prototype.renderXLabel=function(){this._getXLabelElement().text(this.getXLabel());};sap.extent.uilib.NineBox.prototype.getSingleBoxText=function(i){var t=this.getBoxText()['text'+i];return(typeof(t)==='undefined')?'':t;};sap.extent.uilib.NineBox.prototype.setBackgroundColor=function(c,b){var d='#cccccc';return(typeof(c)==='undefined')?d:c;};sap.extent.uilib.NineBox.prototype._getYLabelElement=function(){return jQuery('#'+this.yLabelControl.getId());},sap.extent.uilib.NineBox.prototype._getXLabelElement=function(){return jQuery('#'+this.xLabelControl.getId());},sap.extent.uilib.NineBox.prototype._setYLabelPosition=function(){var y=this.getYLabelPosition();var l=this._getYLabelElement().width();switch(y){case'center':var b=parseInt(this.getBoxHeight());var a=(!isNaN(b))?b/2:0;this._getYLabelElement().css('top',a);break;case'bottom':this._getYLabelElement().css('bottom',0);break;case'top':this._getYLabelElement().css('top',l+'px');break;}};sap.extent.uilib.NineBox.prototype._setXLabelPosition=function(){var x=this.getXLabelPosition();var b=jQuery('#nineBox'+this.sId).width();switch(x){case'center':this._getXLabelElement().width(b);this._getXLabelElement().css('text-align','center');break;case'right':this._getXLabelElement().width(b);this._getXLabelElement().css('text-align','right');break;default:break;}};sap.extent.uilib.NineBox.prototype._getColorBox=function(c,b,i){var a=new sap.extent.uilib.ColorBox();if(c){a.boxColor=this._normalizeColorHex(c);}if(b){a.boxText=b;}a.setBoxIndex(i);a.attachClick(jQuery.proxy(this.onCellClick,this));return a;};sap.extent.uilib.NineBox.prototype.onCellClick=function(e,d){this.fireCellClick({colorBox:e.getParameter('colorBox'),color:e.getParameter('color')});};sap.extent.uilib.NineBox.prototype._normalizeColorHex=function(a){if(a){a=a.replace(/^\s+|\s+$/g,'');}if(!(a&&(a.length>0))){return'';}var A=32;var S=7;var n='#';var r=(S-n.length);var l=a.length;for(var i=0;(i<l)&&(r>0);i++){var c=a.charAt(i);if(((c>='0')&&(c<='9'))||((c>='A')&&(c<='F'))){n+=c;r--;}else if((c>='a')&&(c<='f')){var b=a.charCodeAt(i)-A;n+=String.fromCharCode(b);r--;}}if(r>0){for(var i=0;i<r;i++){n+='0';}}return n;};sap.extent.uilib.NineBox.prototype.getCurrentRow=function(i){var c=this.getColumns();if(c>0&&!isNaN(i)){return Math.ceil(i/c);}return-1;};sap.extent.uilib.NineBox.prototype.getCurrentColumn=function(i,c){var a=this.getColumns();if(!isNaN(i)){return(a-((c*a)-i));}return-1;};sap.extent.uilib.NineBox.prototype._renderColoredBox=function(r,c,i,b){var a=this._getColorBox(c,b,i);r.renderControl(a);};sap.extent.uilib.NineBox.prototype._renderBoxRow=function(r,c,a){var b=this.getColumns();var i,d,e;var f=(a*b)+1;for(i=1;i<=b;i++){e=this.getSingleBoxText(f);d=this.setBackgroundColor(c['color'+f],f);this._renderColoredBox(r,d,f,e);f++;}};sap.extent.uilib.NineBox.prototype._createEditButton=function(){this.editButton=new sap.m.Button({icon:"sap-icon://edit",type:sap.m.ButtonType.Transparent,press:jQuery.proxy(this._onPressUpdate,this)});this.editButton.setTooltip(this._oBundle.getText('EDIT'));this.editButton.addStyleClass('sapExtentUilibFormPatternActionButton');};sap.extent.uilib.NineBox.prototype._onPressUpdate=function(e){this.firePressUpdate();};sap.extent.uilib.NineBox.prototype.getYValue=function(){return(this.yValue)?this.yValue:this._getCellCoordinate('y');};sap.extent.uilib.NineBox.prototype.getXValue=function(){return(this.xValue)?this.xValue:this._getCellCoordinate('x');};sap.extent.uilib.NineBox.prototype._getCellCoordinate=function(a){var r=this.getRows();var c=this.getColumns();var b=(r*c);var i;var d=this.getBoxColors();for(i=1;i<b;i++){if(d['color'+i]){if(a==='y'){this.yValue=this.getCurrentRow(i);return this.yValue;}if(a==='x'){this.xValue=this.getCurrentColumn(i,this.getCurrentRow(i));return this.xValue;}}}};},"sap/extent/uilib/NineBoxRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.NineBoxRenderer");sap.extent.uilib.NineBoxRenderer={};sap.extent.uilib.NineBoxRenderer.render=function(r,c){var i=0;var b=c.setBackgroundColor(c.getBoxColors());var a=c.getIsIcon();r.write('<div');r.writeControlData(c);r.addClass('sapExtentUilibNineBoxWrapper');if(a){r.addClass('sapExtentUilibNineBoxIconWrapper');}r.addClass('sapUiSizeCompact');if(c.getClickableCells()){r.addClass('sapExtentUilibNineBoxClickable');}r.writeClasses();r.write('>');if(!a){this.renderLabels(r,c);}r.write('<div class="sapExtentUilibNineBoxContainer ');if(a){r.write('sapExtentUilibNineBoxIcon');}r.write('" id="nineBox'+c.sId+'">');r.renderControl(c.yLabelControl);r.write('<div');r.addClass('sapExtentUilibNineBox');r.writeClasses();r.write('>');i=c.getRows();while(i--){c._renderBoxRow(r,b,i);}r.write('  <div class="row">');r.renderControl(c.xLabelControl);r.write('  </div>');r.write('</div>');r.write('</div>');if(a){if(Util.isRTL()){r.write('<div style="float:right;">');}else{r.write('<div style="float:left;">');}this.renderLabels(r,c);r.write('</div>');r.write('<div style="clear: both;">');r.write('</div>');}r.write('</div>');};sap.extent.uilib.NineBoxRenderer.renderLabels=function(r,c){c.mainLabel.setText(c.getLabel());c.mainLabel.setTooltip(c.getLabel());r.renderControl(c.mainLabel);if(c.getIsEditable()&&!c.getIsIcon()){r.renderControl(c.editButton);}if(c.getSubLabel()){r.write('<div>');c.subLabel.setText(c.getSubLabel());c.subLabel.setTooltip(c.getSubLabel());r.renderControl(c.subLabel);r.write('</div>');}};},"sap/extent/uilib/NoteItem.js":function(){jQuery.sap.declare("sap.extent.uilib.NoteItem");jQuery.sap.require("sap.m.Link");jQuery.sap.require("sap.m.ListItemBase");jQuery.sap.require("sap.extent.uilib.library");sap.m.ListItemBase.extend("sap.extent.uilib.NoteItem",{metadata:{library:'sap.extent.uilib',properties:{title:{type:'string',group:'Data',defaultValue:null},timestamp:{type:'string',group:'Data',defaultValue:null},author:{type:'string',group:'Data',defaultValue:null},viewer:{type:'string',group:'Data',defaultValue:null},text:{type:'string',group:'Data',defaultValue:null},noteId:{type:'float',group:'Data',defaultValue:null},locked:{type:'boolean',group:'Behavior',defaultValue:false},editable:{type:'boolean',group:'Behavior',defaultValue:false},deletePermission:{type:'boolean',group:'Behavior',defaultValue:false},icon:{type:'sap.ui.core.URI',group:'Data',defaultValue:null},activeIcon:{type:'sap.ui.core.URI',group:'Data',defaultValue:null},iconActive:{type:'boolean',group:'Behavior',defaultValue:true},iconDensityAware:{type:'boolean',defaultValue:false},showImage:{type:'boolean',group:'Behavior',defaultValue:false},maxCharacters:{type:'int',group:'Behavior',defaultValue:null}},aggregations:{_sFrom:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_sVisibleTo:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},events:{editIconPress:{parameters:{domRef:{type:'string'}}},deleteIconPress:{parameters:{domRef:{type:'string'}}}}}});sap.extent.uilib.NoteItem._nMaxCharactersMobile=150;sap.extent.uilib.NoteItem._nMaxCharactersDesktop=200;sap.extent.uilib.NoteItem._oRb=sap.ui.getCore().getLibraryResourceBundle('sap.m');sap.extent.uilib.NoteItem._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();sap.extent.uilib.NoteItem._sTextShowMore=sap.extent.uilib.NoteItem._oRb.getText('TEXT_SHOW_MORE').toLocaleLowerCase();sap.extent.uilib.NoteItem._sTextShowLess=sap.extent.uilib.NoteItem._oRb.getText('TEXT_SHOW_LESS').toLocaleLowerCase();sap.extent.uilib.NoteItem._sTextFrom=sap.extent.uilib.NoteItem._oBundle.getText('EMPFILE_PP3_FROM');sap.extent.uilib.NoteItem._sTextVisibleTo=sap.extent.uilib.NoteItem._oBundle.getText('EMPFILE_PP3_VISIBLE_TO');sap.extent.uilib.NoteItem._sTextVisibleOnlyYou=sap.extent.uilib.NoteItem._oBundle.getText('ECT_PP3_VISIBLE_ONLY_TO_YOU');sap.extent.uilib.NoteItem._sTextEditNote=sap.extent.uilib.NoteItem._oBundle.getText('EMPFILE_NOTES_Edit_Note');sap.extent.uilib.NoteItem._sTextDeleteNote=sap.extent.uilib.NoteItem._oBundle.getText('EMPFILE_PP3_BUTTON_DELETE_NOTE');sap.extent.uilib.NoteItem._sTextShowOthers=sap.extent.uilib.NoteItem._oBundle.getText('ECT_PP3_SHOW_OTHER_RECIPIENTS');sap.extent.uilib.NoteItem.prototype.init=function(){var _=new sap.m.Text({text:sap.extent.uilib.NoteItem._sTextFrom}).addStyleClass('sapExtentUilibNoteSubHeader').addStyleClass('sapExtentUilibNoteSmallSpacing');this.setAggregation("_sFrom",_);var a=new sap.m.Text({text:sap.extent.uilib.NoteItem._sTextVisibleTo}).addStyleClass('sapExtentUilibNoteSubHeader').addStyleClass('sapExtentUilibNoteSmallSpacing');this.setAggregation("_sVisibleTo",a);};sap.extent.uilib.NoteItem.prototype.exit=function(e){if(this._oEditControl){this._oEditControl.destroy();}if(this._oLockControl){this._oLockControl.destroy();}if(this._oDeleteControl){this._oDeleteControl.destroy();}if(this._oLinkOthers){this._oLinkOthers.destroy();}if(this._oImageControl){this._oImageControl.destroy();}if(this._oLinkExpandCollapse){this._oLinkExpandCollapse.destroy();}sap.m.ListItemBase.prototype.exit.apply(this);};sap.extent.uilib.NoteItem.prototype.ontap=function(e){if((((!this.getIconActive()&&e.srcControl.getId()==this._oImageControl.getId())))||((!this._oImageControl||(e.srcControl.getId()!==this._oImageControl.getId()))&&(!this._oLockControl||(e.srcControl.getId()!==this._oLockControl.getId()))&&(!this._oEditControl||(e.srcControl.getId()!==this._oEditControl.getId()))&&(!this._oDeleteControl||(e.srcControl.getId()!==this._oDeleteControl.getId()))&&(!this._oLinkOthers||(e.srcControl.getId()!==this._oLinkOthers.getId()))&&(!this._oLinkExpandCollapse||(e.srcControl.getId()!==this._oLinkExpandCollapse.getId())))){sap.m.ListItemBase.prototype.ontap.apply(this,[e]);}};sap.extent.uilib.NoteItem.prototype._getShowSeparators=function(){var _=sap.m.ListSeparators.None;if(typeof this.getParent().getShowSeparators==='function'){_=this.getParent().getShowSeparators();}return _;};sap.extent.uilib.NoteItem.prototype._getImageControl=function(){var _=this.getIcon()||sap.ui.core.IconPool.getIconURI('person-placeholder'),a=this.getId()+'-icon',b={src:_,tooltip:this.getAuthor(),densityAware:this.getIconDensityAware()},c=['sapExtentUilibNoteImage'];this._oImageControl=sap.m.ImageHelper.getImageControl(a,this._oImageControl,this,b,c);return this._oImageControl;};sap.extent.uilib.NoteItem.prototype._getEditControl=function(){var t=this;this._oEditControl=new sap.m.Button({icon:"sap-icon://edit",tooltip:sap.extent.uilib.NoteItem._sTextEditNote,type:sap.m.ButtonType.Transparent}).addStyleClass("sapExtentUilibNoteButton");if(this.getIconActive()){this._oEditControl.attachPress(function(e){t.fireEditIconPress({domRef:this.getDomRef()});});}return this._oEditControl;};sap.extent.uilib.NoteItem.prototype._getLockControl=function(){var t=this;this._oLockControl=new sap.m.Button({icon:"sap-icon://private",tooltip:sap.extent.uilib.NoteItem._sTextVisibleOnlyYou,type:sap.m.ButtonType.Transparent}).addStyleClass("sapExtentUilibNoteButton");if(this.getIconActive()){this._oLockControl.attachPress(function(e){t._handlePopover(e);});}return this._oLockControl;};sap.extent.uilib.NoteItem.prototype._getDeleteControl=function(){var _=this.getId()+'-deleteIcon',a=sap.ui.core.IconPool.getIconURI('delete'),b={src:a,tooltip:sap.extent.uilib.NoteItem._sTextDeleteNote,densityAware:false},c=['sapExtentUilibNoteIcon'];var t=this;this._oDeleteControl=sap.m.ImageHelper.getImageControl(_,this._oDeleteControl,this,b,c);if(this.getIconActive()){this._oDeleteControl.attachPress(function(e){t.fireDeleteIconPress({domRef:this.getDomRef()});});}return this._oDeleteControl;};sap.extent.uilib.NoteItem.prototype._getAuthor=function(){if(!this._oAuthorControl){this._oAuthorControl=new sap.m.Text({text:this.getAuthor()}).addStyleClass('sapExtentUilibNoteName');}return this._oAuthorControl;};sap.extent.uilib.NoteItem.prototype._getViewer=function(){var f=this.getViewer(),l=f.split(","),d,p,n=l.length;if(n<3){d=f;this._others=null;}else{this._others=sap.extent.uilib.NoteItem._oBundle.getText("COMMON_OTHER_ITEMS",n-2);p=f.split(",",2).join(',').length+1;d=f.slice(0,p);this._otherNames=l.slice(2);}this._getLinkOthers();this._oViewerControl=new sap.m.Text({text:d}).addStyleClass('sapExtentUilibNoteName');return this._oViewerControl;};sap.extent.uilib.NoteItem.prototype._activeHandlingInheritor=function(){var _=this.getActiveIcon();if(!!this._oImageControl&&!!_){this._oImageControl.setSrc(_);}};sap.extent.uilib.NoteItem.prototype._inactiveHandlingInheritor=function(){var _=this.getIcon()||sap.ui.core.IconPool.getIconURI('person-placeholder');if(!!this._oImageControl){this._oImageControl.setSrc(_);}};sap.extent.uilib.NoteItem.prototype._getCollapsedText=function(){var _=this._sFullText.substring(0,this._nMaxCollapsedLength);var n=_.lastIndexOf(' ');if(n>0){this._sShortText=_.substr(0,n);}else{this._sShortText=_;}return this._sShortText;};sap.extent.uilib.NoteItem.prototype._toggleTextExpanded=function(){var $=jQuery.sap.byId(this.getId()+'-noteText');var a=jQuery.sap.byId(this.getId()+'-dot');if(this._bTextExpanded){$.text(this._sShortText);a.text(' ... ');this._oLinkExpandCollapse.setText(sap.extent.uilib.NoteItem._sTextShowMore);this._bTextExpanded=false;}else{$.text(this._sFullText);a.text('  ');this._oLinkExpandCollapse.setText(sap.extent.uilib.NoteItem._sTextShowLess);this._bTextExpanded=true;}};sap.extent.uilib.NoteItem.prototype._getLinkExpandCollapse=function(){if(!this._oLinkExpandCollapse){this._oLinkExpandCollapse=new sap.m.Link({text:sap.extent.uilib.NoteItem._sTextShowMore,press:jQuery.proxy(function(){this._toggleTextExpanded();},this)});this._bTextExpanded=false;this._oLinkExpandCollapse.setParent(this,null,true);}return this._oLinkExpandCollapse;};sap.extent.uilib.NoteItem.prototype._checkTextIsExpandable=function(){this._nMaxCollapsedLength=this.getMaxCharacters();if(this._nMaxCollapsedLength===0){if(sap.ui.Device.system.phone){this._nMaxCollapsedLength=sap.extent.uilib.NoteItem._nMaxCharactersMobile;}else{this._nMaxCollapsedLength=sap.extent.uilib.NoteItem._nMaxCharactersDesktop;}}this._sFullText=this.getText();var _=false;if(this._sFullText.length>this._nMaxCollapsedLength){_=true;}return _;};sap.extent.uilib.NoteItem.prototype.setType=function(t){if(t==sap.m.ListType.Navigation){this.setProperty('type',sap.m.ListType.Active);}else{this.setProperty('type',t);}return this;};sap.extent.uilib.NoteItem.prototype._getLinkOthers=function(){if(this._others){this._oLinkOthers=new sap.m.Link({text:this._others}).addStyleClass('sapExtentUilibNoteLink');if(sap.ui.Device.system.desktop){this._oLinkOthers.setTooltip(this._otherNames.join("\n"));}this._oLinkOthers.attachPress(jQuery.proxy(function(e){this._handlePopover(e);},this));return this._oLinkOthers;}else{this._oLinkOthers=null;}};sap.extent.uilib.NoteItem.prototype._handlePopover=function(e){var _,a,i;if(!this.oPopover){this.oPopover=new sap.m.Popover({afterClose:jQuery.proxy(this.onAfterClose,this)});}if(!this.oPopover.isOpen()){a=new sap.ui.layout.VerticalLayout({});if(e.getSource()===this._oLockControl){_=new sap.m.Text({text:sap.extent.uilib.NoteItem._sTextVisibleOnlyYou}).addStyleClass('sapExtentUilibNoteTextText');a.addContent(_);}else{for(i=0;i<this._otherNames.length;i++){_=new sap.m.Text({text:this._otherNames[i]}).addStyleClass('sapExtentUilibNoteTextText');a.addContent(_);}}this.oPopover.addContent(a);this.oPopover.setShowHeader(false);this.oPopover.setVerticalScrolling(true);this.oPopover.addStyleClass('sapExtentUilibNotePopover');this.oPopover.setPlacement(sap.m.PlacementType.Bottom);this.oPopover.openBy(e.getSource());}};sap.extent.uilib.NoteItem.prototype.onAfterClose=function(){this.oPopover.destroyContent();};},"sap/extent/uilib/NoteItemRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.NoteItemRenderer");jQuery.sap.require("sap.m.ListItemBaseRenderer");sap.extent.uilib.NoteItemRenderer=sap.ui.core.Renderer.extend(sap.m.ListItemBaseRenderer);sap.extent.uilib.NoteItemRenderer.renderLIAttributes=function(r,c){r.addClass('sapExtentUilibNoteTitleDiv');if(c._getShowSeparators()===sap.m.ListSeparators.None){r.addClass('sapExtentUilibNoteShowSeparatorsNone');}else{r.addClass('sapExtentUilibNoteShowSeparatorsAll');}};sap.extent.uilib.NoteItemRenderer.renderLIContent=function(r,c){var n=c.getId();r.write('<article');r.writeControlData(c);r.addClass('sapExtentUilibNote');r.writeClasses();r.write('>');if(!!c.getShowImage()){this._writeImageControl(r,c,n);}r.write('<div ');r.addClass('sapExtentUilibNoteSubHeader');if(!!c.getShowImage()){r.addClass('sapExtentUilibNoteHasFigure');}r.writeClasses();r.write('" >');if(!!c.getTitle()||!!c.getTimestamp()){if(!!c.getTitle()){this._writeTitle(r,c,n);}if(!!c.getTimestamp()){this._writeTimestamp(r,c,n);if(!!c.getAuthor()){r.write('<span ');r.addClass('sapExtentUilibNoteMiddot');r.writeClasses();r.write('>&#x00B7</span>');r.renderControl(c.getAggregation('_sFrom'));r.renderControl(c._getAuthor());}}}if(!!c.getViewer()){this._addTagClass(r,'div',n,'-name','sapExtentUilibFormPatternLabel');r.renderControl(c.getAggregation('_sVisibleTo'));r.renderControl(c._getViewer());if(c._oLinkOthers){r.renderControl(c._oLinkOthers);}r.write('</div>');}this._addTagClass(r,'p',n,'-text',"sapExtentUilibNoteTextText");this._addTagClass(r,'span',n,'-noteText','sapExtentUilibNoteTextString');if(!!c._checkTextIsExpandable()){this._writeCollapsedText(r,c,n);}else{r.writeEscaped(c.getText(),true);}r.write('</span>');r.write('</p>');r.write('</div>');r.write('</article>');};sap.extent.uilib.NoteItemRenderer._addTagClass=function(r,d,n,t,c){r.write('<'+d+' id=');r.writeEscaped(n+t);if(!!c){r.addClass(c);r.writeClasses();r.write(' >');}};sap.extent.uilib.NoteItemRenderer._writeImageControl=function(r,c,n){this._addTagClass(r,'figure',n,'-figure');r.addClass('sapExtentUilibNoteFigure');if(!c.getIcon()){r.addClass('sapExtentUilibNoteIsDefaultIcon');}r.writeClasses();r.write('>');if(!!c.getIconActive()){this._addTagClass(r,'a',n,'-iconRef ');r.write('tabindex="-1"');r.writeAttribute('href','javascript:void(0);');r.write('>');}r.renderControl(c._getImageControl());if(!!c.getIconActive()){r.write('</a>');}r.write('</figure>');};sap.extent.uilib.NoteItemRenderer._writeCollapsedText=function(r,c,n){r.writeEscaped(c._getCollapsedText(),true);r.write('</span>');this._addTagClass(r,'span',n,'-dot','sapExtentUilibNoteTextString');r.write(' ... ');r.write('</span>');var _=c._getLinkExpandCollapse().addStyleClass('sapExtentUilibNoteLinkExpandCollapse');r.renderControl(_);};sap.extent.uilib.NoteItemRenderer._writeTimestamp=function(r,c,n){this._addTagClass(r,'span',n,'-timestamp','sapExtentUilibNoteSubHeader');r.writeEscaped(c.getTimestamp());r.write('</span>');};sap.extent.uilib.NoteItemRenderer._writeTitle=function(r,c,n){this._addTagClass(r,'p',n,'-title','sapExtentUilibNoteTitle');r.writeEscaped(c.getTitle());if(c.getLocked()){r.renderControl(c._getLockControl());}if(c.getEditable()){r.renderControl(c._getEditControl());}if(c.getDeletePermission()){r.renderControl(c._getDeleteControl());}r.write('</p>');};},"sap/extent/uilib/PP3SearchableComboBox.js":function(){jQuery.sap.declare("sap.extent.uilib.PP3SearchableComboBox");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.SearchableComboBox");jQuery.sap.require("sap.extent.uilib.util.SCBAutoCompleteHelper");sap.extent.uilib.SearchableComboBox.extend("sap.extent.uilib.PP3SearchableComboBox",{metadata:{library:"sap.extent.uilib",properties:{searchableComboBoxHelper:{type:"sap.extent.uilib.util.SCBAutoCompleteHelper",group:"Misc",defaultValue:null},meta:{type:"object",group:"Misc",defaultValue:null},utilsAdapter:{type:"object",group:"Misc",defaultValue:null}}},renderer:"sap.m.ComboBoxRenderer"});sap.extent.uilib.PP3SearchableComboBox.prototype.init=function(){if(sap.extent.uilib.SearchableComboBox.prototype.init){sap.extent.uilib.SearchableComboBox.prototype.init.call(this);}this.listenerCalled=0;};sap.extent.uilib.PP3SearchableComboBox.prototype.onBeforeRendering=function(){if(sap.extent.uilib.SearchableComboBox.prototype.onBeforeRendering){sap.extent.uilib.SearchableComboBox.prototype.onBeforeRendering.call(this);}this.searchableComboBoxHelper=new sap.extent.uilib.util.SCBAutoCompleteHelper(this.getMeta(),this.getUtilsAdapter());if(this.listenerCalled===0){this.listenerCalled++;this.searchableComboBoxHelper.listen(this);}};},"sap/extent/uilib/PhoneticTranscription.js":function(){jQuery.sap.declare("sap.extent.uilib.PhoneticTranscription");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.PhoneticTranscription",{metadata:{library:"sap.extent.uilib",properties:{audioUrl:{type:"string",group:"Misc",defaultValue:null}}}});sap.extent.uilib.PhoneticTranscription.prototype.init=function(){};},"sap/extent/uilib/PhoneticTranscriptionRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.PhoneticTranscriptionRenderer");sap.extent.uilib.PhoneticTranscriptionRenderer={};sap.extent.uilib.PhoneticTranscriptionRenderer.render=function(r,c){var m=jQuery.sap.getModulePath('sap.extent.uilib');var i=m+'/resources/speaker.svg';r.write("<div");r.writeControlData(c);r.write(">");var a=c.getAudioUrl();if(a!=null&&a!=undefined){var b=c.getId()+"phoneticAudio";r.write('<audio ');r.writeAttributeEscaped("id",b);r.writeAttributeEscaped("src",a);r.write(' preload="none"></audio>');var p="document.getElementById('"+b+"').play();return false;";r.write('<a class="sapExtentUilibPhoneticTranscriptionPlayButton" onclick="'+p+'" href="javascript:void(0)"><img ');r.writeAttributeEscaped("src",i);r.write('/></a>');}r.write("</div>");};},"sap/extent/uilib/PictureUploader.js":'jQuery.sap.declare("sap.extent.uilib.PictureUploader");jQuery.sap.require("sap.extent.uilib.util.CommonPictureUploadUtils");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.m.MessageBox");\nsap.ui.core.Control.extend("sap.extent.uilib.PictureUploader",{metadata:{library:"sap.extent.uilib",events:{},properties:{pictureLoaded:{type:"boolean",defaultValue:false},hasChanged:{type:"boolean",defaultValue:false},showMessageStrip:{type:"boolean",defaultValue:false},isMultiUser:{type:"boolean",defaultValue:false}}}});\nsap.extent.uilib.PictureUploader.SIZE_2_MEGABYTES=2097153;sap.extent.uilib.PictureUploader.MAX_PHOTO_SIZE_MB=2;var photoCropConfig={};photoCropConfig.previewSize={"width":60,"height":80};photoCropConfig.maskSize={"width":312,"height":268};photoCropConfig.maskPreviewSize={"width":160,"height":215};photoCropConfig.targetImgDim={"width":180,"height":240};photoCropConfig.squarePreviewWidth=280;\nsap.extent.uilib.PictureUploader.prototype.init=function(){this.previewSize=photoCropConfig.previewSize;this.maskSize=photoCropConfig.maskSize;this.maskPreviewSize=photoCropConfig.maskPreviewSize;this.targetImgDim=photoCropConfig.targetImgDim;this.squarePreviewWidth=photoCropConfig.squarePreviewWidth;this.targetImgDimToMaskPreviewRatio=this.targetImgDim.width/this.maskPreviewSize.width;this.topBtmGap=(this.squarePreviewWidth*this.targetImgDim.height/this.targetImgDim.width-this.squarePreviewWidth)/2;this._oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.sf.peopleprofile.i18n");this.renderingDone=false;var m=jQuery.sap.getModulePath("sap.extent.uilib");jQuery.getScript(m+"/ext-lib/exif.js");this.oSlider=new sap.m.Slider({min:1,max:200,value:100,change:jQuery.proxy(this.onResizeImage,this)});this.oSlider.setWidth("82%");this.oSlider.addStyleClass("sapExtentUilibPictureUploaderSlider");this.oRemoveButton=new sap.m.Button({press:jQuery.proxy(this.onRemoveImage,this),text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_DELETE_PICTURE")});this.oRemoveButton.addStyleClass("sapExtentUILibPictureUploaderRemove");this.oUploadNew=new sap.m.Button({press:jQuery.proxy(this.onOpenFilePicker,this),text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_UPLOAD_NEW_PICTURE")});this.oMessageStrip=new sap.m.MessageStrip({type:"Error",showIcon:true,showCloseButton:false});this.oMessageStrip.addStyleClass("sapExtentUILibPictureUploaderMessageStrip");this.oUploadNew.addStyleClass("sapExtentUILibPictureUploaderUploadNew");var U=["mailto","http","https"];jQuery.each(U,function(i,p){jQuery.sap.addUrlWhitelist(p);});this.oUploadLabel=new sap.ui.core.HTML({content:"<div>"+this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_UPLOAD_RECENT_MSG")+"</div>",sanitizeContent:true});jQuery.each(U,function(i,p){jQuery.sap.removeUrlWhitelist(p);});this.oUploadLabel.addStyleClass("sapExtentUILibPictureUploaderLabels");this.oLabelMediumPhoto=new sap.m.Text({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_MEDIUM_PHOTO")});this.oLabelSmallPhoto=new sap.m.Text({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SMALL_PHOTO")});this.oUploadIcon=new sap.ui.core.Icon({src:"sap-icon://person-placeholder",size:"7.143rem"});this.oUploadIcon.addStyleClass("sapExtentUILibPictureUploaderUploadIcon");this.oUploadIcon.addStyleClass("sapExtentUILibPictureUploaderCenter");this.oIncreaseIcon=new sap.ui.core.Icon({src:"sap-icon://zoom-in",size:"1.4rem",tooltip:this._oBundle.getText("COMMON_ZOOM_IN"),press:jQuery.proxy(this.onIncreaseSize,this)});this.oIncreaseIcon.addStyleClass("sapExtentUILibPictureUploaderSizeIcons");this.oDecreaseIcon=new sap.ui.core.Icon({src:"sap-icon://zoom-out",size:"1.4rem",tooltip:this._oBundle.getText("COMMON_ZOOM_OUT"),press:jQuery.proxy(this.onDecreaseSize,this)});this.oDecreaseIcon.addStyleClass("sapExtentUILibPictureUploaderSizeIcons");this.oLink=new sap.m.Link({press:jQuery.proxy(this.onOpenFilePicker,this),text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SELECT")});this.oLink.addStyleClass("sapExtentUILibPictureUploaderFileLink");this.oSelectLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SELECT")});this.oSelectLabel.addStyleClass("sapExtentUILibPictureUploaderUploadLabelIE");this.oSelectLabel.addStyleClass("sapExtentUILibPictureUploaderCenter");this.oSelectLabel.addStyleClass("sapExtentUILibPictureUploaderLabels");this.oSelectLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oDropLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_DROP")});this.oDropLabel.addStyleClass("sapExtentUILibPictureUploaderDropLabel");this.oDropLabel.addStyleClass("sapExtentUILibPictureUploaderCenter");this.oDropLabel.addStyleClass("sapExtentUILibPictureUploaderLabels");this.oDropLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oOrLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_OR")});this.oOrLabel.addStyleClass("sapExtentUILibPictureUploaderOrLabel");this.oOrLabel.addStyleClass("sapExtentUILibPictureUploaderCenter");this.oOrLabel.addStyleClass("sapExtentUILibPictureUploaderLabels");this.oOrLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oSizeLabel=new sap.m.Label({text:this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SIZE")});this.oSizeLabel.addStyleClass("sapExtentUILibPictureUploaderSizeLabel");this.oSizeLabel.addStyleClass("sapExtentUILibPictureUploaderCenter");this.oSizeLabel.addStyleClass("sapExtentUILibPictureUploaderLabels");this.oSizeLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oUploadingLabel=new sap.m.Label({text:this._oBundle.getText("COMMON_Uploading_Text")});this.oUploadingLabel.addStyleClass("sapExtentUILibPictureUploaderUploadingLabel");this.oUploadingLabel.addStyleClass("sapExtentUILibPictureUploaderCenter");this.oUploadingLabel.addStyleClass("sapExtentUILibPictureUploaderLabels");this.oUploadingLabel.setTextAlign(sap.ui.core.TextAlign.Center);this.oProgressIndicator=new sap.m.ProgressIndicator({showValue:false,state:"None",width:"70%"});this.oProgressIndicator.addStyleClass("sapExtentUILibPictureUploaderProgressIndicator");this.percentageFactor=1;this.originalFile=null;this.defaultSrc="";this.resizeCanvas=document.createElement("canvas");this.commonPictureUploadUtils=new sap.extent.uilib.util.CommonPictureUploadUtils();};\nsap.extent.uilib.PictureUploader.prototype.initializeCrop=function(p){this.commonPictureUploadUtils._calcImageDrwDimForFit.call(this);this._updateImgSize(this._ratio);this.commonPictureUploadUtils._updateSlider.call(this,this._minRatio,this._ratio,1);};\nsap.extent.uilib.PictureUploader.prototype._updateImgSize=function(r){var t=this.targetImgDimToMaskPreviewRatio;var i=this.originalImage;var w=i.width*r/t;var h=i.height*r/t;var p=this.squarePreviewWidth;var c=p/this.maskPreviewSize.width;var u=this.$().find("#"+this.getId()+"-userImageContainer");var a=this.$().find("#"+this.getId()+"-userImageWindowMedium");var b=this.$().find("#"+this.getId()+"-userImageWindowSmall");var d=this.$().find("#"+this.getId()+"-userImage");var e=this.$().find("#"+this.getId()+"-userImageMedium");var f=this.$().find("#"+this.getId()+"-userImageSmall");this.originalHeight=Math.round(h*c);this.originalWidth=Math.round(w*c);d.height(this.originalHeight);d.width(this.originalWidth);e.height(this.originalHeight*(100/p));e.width(this.originalWidth*(100/p));f.height(this.originalHeight*(80/p));f.width(this.originalWidth*(80/p));this._setResizeCanvas(this.originalHeight,this.originalWidth);var g=d.offset().top;var j=d.offset().left;var k=u.offset().top;var l=u.offset().left;var m=k-g;var n=l-j;var o=d.height()-280-m;var q=d.width()-280-n;if(m<this.topBtmGap+0.5||o<this.topBtmGap+0.5){var s=k-this.topBtmGap;var v=a.offset().top-this.topBtmGap*100/280;var x=b.offset().top-this.topBtmGap*80/280;d.offset({top:s});e.offset({top:v});f.offset({top:x});}if(n<0.5||q<0.5){d.offset({left:l});e.offset({left:a.offset().left});f.offset({left:b.offset().left});}};\nsap.extent.uilib.PictureUploader.prototype.setDefaultSrc=function(s){this.defaultSrc=s;if(this.renderingDone){if(this.defaultSrc&&this.defaultSrc!=""){this.setImageSrc(this.defaultSrc);}}};\nsap.extent.uilib.PictureUploader.prototype.onIncreaseSize=function(){var n=this._ratio+0.01;if(n>1){return;}this._ratio=n;this.oSlider.setValue(this._ratio*100);this._updateImgSize(this._ratio);this.setHasChanged(true);};\nsap.extent.uilib.PictureUploader.prototype.onDecreaseSize=function(){var n=this._ratio-0.01;if(n<this.oSlider.getMin()/100){return;}this._ratio=n;this.oSlider.setValue(this._ratio*100);this._updateImgSize(this._ratio);this.setHasChanged(true);};\nsap.extent.uilib.PictureUploader.prototype.onOpenFilePicker=function(){var f=this.$().find("#"+this.getId()+"-fileSelect");f.click();};\nsap.extent.uilib.PictureUploader.prototype.getCroppedImage=function(c){var u=this.$().find("#"+this.getId()+"-userImageContainer");var a=this.$().find("#"+this.getId()+"-userImage");var b;var l=u.offset().left-a.offset().left;var t=u.offset().top-a.offset().top;var w=u.width();var h=u.height();b=document.createElement("canvas");b.width=w;b.height=h;var r=new Image();r.onload=function(){b.getContext("2d").drawImage(r,l,t,w,h,0,0,w,h);c(b.toDataURL("image/webp"));};r.src=this.resizeCanvas.toDataURL("image/webp");};\nsap.extent.uilib.PictureUploader.prototype.getCropData=function(u,p){var a=this.$().find("#"+this.getId()+"-userImageContainer");var b=this.$().find("#"+this.getId()+"-userImage");var c=this.originalImage.width/this.originalWidth;var x=(a.offset().left-b.offset().left)*c*this._ratio;var d=this.originalImage.width*this._ratio-photoCropConfig.targetImgDim.width-1;d=d<0?0:d;var e=this.originalImage.height/this.originalHeight;var y=(a.offset().top-b.offset().top-this.topBtmGap)*e*this._ratio;var f=this.originalImage.height*this._ratio-photoCropConfig.targetImgDim.height-1;f=f<0?0:f;var g=[];var r=this._ratio;x=x<0?0:(x>d?d:x);y=y<0?0:(y>f?f:y);var h=180/180.0;g.push({userId:u,photoType:"liveProfile",x:Math.floor(x*h),y:Math.floor(y*h),width:180,height:240,photoId:p,ratio:r,isInsertNewPhoto:false});var i=60/180.0;g.push({userId:u,photoType:"liveProfileSquare60",x:Math.floor(x*i),y:Math.floor(y*i),width:60,height:60,photoId:p,ratio:r*i,isInsertNewPhoto:false});var j=30/180.0;g.push({userId:u,photoType:"liveProfileSquare30",x:Math.floor(x*j),y:Math.floor(y*j),width:30,height:30,photoId:p,ratio:r*j,isInsertNewPhoto:false});var k=234/180.0;g.push({userId:u,photoType:"liveProfileSquare234",x:Math.floor(x*k),y:Math.floor(y*k),width:234,height:234,photoId:p,ratio:r*k,isInsertNewPhoto:false});return g;};\nsap.extent.uilib.PictureUploader.prototype.getOriginalImage=function(){return this.originalImage.src;};\nsap.extent.uilib.PictureUploader.prototype.getOriginalImageFile=function(){return this.originalFile;};\nsap.extent.uilib.PictureUploader.prototype.onResizeImage=function(e){var r=e.getParameter("value")/100;this._ratio=r<=this._minRatio?this._minRatio:r;this._updateImgSize(this._ratio);this.setHasChanged(true);};\nsap.extent.uilib.PictureUploader.prototype._setResizeCanvas=function(h,w){this.resizeCanvas.width=w;this.resizeCanvas.height=h;this.resizeCanvas.getContext("2d").drawImage(this.originalImage,0,0,w,h);};\nsap.extent.uilib.PictureUploader.prototype.onRemoveImage=function(e){this.defaultSrc="";this.setPictureLoaded(false);this.setHasChanged(true);this.setShowMessageStrip(false);this.$().find("#"+this.getId()+"-userImageContainer").addClass("sapExtentUILibPictureUploaderHidden");jQuery(".sapExtentUILibPictureUploaderFileRelativeLower").addClass("sapExtentUILibPictureUploaderHidden");jQuery(".sapExtentUILibPictureUploaderFileRelativeUpperRight").addClass("sapExtentUILibPictureUploaderHidden");this.originalFile=null;this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileSelect").removeClass("sapExtentUILibPictureUploaderHidden");};\nsap.extent.uilib.PictureUploader.prototype.onAfterRendering=function(){var f=this.$().find("#"+this.getId()+"-fileDrag");var a=this.$().find("#"+this.getId()+"-fileSelect");var b=this.$().find("#"+this.getId()+"-fileSelectIE");var u=this.$().find("#"+this.getId()+"-userImage");a.on("change",jQuery.proxy(this.fileSelectHandler,this));if(b){b.on("change",jQuery.proxy(this.fileSelectHandler,this));}f.on("dragover",jQuery.proxy(this.fileDragOver,this));f.on("dragleave",jQuery.proxy(this.fileDragOverLeave,this));f.on("drop",jQuery.proxy(this.fileSelectHandler,this));f.hover(jQuery.proxy(this.fileDragHover,this),jQuery.proxy(this.fileDragLeave,this));jQuery(".sapExtentUILibPictureUploaderFileRelativeLower").addClass("sapExtentUILibPictureUploaderHidden");jQuery(".sapExtentUILibPictureUploaderFileRelativeUpperRight").addClass("sapExtentUILibPictureUploaderHidden");this.oProgressIndicator.addStyleClass("sapExtentUILibPictureUploaderHidden");this.oUploadingLabel.addStyleClass("sapExtentUILibPictureUploaderHidden");u.on("mousedown",jQuery.proxy(this.startMoving,this));u.on("touchstart",jQuery.proxy(this.startMoving,this));this.renderingDone=true;if(this.defaultSrc&&this.defaultSrc!=""){this.setImageSrc(this.defaultSrc);}var p=jQuery("#profilePicture-fileSelect");if(p&&p.length>0){p[0].setAttribute("tabindex","-1");}this.oIncreaseIcon.rerender();this.oDecreaseIcon.rerender();};\nsap.extent.uilib.PictureUploader.prototype.startMoving=function(e){e.preventDefault();e.stopPropagation();this.saveEventState(e);jQuery(document).on("mousemove",jQuery.proxy(this.moving,this));jQuery(document).on("mouseup",jQuery.proxy(this.endMoving,this));jQuery(document).on("touchmove",jQuery.proxy(this.moving,this));jQuery(document).on("touchend",jQuery.proxy(this.endMoving,this));};\nsap.extent.uilib.PictureUploader.prototype.endMoving=function(e){e.preventDefault();jQuery(document).off("mousemove",jQuery.proxy(this.moving,this));jQuery(document).off("mouseup",jQuery.proxy(this.endMoving,this));jQuery(document).off("touchend",jQuery.proxy(this.endMoving,this));jQuery(document).off("touchmove",jQuery.proxy(this.moving,this));};\nsap.extent.uilib.PictureUploader.prototype.moving=function(e){this.setHasChanged(true);var u=this.$().find("#"+this.getId()+"-userImage");var a=this.$().find("#"+this.getId()+"-userImageContainer");var b=this.$().find("#"+this.getId()+"-userImageMedium");var c=this.$().find("#"+this.getId()+"-userImageSmall");var m={},t={};t[0]={};t[0].clientX=0;t[0].clientY=0;e.preventDefault();e.stopPropagation();if(e.originalEvent&&e.originalEvent.touches){t=e.originalEvent.touches;}m.x=(e.clientX||e.pageX||t[0].clientX);m.y=(e.clientY||e.pageY||t[0].clientY);var i=m.y-(this.eventState.mouse_y-this.eventState.container_top);var d=m.x-(this.eventState.mouse_x-this.eventState.container_left);var f=a.offset().top;var g=a.offset().left;var h=f-i;var j=g-d;var k=u.height()-this.squarePreviewWidth-h;var l=u.width()-this.squarePreviewWidth-j;var n=this.topBtmGap;if(h<n||j<1||k<n||l<1){return;}u.offset({"left":m.x-(this.eventState.mouse_x-this.eventState.container_left),"top":m.y-(this.eventState.mouse_y-this.eventState.container_top)});b.offset({"left":this.eventState.container_m_left-((this.eventState.mouse_x-m.x)*(100/this.squarePreviewWidth)),"top":this.eventState.container_m_top-((this.eventState.mouse_y-m.y)*(100/this.squarePreviewWidth))});c.offset({"left":this.eventState.container_s_left-((this.eventState.mouse_x-m.x)*(80/this.squarePreviewWidth)),"top":this.eventState.container_s_top-((this.eventState.mouse_y-m.y)*(80/this.squarePreviewWidth))});};\nsap.extent.uilib.PictureUploader.prototype.saveEventState=function(e){var u=this.$().find("#"+this.getId()+"-userImage");var a=this.$().find("#"+this.getId()+"-userImageMedium");var b=this.$().find("#"+this.getId()+"-userImageSmall");if(this.eventState==undefined||this.eventState==null){this.eventState={};}this.eventState.container_left=u.offset().left;this.eventState.container_top=u.offset().top;this.eventState.container_m_left=a.offset().left;this.eventState.container_m_top=a.offset().top;this.eventState.container_s_left=b.offset().left;this.eventState.container_s_top=b.offset().top;this.eventState.mouse_x=(e.clientX||e.pageX||e.originalEvent.touches[0].clientX);this.eventState.mouse_y=(e.clientY||e.pageY||e.originalEvent.touches[0].clientY);if(e.originalEvent.touches!==undefined){this.eventState.touches=[];for(var i=0;i<e.originalEvent.touches.length;i++){this.eventState.touches[i]={};this.eventState.touches[i].clientX=e.originalEvent.touches[i].clientX;this.eventState.touches[i].clientY=e.originalEvent.touches[i].clientY;}}this.eventState.evnt=e;console.log(this.eventState)};\nsap.extent.uilib.PictureUploader.prototype.fileDragHover=function(e){e.stopPropagation();e.preventDefault();this.$().find("#"+this.getId()+"-fileDrag").addClass("sapExtentUILibPictureUploaderFileDragHover");this.oUploadIcon.setColor("#939598");};\nsap.extent.uilib.PictureUploader.prototype.fileDragLeave=function(e){e.stopPropagation();e.preventDefault();this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibPictureUploaderFileDragHover");this.oUploadIcon.setColor("#BCBDC0");};\nsap.extent.uilib.PictureUploader.prototype.fileDragOver=function(e){e.stopPropagation();e.preventDefault();if(this.timer){clearTimeout(this.timer);}this.oUploadIcon.setColor("#939598");this.$().find("#"+this.getId()+"-fileDrag").addClass("sapExtentUILibPictureUploaderFileDragHover");this.$().find("#"+this.getId()+"-fileDragLabels").addClass("sapExtentUILibPictureUploaderHidden");this.oUploadIcon.setSize("12.5rem");};\nsap.extent.uilib.PictureUploader.prototype.fileDragOverLeave=function(e){e.stopPropagation();e.preventDefault();this.timer=setTimeout(jQuery.proxy(function(){this.fileDragOverLeaveReset();},this),100);};\nsap.extent.uilib.PictureUploader.prototype.fileDragOverLeaveReset=function(){this.oUploadIcon.setSize("7.143rem");this.oUploadIcon.setColor("#BCBDC0");this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibPictureUploaderFileDragHover");this.$().find("#"+this.getId()+"-fileDragLabels").removeClass("sapExtentUILibPictureUploaderHidden");};\nsap.extent.uilib.PictureUploader.prototype.fileSelectHandler=function(e){this.fileDragHover(e);this.fileDragOverLeaveReset();var f=[];if(e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files){f=e.originalEvent.dataTransfer.files;}else if(e.target&&e.target.files){f=e.target.files;}else{return;}for(var i=0,a;i<f.length;i++){this.setHasChanged(true);a=f[i];if(!this.commonPictureUploadUtils.isFileSupportedByPhotoCrop(a)){this.showMessageStrip(this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_IMAGE_TYPE"));return;}if(a.size>sap.extent.uilib.PictureUploader.SIZE_2_MEGABYTES){this.showMessageStrip(this._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_IMAGE_SIZE_WARNING"));return;}var r=new FileReader();this.originalFile=a;r.onload=jQuery.proxy(this._loadFile,this,a.name);r.readAsDataURL(a);}};\nsap.extent.uilib.PictureUploader.prototype._loadFile=function(f,e){if(!e.target.result||e.target.result=="data:"){this.showMessageStrip(this._oBundle.getText("EMPFILE_EDU_ERROR_PHOTO_SIZE_TOO_LARGE",[f,sap.extent.uilib.PictureUploader.MAX_PHOTO_SIZE_MB]));return;}this.setImageSrc(e.target.result);this.setShowMessageStrip(false);};\nsap.extent.uilib.PictureUploader.prototype.showMessageStrip=function(m){this.oMessageStrip.setText(m);this.oMessageStrip.rerender();this.setShowMessageStrip(true);};\nsap.extent.uilib.PictureUploader.prototype.setImageSrc=function(s){this.defaultSrc=s;this.setPictureLoaded(true);var u=this.$().find("#"+this.getId()+"-userImage");var a=this.$().find("#"+this.getId()+"-userImageMedium");var b=this.$().find("#"+this.getId()+"-userImageSmall");var c=this.$().find("#"+this.getId()+"-userImageContainer");var d=this.$().find("#"+this.getId()+"-userImageWindowMedium");var e=this.$().find("#"+this.getId()+"-userImageWindowSmall");this.originalImage=new Image();this.originalImage.onload=jQuery.proxy(this.initializeCrop,this);this.originalImage.src=s;c.removeClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDrag").addClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileSelect").addClass("sapExtentUILibPictureUploaderHidden");u.attr("src",s);a.attr("src",s);b.attr("src",s);if(sap.ui.getCore().getConfiguration().getRTL()){u.css("left","50%");u.css("right","auto");a.css("left","50%");a.css("position","absolute");a.css("right","auto");b.css("left","50%");b.css("position","absolute");b.css("right","auto");d.css("position","relative");e.css("position","relative");}jQuery(".sapExtentUILibPictureUploaderFileRelativeLower").removeClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibPictureUploaderFileDragHover");jQuery(".sapExtentUILibPictureUploaderFileRelativeUpperRight").removeClass("sapExtentUILibPictureUploaderHidden");};\nsap.extent.uilib.PictureUploader.prototype.setProgressIndicatorVisible=function(i){this.$().find("#"+this.getId()+"-fileDrag").removeClass("sapExtentUILibPictureUploaderHidden");var u=this.$().find("#"+this.getId()+"-userImageContainer");if(i){this.oProgressIndicator.setPercentValue(0);u.addClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDragLabels").addClass("sapExtentUILibPictureUploaderHidden");this.oProgressIndicator.removeStyleClass("sapExtentUILibPictureUploaderHidden");this.oUploadingLabel.removeStyleClass("sapExtentUILibPictureUploaderHidden");}else{u.removeClass("sapExtentUILibPictureUploaderHidden");this.$().find("#"+this.getId()+"-fileDragLabels").removeClass("sapExtentUILibPictureUploaderHidden");this.oProgressIndicator.addStyleClass("sapExtentUILibPictureUploaderHidden");this.oUploadingLabel.addStyleClass("sapExtentUILibPictureUploaderHidden");}};\nsap.extent.uilib.PictureUploader.prototype.setProgressValue=function(v){this.oProgressIndicator.setPercentValue(v);};\nFunction.prototype.bindToEventHandler=function a(){var h=this;var b=Array.prototype.slice.call(arguments);return function(e){e=e||window.event;b.unshift(e);h.apply(this,b);};};\n',"sap/extent/uilib/PictureUploaderRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.PictureUploaderRenderer");jQuery.sap.require("sap.ui.core.Renderer");sap.extent.uilib.PictureUploaderRenderer={};sap.extent.uilib.PictureUploaderRenderer.render=function(r,c){r.write("<div class='sapExtentUilibPictureUploader'");r.writeControlData(c);r.write(">");if(c.getShowMessageStrip()){r.renderControl(c.oMessageStrip);}r.write("<div class='sapExtentUILibPictureUploaderFileRelativeIntro'>");r.renderControl(c.oUploadLabel);if(c.getIsMultiUser()){r.write("<span>"+c._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_MULTIUSER_INSTRUCTION")+"</span>");}r.write("</div>");r.write("<div class='sapExtentUILibPictureUploaderFileRelativeLower'>");r.write("<div class='sapExtentUILibPictureUploaderFileRelativeLowerInner'>");r.renderControl(c.oUploadNew);r.renderControl(c.oRemoveButton);r.write("</div>");r.write("</div>");r.write("<div class='sapExtentUILibPictureUploaderFileRelativeUpper'>");r.write("<div class='sapExtentUILibPictureUploaderFileRelativeUpperLeft'>");r.write("<input id='");r.writeEscaped(c.getId()+"-fileSelect");r.write("' type='file' accept='image/*' class='sapExtentUILibPictureUploaderFileChooser' aria-hidden='true'/>");r.write("<div id='");r.writeEscaped(c.getId()+"-fileDrag");r.write("' class='sapExtentUILibPictureUploaderFileDrag'>");r.renderControl(c.oUploadIcon);r.write("<div id='");r.writeEscaped(c.getId()+"-fileDragLabels");r.write("'>");r.renderControl(c.oDropLabel);r.renderControl(c.oOrLabel);r.renderControl(c.oLink);r.renderControl(c.oSizeLabel);r.write("</div>");r.write("<div id='");r.writeEscaped(c.getId()+"-fileUploadingControls");r.write("'>");r.renderControl(c.oProgressIndicator);r.renderControl(c.oUploadingLabel);r.write("</div>");r.write("</div>");r.write("<!--[if IE 9]>");r.write("<div id='");r.writeEscaped(c.getId()+"-IEFileUpload");r.write("' class='sapExtentUILibPictureUploaderFileIE'>");r.renderControl(c.oUploadIcon);r.write("<form id='");r.writeEscaped(c.getId()+"-ie9uploadform");r.write("'>");r.write("<input id='");r.writeEscaped(c.getId()+"-fileSelectIE");r.write("' type='file' name='fileData1' size='50' accept='image/*' class='sapExtentUILibPictureUploaderFileChooserIE'/>");r.write("</form>");r.renderControl(c.oSelectLabel);r.renderControl(c.oSizeLabel);r.write("</div>");r.write("<![endif]-->");r.write("<div id='");r.writeEscaped(c.getId()+"-userImageContainer");r.write("' class='sapExtentUILibPictureUploaderImageContainer sapExtentUILibPictureUploaderHidden'>");r.write("<img id='");r.writeEscaped(c.getId()+"-userImage");r.write("' alt='");r.write(c._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_LARGE_SIZE_ALT"));r.write("' class='sapExtentUILibPictureUploaderImage'></img>");r.write("</div>");r.write("</div>");r.write("<div class='sapExtentUILibPictureUploaderFileRelativeUpperRight'>");r.write("<div class='sapExtentUILibPictureUploaderImageContainerMedium'>");r.write("<div id='");r.writeEscaped(c.getId()+"-userImageWindowMedium");r.write("' class='sapExtentUILibPictureUploaderImageWindowMedium'>");r.write("<img id='");r.writeEscaped(c.getId()+"-userImageMedium");r.write("' alt='");r.write(c._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_MEDIUM_SIZE_ALT"));r.write("' class='sapExtentUILibPictureUploaderImageMedium'></img>");r.write("</div>");r.renderControl(c.oLabelMediumPhoto);r.write("</div>");r.write("<div class='sapExtentUILibPictureUploaderImageContainerSmall'>");r.write("<div id='");r.writeEscaped(c.getId()+"-userImageWindowSmall");r.write("' class='sapExtentUILibPictureUploaderImageWindowSmall'>");r.write("<img id='");r.writeEscaped(c.getId()+"-userImageSmall");r.write("' alt='");r.write(c._oBundle.getText("EMPFILE_PP3_PHOTO_UPLOADER_SMALL_SIZE_ALT"));r.write("' class='sapExtentUILibPictureUploaderImageSmall'></img>");r.write("</div>");r.renderControl(c.oLabelSmallPhoto);r.write("</div>");r.write("</div>");r.write("</div>");r.write("<div class='sapExtentUILibPictureUploaderFileRelativeLower'>");r.write("<div class='sapExtentUILibPictureUploaderFileRelativeLowerInner'>");r.renderControl(c.oDecreaseIcon);r.renderControl(c.oSlider);r.renderControl(c.oIncreaseIcon);r.write("</div>");r.write("</div>");r.write("</div>");};},"sap/extent/uilib/PositionMgmtDirectReports.js":function(){jQuery.sap.declare("sap.extent.uilib.PositionMgmtDirectReports");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Text");jQuery.sap.require("sap.m.PanelRenderer");jQuery.sap.require("sap.m.RadioButton");jQuery.sap.require("sap.m.RadioButtonGroup");jQuery.sap.require("sap.ui.layout.VerticalLayout");sap.m.Panel.extend("sap.extent.uilib.PositionMgmtDirectReports",{metadata:{library:"sap.extent.uilib",properties:{userDecision:{type:"string",defaultValue:null}},events:{valueChange:{}}},renderer:sap.m.PanelRenderer});sap.extent.uilib.PositionMgmtDirectReports.prototype.TAKE_OVER="TAKE_OVER";sap.extent.uilib.PositionMgmtDirectReports.prototype.DO_NOT_TAKE_OVER="DO_NOT_TAKE_OVER";sap.extent.uilib.PositionMgmtDirectReports.prototype.NOT_RELEVANT="NOT_RELEVANT";sap.extent.uilib.PositionMgmtDirectReports.prototype.FIELD_ID="take-over-direct-reports";sap.extent.uilib.PositionMgmtDirectReports.prototype.ID="posMgmtDirectReports";sap.extent.uilib.PositionMgmtDirectReports.prototype.init=function(){this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._oLabel=new sap.m.Label({text:this._oBundle.getText("ECT_HRIS_PORTLET_POSITION_DIRECT_REPORTS")}).addStyleClass("sapExtentPositionMgmtDirectReportsLabel");this._oText=new sap.m.Text({text:this._oBundle.getText("ECT_HIRE_TAKE_OVER_DIRECT_REPORTS_INFO")});this._oTakeOverRadioButton=new sap.m.RadioButton({id:this.TAKE_OVER,text:this._oBundle.getText("ECT_HIRE_TAKE_OVER_DIRECT_REPORTS_CHOICE"),selected:true});this._oKeepRadioButton=new sap.m.RadioButton({id:this.DO_NOT_TAKE_OVER,text:this._oBundle.getText("ECT_HIRE_TAKE_NOT_OVER_DIRECT_REPORTS_CHOICE")});this._oRadioButtonGroup=new sap.m.RadioButtonGroup({buttons:[this._oTakeOverRadioButton,this._oKeepRadioButton],select:[function(e){var s=e.getSource().getSelectedButton();this.setUserDecision(s.getId());},this]}).addStyleClass("sapExtentPositionMgmtDirectReportsRadioButtons");this.addContent(new sap.ui.layout.VerticalLayout({content:[this._oLabel,this._oText,this._oRadioButtonGroup]}));this.setUserDecision(this.NOT_RELEVANT);};sap.extent.uilib.PositionMgmtDirectReports.prototype.setVisible=function(v){sap.m.Panel.prototype.setVisible.call(this,v);if(v){this.setUserDecision(this.TAKE_OVER);this._oRadioButtonGroup.setSelectedButton(this._oTakeOverRadioButton);}else{this.setUserDecision(this.NOT_RELEVANT);}return this;};sap.extent.uilib.PositionMgmtDirectReports.prototype.setUserDecision=function(u){switch(u){case this.TAKE_OVER:this._oRadioButtonGroup.setSelectedButton(this._oTakeOverRadioButton);this.setProperty("userDecision",u);break;case this.DO_NOT_TAKE_OVER:this._oRadioButtonGroup.setSelectedButton(this._oKeepRadioButton);this.setProperty("userDecision",u);break;default:this.setProperty("userDecision",this.NOT_RELEVANT);}this.fireValueChange();return this;};},"sap/extent/uilib/ProgressBar.js":function(){jQuery.sap.declare("sap.extent.uilib.ProgressBar");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.ProgressBar",{metadata:{library:"sap.extent.uilib",properties:{percentage:{type:"int",group:"Misc",defaultValue:0}}}});sap.extent.uilib.ProgressBar.prototype.init=function(){};},"sap/extent/uilib/ProgressBarRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.ProgressBarRenderer");sap.extent.uilib.ProgressBarRenderer={};sap.extent.uilib.ProgressBarRenderer.render=function(r,c){var p=c.getPercentage()+"%";r.write("<div");r.writeControlData(c);r.addClass("progressBar");r.writeClasses();r.write(">");r.write("<div class='progressBarOuter'");r.writeAttribute("style","width:"+p);r.write(">");r.write("<div class='progressBarInner'>");r.write("</div>");r.write("</div>");r.write("<div class='progressBarTable'");r.write(">");r.write("<div class='progressBarText'");r.write(">");r.writeEscaped(p);r.write("</div>");r.write("</div>");r.write("</div>");};},"sap/extent/uilib/ProgressChart.js":function(){jQuery.sap.declare("sap.extent.uilib.ProgressChart");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.ProgressChart",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},editMode:{type:"boolean",group:"Misc",defaultValue:false},width:{type:"int",group:"Misc",defaultValue:33},gap:{type:"int",group:"Misc",defaultValue:1},height:{type:"int",group:"Misc",defaultValue:20},total:{type:"int",group:"Misc",defaultValue:5},filled:{type:"int",group:"Misc",defaultValue:0},color:{type:"string",group:"Misc",defaultValue:'#d8d8d8'}},events:{valueChanged:{allowPreventDefault:true}}}});jQuery.sap.require("sap.ui.thirdparty.d3");sap.extent.uilib.ProgressChart.prototype.onAfterRendering=function(){if(this._render()===true){var t=this;sap.ui.core.ResizeHandler.register(this,function(){t._render();});}};sap.extent.uilib.ProgressChart.prototype.onBeforeRendering=function(){sap.ui.core.ResizeHandler.deregister(this);};sap.extent.uilib.ProgressChart.prototype._render=function(){var t=this;if(this.getVisible()===false){return false;}var s=this;var e=this.getEditMode();var I="#"+this.getId();var r=(this.getHeight()>0)?this.getHeight():"20";var R=(this.getWidth()>0)?this.getWidth():"33";var T=(this.getTotal()>0)?this.getTotal():"5";var f=(this.getFilled()>=0)?this.getFilled():"0";var F=(this.getColor()!==null)?this.getColor():"#d8d8d8";var g=this.getGap();var h=parseInt(r,10);var w=parseInt(R,10)*parseInt(T,10)+(g*parseInt(T,10));var a=[];var b=1;a.push(d3.range(b,parseInt(T,10)+1));this.oChart=d3.select(I).append("svg").attr("width",w).attr("height",h).append("svg:g");var c=this.oChart.selectAll('g').data(a).enter().append('g').attr('transform',function(d,i){return'translate(0,'+(r+g)*i+')';}).attr("width",w).attr("height",h);c.selectAll('rect').data(function(d){return d;}).enter().append('rect').attr('x',function(d,i){return(R+g)*i;}).attr('width',parseInt(R,10)-1).attr('height',r).attr("class","greyBg");c.selectAll("rect").transition().delay(function(d,i){return i*50;}).attr("class",function(d,i){if(i<f){return"globalDiagramColor1";}return"greyBg";});c.selectAll("rect").on("click",function(n){if(n==f){return;}if(e){f=n;c.selectAll("rect").attr("class",function(d,i){if(i<f){return"sapExtentUilibProgressChartClickColor";}return"greyBg";});s.fireValueChanged({data:n});}});};},"sap/extent/uilib/ProgressChartRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.ProgressChartRenderer");sap.extent.uilib.ProgressChartRenderer={};sap.extent.uilib.ProgressChartRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.write("</div>");};},"sap/extent/uilib/RadioButtonWithIcon.js":function(){jQuery.sap.declare("sap.extent.uilib.RadioButtonWithIcon");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.RadioButton");jQuery.sap.require("sap.extent.uilib.JobAssignmentDetails");sap.m.RadioButton.extend("sap.extent.uilib.RadioButtonWithIcon",{renderer:"sap.m.RadioButtonRenderer",metadata:{properties:{details:{type:"object",group:"Misc",defaultValue:null}}}});sap.extent.uilib.RadioButtonWithIcon.prototype.init=function(){this.addStyleClass("sapExtentUilibRadioButtonWithIcon");};sap.extent.uilib.RadioButtonWithIcon.prototype.onBeforeRendering=function(){var d=this.getDetails();if(d){if(this._oLabel){this._oLabel.destroy();}this._oLabel=new sap.extent.uilib.JobAssignmentDetails(d);this._oLabel.addStyleClass("sfJobAssignmentDetails");}};},"sap/extent/uilib/SFObjectPageLayout.js":function(){jQuery.sap.require("sap.ui.core.routing.HashChanger");sap.ui.define(["jquery.sap.global","./library","sap/uxap/ObjectPageLayout","sap/m/Button","sap/sf/peopleprofile/util/pp3core/ProfileObjectPageHelper"],function(q,l,O,B,P){"use strict";var S=O.extend("sap.extent.uilib.SFObjectPageLayout",{metadata:{aggregations:{_backToTopButtonFixed:{type:"sap.m.Button",multiple:false,visibility:"hidden"}}}});S.prototype.init=function(){sap.uxap.ObjectPageLayout.prototype.init.call(this);this.getMetadata()._sClassName="sap.uxap.ObjectPageLayout";this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this.addStyleClass("sfObjectPageLayout");this.createBackToTopButtonSticky();};S.prototype.createBackToTopButtonSticky=function(){var b=new B({icon:"sap-icon://arrow-top",type:sap.m.ButtonType.Emphasized,tooltip:this.oBundle.getText("ECT_PP3_BACK_TO_TOP"),press:q.proxy(function(){this._scrollTo(0,this._iScrollToSectionDuration);},this)});b.addStyleClass("backToTopButtonFixed");this.setAggregation("_backToTopButtonFixed",b);};S.prototype.onAfterRendering=function(){sap.uxap.ObjectPageLayout.prototype.onAfterRendering.call(this);var $=q('.sapPeopleProfileApp .sapUxAPObjectPageWrapper');var p=sap.ui.core.routing.HashChanger.getInstance().getHash();var a=q('.sapPeopleProfileApp .sapUxAPObjectPageContainer');a&&a.attr("id","mainContent");var h=q('.globalBackground.sapMNavItemHidden #mainContent');var b=q('.globalBackground.sapMNavItemHidden #backToTopButtonFixedContainer');if(h)h.removeAttr('id');if(b)b.removeAttr('id');var s=this.getSections();var A=this.getAggregation("_anchorBar");if(s.length){var t=this;var d={onkeydown:function(E){if(E.keyCode==9&&E.shiftKey&&A&&E.srcControl){var i=E.srcControl.sParentAggregationName,I,m;switch(i){case"sections":I=A.getId()+"-"+E.srcControl.getId()+"-anchor";break;case"subSections":if(E.srcControl.getParent()){I=A.getId()+"-"+E.srcControl.getParent().getId()+"-anchor-internalSplitBtn";}break;}if(I){t.stopScroll=true;m=sap.ui.getCore().byId(I);setTimeout(function(){m.$().focus();var j=t._computeScrollPosition(E.srcControl);var o=t.getScrollDelegate();o.scrollTo(0,j,0,function(){t.stopScroll=false;});},0);}}}};q.each(s,function(i,j){j.setTitleUppercase(false);if(j.aDelegates.length>0){q.each(j.aDelegates,function(I,k){if(k.oDelegate&&k.oDelegate.onkeydown&&(k.oDelegate.onkeydown.toString()===d.onkeydown.toString())){j.aDelegates.splice(I,1);return false;}});}j.addEventDelegate(d,t);});if($.length>1){q.each($,function(i,j){if(j.id.search(/objectPage/i)>0){$=j;return;}})}this._renderBacktoTopButtonFixed();}if(p.indexOf("benefitsoverview")>=0||this.getId().search(/objectPage$/i)>0){if(q("#sfHeaderContainer").length>0){q("#sfHeaderContainer").remove();q("#globalHeaderFullWidthBackground").remove();}this._$sfGlobalHeader=q('<div id="sfHeaderContainer" class="sfHeaderContainer"><div id="renderTopNavSFHeader" class="globalARIAContainer globalHeaderContainerWidthBackground globalHeaderHeight"></div></div>');this._$sfGlobalHeader.prependTo('body');q('<div id="globalHeaderFullWidthBackground" class="globalHeaderFullWidthBackground"></div>').prependTo('body');this._internalAdjustHeaderBackgroundSize();}var c=q("#footer");var e=q("#"+this.sId+"_sfFooter");if(c.length){sap.ui.getCore().setModel(c.html(),"footerHTML");c.remove()}e.html(sap.ui.getCore().getModel("footerHTML"));var f=sap.ui.getCore().getModel("topNavHTML");if(f){q("#renderTopNavSFHeader").html(f);}if(window.oTimeOut){clearTimeout(window.oTimeOut);}var g=q(".sapUxAPObjectPageHeaderDetails.sapUxAPObjectPageHeaderDetailsDesign-Dark.sapContrastPlus");if(g&&g.length){g[0].setAttribute("role","region");}window.oTimeOut=setTimeout(P.framePP3Page,500)};S.prototype._updateSelectionOnScroll=function(){if(sap.uxap.ObjectPageLayout.prototype._updateSelectionOnScroll&&!this.stopScroll){sap.uxap.ObjectPageLayout.prototype._updateSelectionOnScroll.apply(this,arguments);}};S.prototype._renderBacktoTopButtonFixed=function(){var o=q("#"+this.getId());var _=q('<div id="backToTopButtonFixedContainer"></div>');_.appendTo(o);var r=new sap.ui.core.RenderManager();_.empty();var b=this.getAggregation("_backToTopButtonFixed");r.render(b,_);var s=q("#"+this.getId()+"-opwrapper");s&&s.scroll([this],this._scrollHandler);this.backtoTopShown=false;};S.prototype._scrollHandler=function(e){var t=e.data[0];var b=e.data[0].getAggregation("_backToTopButtonFixed");var a=q(e.target).find(".sapUxAPObjectPageScroll").offset().top;var c=q("#renderTopNavSFHeader").height();q("#"+b.getId()).stop();if(a<-c&&!t.backtoTopShown){q("#"+b.getId()).css("display","block");q("#"+b.getId()).animate({'bottom':'2rem','opacity':'0.8'},{duration:300,complete:function(){t.backtoTopShown=true;}});}else if(a>=-c&&t.backtoTopShown){q("#"+b.getId()).animate({'bottom':'0rem','opacity':'0.0'},{duration:300,complete:function(){t.backtoTopShown=false;q("#"+b.getId()).css("display","none");}});}};S.prototype.updateBackgroundImage=function(b){var $=q.sap.byId("SFCustomObjectPageLayoutStyle");if($.length==0){$=q('<style type="text/css" id="SFCustomObjectPageLayoutStyle"></style>');q("head").append($);}if(b==-1){this._backgroundPictureUrl="";}else{this._backgroundPictureUrl=b;}$.html(".sfObjectPageLayout .sapUxAPObjectPageHeaderDetails.sapUxAPObjectPageHeaderDetailsDesign-Dark,                            .sfObjectPageLayout .sapUxAPObjectPageHeader.sapUxAPObjectPageHeaderDesign-Dark{                                background-image: url("+this._backgroundPictureUrl+");                                 background-position: 0px 0px !important;                              }");};S.prototype._updateSizeForBackground=function(){var i=new Image();i.onload=q.proxy(function(){this._imageOriginalDimension={width:i.width,height:i.height};this._internalAdjustHeaderBackgroundSize();},this);i.src=this._backgroundPictureUrl;};S.prototype._adjustHeaderBackgroundSize=function(){if(this._backgroundPictureUrl){this._updateSizeForBackground();}};S.prototype._onUpdateContentSize=function(E){var s;if(this._preserveHeaderStateOnScroll()){this._overridePreserveHeaderStateOnScroll();}if(this._hasDynamicTitle()){this._adjustHeaderHeights();}this._requestAdjustLayout().then(function(){s=this._$opWrapper.scrollTop();this._updateSelectionOnScroll(s);}.bind(this));};sap.extent.uilib.SFObjectPageLayout.prototype._scrollTo=function(y,t){if(this._oScroller&&this._bDomReady&&!this._bSuppressScroll){q.sap.log.debug("ObjectPageLayout :: scrolling to "+y);if((t===0)&&this._shouldSnapHeaderOnScroll(y)){this._toggleHeader(true);}this._oScroller.scrollTo(0,y,250);}return this;};S.prototype._internalAdjustHeaderBackgroundSize=function(){var h=this.getHeaderTitle();if(h&&h.getHeaderDesign()==="Dark"&&this._$sfGlobalHeader){var I=this.getId()+"-headerContent";var $=q.sap.byId(I);var a=h.$();var t=0;q.each($.children(),function(i,o){t+=q(o).height();});var b={width:$.width(),height:t};if(this._imageOriginalDimension){var _=this._computeBackgroundSize(this._imageOriginalDimension,b);}this.iTotalHeaderSize=this.iHeaderTitleHeight;this._$sfGlobalHeader.css("margin-left",'auto');this._$sfGlobalHeader.css("margin-right",'auto');a.css("background-size",_);$.css("background-size",_);}};S.prototype._computeBackgroundSize=function(o,a){var w=o.width/a.width;var h=o.height/a.height;if(w<=h){return a.width+"px "+Math.round(o.height/w)+"px";}else{return Math.round(o.width/h)+"px "+a.height+"px";}};return S;},true);},"sap/extent/uilib/SFObjectPageSubSection.js":function(){jQuery.sap.declare("sap.extent.uilib.SFObjectPageSubSection");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.uxap.ObjectPageSubSection");jQuery.sap.require("sap.uxap.ObjectPageSubSectionMode");jQuery.sap.require("sap.sf.peopleprofile.util.pp3core.ProfileObjectPageHelper");sap.uxap.ObjectPageSubSection.extend("sap.extent.uilib.SFObjectPageSubSection",{renderer:"sap.uxap.ObjectPageSubSectionRenderer"});sap.extent.uilib.SFObjectPageSubSection.prototype.init=function(){this._i18nBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();if(sap.uxap.ObjectPageSubSection.prototype.init){sap.uxap.ObjectPageSubSection.prototype.init.call(this);}};sap.extent.uilib.SFObjectPageSubSection.prototype._switchSubSectionMode=function(s){sap.uxap.ObjectPageSubSection.prototype._switchSubSectionMode.call(this,s);if(window.oTimeOut){clearTimeout(window.oTimeOut);}window.oTimeOut=setTimeout(sap.sf.peopleprofile.util.pp3core.ProfileObjectPageHelper.framePP3Page,500);};sap.extent.uilib.SFObjectPageSubSection.prototype.onAfterRendering=function(){sap.uxap.ObjectPageSubSection.prototype.onAfterRendering.call(this);if(this.getMode()=="Collapsed"&&this._getSeeMoreButton()&&this._getSeeMoreButton().getDomRef()){this._getSeeMoreButton().getDomRef().removeAttribute("aria-labelledby");this._getSeeMoreButton().getDomRef().setAttribute("aria-expanded","false");this._getSeeMoreButton().getDomRef().setAttribute("aria-label",this._getSeeMoreButton().getText()+"."+this._i18nBundle.getText("ECT_PP3_MORE_CONTENT")+this.getTitle());this._getSeeMoreButton().getDomRef().setAttribute("aria-controls",this._getGrid().sId);}else if(this.getMode()=="Expanded"&&this._getSeeLessButton()&&this._getSeeLessButton().getDomRef()){this._getSeeLessButton().getDomRef().removeAttribute("aria-labelledby");this._getSeeLessButton().getDomRef().setAttribute("aria-expanded","true");this._getSeeLessButton().getDomRef().setAttribute("aria-label",this._getSeeLessButton().getText()+"."+this.getTitle());this._getSeeLessButton().getDomRef().setAttribute("aria-controls",this._getGrid().sId);}};},"sap/extent/uilib/SFSwitch.js":function(){jQuery.sap.declare("sap.extent.uilib.SFSwitch");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.Switch");sap.m.Switch.extend("sap.extent.uilib.SFSwitch",{metadata:{library:"sap.extent.uilib",properties:{stateAsString:{type:"string",group:"Misc",defaultValue:"false"}}}});sap.extent.uilib.SFSwitch._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.m");sap.extent.uilib.SFSwitch.prototype.init=function(){if(sap.m.Switch.prototype.init){sap.m.Switch.prototype.init.call(this);}this.longStringState=false;this.numberStringState=false;this.lowerStringState=false;this.yesNoStringState=false;this.booleanStringState=false;};sap.extent.uilib.SFSwitch.prototype.getStateAsString=function(){var s="false";if(this.yesNoStringState){if(this.lowerStringState){s=this.getState()?"yes":"no";}else{s=this.getState()?"YES":"NO";}}else if(this.numberStringState){s=this.getState()?"1":"0";}else if(this.longStringState){if(this.lowerStringState){s=this.getState()?"true":"false";}else{s=this.getState()?"TRUE":"FALSE";}}else if(this.booleanStringState){s=this.getState();}else if(this.lowerStringState){s=this.getState()?"t":"f";}else{s=this.getState()?"T":"F";}this.setProperty("stateAsString",s);return s;};sap.extent.uilib.SFSwitch.prototype.setStateAsString=function(v){var s=false;this.longStringState=false;this.numberStringState=false;this.lowerStringState=false;this.yesNoStringState=false;this.booleanStringState=false;switch(v){case true:this.booleanStringState=true;s=true;break;case false:this.booleanStringState=true;break;case"f":this.lowerStringState=true;break;case"t":this.lowerStringState=true;s=true;break;case"T":s=true;break;case"false":this.lowerStringState=true;this.longStringState=true;break;case"FALSE":this.longStringState=true;break;case"true":this.lowerStringState=true;this.longStringState=true;s=true;break;case"TRUE":this.longStringState=true;s=true;break;case"yes":this.lowerStringState=true;this.yesNoStringState=true;s=true;break;case"YES":this.yesNoStringState=true;s=true;break;case"no":this.lowerStringState=true;this.yesNoStringState=true;break;case"NO":this.yesNoStringState=true;break;case"0":this.numberStringState=true;break;case"1":this.numberStringState=true;s=true;break;default:this.lowerStringState=true;this.longStringState=true;v="false";}this.setProperty("stateAsString",v);this.setState(s);};},"sap/extent/uilib/SFSwitchRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.SFSwitchRenderer");jQuery.sap.require("sap.m.SwitchRenderer");sap.extent.uilib.SFSwitchRenderer=sap.ui.core.Renderer.extend(sap.m.SwitchRenderer);},"sap/extent/uilib/SearchPositionInput.js":'jQuery.sap.declare("sap.extent.uilib.SearchPositionInput");jQuery.sap.require("sap.sf.surj.shell.controls.SearchInput");jQuery.sap.require("sap.extent.uilib.SearchUserInput");jQuery.sap.require("sap.extent.uilib.util.SearchPositionUtil");var oParentClass=jQuery.sap.getObject("sap.m.Input");var oLib=jQuery.sap.getObject("sap.sf.surj.shell");var util=oLib.util;var controls=oLib.controls;\nsap.extent.uilib.SearchUserInput.extend("sap.extent.uilib.SearchPositionInput",{\nrenderer:{},\nconstructor:function(i,c){if(typeof i=="object"){c=i;i=undefined;}var m=this;var s=this._getBaseSettings(c);this._oThrottle=sap.extent.uilib.util.SearchPositionUtil.createThrottle();this._oThrottle.attachEvent("pending",jQuery.proxy(this._onPending,this));this._oThrottle.attachEvent("pageReady",jQuery.proxy(this._onPageReady,this));this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();if(typeof i=="string"){oParentClass.call(this,i,s);}else{oParentClass.call(this,s);}this._lazyLoadingRow=new sap.m.ColumnListItem({cells:new sap.m.BusyIndicator()});this._noResultsRow=new sap.m.ColumnListItem({cells:new sap.m.Text({text:this.oBundle.getText("COMMON_No_Results")})});},\n_onPageReady:function(e){if(!this.bOpenedByButton&&e.getParameter("criteria").searchValue!==this.getValue()){return;}if(this.inLazyLoading){this.inLazyLoading=false;this.removeSuggestionRow(this._lazyLoadingRow);}if(e.getParameter("totalCount")===0){this.addSuggestionRow(this._noResultsRow);}else{if(e.getParameter("hasMore")&&this._oSuggestionPopup.getContentHeight()!=="250px"){this._oSuggestionPopup.setContentHeight("250px");}sap.sf.surj.shell.controls.SearchInput.prototype._onPageReady.apply(this,arguments);}},\n_doSearch:function(q){this._oSuggestionPopup.setContentHeight("");sap.extent.uilib.SearchUserInput.prototype._doSearch.call(this,q);},\n_createSearchResult:function(r,q){return new controls.SearchResult({text:this._getDisplayText(r),searchValue:q});},\n_getDisplayText:function(r){return r.primaryDisplayText;},\n_hasPhoto:function(){return false;}\n});\n',"sap/extent/uilib/SearchPositionInputRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchPositionInputRenderer");jQuery.sap.require("sap.extent.uilib.SearchUserInput");sap.extent.uilib.SearchPositionInputRenderer={};},"sap/extent/uilib/SearchTalentPoolInput.js":'jQuery.sap.declare("sap.extent.uilib.SearchTalentPoolInput");jQuery.sap.require("sap.sf.surj.shell.controls.SearchInput");jQuery.sap.require("sap.extent.uilib.SearchUserInput");jQuery.sap.require("sap.extent.uilib.util.SearchTalentPoolUtil");var oParentClass=jQuery.sap.getObject("sap.m.Input");var oLib=jQuery.sap.getObject("sap.sf.surj.shell");var util=oLib.util;var controls=oLib.controls;\nsap.extent.uilib.SearchUserInput.extend("sap.extent.uilib.SearchTalentPoolInput",{\nrenderer:{},\nconstructor:function(i,c){if(typeof i=="object"){c=i;i=undefined;}var m=this;var s=this._getBaseSettings(c);this._oThrottle=sap.extent.uilib.util.SearchTalentPoolUtil.createThrottle();this._oThrottle.attachEvent("pending",jQuery.proxy(this._onPending,this));this._oThrottle.attachEvent("pageReady",jQuery.proxy(this._onPageReady,this));this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();if(typeof i=="string"){oParentClass.call(this,i,s);}else{oParentClass.call(this,s);}this._lazyLoadingRow=new sap.m.ColumnListItem({cells:new sap.m.BusyIndicator()});this._noResultsRow=new sap.m.ColumnListItem({cells:new sap.m.Text({text:this.oBundle.getText("COMMON_No_Results")})});},\n_onPageReady:function(e){if(!this.bOpenedByButton&&e.getParameter("criteria").searchValue!==this.getValue()){return;}if(this.inLazyLoading){this.inLazyLoading=false;this.removeSuggestionRow(this._lazyLoadingRow);}if(e.getParameter("totalCount")===0){this.addSuggestionRow(this._noResultsRow);}else{if(e.getParameter("hasMore")&&this._oSuggestionPopup.getContentHeight()!=="250px"){this._oSuggestionPopup.setContentHeight("250px");}sap.sf.surj.shell.controls.SearchInput.prototype._onPageReady.apply(this,arguments);}},\n_doSearch:function(q){this._oSuggestionPopup.setContentHeight("");sap.extent.uilib.SearchUserInput.prototype._doSearch.call(this,q);},\n_createSearchResult:function(r,q){return new controls.SearchResult({text:this._getDisplayText(r),searchValue:q});},\n_getDisplayText:function(r){return r.primaryDisplayText;},\n_hasPhoto:function(){return false;}\n});\n',"sap/extent/uilib/SearchTalentPoolInputRender.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchTalentPoolInputRender");jQuery.sap.require("sap.sf.surj.common.SearchInput");sap.extent.uilib.SearchTalentPoolInputRenderer={};},"sap/extent/uilib/SearchUserInput.js":'jQuery.sap.declare("sap.extent.uilib.SearchUserInput");jQuery.sap.require("sap.sf.surj.shell.controls.SearchInput");jQuery.sap.require("sap.ui.core.IconPool");jQuery.sap.require("sap.m.Input");jQuery.sap.require("sap.m.BusyIndicator");var oParentClass=jQuery.sap.getObject("sap.m.Input");var oLib=jQuery.sap.getObject("sap.sf.surj.shell");var util=oLib.util;\nsap.sf.surj.shell.controls.SearchInput.extend("sap.extent.uilib.SearchUserInput",{\nmetadata:{properties:{helpIconType:{type:"string",defaultValue:"value-help"},settings:{type:"object",defaultValue:{additionalCriteria:{includeInactiveEmpl:"NO",includeInactivePersons:"NO",includeExternalPersons:"NO",resultScope:"Employment",includeHomeEmpl:"YES",includeSecondEmpl:"YES",displayLocation:"NO"},legacySearchCriteria:{maxresults:30}}}},events:{suggestionItemSelected:{}}},\n_getBaseSettings:function(c){var s={id:c.id,placeholder:c.placeholder,filterSuggests:false,showSuggestion:true,showTableSuggestionValueHelp:false,startSuggestion:c.startSuggestion||2,suggestionColumns:this._getSuggestionColumns(),suggest:jQuery.proxy(this._onSuggest,this),liveChange:jQuery.proxy(this._onLiveChange,this),suggestionItemSelected:c.suggestionItemSelected,searchType:c.searchType,showButton:c.showButton,showValueHelp:c.showValueHelp,helpIconType:c.helpIconType};if(c.itemSelected){s.itemSelected=c.itemSelected;}return s;},\nrenderer:{},\n_onLiveChange:function(){this.setValueState("None");this.setValueStateText("");},\n_onSuggestionItemSelected:function(){this.fireSuggestionItemSelected();},\nconstructor:function(i,c){if(typeof i=="object"){c=i;i=undefined;}var m=this;var s=this._getBaseSettings(c);this._oThrottle=util.SearchUtil.createThrottle();this._oThrottle.attachEvent("pending",jQuery.proxy(this._onPending,this));this._oThrottle.attachEvent("pageReady",jQuery.proxy(this._onPageReady,this));this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();if(typeof i=="string"){oParentClass.call(this,i,s);}else{oParentClass.call(this,s);}this._lazyLoadingRow=new sap.m.ColumnListItem({cells:new sap.m.BusyIndicator()});this._noResultsRow=new sap.m.ColumnListItem({cells:new sap.m.Text({text:this.oBundle.getText("COMMON_No_Results")})});},\n_onPageReady:function(e){if(this.inLazyLoading){this.inLazyLoading=false;this.removeSuggestionRow(this._lazyLoadingRow);}if(e.getParameter("totalCount")===0){this.addSuggestionRow(this._noResultsRow);}else{sap.sf.surj.shell.controls.SearchInput.prototype._onPageReady.call(this,e);}},\n_onPending:function(){this.addSuggestionRow(this._lazyLoadingRow);this.inLazyLoading=true;}\n});\nsap.extent.uilib.SearchUserInput.prototype._getValueHelpIcon=function(){var t=this;if(!this._oValueHelpIcon){var u=sap.ui.core.IconPool.getIconURI(this.getHelpIconType());this._oValueHelpIcon=sap.ui.core.IconPool.createControlByURI({id:this.getId()+"__vhi",src:u,useIconTooltip:false,noTabStop:true});this._oValueHelpIcon.addStyleClass("sapMInputValHelpInner");this._oValueHelpIcon.attachPress(function(e){if(!t.getValueHelpOnly()){t.fireValueHelpRequest({fromSuggestions:false});}});}return this._oValueHelpIcon;};\n',"sap/extent/uilib/SearchUserInputRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchUserInputRenderer");jQuery.sap.require("sap.sf.surj.common.SearchInput");sap.extent.uilib.SearchUserInputRenderer={};},"sap/extent/uilib/SearchableComboBox.js":'jQuery.sap.declare("sap.extent.uilib.SearchableComboBox");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.SearchableComboBoxList");jQuery.sap.require("sap.m.ScrollContainer");jQuery.sap.require("sap.m.ComboBox");\nsap.m.ComboBox.extend("sap.extent.uilib.SearchableComboBox",{\nmetadata:{library:"sap.extent.uilib",properties:{growingThreshold:{type:"int",group:"Misc",defaultValue:7},pagesLoaded:{type:"int",group:"Misc",defaultValue:null},searchValue:{type:"string",group:"Misc",defaultValue:null},hideOpenButton:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},selectedKeyWithData:{type:"string",group:"Misc",defaultValue:null},selectionDisabled:{type:"boolean",group:"Misc",defaultValue:false}},events:{searchInputted:{},pageMoreData:{},populateDropdown:{},selectionKeyChanged:{},getLabel:{}},},\nrenderer:"sap.m.ComboBoxRenderer"\n});\nsap.extent.uilib.SearchableComboBox.LINES_TO_DISPLAY=7;var ui5ContenDensitySupportMeta=document.getElementById("ui5-content-density-support");var isCompactDisabled;if(ui5ContenDensitySupportMeta){var ui5ContentDensitySupportEnabled=ui5ContenDensitySupportMeta.getAttribute("content");isCompactDisabled=!(ui5ContentDensitySupportEnabled=="true"&&!sap.ui.Device.support.touch);}else{isCompactDisabled=!jQuery("html").hasClass("sapUiSizeCompact");}sap.extent.uilib.SearchableComboBox.isCompactDisabled=isCompactDisabled;if(sap.extent.uilib.SearchableComboBox.isCompactDisabled){sap.extent.uilib.SearchableComboBox.DEFAULT_HEIGHT=237;sap.extent.uilib.SearchableComboBox.DEFAULT_LINE_HEIGHT=39;}else{sap.extent.uilib.SearchableComboBox.DEFAULT_HEIGHT=224;sap.extent.uilib.SearchableComboBox.DEFAULT_LINE_HEIGHT=32;}sap.extent.uilib.SearchableComboBox.COMBO_HEIGHT=sap.extent.uilib.SearchableComboBox.DEFAULT_HEIGHT;sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT=sap.extent.uilib.SearchableComboBox.DEFAULT_LINE_HEIGHT;\nsap.extent.uilib.SearchableComboBox.prototype.init=function(){if(sap.m.ComboBox.prototype.init){sap.m.ComboBox.prototype.init.call(this);}this.attachBrowserEvent("touchend mouseup",jQuery.proxy(function(e){this.handFocus(e);}),this);this.commonUtils=sap.extent.uilib.util.CommonUtils.getInstance();this.firstLoad=true;this.ignoreGrow=true;this.cacheUsed=false;this.openDropdown=true;this.shouldSetTitle=false;this.totalRecords=1;this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this.comboScroll=new sap.m.ScrollContainer();var s=sap.extent.uilib.SearchableComboBox.COMBO_HEIGHT;this.comboScroll.setHeight(s+"px");this.comboScroll.setVertical(true);this.comboScroll.setHorizontal(false);this.comboScroll.setWidth("100%");this.comboScroll.getScrollDelegate()._onScroll=jQuery.proxy(this.onScrollEnd,this);var a=this.getIcon();if(a){a.attachPress(function(e){var p;if(!this.getEnabled()||!this.getEditable()){return;}if(this._bShouldClosePicker){this._bShouldClosePicker=false;this.close();return;}this.bOpenedByKeyboardOrButton=true;if(this.isPlatformTablet()){p=this.getPicker();p.setInitialFocus(p);}var C=sap.m.ComboBoxBaseRenderer.CSS_CLASS;this.openDropdown=true;this.firePopulateDropdown();if(this.isOpen()){this.addStyleClass(C+"Pressed");setTimeout(function(){this.removeStyleClass("sapMFocus");}.bind(this),100);}},this);}};\nsap.extent.uilib.SearchableComboBox.prototype.createList=function(){this._oList=new sap.extent.uilib.SearchableComboBoxList();this._oList.setWidth("100%");this._oList.setShowSeparators(sap.m.ListSeparators.None);this._oList.setMode(sap.m.ListMode.SingleSelectMaster);this._oList.attachUpdateFinished(this._listUpdateFinished,this);this._oList.addStyleClass("sapExtentUilibSearchableComboBox");return this._oList;};\nsap.extent.uilib.SearchableComboBox.prototype.onScrollEnd=function(){var c=this.comboScroll.getScrollDelegate().getScrollTop();this.comboScroll.scrollTo();if(this.comboScroll.getScrollDelegate().getScrollTop()===0&&c>(this.comboScroll.getScrollDelegate().getMaxScrollTop()*0.05)&&c>100){this.comboScroll.scrollTo(0,c,10);if(this.comboScroll.getScrollDelegate().getMaxScrollTop()===0){return;}}if(parseInt(this.comboScroll.getScrollDelegate().getScrollTop())===this.comboScroll.getScrollDelegate().getMaxScrollTop()||Math.ceil(this.comboScroll.getScrollDelegate().getScrollTop())===this.comboScroll.getScrollDelegate().getMaxScrollTop()||(this.comboScroll.getScrollDelegate().getScrollTop()>1000&&this.comboScroll.getScrollDelegate().getScrollTop()>=(this.comboScroll.getScrollDelegate().getMaxScrollTop()-8))){this._growing();}};\nsap.extent.uilib.SearchableComboBox.prototype.getScrollPosition=function(){return this.comboScroll.getScrollDelegate().getScrollTop();};\nsap.extent.uilib.SearchableComboBox.prototype.setScrollPosition=function(s){this.comboScroll.scrollTo(0,s,10);};\nsap.extent.uilib.SearchableComboBox.prototype.handFocus=function(e){if(e.target.select){e.target.select()}else{this.$("inner").select()};};\nsap.extent.uilib.SearchableComboBox.prototype.onAfterRendering=function(){if(sap.m.ComboBox.prototype.onAfterRendering){sap.m.ComboBox.prototype.onAfterRendering.call(this);}if(this.getHideOpenButton()){var o=this.getOpenArea();jQuery(o).addClass("sapExtentUilibSearchableComboBoxButtonInvisible");}this.commonUtils.calculateComboWidth(this.getValue()||this.getPlaceholder(),this,true);sap.extent.uilib.util.CommonUtils.setStrikedSpanId(this);};\nsap.extent.uilib.SearchableComboBox.prototype.onAfterRenderingList=function(){if(sap.m.ComboBox.prototype.onAfterRenderingList){this.getList()&&this.getList().addStyleClass("sapMListFocus");sap.m.ComboBox.prototype.onAfterRenderingList.call(this);}this._listUpdateFinished();};\nsap.extent.uilib.SearchableComboBox.prototype.clearFilter=function(){};\nsap.extent.uilib.SearchableComboBox.prototype.onsapshow=function(e){if(!this.getEnabled()||!this.getEditable()){return;}e.setMarked();if(e.keyCode===jQuery.sap.KeyCodes.F4){e.preventDefault();}if(this.isOpen()){this.close();return;}if(e.altKey&&e.keyCode===jQuery.sap.KeyCodes.ARROW_DOWN){this.open();return;}this.firePopulateDropdown();sap.m.ComboBox.prototype.selectText.apply(this,[0,this.getValue().length]);};\nsap.extent.uilib.SearchableComboBox.prototype._handleKeyboardNavigation=function(i){return;var d=this.getFocusDomRef(),s=d.selectionStart,S=d.selectionEnd,I=s!==S,t=d.value.substring(0,d.selectionStart),o=this.getSelectedItem();if(i&&i.getKey()){this.updateDomValue(i.getTitle());this.setSelection(i,{suppressInvalidate:true});this.fireSelectionChange({selectedItem:i});this.fireSelectionKeyChanged({value:i.getTitle(),key:i.getKey()});i=this.getSelectedItem();if(!jQuery.sap.startsWithIgnoreCase(i.getTitle(),t)||!I){s=0;}sap.m.ComboBox.prototype.selectText.apply(this,[s,d.value.length]);}};\nsap.extent.uilib.SearchableComboBox.prototype.onsapdown=function(e){if(!this.getEnabled()||!this.getEditable()){return;}this.syncPickerContent();e.setMarked();e.preventDefault();if(!this.isOpen()){this.firePopulateDropdown();}else{var n,s=this.getList().getItems(),S=this.getList().getSelectedItem();n=s[this._isLoadingItem(S)?0:s.indexOf(S)+1];if(n&&!this._isLoadingItem(n)){this.getList().setSelectedItem(n);sap.m.ComboBox.prototype.selectText.apply(this,[0,999]);this.scrollToItem(n);this._allowScreenReaderToReadOptionLabel(n);}else{if(s.length<=this.getList().getBinding("items").iLength){this._growing();this.comboScroll.scrollTo(0,(s.length+1)*sap.extent.uilib.SearchableComboBox.DEFAULT_LINE_HEIGHT);}}}};\nsap.extent.uilib.SearchableComboBox.prototype._allowScreenReaderToReadOptionLabel=function(l){if(l){var d=this.getFocusDomRef();if(d){d.setAttribute("aria-activedescendant",l.getId());}}};\nsap.extent.uilib.SearchableComboBox.prototype.scrollToItem=function(i){var p=this.getPicker(),P=p.getDomRef("cont"),I=i&&i.getDomRef();if(!p||!P||!I){return;}var a=P.scrollTop,b=I.offsetTop,c=P.clientHeight,d=I.offsetHeight;if(a>=b){this.comboScroll.scrollTo(0,b);}else if((b+d)>(a+c)){this.comboScroll.scrollTo(0,Math.ceil(b+d-c));}};\nsap.extent.uilib.SearchableComboBox.prototype.onsapup=function(e){if(!this.getEnabled()||!this.getEditable()){return;}e.setMarked();e.preventDefault();var p,s=this.getList().getItems();p=s[s.indexOf(this.getList().getSelectedItem())-1];if(p){this.getList().setSelectedItem(p);sap.m.ComboBox.prototype.selectText.apply(this,[0,999]);this.scrollToItem(p);this._allowScreenReaderToReadOptionLabel(p);}};\nsap.extent.uilib.SearchableComboBox.prototype.onsapenter=function(e){sap.m.ComboBoxBase.prototype.onsapenter.apply(this,arguments);e.setMarked();if(!this.getEnabled()||!this.getEditable()){return;}if(this.getList().getSelectedItem()){var v=this.getList().getSelectedItem().getProperty("title");var k=this.getList().getSelectedItem().getProperty("key");if(this.getSelectionDisabled()==true&&v===this.oBundle.getText("ECT_NO_DATA")){v="";k="";}this.setValue(v);this.setSelectedKey(k);this.fireSelectionChange({selectedKey:k});this.fireSelectionKeyChanged({value:v,key:k});this.setProperty("value",v,true);sap.m.ComboBox.prototype.selectText.apply(this,[0,v.length]);}if(this.isOpen()){this.close();}};\nsap.extent.uilib.SearchableComboBox.prototype.selectText=function(e){};\nsap.extent.uilib.SearchableComboBox.prototype.onsapfocusleave=function(e){if(sap.m.ComboBox.prototype.onsapfocusleave){sap.m.ComboBox.prototype.onsapfocusleave.apply(this,arguments);}if(typeof event!=="undefined"&&event.target&&!this.isControlArea(event.target)&&!this.commonUtils.isIE10OrOlder()){var p=this.getPicker();if(p&&!p.hasStyleClass("sapExtentUilibSearchableComboBoxDialog")&&!sap.ui.Device.system.phone){this.close();}}if(this.commonUtils.isIE10OrOlder()||this.commonUtils.isFirefox()){var P=this.getAggregation("picker");if(!e.relatedControlId||!P){return;}var c=sap.ui.getCore().byId(e.relatedControlId),f=c&&c.getFocusDomRef();if(!jQuery.sap.containsOrEquals(P.getFocusDomRef(),f)){this.close();}}};\nsap.extent.uilib.SearchableComboBox.prototype.isControlArea=function(d){if(d==this.getFocusDomRef()||d==this.getOpenArea()||d==(this.getList()?this.getList().getDomRef():null)||d==this.getDomRef()||d==(this.getPicker()?this.getPicker().getDomRef():null)||d==this.comboScroll.getDomRef()||(this.comboScroll.getDomRef()&&this.comboScroll.getDomRef().contains(d))){return true;}return false;};\nsap.extent.uilib.SearchableComboBox.prototype.onItemPress=function(e){sap.m.ComboBox.prototype.onItemPress.apply(this,[e]);if(e.getParameters()&&e.getParameters().listItem&&e.getParameters().listItem.getProperty("title")){var k=e.getParameters().listItem.getProperty("key");var t=e.getParameters().listItem.getProperty("title");this.close();if(this.getSelectionDisabled()==true&&k!=0){return;}else if(this.getSelectionDisabled()==true&&t===this.oBundle.getText("ECT_NO_DATA")){k="";t="";}this.setSelectedKey(k);this.fireSelectionChange({selectedKey:k});this.fireSelectionKeyChanged({value:t,key:k});this.setProperty("value",t,true);sap.m.ComboBox.prototype.selectText.apply(this,[0,t.length]);}};\nsap.extent.uilib.SearchableComboBox.prototype.getItems=function(){return this.getList()?this.getList().getItems():[];};\nsap.extent.uilib.SearchableComboBox.prototype.oninput=function(e){if(this._bIgnoreNextInput){this._bIgnoreNextInput=false;e.setMarked("invalid");return;}if(this._bIgnoreNextInputNonASCII){this._bIgnoreNextInputNonASCII=false;e.setMarked("invalid");return;}sap.m.ComboBoxBase.prototype.oninput.apply(this,arguments);if(!this.getPicker()){this.syncPickerContent();}var v=this.getValue();if(this.getPickerType()==="Dialog"){if(this.getPickerTextField()&&this.getPickerTextField().getDomRef()&&this.getPickerTextField().getValue().length){v=this.getPickerTextField().getValue()}}var s=this._lastValue;if(this.hasOwnProperty("sfLastValue")){var f=this.getItemByKey(this.sfLastValue);s=f?f.getText():"";}if(v===s&&this.getPickerType()!="Dialog"){return;}clearTimeout(this.timer);var m=500;var S=this.getSelectedKey();this.timer=setTimeout(jQuery.proxy(function(){if(v.length>1||this.isComposingCharacter()){this.fireSearchInputted({data:v});}},this),m);if(v===""){this.setSelectedKey("");if(this.getSelectedKey()!==S){this.fireSelectionChange({selectedKey:this.getSelectedKey()});}}};\nsap.extent.uilib.SearchableComboBox.prototype.revertSelection=function(){var p,P=this.getPickerTextField();if(this._oSelectedItemBeforeOpen){this.setSelectedItem(this._oSelectedItemBeforeOpen);this.setValue(this._sValueBeforeOpen);if(this.getSelectedItem()===null){p=this._sValueBeforeOpen;}else{p=this._oSelectedItemBeforeOpen&&this._oSelectedItemBeforeOpen.getText();}P&&P.setValue(p);}};\nsap.extent.uilib.SearchableComboBox.prototype._growing=function(){if(this.getModel(this.getList().getBindingInfo("items").model).getData().getNextPage){this.firePageMoreData();return;}if((this.getPagesLoaded())*this.getGrowingThreshold()>=this.totalRecords){return;}this.firePageMoreData();};\nsap.extent.uilib.SearchableComboBox.prototype._listUpdateFinished=function(e){var s=this.getItemByKey(this.getSelectedKey().toString());if(!!s){this.setSelectedItem(s);}};\nsap.extent.uilib.SearchableComboBox.prototype.bindItems=function(p,t,s,f){if(this.cacheUsed){var a=this.getPicker();if(!this.isOpen()){this._overrideGetDocHeight(a);a.open();}}if(!this.getPicker){this.syncPickerContent();}this.getList().bindItems(p,t,s,f);var i=this.getList().getBinding("items");var m=this.getModel(this.getList().getBindingInfo("items").model);if(i){if(m&&m.getData()&&m.getData().totalCount){if(this.getList().getBinding("items").iLength!==m.getData().totalCount){this.getList().getBinding("items").iLength=m.getData().totalCount;}this.totalRecords=m.getData().totalCount;}else if(m&&m.getData()&&m.getData().totalNumberOfRecords){if(this.getList().getBinding("items").iLength!==m.getData().totalNumberOfRecords){this.getList().getBinding("items").iLength=m.getData().totalNumberOfRecords;}this.totalRecords=m.getData().totalNumberOfRecords;}if(this.shouldSetTitle&&this.getSelectedKey()&&this.getSelectedKey()!=""){this.setTitleFromData(i.oList,t.getBindingPath("title"));}}};\nsap.extent.uilib.SearchableComboBox.prototype._getList=function(){var p=this.getPicker();if(p){var c=p.getContent()&&p.getContent()[0];if(sap.ui.Device.system.phone&&p.getContent().length>1){c=p.getContent()[1]}if(c&&c.isA("sap.m.List")){return c;}else{var s=c&&c.getContent();if(s&&s.length>0){return s[0];}}}return null;};\nsap.extent.uilib.SearchableComboBox.prototype.setTitleFromData=function(l,t){var k=this.getSelectedKey();this.shouldSetTitle=false;var i=0;for(i=0;i<l.length;i++){if(k==l[i].id){this.setValue(l[i][t]);this._sValue=this.getValue();this.fireSelectionKeyChanged({value:this._sValue,key:k});}}};\nsap.extent.uilib.SearchableComboBox.prototype.setModel=function(d,n){var s=0;this.ignoreGrow=true;sap.m.ComboBox.prototype.setModel.call(this,d,n);var l=sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT/16;if(sap.extent.uilib.SearchableComboBox.LINES_TO_DISPLAY>=d.getData().totalCount){this.comboScroll.setVertical(false);if(d.getData().totalCount==0){this.comboScroll.setHeight(sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT+"px");}else{s=d.getData().totalCount*l;this.comboScroll.setHeight(s+"rem");}}else if(sap.extent.uilib.SearchableComboBox.LINES_TO_DISPLAY>=d.getData().totalNumberOfRecords){this.comboScroll.setVertical(false);if(d.getData().totalNumberOfRecords==0){this.comboScroll.setHeight(sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT+"px");}else{var N=this.getItems().length>0?this.getItems().length:d.getData().totalNumberOfRecords;s=N*l;this.comboScroll.setHeight(s+"rem");}}else if(d.getData().Result&&sap.extent.uilib.SearchableComboBox.LINES_TO_DISPLAY>=d.getData().Result.length){this.comboScroll.setVertical(false);sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT=63;s=(sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT*d.getData().Result.length);s=s==0?sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT:s;this.comboScroll.setHeight(s+"px");}else if(d.getData().getNextPage===false){this.comboScroll.setVertical(false);s=(sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT*d.getData().results.length);s=s==0?sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT:s;this.comboScroll.setHeight(s+"px");}else{this.comboScroll.setVertical(true);if(this.getPickerType()==="Dialog"&&sap.ui.Device.system.phone){this.comboScroll.setHeight("100%");}else{this.comboScroll.setHeight(sap.extent.uilib.SearchableComboBox.COMBO_HEIGHT+"px");}}var p=this.getPicker();if(p){if(this.getPickerType()==="Dialog"){p.addStyleClass("sapExtentUilibSearchableComboBoxDialog")}this._overrideGetDocHeight(p);var P=p.getContent();if(P){var a=P.length;if(a&&!(P[0]instanceof sap.m.ScrollContainer)){for(var i=0;i<a;i++){if(P[i]instanceof sap.m.List){this.comboScroll.addContent(P[i]);break;}}!sap.ui.Device.system.phone&&p.destroyContent();p.addContent(this.comboScroll);}}if(!this.isOpen()&&this.openDropdown){p.open();}this.openDropdown=true;}};\nsap.extent.uilib.SearchableComboBox.prototype._overrideGetDocHeight=function(p){if(this.getPickerType()==="Dialog"){return;}if(window.navigator.userAgent.indexOf("Edge/")>0){p._getDocHeight=function(){var b=document.body,h=document.documentElement;return Math.max(b.offsetHeight,h.clientHeight,h.offsetHeight);};}};\nsap.extent.uilib.SearchableComboBox.prototype.setSelectedKey=function(v){this.setProperty("selectedKey",v);if(this.getList()&&this.getList().getBindingInfo("items")&&this.getList().getBindingInfo("items").template&&this.getList().getBindingInfo("items").template.getBindingPath("title")&&this.getList().getBindingInfo("items").template.getBindingPath("title")!==""&&this.getList().getBinding("items")){var t=this.getList().getBindingInfo("items").template.getBindingPath("title");var i=this.getList().getBinding("items");this.setTitleFromData(i.oList,t);}return this.getProperty("selectedKey");};\nsap.extent.uilib.SearchableComboBox.prototype.setValue=function(v,i){var s=this.getSelectedKey();if((v===""||typeof v==="undefined")&&s&&!i){this.fireGetLabel({selectedKey:s});return;}sap.m.ComboBoxBase.prototype.setValue.call(this,v);var w=v;if(!v){w=this.getPlaceholder();}this.commonUtils.calculateComboWidth(w,this);};\nsap.extent.uilib.SearchableComboBox.prototype.setSelectedKeyWithData=function(v){this.setSelectedKey(v);if(v!=""){this.openDropdown=false;this.shouldSetTitle=true;this.fireSearchInputted({data:v});}else{this.setProperty("value",v);}return this;};\nsap.extent.uilib.SearchableComboBox.prototype.getSelectedItem=function(){return this.getList()?this.getList().getSelectedItem():null;};\nsap.extent.uilib.SearchableComboBox.prototype.setSelectedItem=function(i){if(typeof i==="string"){i=sap.ui.getCore().byId(i);}if(!(i instanceof sap.m.StandardListItem)&&i!==null){jQuery.sap.log.warning(\'Warning: setSelectedItem() "vItem" has to be an instance of sap.ui.core.Item, a valid sap.ui.core.Item id, or null on\',this);return this;}if(!i){i=this.getDefaultSelectedItem();}this.setSelection(i,{suppressInvalidate:true});if(i){this.setValue(i.getTitle(),true);}else if(i&&i===this.getDefaultSelectedItem()){this.setValue(i.getTitle(),true);}else{this.setValue("",true);}return this;};\nsap.extent.uilib.SearchableComboBox.prototype.setSelection=function(i){var l=this.getList(),k;if(l){l.setSelectedItem(i,true);}this.setAssociation("selectedItem",i,true);this.setProperty("selectedItemId",(i instanceof sap.ui.core.Item)?i.getId():i,true);if(typeof i==="string"){i=sap.ui.getCore().byId(i);}k=i?i.getKey():"";this.setProperty("selectedKey",k,true);this._handleAriaActiveDescendant(i);};\nsap.extent.uilib.SearchableComboBox.prototype._handleAriaActiveDescendant=function(i){var d=this.getFocusDomRef();if(d){if(i&&this.isOpen()){d.setAttribute("aria-activedescendant",i.getId());}else{d.removeAttribute("aria-activedescendant");}}};\nsap.extent.uilib.SearchableComboBox.prototype._fillList=function(v){};\nsap.extent.uilib.SearchableComboBox.prototype.filterItems=function(o){return this.getItems();};\nsap.extent.uilib.SearchableComboBox.prototype.setProperty=sap.m.ComboBoxBase.prototype.setProperty;\nsap.extent.uilib.SearchableComboBox.prototype.getItemByKey=function(k){var i=this.getList()?this.getList().getItems():[];for(var a=0,l=i.length;a<l;a++){if(i[a].getKey()===k){return i[a];}}return null;};\nsap.extent.uilib.SearchableComboBox.prototype.setValueState=function(e){if(sap.m.ComboBox.prototype.setValueState){sap.m.ComboBox.prototype.setValueState.apply(this,arguments);}this.addStyleClass("sapMComboBoxBaseState");};\nsap.extent.uilib.SearchableComboBox.prototype._isLoadingItem=function(i){if(i!=null&&i.getKey()===""&&i.getText()==sap.ui.getCore().getModel("i18n").getResourceBundle().getText("COMMON_loading")){return true;}else{return false;}};\n',"sap/extent/uilib/SearchableComboBoxList.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchableComboBoxList");jQuery.sap.require("sap.m.List");sap.m.List.extend("sap.extent.uilib.SearchableComboBoxList",{renderer:"sap.m.ListRenderer"});sap.extent.uilib.SearchableComboBoxList.prototype.findItem=function(p,v){if(p=="text"){p="title";}var i=this.getItems();for(var I=0,l=i.length;I<l;I++){if(i[I].getProperty(p)===v){return i[I];}}return null;};},"sap/extent/uilib/SearchableComboBoxListItem.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchableComboBoxListItem");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.StandardListItem");jQuery.sap.require("sap.m.ListMode");sap.m.StandardListItem.extend("sap.extent.uilib.SearchableComboBoxListItem",{metadata:{library:"sap.extent.uilib",properties:{key:{type:"string",group:"Misc",defaultValue:null},propagation:{type:"object",group:"Misc",defaultValue:null}}}});sap.extent.uilib.SearchableComboBoxListItem.prototype.getText=function(){return this.getTitle();};sap.extent.uilib.SearchableComboBoxListItem.prototype.ontap=function(e){if(this._eventHandledByControl){return;}if(this.isIncludedIntoSelection()){if(this.getMode()==sap.m.ListMode.MultiSelect){this.setSelected(!this.getSelected());}else if(!this.getSelected()){this.setSelected(true);}}else if(this.hasActiveType()){window.clearTimeout(this._timeoutIdStart);window.clearTimeout(this._timeoutIdEnd);this.setActive(true);if(sap.ui.Device.os.ios){this.focus();}jQuery.sap.delayedCall(180,this,function(){this.setActive(false);});jQuery.sap.delayedCall(0,this,function(){this.fireTap();this.firePress();});}this.informList("Press",e.srcControl);};},"sap/extent/uilib/SearchableComboBoxListItemRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchableComboBoxListItemRenderer");jQuery.sap.require("sap.m.StandardListItemRenderer");sap.extent.uilib.SearchableComboBoxListItemRenderer=sap.ui.core.Renderer.extend(sap.m.StandardListItemRenderer);sap.extent.uilib.SearchableComboBoxListItemRenderer.openItemTag=function(r,c){if(c.getTitle().trim()==""&&c.getKey()==""){r.addClass("sapExtentUilibComboBoxSeparatorItem");}sap.m.StandardListItemRenderer.openItemTag.call(this,r,c);};},"sap/extent/uilib/SearchableComboBoxWorkSchedule.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchableComboBoxWorkSchedule");jQuery.sap.require("sap.extent.uilib.util.BusyLoading");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.SearchableComboBox");sap.extent.uilib.SearchableComboBox.extend("sap.extent.uilib.SearchableComboBoxWorkSchedule",{renderer:"sap.m.ComboBoxRenderer",metadata:{properties:{userId:{type:"string",group:"Misc",defaultValue:null},effectiveDate:{type:"string",group:"Misc",defaultValue:null},oldValueInternalId:{type:"string",group:"Data",defaultValue:null},workScheduleInternalId:{type:"string",group:"Misc",defaultValue:null},companyInternalId:{type:"string",group:"Misc",defaultValue:null},manageWorkScheduleAllowed:{type:"boolean",group:"Misc",defaultValue:null},timeRecordingVariant:{type:"string",group:"Misc"}},events:{getValueByFieldId:{},workScheduleFinderAssignment:{},}},});sap.extent.uilib.SearchableComboBoxWorkSchedule.COMPANY_FIELD_ID="jobInfo-company";sap.extent.uilib.SearchableComboBoxWorkSchedule.EFFECTIVE_DATE_FIELD_ID="effective-date";sap.extent.uilib.SearchableComboBoxWorkSchedule.TIME_REC_VARIANT_FIELD_ID="jobInfo-time-recording-variant";sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype.onBeforeRendering=function(){if(sap.extent.uilib.SearchableComboBox.prototype.onBeforeRendering){sap.extent.uilib.SearchableComboBox.prototype.onBeforeRendering.call(this);}this.fireGetValueByFieldId({fieldId:sap.extent.uilib.SearchableComboBoxWorkSchedule.EFFECTIVE_DATE_FIELD_ID,propertyName:"effectiveDate"});sap.ui.getCore().getEventBus().subscribe("wsfDialog","assignButtonPressed",sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._assignWorkSchedule,this);};sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype.onAfterRendering=function(){if(sap.extent.uilib.SearchableComboBox.prototype.onAfterRendering){sap.extent.uilib.SearchableComboBox.prototype.onAfterRendering.call(this);}var m=this.getParent();var l;if(m&&m.getParent()&&m.getParent().getParent()){var c=m.getParent().getParent().getContent();if(c&&c!==null&&c.length>0){c.forEach(function(a){if(a instanceof sap.m.Label){l=a.sId;}})}}var w=this.getDomRef();if(w){var i=jQuery(w).find("input");if(i&&i.length>0){i[0].setAttribute("aria-labelledby",l);}}};sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._assignWorkSchedule=function(c,e,d){var a=d.workSchedule.getExternalName()+" ("+d.workSchedule.getExternalCode()+")";this.setWorkScheduleInternalId(d.workSchedule.getInternalId());this.fireWorkScheduleFinderAssignment({workSchedule:d.workSchedule,displayText:a});};sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype.setValue=function(v){if(sap.extent.uilib.SearchableComboBox.prototype.setValue){sap.extent.uilib.SearchableComboBox.prototype.setValue.call(this,v);}if(this.getSelectedKey()){this.setWorkScheduleInternalId(this.getSelectedKey());}if(this.getOldValueInternalId()!==this.getWorkScheduleInternalId()){this.removeStyleClass("sapExtentUilibSearchableComboBoxWorkSchedule");this.addStyleClass("sapExtentUilibSearchableComboBoxWorkScheduleChanged");}else{this.removeStyleClass("sapExtentUilibSearchableComboBoxWorkScheduleChanged");this.addStyleClass("sapExtentUilibSearchableComboBoxWorkSchedule");}};sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._openWSDetails=function(e){this._openBusyDialog();var d=e.getSource();d.setProperty("enabled",false);if(sap.ui.getCore().getControl("tlmShowWorkSchedule")){sap.ui.getCore().getControl("tlmShowWorkSchedule").destroy();}this.fireGetValueByFieldId({fieldId:sap.extent.uilib.SearchableComboBoxWorkSchedule.COMPANY_FIELD_ID,propertyName:"companyInternalId"});this.fireGetValueByFieldId({fieldId:"userId",propertyName:"userId"});jQuery.sap.require("sap.employeecentral.timemanagement.workschedule.WorkScheduleDialog");var W=sap.ui.require("sap/employeecentral/timemanagement/workschedule/WorkScheduleDialog");var w=new W();this._closeBusyDialog();w.openById(this.getWorkScheduleInternalId(),this.getUserId(),this.getEffectiveDate(),this.getCompanyInternalId());w.getOpenedDialog().attachAfterClose(function(){d.setProperty("enabled",true);});};sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._openWSFinder=function(e){this._openBusyDialog();if(sap.ui.getCore().getControl("sap.employeecentral.timemanagement.workschedule.WorkScheduleFinderDialog.create")){sap.ui.getCore().getControl("sap.employeecentral.timemanagement.workschedule.WorkScheduleFinderDialog.create").destroy();}this.fireGetValueByFieldId({fieldId:sap.extent.uilib.SearchableComboBoxWorkSchedule.COMPANY_FIELD_ID,propertyName:"companyInternalId"});this.fireGetValueByFieldId({fieldId:sap.extent.uilib.SearchableComboBoxWorkSchedule.TIME_REC_VARIANT_FIELD_ID,propertyName:"timeRecordingVariant"});this.fireGetValueByFieldId({fieldId:"userId",propertyName:"userId"});var s=this;sap.ui.require(["sap/employeecentral/timemanagement/workschedule/controller/WorkScheduleFinderDialog"],function(W){var w=new W({companyId:s.getCompanyInternalId(),userId:s.getUserId(),jobInfoEffectiveDate:s.getEffectiveDate(),timeRecordingVariant:s.getTimeRecordingVariant(),afterClose:function(){var b=jQuery(".sapExtEntUilibFindWorkSchedule")[0];if(b){b.focus();}}});s._closeBusyDialog();w.open();});};sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._openBusyDialog=function(){if(!this._oBusyDialog){this._oBusyDialog=new sap.extent.uilib.util.BusyLoading();}this._oBusyDialog.show();};sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._closeBusyDialog=function(){if(this._oBusyDialog){this._oBusyDialog.hide();}};},"sap/extent/uilib/SplitProgress.js":function(){jQuery.sap.declare("sap.extent.uilib.SplitProgress");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.SplitProgress",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"int",group:"Misc",defaultValue:33},gap:{type:"int",group:"Misc",defaultValue:1},height:{type:"int",group:"Misc",defaultValue:20},total:{type:"int",group:"Misc",defaultValue:5},filled:{type:"float",group:"Misc",defaultValue:0},expected:{type:"float",group:"Misc",defaultValue:0},filledAccess:{type:"float",group:"Misc",defaultValue:0},expectedAccess:{type:"float",group:"Misc",defaultValue:0},type:{type:"int",group:"Misc",defaultValue:1},color:{type:"string",group:"Misc",defaultValue:'#d8d8d8'},expectedBarColor:{type:"string",group:"Misc",defaultValue:'#d8d8d8'}}}});jQuery.sap.require("sap.ui.thirdparty.d3");sap.extent.uilib.SplitProgress.prototype.onAfterRendering=function(){if(this._render()===true){var t=this;sap.ui.core.ResizeHandler.register(this,function(){t._render();});}};sap.extent.uilib.SplitProgress.prototype.onBeforeRendering=function(){sap.ui.core.ResizeHandler.deregister(this);};sap.extent.uilib.SplitProgress.prototype._render=function(){var t=this;if(this.getVisible()===false){return false;}var I="#"+this.getId();var r=(this.getHeight()>0)?this.getHeight():"20";var R=(this.getWidth()>0)?this.getWidth():"33";var T=(this.getTotal()>0)?this.getTotal():"5";var f=(this.getFilled()>=0)?this.getFilled():"0";var e=(this.getExpected()>=0)?this.getExpected():"0";var F=(this.getColor()!==null)?this.getColor():"#d8d8d8";var E=(this.getExpectedBarColor()!==null)?this.getExpectedBarColor():"#d8d8d8";var g=this.getGap();var a=this.getType();var b=Math.ceil(f);var c=Math.ceil(e);var h=((f%1)>0);var j=((e%1)>0);var k=(this.getFilledAccess()>=0)?this.getFilledAccess():"0";var l=(this.getExpectedAccess()>=0)?this.getExpectedAccess():"0";var m=parseInt(r);var w=parseInt(R)*parseInt(T)+(g*parseInt(T));var n=[];var s=1;n.push(d3.range(s,parseInt(T)+1));if(k===0){a=1;}else{r=r/2;}this.oChart=d3.select(I).append("svg").attr("width",w).attr("height",m).append("svg:g");var o=this.oChart.append("defs").append("linearGradient").attr("id","grad").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");o.append("stop").attr("offset",(f%1)*100+"%").style("stop-color",F);o.append("stop").attr("offset","0%").style("stop-color","#ebebeb");var p=this.oChart.append("defs").append("linearGradient").attr("id","grad1").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");p.append("stop").attr("offset",(e%1)*100+"%").style("stop-color",E);p.append("stop").attr("offset","0%").style("stop-color","#ebebeb");var q=this.oChart.selectAll('g').data(n).enter().append('g').attr('transform',function(d,i){return'translate(0,'+(r+g)*i+')';}).attr("width",w).attr("height",m);if(k!==0){q.selectAll('rect').data(function(d){return d;}).enter().append('rect').attr('x',function(d,i){return(R+g)*i;}).attr('width',R-1).attr('height',r).attr("class",function(d,i){if(i<b){if(h){if(i===b-1){return"url(#grad)";}else{return"globalDiagramColor3";}}else{return"globalDiagramColor3";}}else{return"greyBg";}});}else{q.selectAll('rect1').data(function(d){return d;}).enter().append('rect').attr('x',function(d,i){return(R+g)*i;}).attr('width',R-1).attr('height',r).attr("class",function(d,i){if(i<c){if(j){if(i===c-1){return"url(#grad1)";}else{return"globalDiagramColor1";}}else{return"globalDiagramColor1";}}else{return"greyBg";}});}if(a===2){q.selectAll('rect1').data(function(d){return d;}).enter().append('rect').attr('x',function(d,i){return(R+g)*i;}).attr('y',r).attr('width',R-1).attr('height',r).attr("class",function(d,i){if(i<c){if(j){if(i===c-1){return"url(#grad1)";}else{return"globalDiagramColor1";}}else{return"globalDiagramColor1";}}else{return"greyBg";}});}};},"sap/extent/uilib/SplitProgressRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.SplitProgressRenderer");sap.extent.uilib.SplitProgressRenderer={};sap.extent.uilib.SplitProgressRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.write("</div>");};},"sap/extent/uilib/StandardHeader.js":function(){jQuery.sap.declare("sap.extent.uilib.StandardHeader");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.uxap.ObjectPageHeader");sap.uxap.ObjectPageHeader.extend("sap.extent.uilib.StandardHeader",{metadata:{library:"sap.extent.uilib",properties:{picturePath:{type:"string",defaultValue:''},insertCustomHeader:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{firstContents:{type:"sap.ui.core.Control",multiple:true,singularName:"firstContent"},secondContents:{type:"sap.ui.core.Control",multiple:true,singularName:"secondContent"},thirdContents:{type:"sap.ui.core.Control",multiple:true,singularName:"thirdContent"},actionContents:{type:"sap.ui.core.Control",multiple:true,singularName:"actionContent"}}}});jQuery.sap.require("sap.m.Image");jQuery.sap.require("sap.ui.layout.GridData");jQuery.sap.require("sap.uxap.ObjectPageHeader");jQuery.sap.require("sap.uxap.ScrollAnimation");jQuery.sap.require("sap.uxap.control.ScrollAnimationResize");jQuery.sap.require("sap.uxap.control.ScrollAnimationFade");sap.extent.uilib.StandardHeader.prototype.init=function(){sap.uxap.ObjectPageHeader.prototype.init.call(this);};sap.extent.uilib.StandardHeader.prototype._transferContent=function(a,t){};sap.extent.uilib.StandardHeader.prototype.exit=function(){};sap.extent.uilib.StandardHeader.prototype._moveContentToCollapse=function(){var v=this.getId().substr(0,this.getId().lastIndexOf("--"));var $=jQuery.sap.byId(v+"--profileHeaderActions");$headerContainer=$.parent().parent();$sapSuccessFactorsHeader=jQuery.sap.byId(v+"--successFactorsHeader");if($.length===0||$headerContainer.length===0){return;}$.parent().detach().removeClass("sapUiRespGridIndentL8").addClass("sapUiRespGridIndentL3").removeClass("sapUiRespGridIndentM6").removeClass("sapUiRespGridIndentS6").addClass("sapUiRespGridSpanM3").removeClass("sapUiRespGridSpanM6").appendTo($headerContainer);$sapSuccessFactorsHeader.parent().hide();};sap.extent.uilib.StandardHeader.prototype._moveContentToExpand=function(){var v=this.getId().substr(0,this.getId().lastIndexOf("--"));var $=jQuery.sap.byId(v+"--profileHeaderActions");$headerContainer=$.parent().parent();$sapSuccessFactorsHeader=jQuery.sap.byId(v+"--successFactorsHeader");if($.length===0||$headerContainer.length===0){return;}$.parent().detach().removeClass("sapUiRespGridIndentL3").addClass("sapUiRespGridIndentL8").addClass("sapUiRespGridIndentM6").addClass("sapUiRespGridIndentS6").removeClass("sapUiRespGridSpanM3").addClass("sapUiRespGridSpanL4").addClass("sapUiRespGridSpanM6").prependTo($headerContainer);$sapSuccessFactorsHeader.parent().detach().prependTo($headerContainer).show();};},"sap/extent/uilib/StandardHeaderRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.StandardHeaderRenderer");jQuery.sap.require("sap.ui.core.Renderer");jQuery.sap.require("sap.uxap.ObjectPageHeaderRenderer");sap.extent.uilib.StandardHeaderRenderer={};sap.extent.uilib.StandardHeaderRenderer=sap.ui.core.Renderer.extend(sap.uxap.ObjectPageHeaderRenderer);},"sap/extent/uilib/SuccessFactorsHeader.js":function(){jQuery.sap.declare("sap.extent.uilib.SuccessFactorsHeader");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.uxap.ObjectPageHeader");jQuery.sap.require("sap.sf.surj.commons.PeoplePicker");sap.uxap.ObjectPageHeader.extend("sap.extent.uilib.SuccessFactorsHeader",{metadata:{library:"sap.extent.uilib",aggregations:{minifiedTitle:{type:"sap.ui.core.Control",multiple:true}}}});sap.uxap.ObjectPageHeader.prototype._iAvailablePercentageForActions=.5;sap.extent.uilib.SuccessFactorsHeader.prototype.onAfterRendering=function(){}},"sap/extent/uilib/SuccessFactorsHeaderRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.SuccessFactorsHeaderRenderer");jQuery.sap.require("sap.ui.core.Renderer");jQuery.sap.require("sap.uxap.ObjectPageHeaderRenderer");sap.extent.uilib.SuccessFactorsHeaderRenderer=sap.ui.core.Renderer.extend(sap.uxap.ObjectPageHeaderRenderer);sap.extent.uilib.SuccessFactorsHeaderRenderer._renderObjectPageTitle=function(r,c,t){var o=c.getObjectTitle(),m=(c.getShowMarkers()&&(c.getMarkFavorite()||c.getMarkFlagged())),b=c._getBreadcrumbsAggregation();if(!t&&b){r.renderControl(b);}r.write("<div");r.addClass('sapUxAPObjectPageHeaderIdentifierTitle');if(c.getIsObjectTitleAlwaysVisible()){r.addClass('sapUxAPObjectPageHeaderIdentifierTitleForce');}if(t){r.addClass('sapUxAPObjectPageHeaderIdentifierTitleInContent');}if(c.getShowTitleSelector()){r.addClass('sapUxAPObjectPageHeaderTitleFollowArrow');}r.writeClasses();r.writeAttributeEscaped("id",c.getId()+"-title");r.write(">");r.write("<span");r.addClass("sapUxAPObjectPageHeaderTitleTextWrappable");r.writeClasses();r.writeAttributeEscaped("id",c.getId()+"-innerTitle");r.write(">");if(m||c.getShowTitleSelector()||c.getMarkLocked()||c.getMarkChanges()){var O=o.substr(o.lastIndexOf(" ")+1);var s=o.substr(0,o.lastIndexOf(" ")+1);if(O.length===1){O=o;s='';}r.writeEscaped(s);r.write("</span>");r.write("<span");r.addClass('sapUxAPObjectPageHeaderNowrapMarkers');if(c.getMarkLocked()||c.getMarkChanges()){r.addClass('sapUxAPObjectPageHeaderMarks');}r.writeClasses();r.write(">");r.writeEscaped(O);this._renderMarkers(r,c);if(c.getMarkLocked()){this._renderLock(r,c,t);}else if(c.getMarkChanges()){this._renderMarkChanges(r,c,t);}this._renderSelectTitleArrow(r,c,t);r.write("</span>");}else{c.getMinifiedTitle().forEach(function(i,I){r.renderControl(i);},this);r.write("</span>");}r.write("</div>");r.write("<span");r.addClass('sapUxAPObjectPageHeaderIdentifierDescription');if(c.getIsObjectSubtitleAlwaysVisible()&&c.getObjectSubtitle()){r.addClass('sapUxAPObjectPageHeaderIdentifierDescriptionForce');}if(t){r.addClass('sapUxAPObjectPageHeaderIdentifierSubTitleInContent');}r.writeClasses();r.write(">");r.writeEscaped(c.getObjectSubtitle());r.write("</span>");};},"sap/extent/uilib/Tag.js":function(){jQuery.sap.declare("sap.extent.uilib.Tag");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.Token");jQuery.sap.require("sap.ui.core.Control");sap.m.Token.extend("sap.extent.uilib.Tag",{metadata:{library:"sap.extent.uilib",properties:{linkText:{type:"string",group:"Misc",defaultValue:null},tagUrl:{type:"string",group:"Misc",defaultValue:null}},aggregations:{deleteIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},tagLink:{type:"sap.m.Link",multiple:false,visibility:"hidden"}}}});(function(){"use strict";sap.extent.uilib.Tag.prototype.init=function(){sap.m.Token.prototype.init.call(this);this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.Tag.prototype.onsapbackspace=function(e){e.preventDefault();e.stopPropagation();if(this.getEditable()&&(this.getSelected()||e.target.id===this.getAggregation("deleteIcon").getId())){this.fireDelete({token:this});}};sap.extent.uilib.Tag.prototype.onBeforeRendering=function(){this.setAggregation("tagLink",new sap.m.Link());this._oTagLink=this.getAggregation("tagLink");var t=this.getLinkText();var d=this.oBundle.getText("EMPFILE_PP3_DELETEICON_TOOLTIP");this.getAggregation("deleteIcon").setTooltip(d);var b=this.getTagUrl();if(t){this._oTagLink.setText(t);}if(b){this._oTagLink.setHref(this._createTagUrl(t,b));this._oTagLink.setTarget("_blank");}this._oTagLink.addStyleClass("sapExtentUilibTagLink");};sap.extent.uilib.Tag.prototype._onTokenPress=function(){};sap.extent.uilib.Tag.prototype._createTagUrl=function(l,b){var u=b+"?selectedTag="+encodeURIComponent(l)+"&_s.crb="+ajaxSecKey;return u;};}());},"sap/extent/uilib/Tagizer.js":function(){jQuery.sap.declare("sap.extent.uilib.Tagizer");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.Tag");jQuery.sap.require("sap.ui.core.Control");sap.m.Tokenizer.extend("sap.extent.uilib.Tagizer",{metadata:{library:"sap.extent.uilib",defaultAggregation:"tokens",aggregations:{"tokens":{type:"sap.extent.uilib.Tag",multiple:true,singularName:"token"}}},init:function(){sap.m.Tokenizer.prototype.init.call(this);this.attachTokenChange(this.tokenChangeDefaultListener);},_setTokensAria:function(){},tokenChangeDefaultListener:function(e){var c=e.getParameter("type");if(c===sap.m.Tokenizer.TokenChangeType.Added){return;}switch(c){case sap.m.Tokenizer.TokenChangeType.Removed:var t=e.getParameter("token");if(t){t.destroy();}return;case sap.m.Tokenizer.TokenChangeType.RemovedAll:var a=e.getParameter("tokens");jQuery.forEach(a,function(t){t.destroy();});return;default:break;}}});},"sap/extent/uilib/TagizerRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.TagizerRenderer");sap.extent.uilib.TagizerRenderer={};sap.extent.uilib.TagizerRenderer.render=function(r,c){if(!c.getVisible()){return;}r.write("<div tabindex=\"-1\"");r.writeControlData(c);r.addClass("sapExtentUilibTagizer");r.writeClasses();r.write(">");var C="class=\"sapMTokenizerScrollContainer\">";var s=" ";var i="id="+c.getId()+"-scrollContainer";r.write("<div"+s+i+s+C);sap.extent.uilib.TagizerRenderer._renderTokens(r,c);r.write("</div>");r.write("</div>");};sap.extent.uilib.TagizerRenderer._renderTokens=function(r,c){var i,l,t;t=c.getTokens();l=t.length;for(i=0;i<l;i++){r.renderControl(t[i]);}};},"sap/extent/uilib/TextAreaExtent.js":function(){jQuery.sap.declare("sap.extent.uilib.TextAreaExtent");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.TextArea");sap.m.TextArea.extend("sap.extent.uilib.TextAreaExtent",{metadata:{library:"sap.extent.uilib",properties:{counterOnTop:{type:"boolean",group:"Misc",defaultValue:false},showIcon:{type:"boolean",group:"Misc",defaultValue:false},countDown:{type:"boolean",group:"Misc",defaultValue:false},useColor:{type:"boolean",group:"Misc",defaultValue:false}}}});if(!sap.ui.getCore().getModel("i18n")){jQuery.sap.require("sap.ui.model.resource.ResourceModel");sap.ui.getCore().setModel(new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath('sap.extent.uilib.i18n.i18n','.properties')}),"i18n");}sap.extent.uilib.TextAreaExtent.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();sap.extent.uilib.TextAreaExtent.sPlaceholder=sap.extent.uilib.TextAreaExtent.oBundle.getText("ECT_PP3_TEXTAREA_PLACEHOLDER");sap.extent.uilib.TextAreaExtent.sRefresh=sap.extent.uilib.TextAreaExtent.oBundle.getText("ECT_PP3_TEXTAREA_REFRESH");sap.extent.uilib.TextAreaExtent.sDelete=sap.extent.uilib.TextAreaExtent.oBundle.getText("COMMON_Delete");sap.extent.uilib.TextAreaExtent.sEntered=sap.extent.uilib.TextAreaExtent.oBundle.getText("ECT_PP3_NUMBER_CHAR_ENTERED");sap.extent.uilib.TextAreaExtent.sAllowed=sap.extent.uilib.TextAreaExtent.oBundle.getText("ECT_PP3_NUMBER_CHAR_ALLOWED");sap.extent.uilib.TextAreaExtent.MAX_BYTE_SIZE=4;sap.extent.uilib.TextAreaExtent.prototype.onBeforeRendering=function(){if(sap.m.TextArea.prototype.onBeforeRendering){sap.m.TextArea.prototype.onBeforeRendering.call(this);}this._maxLen=this.getMaxLength()/sap.extent.uilib.TextAreaExtent.MAX_BYTE_SIZE;this.setMaxLength(this._maxLen);if(!this._maxLen){this.setCountDown(false);}this._originalText=this.getValue();if(!this.getPlaceholder()){if(this._maxLen){this.setPlaceholder(sap.extent.uilib.TextAreaExtent.oBundle.getText("ECT_PP3_TEXTAREA_PLACEHOLDER_LONG",[this._maxLen]));}else{this.setPlaceholder(sap.extent.uilib.TextAreaExtent.sPlaceholder);}}};sap.extent.uilib.TextAreaExtent.prototype.onAfterRendering=function(){if(sap.m.TextArea.prototype.onAfterRendering){sap.m.TextArea.prototype.onAfterRendering.call(this);}this._updateCounter();};sap.extent.uilib.TextAreaExtent.prototype._getIconBar=function(){this._oIconBar=new sap.ui.layout.HorizontalLayout({content:[this._getRefreshIcon(),this._getDeleteIcon()]}).addStyleClass('sapExtentUilibTextAreaEnd');return this._oIconBar;};sap.extent.uilib.TextAreaExtent.prototype._getCounterText=function(){var _=this._getCounterValue()+this._getCounterLabel();return _;};sap.extent.uilib.TextAreaExtent.prototype._getCounterLabel=function(){var _="";if(this._maxLen){_=' / '+this._maxLen.toString();}var a=this._getFragment(_,'sapExtentUilibTextAreaLabel');return a;};sap.extent.uilib.TextAreaExtent.prototype._getCounterValue=function(){var _,a;if(this.getCountDown()){_=sap.extent.uilib.TextAreaExtent.sAllowed;}else{_=sap.extent.uilib.TextAreaExtent.sEntered;}a=this._getFragment(this._getCounter(),'sapExtentUilibTextAreaNumber','-counter',_,true);return a;};sap.extent.uilib.TextAreaExtent.prototype._getFragment=function(t,c,i,T,s){var _="<span ";if(i){_+=" id="+this.getId()+i;}if(c){_+=" class="+c;}if(T){_+=" title='"+T+"'";}if(s){_+=" tabindex= '0'";}_+=" >"+t+"</span>";return _;};sap.extent.uilib.TextAreaExtent.prototype._getRefreshIcon=function(){var _=sap.ui.core.IconPool.getIconURI('refresh');this._refreshIcon=new sap.ui.core.Icon({src:_,tooltip:sap.extent.uilib.TextAreaExtent.sRefresh}).addStyleClass('sapExtentUilibTextAreaIcon');var t=this;this._refreshIcon.attachPress(function(e){t._refreshContent(e);});return this._refreshIcon;};sap.extent.uilib.TextAreaExtent.prototype._getDeleteIcon=function(){var _=sap.ui.core.IconPool.getIconURI('delete');this._deleteIcon=new sap.ui.core.Icon({src:_,tooltip:sap.extent.uilib.TextAreaExtent.sDelete}).addStyleClass('sapExtentUilibTextAreaIcon');var t=this;this._deleteIcon.attachPress(function(e){t._deleteContent(e);});return this._deleteIcon;};sap.extent.uilib.TextAreaExtent.prototype._getCounter=function(){return this.getValue().length;};sap.extent.uilib.TextAreaExtent.prototype._refreshContent=function(){var t=this._originalText;this.setValue(t);this._updateCounter();};sap.extent.uilib.TextAreaExtent.prototype._deleteContent=function(){this.setValue('');this._updateCounter();};sap.extent.uilib.TextAreaExtent.prototype._onInput=function(){if(sap.m.TextArea.prototype._onInput){sap.m.TextArea.prototype._onInput.apply(this);}this._updateCounter();};sap.extent.uilib.TextAreaExtent.prototype._updateCounter=function(){var $=this.$().find('#'+this.getId()+'-counter'),_=(this.getCountDown())?this._maxLen-this._getCounter():this._getCounter();$.text(_);if(this.getUseColor()){if(!!this._maxLen&&(this._getCounter()>=this._maxLen)){$.css('color','red');}else{$.css('color','green');}}};sap.extent.uilib.TextAreaExtent.prototype.exit=function(){if(this._refreshIcon){this._refreshIcon.destroy();}if(this._deleteIcon){this._deleteIcon.destroy();}if(this._oIconBar){this._oIconBar.destroy();}this._maxLen=null;this._originalText=null;if(sap.m.TextArea.prototype.exit){sap.m.TextArea.prototype.exit.apply(this);}};},"sap/extent/uilib/TextAreaExtentRenderer.js":function(){jQuery.sap.require("sap.m.TextAreaRenderer");jQuery.sap.declare("sap.extent.uilib.TextAreaExtentRenderer");sap.extent.uilib.TextAreaExtentRenderer=sap.ui.core.Renderer.extend(sap.m.TextAreaRenderer);sap.extent.uilib.TextAreaExtentRenderer.addOuterClasses=function(r,c){r.addClass("sapMTextArea");r.addClass("sapExtentUilibTextArea");};sap.extent.uilib.TextAreaExtentRenderer.writeInnerContent=function(r,c){if(c.getCounterOnTop()){r.writeEscaped(c.getValue());}else{r.writeEscaped(c.getValue());r.write("</textarea>");this.renderBar(r,c);}};sap.extent.uilib.TextAreaExtentRenderer.prependInnerContent=function(r,c){if(c.getCounterOnTop()){this.renderBar(r,c);}};sap.extent.uilib.TextAreaExtentRenderer.renderBar=function(r,c){r.write("<div id="+c.getId()+"-bar");r.addClass("sapExtentUilibTextAreaBar");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapExtentUilibTextAreaStart");r.writeClasses();r.write(">");r.writeEscaped(c._getCounterText());r.write("</div>");if(c.getShowIcon()){r.renderControl(c._getIconBar());}r.write("</div>");};},"sap/extent/uilib/TextMaxLineWithViewAll.js":function(){jQuery.sap.declare("sap.extent.uilib.TextMaxLineWithViewAll");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.m.Text");sap.m.Text.extend("sap.extent.uilib.TextMaxLineWithViewAll",{metadata:{library:"sap.extent.uilib"}});sap.extent.uilib.TextMaxLineWithViewAll.prototype.init=function(){if(sap.m.Text.prototype.init){sap.m.Text.prototype.init.apply(this);}this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();if(!this.oViewAllLink){this.oViewAllLink=new sap.m.Link({text:this.oBundle.getText("EMPFILE_NOTES_View_All"),href:"javascript:void(0)",visible:false,press:jQuery.proxy(this.showAll,this)});}if(!this.contentAll){this.contentAll=new sap.m.Popover({placement:sap.m.PlacementType.Bottom,showHeader:false,contentWidth:"500px"});}};sap.extent.uilib.TextMaxLineWithViewAll.prototype.showAll=function(e){this.contentAll.openBy(e.getSource());};sap.extent.uilib.TextMaxLineWithViewAll.prototype._updateViewAllLink=function(){if(this.getTextDomRef().offsetHeight<this.getTextDomRef().scrollHeight){this.oViewAllLink.setVisible(true);}else{this.oViewAllLink.setVisible(false);}if(document.getElementById(this.getId()+"-viewalllink")){var r=sap.ui.getCore().createRenderManager();r.renderControl(this.oViewAllLink);r.flush(document.getElementById(this.getId()+"-viewalllink"));r.destroy();}};sap.extent.uilib.TextMaxLineWithViewAll.prototype.onAfterRendering=function(){if(sap.m.Text.prototype.onAfterRendering){sap.m.Text.prototype.onAfterRendering.apply(this);}this._updateViewAllLink();this.contentAll.removeAllContent();var t=new sap.m.Text({text:this.getText()});t.addStyleClass("sapUiResponsiveMargin");this.contentAll.addContent(t);this.rerender();};},"sap/extent/uilib/TextMaxLineWithViewAllRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.TextMaxLineWithViewAllRenderer");jQuery.sap.require("sap.m.TextRenderer");sap.extent.uilib.TextMaxLineWithViewAllRenderer=sap.ui.core.Renderer.extend(sap.m.TextRenderer);sap.extent.uilib.TextMaxLineWithViewAllRenderer.renderMaxLines=function(r,t){r.openStart("span");r.attr("id",t.getId()+"-inner");r.class("sapMTextMaxLine");if(t.canUseNativeLineClamp()){r.class("sapMTextLineClamp");r.style("-webkit-line-clamp",t.getMaxLines());}r.openEnd();this.renderText(r,t);r.close("span");r.openStart("span");r.attr("id",t.getId()+"-viewalllink");r.openEnd();r.renderControl(t.oViewAllLink);r.close("span");};},"sap/extent/uilib/TextWithIcon.js":function(){jQuery.sap.declare("sap.extent.uilib.TextWithIcon");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.TextWithIcon",{metadata:{library:"sap.extent.uilib",properties:{text:{type:"string",group:"Misc",defaultValue:null},icon:{type:"object",group:"Misc",defaultValue:null}}}});},"sap/extent/uilib/TextWithIconRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.TextWithIconRenderer");sap.extent.uilib.TextWithIconRenderer={};sap.extent.uilib.TextWithIconRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.write("<span>");r.writeEscaped(c.getText());r.renderControl(c.getIcon());r.write("</span>");r.write("</div>");};},"sap/extent/uilib/TimeOffItem.js":function(){jQuery.sap.declare("sap.extent.uilib.TimeOffItem");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.MaskableCore");jQuery.sap.require("sap.ui.core.format.DateFormat");sap.extent.uilib.MaskableCore.extend("sap.extent.uilib.TimeOffItem",{metadata:{library:"sap.extent.uilib",properties:{item:{type:"object",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'340px'}}}});sap.extent.uilib.TimeOffItem.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.TimeOffItem.prototype.setItem=function(i){this.setProperty("item",i,true);this._oTitle=new sap.m.Text({text:i.title}).addStyleClass("sapExtentUilibFormPatternValueLabel");this._oDateRange=new sap.m.Text({text:i.formattedDatePeriod});this._oTimeRange=new sap.m.Text({text:i.formattedTimePeriod});this._oStatus=new sap.m.ObjectStatus({text:i.approvalStatus});if(i.status==="APPROVED"){this._oStatus.setState(sap.ui.core.ValueState.Success);}else if(i.status==="PENDING"||i.status==="PENDING_CANCELLATION"){this._oStatus.setState(sap.ui.core.ValueState.Warning);}else if(i.status==="REJECTED"){this._oStatus.setState(sap.ui.core.ValueState.Error);}};},"sap/extent/uilib/TimeOffItemRenderer.js":function(){jQuery.sap.require("sap.extent.uilib.MaskableCoreRenderer");jQuery.sap.declare("sap.extent.uilib.TimeOffItemRenderer");sap.extent.uilib.TimeOffItemRenderer=sap.ui.core.Renderer.extend(sap.extent.uilib.MaskableCoreRenderer);sap.extent.uilib.TimeOffItemRenderer.renderContent=function(r,c){"use strict";r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibTimeOffItem");r.writeClasses();if(c.getWidth()){r.addStyle('width',c.getWidth());}r.writeStyles();r.write(">");r.write("<table class='sapExtentUilibFormPatternTable'>");r.write("<tr>");r.write("<td rowspan='1' colspan='2'");if(window.innerWidth>sap.extent.uilib.FormPattern.maxPhoneWidth){r.write(" class='sapExtentUilibFormPatternBlockName'");}r.write(">");r.renderControl(c._oTitle);r.write("</td></tr>");r.write("<tr>");r.write("<td rowspan='1' colspan='2'");if(window.innerWidth>sap.extent.uilib.FormPattern.maxPhoneWidth){r.write(" class='sapExtentUilibFormPatternBlockName'");}r.write(">");r.renderControl(c._oDateRange);r.write("</td></tr>");if(c._oTimeRange.getText()){r.write("<tr>");r.write("<td rowspan='1' colspan='2'");if(window.innerWidth>sap.extent.uilib.FormPattern.maxPhoneWidth){r.write(" class='sapExtentUilibFormPatternBlockName'");}r.write(">");r.renderControl(c._oTimeRange);r.write("</td></tr>");}r.write("<tr>");r.write("<td rowspan='1' colspan='2'");if(window.innerWidth>sap.extent.uilib.FormPattern.maxPhoneWidth){r.write(" class='sapExtentUilibFormPatternBlockName'");}r.write(">");r.renderControl(c._oStatus);r.write("</td></tr>");r.write("</table>");r.write("</div>");};},"sap/extent/uilib/TitleAndButtons.js":function(){jQuery.sap.declare("sap.extent.uilib.TitleAndButtons");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.extent.uilib.util.HelpManager");jQuery.sap.require("sap.extent.uilib.BlockInlineDescription");sap.ui.core.Control.extend("sap.extent.uilib.TitleAndButtons",{metadata:{library:"sap.extent.uilib",properties:{isBlockDescriptionInline:{type:"boolean",group:"Misc",defaultValue:false},blockDescription:{type:"string",group:"Misc",defaultValue:null},title:{type:"any",group:"Misc",defaultValue:null}},aggregations:{actionButtons:{type:"sap.m.Button",singularName:"actionButton",multiple:true}}}});sap.extent.uilib.TitleAndButtons.prototype.init=function(){if(!this.titleDescriptionIcon){this.titleDescriptionIcon=sap.extent.uilib.util.HelpManager.createHelpButton(null,"sapExtentUilibFormPatternActionButton");}};sap.extent.uilib.TitleAndButtons.prototype.setBlockDescription=function(b){this.setProperty("blockDescription",b,true);if(!this.titleDescriptionInline){this.titleDescriptionInline=new sap.extent.uilib.BlockInlineDescription({blockDescription:b});this.titleDescriptionInline.addStyleClass("sapExtentUilibHelpTextPopupContentContainer").addStyleClass("sapExtentUilibHelpTextInlineDescriptionContainer");}sap.extent.uilib.util.HelpManager.registerHelpElement(this.titleDescriptionIcon,b);this.titleDescriptionIcon.setVisible(false);this.titleDescriptionInline.setVisible(false);if(b&&b.trim().length>0){this.titleDescriptionIcon.setVisible(true);this.titleDescriptionIcon.rerender();this.titleDescriptionInline.setVisible(true);this.titleDescriptionInline.rerender();}};},"sap/extent/uilib/Tokenizer.js":function(){jQuery.sap.declare("sap.extent.uilib.Tokenizer");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.m.Token");jQuery.sap.require("sap.m.Tokenizer");jQuery.sap.require("sap.ui.core.Control");sap.m.Tokenizer.extend("sap.extent.uilib.Tokenizer",{metadata:{library:"sap.extent.uilib"},init:function(){if(sap.m.Tokenizer.prototype.init){sap.m.Tokenizer.prototype.init.call(this);}this.attachTokenChange(this.tokenChangeDefaultListener);},tokenChangeDefaultListener:function(e){var c=e.getParameter("type");switch(c){case sap.m.Tokenizer.TokenChangeType.Added:return;case sap.m.Tokenizer.TokenChangeType.Removed:var t=e.getParameter("token");if(t){t.destroy();}return;case sap.m.Tokenizer.TokenChangeType.RemovedAll:var a=e.getParameter("tokens");jQuery.forEach(a,function(t){t.destroy();});return;default:break;}}});},"sap/extent/uilib/TokenizerRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.TokenizerRenderer");jQuery.sap.require("sap.m.TokenizerRenderer");sap.extent.uilib.TokenizerRenderer=sap.ui.core.Renderer.extend(sap.m.TokenizerRenderer);},"sap/extent/uilib/UploadCollectionPP3.js":function(){jQuery.sap.declare("sap.extent.uilib.UploadCollectionPP3");jQuery.sap.require("sap.m.UploadCollection");jQuery.sap.require("sap.m.UploadCollectionRenderer");jQuery.sap.require("sap.sf.peopleprofile.util.pp3core.SFAPIHelper");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");sap.m.UploadCollection.extend("sap.extent.uilib.UploadCollectionPP3",{metadata:{library:"sap.extent.uilib",properties:{showDefaultTitle:{type:"boolean",group:"Appearance",defaultValue:false},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:"sap.ui.core.ValueState.None"},valueStateText:{type:"string",group:"Appearance",defaultValue:""},required:{type:"boolean",group:"Appearance",defaultValue:false},companyId:{type:"string",group:"PII",defaultValue:"null"},effectiveStartDate:{type:"string",group:"PII",defaultValue:"null"}},events:{getPIIParameters:{}}},renderer:sap.m.UploadCollectionRenderer});sap.extent.uilib.UploadCollectionPP3.prototype.URL_PARAM_COMPANY_ID="companyId";sap.extent.uilib.UploadCollectionPP3.prototype.URL_PARAM_EFFECT_STARTDATE="effectiveStartDate";sap.extent.uilib.UploadCollectionPP3.prototype.a11yAnnounce=function(m){if(this._oList&&this._oList._aNavSections&&this._oList._aNavSections.length>0){var a=jQuery('#'+this._oList._aNavSections[0]+'>li > div');if(a&&a[0]){var e=a[0];e.setAttribute('aria-label',m);e.setAttribute('tabindex',"0");e.focus();setTimeout(function(){e.removeAttribute('aria-label');e.blur();},1000)}}};sap.extent.uilib.UploadCollectionPP3.prototype.setValueState=function(v){this.setProperty("valueState",v);var a=this._getFileUploader&&this._getFileUploader().oBrowse;if(a){if(v==sap.ui.core.ValueState.None){a.removeStyleClass("sapExtentUilibFileUploadFixError");}else if(v==sap.ui.core.ValueState.Error){a.addStyleClass("sapExtentUilibFileUploadFixError");}}};sap.extent.uilib.UploadCollectionPP3.prototype.getInputValue=function(){var b=this.mBindingInfos.items.path;var m=this.getModel();var v=m.getProperty(b);return v[0];};sap.extent.uilib.UploadCollectionPP3.prototype.getAttachmentDataFromResponse=function(r){var R=r.result[0];var a=R.attachment;var b=sap.ui.getCore().getModel("i18n").getResourceBundle();var S=sap.sf.peopleprofile.util.pp3core.SFAPIHelper;var A={"attachmentId":a.attachmentId,"linkName":Util.unescapeHTML(a.name),"fileType":a.type,"attachmentUrl":R.attachmentDownloadUrl,"lastModified":S.formatDateForCommonDate(a.lastModified),"fileSize":b.getText("ECT_UPLOAD_COLLECTION_UNIT_BYTES",a.size),"attachmentHash":R.attachmentHash,"uuid":R.uuid,"recordHash":R.attachmentHash};return A;};sap.extent.uilib.UploadCollectionPP3.prototype.init=function(){if(sap.m.UploadCollection.prototype.init){sap.m.UploadCollection.prototype.init.apply(this,arguments);}sap.ui.getCore().getEventBus().subscribe("peopleProfile","deleteAttachments",jQuery.proxy(this._handleDeleteAttachments,this));this.addStyleClass("sapExtentUilibUploadCollection");this.attachUploadComplete(this._handleUploadComplete.bind(this),this);this.attachFileDeleted(this._handleFileDeleted.bind(this),this);this.attachBeforeUploadStarts(this._handleBeforeUploadStarts,this);this.attachFileSizeExceed(this._handleFileSizeExceed,this);this.attachTypeMissmatch(this._handleTypeMissmatch,this);this.attachUploadTerminated(this._handleUploadTerminated,this);};sap.extent.uilib.UploadCollectionPP3.prototype.onBeforeRendering=function(){if(sap.m.UploadCollection.prototype.onBeforeRendering){sap.m.UploadCollection.prototype.onBeforeRendering.apply(this,arguments);}if(!this.getShowDefaultTitle()){var t=this.getToolbar()&&this.getToolbar().getContent();if(t.length>0&&t[0]instanceof sap.m.Title){this.getToolbar().removeContent(t[0]);}if(this.getItems().length>0){this.getToolbar()&&this.getToolbar().setVisible(false);}else{this.getToolbar()&&this.getToolbar().setVisible(true);}}this._getFileUploader&&this._getFileUploader().attachUploadStart(this._handlePIIBeforeUpload,this);};sap.extent.uilib.UploadCollectionPP3.prototype.onAfterRendering=function(){if(sap.m.UploadCollection.prototype.onAfterRendering){sap.m.UploadCollection.prototype.onAfterRendering.apply(this,arguments);}var a="";if(this.oParent&&typeof this.oParent.getContent==="function"){if(this.oParent.getContent().length>0&&this.oParent.getContent()[0]instanceof sap.m.Label){a=this.oParent.getContent()[0].sId;}}var l=jQuery('.sapExtentUilibUploadCollection .sapMUCNoDataPage');if(l&&l.length>0){l.each(function(i,b){var n=jQuery('.sapMUCNoDataText');var N=jQuery('.sapMUCNoDataDescription');if(n&&n.length>0&&N&&N.length>0){if(N[i]&&N[i].id){b.parentElement.setAttribute('aria-labelledBy',a+' '+n[i].id+' '+N[i].id);}else{b.parentElement.setAttribute('aria-labelledBy',a+' '+n[i].id);}}});}else{if(this._oList&&this._oList._aNavSections&&this._oList._aNavSections.length>0){var u=jQuery('#'+this._oList._aNavSections[0]+'>li');u&&u[0].setAttribute('aria-labelledBy',a);}}};sap.extent.uilib.UploadCollectionPP3.prototype._onUploadProgress=function(e){if(this.aItems&&this.aItems.length>0&&e.getParameter("fileName")!=this.aItems[0].getFileName()){e.mParameters["fileName"]=this.aItems[0].getFileName();}if(sap.m.UploadCollection.prototype._onUploadProgress){sap.m.UploadCollection.prototype._onUploadProgress.apply(this,arguments);}};sap.extent.uilib.UploadCollectionPP3.prototype._handleESC=function(e){if(sap.m.UploadCollection.prototype._handleESC){sap.m.UploadCollection.prototype._handleESC.apply(this,arguments);}e.setMark('UploadCollectionPP3',true);};sap.extent.uilib.UploadCollectionPP3.prototype._handleUploadComplete=function(e){var s=this;var I=e.getSource();var b=sap.ui.getCore().getModel("i18n").getResourceBundle();var f=e.getParameter("files");var r=f&&f[0]&&f[0].responseRaw&&f[0].responseRaw.match(/{.*}/);var R=sap.sf.peopleprofile.model.pp3core.DWRJSONUtils.parseJSONForAttachemnt(r[0]);if(R.success){var a=sap.extent.uilib.UploadCollectionPP3.prototype.getAttachmentDataFromResponse(R);var B=I.mBindingInfos.items.path;var m=I.getModel();var A=m.getProperty(B);A.unshift(a);this._adjustAttachmentArray(A);m.setProperty(B,A);jQuery.each(R.result,function(i,o){var F=o&&o.attachment&&o.attachment.name;F=Util.unescapeHTML(F);jQuery.each(I.aItems,function(c,d){if(F===d.getFileName()||(!d.getFileName()&&F===m.getProperty(I.mBindingInfos.items.path+"/"+c+"/linkName"))){s._removeUploadingStatus(d);}});});jQuery.each(I.aItems,function(i,o){if(o._status==="uploading"){s._removeUploadingStatus(o);}});I.setValueState(sap.ui.core.ValueState.None);I.setValueStateText("");var t=this;setTimeout(function(){t.a11yAnnounce(sap.ui.getCore().getModel("i18n").getResourceBundle().getText("COMMON_FILE_UPLOADED_SUCCESSFULLY",[a.linkName]));},0);}else{jQuery.each(I.aItems,function(i,o){if(o._status==="uploading"){I.aItems.splice(i);}});sap.m.MessageBox.show(R.message||R.errorMsg,{icon:sap.m.MessageBox.Icon.ERROR});this.setUploadEnabled(true);}};sap.extent.uilib.UploadCollectionPP3.prototype._handleFileDeleted=function(e){var s=e.getSource();var i=e.getParameter("item");var b=i.getBindingContext();var I=b.getPath().substring(0,b.getPath().length-2);var a=s.getModel().getProperty(I);var d=e.getParameter("documentId");var c;if(a.length==1){c=a[0];a=[""];}else{for(var f=0;f<a.length;f++){if(a[f]&&a[f].attachmentId==d){c=a[f];a.splice(f,1);f--;}}}s.getModel().setProperty(I,a);sap.ui.getCore().getEventBus().publish("peopleProfile","postHandleFileDelete",{attachmentId:d});var t=this;setTimeout(function(){t.a11yAnnounce(sap.ui.getCore().getModel("i18n").getResourceBundle().getText("COMMON_FILE_DELETION_SUCCESS_INFO",[c.linkName]));},0);};sap.extent.uilib.UploadCollectionPP3.prototype._handleBeforeUploadStarts=function(e){this.setUploadEnabled(false);};sap.extent.uilib.UploadCollectionPP3.prototype._handlePIIBeforeUpload=function(e){if(this.aItems&&this.aItems.length>0){if(jQuery("#isRDPEnabled").attr("content")=="true"&&(!this.getCompanyId()||!this.getEffectiveStartDate())){sap.m.MessageBox.show(sap.ui.getCore().getModel("i18n").getResourceBundle().getText("ECT_FILE_UPLOAD_MISSING_DATE_OR_COMPANY"),{icon:sap.m.MessageBox.Icon.ERROR});if(this._getFileUploader()&&typeof this._getFileUploader().abort=="function"&&e.getParameters()["requestHeaders"]){var i=this.aItems[0];this._bSkipTerminateMsg=true;this._getFileUploader().abort(e.getParameters()["requestHeaders"][0].name,this._encodeToAscii(i.getFileName())+i._requestIdName);}}}};sap.extent.uilib.UploadCollectionPP3.prototype._handleUploadTerminated=function(e){var i=e.getSource();var b=sap.ui.getCore().getModel("i18n").getResourceBundle();jQuery.each(i.aItems,function(j){if(i.aItems[j]._status==="uploading"){i.aItems.splice(j,1);}});this.setUploadEnabled(true);if(this._bSkipTerminateMsg){delete this._bSkipTerminateMsg;}else{sap.m.MessageBox.show(b.getText("ECT_UPLOAD_COLLECTION_UPLOAD_TERMINATED_MESSAGE"),{title:b.getText("ECT_UPLOAD_COLLECTION_UPLOAD_TERMINATED_TITLE"),icon:sap.m.MessageBox.Icon.SUCCESS});}};sap.extent.uilib.UploadCollectionPP3.prototype._handleFileSizeExceed=function(e){var b=sap.ui.getCore().getModel("i18n").getResourceBundle();sap.m.MessageBox.show(b.getText("ECT_UPLOAD_COLLECTION_FILE_SIZE_EXCEED_MESSAGE",e.oSource.getMaximumFileSize()),{title:b.getText("ECT_UPLOAD_COLLECTION_FILE_SIZE_EXCEED_TITLE"),icon:sap.m.MessageBox.Icon.ERROR});};sap.extent.uilib.UploadCollectionPP3.prototype._handleTypeMissmatch=function(e){var b=sap.ui.getCore().getModel("i18n").getResourceBundle();sap.m.MessageBox.show(b.getText("ECT_UPLOAD_COLLECTION_UPLOAD_TYPE_MISMATCH_MESSAGE"),{title:b.getText("ECT_UPLOAD_COLLECTION_UPLOAD_TYPE_MISMATCH_TITLE"),icon:sap.m.MessageBox.Icon.ERROR});};sap.extent.uilib.UploadCollectionPP3.prototype._adjustAttachmentArray=function(a){if(a){if(a.length>=1){jQuery.each(a,function(i){if(!a[i]||(a[i]&&a[i].attachmentId==-1)){a.splice(i,1);}});}else if(a.length===0){a.push("");}}};sap.extent.uilib.UploadCollectionPP3.prototype._removeUploadingStatus=function(i){i._percentUploaded=100;i._status="display";};sap.extent.uilib.UploadCollectionPP3.prototype.setUploadUrl=function(u){if(sap.m.UploadCollection.prototype.setUploadUrl){sap.m.UploadCollection.prototype.setUploadUrl.call(this,u);}if(this.getEffectiveStartDate()&&this.getEffectiveStartDate()!="null"&&u.indexOf(this.URL_PARAM_EFFECT_STARTDATE)===-1){var d=sap.sf.peopleprofile.util.pp3core.SFAPIHelper.getParsedDate(this.getEffectiveStartDate());this._updateUploadURL(this.URL_PARAM_EFFECT_STARTDATE,d.getTime());}if(this.getCompanyId()&&this.getCompanyId()!="null"&&u.indexOf(this.URL_PARAM_COMPANY_ID)===-1){this._updateUploadURL(this.URL_PARAM_COMPANY_ID,this.getCompanyId());}return this;};sap.extent.uilib.UploadCollectionPP3.prototype.setCompanyId=function(c){if(!c){this.setProperty(this.URL_PARAM_COMPANY_ID,"");return;}this.setProperty(this.URL_PARAM_COMPANY_ID,c);this._updateUploadURL(this.URL_PARAM_COMPANY_ID,c);return this;};sap.extent.uilib.UploadCollectionPP3.prototype.setEffectiveStartDate=function(e){if(!e){this.setProperty(this.URL_PARAM_EFFECT_STARTDATE,"");return this;}var p=sap.sf.peopleprofile.util.pp3core.SFAPIHelper.getParsedDate(e);if(!p||!(p instanceof Date)){e=sap.sf.peopleprofile.util.pp3core.SFAPIHelper.formatDateForCalendar(new Date());p=sap.sf.peopleprofile.util.pp3core.SFAPIHelper.getParsedDate(e);}else{e=sap.sf.peopleprofile.util.pp3core.SFAPIHelper.formatDateForCalendar(p);}this.setProperty(this.URL_PARAM_EFFECT_STARTDATE,e);this._updateUploadURL(this.URL_PARAM_EFFECT_STARTDATE,p.getTime());return this;};sap.extent.uilib.UploadCollectionPP3.prototype._updateUploadURL=function(p,v){if(!p||!v){return;}var u=this.getUploadUrl();if(u.indexOf(p)!=-1){var r=p+"=\\d*";var R=new RegExp(r);u=u.replace(u.match(R),p+"="+v);}else{u=u+"&"+p+"="+v;}this.setUploadUrl(u);};sap.extent.uilib.UploadCollectionPP3.prototype._handleDeleteAttachments=function(e){if(this.aItems&&this.aItems.length>0){var i=this.aItems[0];this.fireFileDeleted({documentId:i.getDocumentId(),item:i});}};sap.extent.uilib.UploadCollectionPP3.prototype.destroy=function(e){var f=this.mEventRegistry.fileDeleted;if(sap.m.UploadCollection.prototype.destroy){sap.m.UploadCollection.prototype.destroy.call(this);}this.mEventRegistry.fileDeleted=f;};sap.extent.uilib.UploadCollectionPP3.prototype._onItemPressed=function(e,i){if(i.getProperty("url")&&i.getProperty("url").includes("/attachmentdownload?")){var u=i.getProperty("url");var c=sap.extent.uilib.util.CommonUtils.getInstance();c.getDownloadReasonEnable(u);}}},"sap/extent/uilib/VideoUploader.js":function(){jQuery.sap.declare("sap.extent.uilib.VideoUploader");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.VideoUploader",{metadata:{library:"sap.extent.uilib",properties:{src:{type:"string",group:"Misc",defaultValue:null},type:{type:"string",group:"Misc",defaultValue:null},src2:{type:"string",group:"Misc",defaultValue:null},type2:{type:"string",group:"Misc",defaultValue:null},fileName:{type:"string",group:"Misc",defaultValue:null},height:{type:"string",group:"Misc",defaultValue:null},width:{type:"string",group:"Misc",defaultValue:null},hasChanged:{type:"boolean",defaultValue:false}},events:{videoRemoved:{},refreshVideo:{},saveSuccess:{},saveFailed:{}}}});sap.extent.uilib.VideoUploader.prototype.init=function(){this._oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.sf.peopleprofile.i18n");};sap.extent.uilib.VideoUploader.prototype.destroy=function(){this._getRemoveButton().destroy();if(sap.ui.core.Control.prototype.destroy){sap.ui.core.Control.prototype.destroy.call(this);}};sap.extent.uilib.VideoUploader.prototype.getVideoFile=function(){return this._oSelectedVideo;};sap.extent.uilib.VideoUploader.prototype.getVideoFileNameSizeString=function(){var f;if(this._oSelectedVideo){var e=this._oSelectedVideo.name.substr(this._oSelectedVideo.name.lastIndexOf(".")+1,this._oSelectedVideo.name.length);f=this._oBundle.getText("COMMON_Selected")+" "+e+" "+this._oBundle.getText("EMPFILE_HRIS_MDF_IMPORTEXPORT_FILE")+"("+this._formatBytes(this._oSelectedVideo.size)+")";}return f;};sap.extent.uilib.VideoUploader.prototype._showVideo=function(){var i=document.getElementById(this.getId()+"-videoInput");var f=i.files[0];if(f){this._oSelectedVideo=f;var a=this.getId()+"-fileName";jQuery(this._escapeSpecialCharacters(a)).text(this.getVideoFileNameSizeString());var r=this.getId()+"-removeButton";jQuery(this._escapeSpecialCharacters(r)).removeClass('sapExtentUilibVideoHide');this.setHasChanged(true);}};sap.extent.uilib.VideoUploader.prototype.onAfterRendering=function(){var v=this.getId()+"-videoInput";jQuery(this._escapeSpecialCharacters(v)).change(jQuery.proxy(this._showVideo,this));};sap.extent.uilib.VideoUploader.prototype._getUploadButton=function(){if(!this._oUploadButton){this._oUploadButton=new sap.m.Button({text:this._oBundle.getText("EMPFILE_PP3_UPLOAD_VIDEO"),press:[this._launchUploadDialog,this]});}this._oUploadButton.addStyleClass('sapExtentUilibVideoUploadBtn');return this._oUploadButton;};sap.extent.uilib.VideoUploader.prototype._getRemoveButton=function(){if(!this._oRemoveButton){this._oRemoveButton=new sap.m.Button({text:this._oBundle.getText("EMPFILE_PP3_REMOVE_VIDEO"),press:[this._removeVideo,this],id:this.getId()+"-removeButton"});this._oRemoveButton.addStyleClass('sapExtentUilibVideoRemoveBtn');}if(!this.getSrc()){this._oRemoveButton.addStyleClass('sapExtentUilibVideoHide');}return this._oRemoveButton;};sap.extent.uilib.VideoUploader.prototype._launchUploadDialog=function(){var v=this.getId()+"-videoInput";jQuery(this._escapeSpecialCharacters(v)).trigger('click');};sap.extent.uilib.VideoUploader.prototype._removeVideo=function(){var v=this.getId()+"-videoControl";var f=this.getId()+"-fileName";jQuery(this._escapeSpecialCharacters(f)).text("");var r=this.getId()+"-removeButton";jQuery(this._escapeSpecialCharacters(r)).addClass('sapExtentUilibVideoHide');var a=jQuery(this._escapeSpecialCharacters(v));if(a){a.addClass('sapExtentUilibVideoHide');this.fireVideoRemoved();}this._oSelectedVideo="";var e=this.getId()+"-emptyVideoContainer";jQuery(this._escapeSpecialCharacters(e)).removeClass('sapExtentUilibVideoHide');this.setHasChanged(true);};sap.extent.uilib.VideoUploader.prototype._formatBytes=function(b){if(b<1024)return b+" Bytes";else if(b<1048576)return(b/1024).toFixed(3)+" KB";else if(b<1073741824)return(b/1048576).toFixed(3)+" MB";else return(b/1073741824).toFixed(3)+" GB";};sap.extent.uilib.VideoUploader.prototype._escapeSpecialCharacters=function(i){return"#"+i.replace(/(:|\.|\[|\])/g,"\\$1");};sap.extent.uilib.VideoUploader.prototype._getWebcamIcon=function(){var w=sap.ui.core.IconPool.getIconURI("web-cam");oWebcamIcon=sap.ui.core.IconPool.createControlByURI({src:w,color:"#BCBDC0",width:"50px",height:"72px"}).addStyleClass("sapExtentUilibVideoWebcamIcon");return oWebcamIcon;};sap.extent.uilib.VideoUploader.prototype.updateViewForUploading=function(i){if(this._oRemoveButton){this._oRemoveButton.addStyleClass('sapExtentUilibVideoHide');}if(this._oUploadButton){this._oUploadButton.addStyleClass('sapExtentUilibVideoHide');}};sap.extent.uilib.VideoUploader.prototype.updateViewDoneUploading=function(i){if(this._oRemoveButton){this._oRemoveButton.removeStyleClass('sapExtentUilibVideoHide');}if(this._oUploadButton){this._oUploadButton.removeStyleClass('sapExtentUilibVideoHide');}};sap.extent.uilib.VideoUploader.prototype._getTranscodingStatus=function(){if(!this._oTranscodingStatus){this._oTranscodingStatus=new sap.m.Text({text:this._oBundle.getText("EMPFILE_PP3_VIDEO_TRANSCODING_IN_PROGRESS")});this._oTranscodingStatus.addStyleClass('sapExtentUilibVideoTranscoding');}return this._oTranscodingStatus;};sap.extent.uilib.VideoUploader.prototype._getRefreshButton=function(){if(!this._oRefreshButton){this._oRefreshButton=new sap.m.Button({text:this._oBundle.getText("EMPFILE_PP3_REFRESH_VIDEO"),press:[this._refreshVideo,this]});}this._oRefreshButton.addStyleClass('sapExtentUilibVideoRefreshBtn');return this._oRefreshButton;};sap.extent.uilib.VideoUploader.prototype._refreshVideo=function(){this.fireRefreshVideo();};sap.extent.uilib.VideoUploader.prototype.getPosterImageUrl=function(){var m=jQuery.sap.getModulePath('sap.extent.uilib');var i;if(sap.ui.Device.system.phone){i=m+'/resources/videoPosterPhone.png';}else if(sap.ui.Device.system.tablet&&sap.ui.Device.orientation.portrait){i=m+'/resources/videoPosterTabletPortrait.png';}else{i=m+'/resources/videoPosterTabletLandscape.png';}return i;};sap.extent.uilib.VideoUploader.prototype.getVideoWidth=function(){var w;if(sap.ui.Device.system.phone){w="290";}else if(sap.ui.Device.system.tablet&&sap.ui.Device.orientation.portrait){w="448"}else{w="618";}return w;};sap.extent.uilib.VideoUploader.prototype.getVideoHeight=function(){var h;if(sap.ui.Device.system.phone){h="200";}else if(sap.ui.Device.system.tablet&&sap.ui.Device.orientation.portrait){h="279"}else{h="279";}return h;};},"sap/extent/uilib/VideoUploaderRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.VideoUploaderRenderer");sap.extent.uilib.VideoUploaderRenderer={};sap.extent.uilib.VideoUploaderRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");if(c.getSrc()||c.getSrc2()){r.write("<div>");r.write("<video controls='true'");r.writeAttributeEscaped("poster",c.getPosterImageUrl());if(c.getType2()){r.writeAttributeEscaped("type",c.getType2());}r.writeAttributeEscaped("id",c.getId()+"-videoControl");r.writeAttributeEscaped("width",c.getVideoWidth());r.writeAttributeEscaped("height",c.getVideoHeight());r.write(">");if(c.getSrc()){r.write("<source ");r.writeAttributeEscaped("src",c.getSrc());if(c.getType()){r.writeAttributeEscaped("type",c.getType());}r.write(">");}if(c.getSrc2()){r.write("<source ");r.writeAttributeEscaped("src",c.getSrc2());if(c.getType2()){r.writeAttributeEscaped("type",c.getType2());}r.write(">");}r.write("</video><p>");r.write("</div>");r.write("<div class='sapExtentUilibVideoEmpty sapExtentUilibVideoHide'");r.writeAttributeEscaped("id",c.getId()+"-emptyVideoContainer");r.write(">");r.renderControl(c._getWebcamIcon());r.write("</div>");r.write("<div");r.writeAttributeEscaped("id",c.getId()+"-fileName");r.write(">");r.writeEscaped(c.getFileName());r.write("</div>");r.write("<div");r.addClass('sapExtentUilibVideoUpload');r.writeClasses();r.write(">");r.write("<input");r.writeAttributeEscaped("id",c.getId()+"-videoInput");r.write("type='file' accept='video/*' capture='camcorder'>");r.write("</div>");r.renderControl(c._getUploadButton());r.renderControl(c._getRemoveButton());}else if(c.getFileName()&&!c.getSrc()){r.renderControl(c._getTranscodingStatus());r.renderControl(c._getRefreshButton());}else{r.write("<div class='sapExtentUilibVideoEmpty'");r.writeAttributeEscaped("id",c.getId()+"-emptyVideoContainer");r.write(">");r.renderControl(c._getWebcamIcon());r.write("</div>");r.write("<div");r.writeAttributeEscaped("id",c.getId()+"-fileName");r.write(">");r.writeEscaped(c.getFileName());r.write("</div>");r.write("<div");r.addClass('sapExtentUilibVideoUpload');r.writeClasses();r.write(">");r.write("<input");r.writeAttributeEscaped("id",c.getId()+"-videoInput");r.write("type='file' accept='video/*' capture='camcorder'>");r.write("</div>");r.renderControl(c._getUploadButton());r.renderControl(c._getRemoveButton());}r.write("</div>");}},"sap/extent/uilib/VizChart.js":function(){jQuery.sap.declare("sap.extent.uilib.VizChart");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.MaskableCore");sap.extent.uilib.MaskableCore.extend("sap.extent.uilib.VizChart",{metadata:{library:"sap.extent.uilib",properties:{data:{type:"object",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null}},aggregations:{_chart:{type:"sap.viz.ui5.controls.VizFrame",multiple:false}},events:{onBeforeRendering:{},onAfterRendering:{}}}});jQuery.sap.require("sap.viz.ui5.controls.VizFrame");jQuery.sap.require("sap.viz.ui5.controls.Popover");jQuery.sap.require("sap.viz.ui5.controls.common.feeds.FeedItem");jQuery.sap.require("sap.viz.ui5.data.FlattenedDataset");jQuery.sap.require("sap.extent.uilib.ConfigurableLabel");sap.extent.uilib.VizChart.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.VizChart.prototype.onBeforeRendering=function(e){this.oVizFrame=new sap.viz.ui5.controls.VizFrame({'uiConfig':{'applicationSet':'fiori'}});if(this.getData()){var c=this.getChartType();if(c==="SalaryOverTime"){this._prepareSalaryTimeChart('time_bubble');}else if(c==="TeamSalary"){this._prepareTeamSalaryChart('column');}else{this.setAggregation('_chart',this.oVizFrame);this.oVizFrame.setVizType(this.getChartType());this.fireOnBeforeRendering({vizFrame:this.oVizFrame});}}};sap.extent.uilib.VizChart.prototype._prepareSalaryTimeChart=function(c){var d=this.getData();this.chartWidth=this.getWidth();this.chartHeight=this.getHeight();var m=new sap.ui.model.json.JSONModel();if(d){var l={data:[]};for(var i=0;i<d.length;i++){for(var j=d[i].dataPoints.length-1;j>=0;j--){var a=d[i].dataPoints[j];a.label=d[i].label;a.dateStr=a.details.date;a.bubble=10;l.data.push(a);}}var s=(l.data.length>1)?true:false;m.setData(l);if(this.chartWidth&&this.chartHeight){this.oVizFrame.setWidth(this.chartWidth);this.oVizFrame.setHeight(this.chartHeight);}this.setAggregation('_chart',this.oVizFrame);var D=new sap.viz.ui5.data.FlattenedDataset({dimensions:[{name:'label',value:"{label}"},{"name":"Date","value":"{date}","dataType":"date"}],measures:[{name:'Date',value:'{date}'},{name:'Salary',value:'{value}'},{name:'bubble',value:'{bubble}'}],data:{path:"/data"}});this.oVizFrame.setVizProperties({legend:{visible:true,title:{text:this.oBundle.getText("ECT_PAYCOMPONENT_RECURRING_PIR_CHART_TITLE")}},interaction:{selectability:{mode:"exclusive"}},sizeLegend:{visible:false,title:{visible:false}},title:{visible:false},timeAxis:{title:{visible:false},axisTick:{visible:false},axisLine:{visible:true}},valueAxis:{title:{visible:false},axisTick:{visible:false},axisLine:{visible:true},label:{formatString:"u"}}});this.oVizFrame.setDataset(D);this.oVizFrame.setModel(m);var f=new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"timeAxis",'type':"Dimension",'values':["Date"]}),b=new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"valueAxis",'type':"Measure",'values':["Salary"]}),e=new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"bubbleWidth",'type':"Measure",'values':["bubble"]}),g=new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"regionColor",'type':"Dimension",'values':["label"]});this.oVizFrame.addFeed(f);this.oVizFrame.addFeed(b);this.oVizFrame.addFeed(e);this.oVizFrame.setVizType("timeseries_bubble");if(d.length>1){this.oVizFrame.addFeed(g);}}};sap.extent.uilib.VizChart.prototype._prepareTeamSalaryChart=function(c){var d=this.getData().salaryList;var t=this.getData().targetUser;this.chartWidth=this.getWidth();this.chartHeight=this.getHeight();var m=new sap.ui.model.json.JSONModel();if(d){var p=[];for(var i=0;i<d.length;i++){var f=false;for(var j=0;j<p.length&&!f;j++){if(d[i].payGrade===p[j]){f=true;d[i].payGradeIndex=j;}}if(!f){d[i].payGradeIndex=p.length;p.push(d[i].payGrade);}}m.setProperty("/data",d);if(this.chartWidth&&this.chartHeight){this.oVizFrame.setWidth(this.chartWidth);this.oVizFrame.setHeight(this.chartHeight);}this.setAggregation('_chart',this.oVizFrame);var D=new sap.viz.ui5.data.FlattenedDataset({dimensions:[{name:'Name',value:"{userId}"}],measures:[{name:'Salary',value:'{salary}'}],data:{path:"/data"}});this.oVizFrame.setVizProperties({legend:{visible:false,title:{visible:false}},interaction:{selectability:{mode:"exclusive"}},plotArea:{dataPointStyle:{rules:[{dataContext:{"Name":t},properties:{color:"SkyBlue"}}],others:{properties:{color:"sapUiChartPaletteSemanticNeutral"}}}},title:{visible:false},categoryAxis:{title:{visible:false},axisTick:{visible:false},label:{visible:false,hideSubLevels:true}},valueAxis:{title:{visible:false},label:{formatString:'u'},axisTick:{visible:false},axisLine:{visible:true}}});this.oVizFrame.setDataset(D);this.oVizFrame.setModel(m);var a=new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"primaryValues",'type':"Measure",'values':["Salary"]}),b=new sap.viz.ui5.controls.common.feeds.FeedItem({'uid':"axisLabels",'type':"Dimension",'values':["Name"]});this.oVizFrame.addFeed(a);this.oVizFrame.addFeed(b);this.oVizFrame.setVizType(c);}};sap.extent.uilib.VizChart.prototype.onAfterRendering=function(){if(this.getData()){var c=this.getChartType();if(c==="SalaryOverTime"){this._createSalaryTimePopup();}else if(c==="TeamSalary"){this._createTeamSalaryPopup();}else{this.fireOnAfterRendering({vizFrame:this.oVizFrame});}}};sap.extent.uilib.VizChart.prototype._createTeamSalaryPopup=function(){var d=this.getData().salaryList;this.oVizFrame.attachSelectData(function(e){if(d){for(var i=0;i<d.length;i++){if(d[i].userId===e.getParameter('data')[0].data.Name){var p=new sap.ui.layout.HorizontalLayout();var a=new sap.m.Popover({placement:sap.m.PlacementType.Top,ariaLabelledBy:p.getId(),showHeader:false});p.addStyleClass("sapExtentUilibFormPatternLanguagePopup");a.addContent(p);var b=new sap.m.Image({src:"/localpicture?ps_p_action=show&ps_p_uid="+d[i].userId+"&p_type=liveProfile&_s.crb="+ajaxSecKey+"&invalidateCache="+(new Date()).getTime(),densityAware:false});b.addStyleClass("sapExtentUilibVizChartPopupImage");p.addContent(b);var c=new sap.ui.layout.VerticalLayout();p.addContent(c);var n=d[i].displayName?d[i].displayName:d[i].name;var t=new sap.m.Text({text:n});c.addContent(t);var v=new sap.m.ObjectNumber({number:d[i].salaryFormatted,unit:d[i].currency});c.addContent(v);a.openBy(e.getParameter("data")[0].target);}}}});};sap.extent.uilib.VizChart.prototype._createSalaryTimePopup=function(){var d=this.getData();this.oVizFrame.attachSelectData(function(e){if(d){for(var i=0;i<d.length;i++){for(var j=0;j<d[i].dataPoints.length;j++){if(e.getParameter('data')[0].data.Date===d[i].dataPoints[j].date){var p=new sap.ui.layout.VerticalLayout();var a=new sap.m.Popover({placement:sap.m.PlacementType.Top,ariaLabelledBy:p.getId(),showHeader:false});p.addStyleClass("sapExtentUilibFormPatternLanguagePopup");a.addContent(p);var t=new sap.m.Text({text:d[i].dataPoints[j].details.date});p.addContent(t);for(var k=0;k<d[i].dataPoints[j].details.items.length;k++){var r=new sap.ui.layout.HorizontalLayout({width:"100%"});if(k<d[i].dataPoints[j].details.items.length-1){r.addStyleClass("sapExtentUilibFormPatternPopupRow");}else{r.addStyleClass("sapExtentUilibFormPatternPopupHorizontalLine");}var l=new sap.m.Text({text:d[i].dataPoints[j].details.items[k].label});l.addStyleClass("sapExtentUilibFormPatternLabel");l.addStyleClass("sapExtentUilibFormPatternPopupLabel");r.addContent(l);var v=new sap.m.ObjectNumber({number:d[i].dataPoints[j].details.items[k].value,unit:d[i].dataPoints[j].details.items[k].currency});v.addStyleClass("sapExtentUilibFormPatternPopupValue");r.addContent(v);p.addContent(r);}a.openBy(e.getParameter("data")[0].target);}}}}});};},"sap/extent/uilib/VizChartRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.VizChartRenderer");jQuery.sap.require("sap.extent.uilib.MaskableCoreRenderer");sap.extent.uilib.VizChartRenderer=sap.ui.core.Renderer.extend(sap.extent.uilib.MaskableCoreRenderer);sap.extent.uilib.VizChartRenderer.renderContent=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibVizChart");r.writeClasses();r.write(">");r.renderControl(c.getAggregation('_chart'));r.write("</div>");};},"sap/extent/uilib/YouMayAlso.js":function(){jQuery.sap.declare("sap.extent.uilib.YouMayAlso");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.YouMayAlso",{metadata:{library:"sap.extent.uilib",properties:{label:{type:"string",group:"data",defaultValue:""},description:{type:"string",group:"data",defaultValue:""},blockId:{type:"string",group:"data",defaultValue:null},selected:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}},events:{boxSelect:{}}}});jQuery.sap.require("sap.m.CheckBox");sap.extent.uilib.YouMayAlso.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();};sap.extent.uilib.YouMayAlso.prototype.getCheckBox=function(){var c=this.getAggregation('_checkBox');if(!c){c=new sap.m.CheckBox({text:this.getLabel(),selected:this.getSelected(),select:[function(e){this.fireBoxSelect({blockId:this.getBlockId(),isSelected:c.getSelected()});},this]});this.setAggregation("_checkBox",c);}return c;};},"sap/extent/uilib/YouMayAlsoRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.YouMayAlsoRenderer");jQuery.sap.require("sap.ui.core.Renderer");sap.extent.uilib.YouMayAlsoRenderer={};sap.extent.uilib.YouMayAlsoRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibYouMayAlso");r.writeClasses();r.write(">");r.renderControl(c.getCheckBox());if(c.getDescription()){r.write("<div");r.addClass("sapExtentUilibYouMayAlsoDescription");r.writeClasses();r.write(">");r.writeEscaped(c.getDescription());r.write("</div>");}r.write("</div>");};},"sap/extent/uilib/library.js":function(){jQuery.sap.declare("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Core");jQuery.sap.require("sap.ui.core.library");sap.ui.getCore().initLibrary({noLibraryCSS:true,name:"sap.extent.uilib",dependencies:["sap.ui.core"],types:["sap.extent.uilib.ChartType"],interfaces:[],controls:[],elements:[],version:"1.0.2-SNAPSHOT"});jQuery.sap.declare("sap.extent.uilib.ChartType");sap.extent.uilib.ChartType={bar:"bar",line:"line",card:"card",arc:"arc",map:"map"};},"sap/extent/uilib/model/EditFormGeneratorEvent.js":function(){jQuery.sap.declare('sap.extent.uilib.model.EditFormGeneratorEvent');sap.extent.uilib.model.EditFormGeneratorEvent={InitialMDFEditDataLoaded:'InitialMDFEditDataLoaded',CHANNEL:'sap.extent.uilib.EditFormGeneratorChannel'};},"sap/extent/uilib/showmeContext.js":function(){jQuery.sap.declare("sap.extent.uilib.showmeContext");jQuery.sap.require("sap.extent.uilib.library");sap.ui.core.Control.extend("sap.extent.uilib.showmeContext",{metadata:{library:"sap.extent.uilib"}});},"sap/extent/uilib/showmeContextRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.showmeContextRenderer");sap.extent.uilib.showmeContextRenderer={};sap.extent.uilib.showmeContextRenderer.render=function(r){r.write("<span");r.writeAttributeEscaped("id","alt_subNavShowMe");r.addClass("pp3HideButtonText sapMBtn sapMBtnBase");r.writeClasses();r.write(">");r.write("</span>");};},"sap/extent/uilib/util/BusyLoading.js":function(){jQuery.sap.declare("sap.extent.uilib.util.BusyLoading");jQuery.sap.require("sap.m.BusyDialog");sap.extent.uilib.util.BusyLoading=function(){this._dwrAggregator=new sap.sf.peopleprofile.util.hris.DWRAggregator();this._oInnerDialog={};};sap.extent.uilib.util.BusyLoading.prototype._getBusyDialog=function(){if(!this._oBusyDialog){this._oBusyDialog=new sap.m.BusyDialog();}return this._oBusyDialog;};sap.extent.uilib.util.BusyLoading.prototype._getInnerDialog=function(){if(this._oBusyDialog._oDialog){this._oInnerDialog=this._oBusyDialog._oDialog;}return this._oInnerDialog;};sap.extent.uilib.util.BusyLoading.prototype.show=function(d,r){this._oRefocusRef=r;this._dwrAggregator.addCollections();var b=this._getBusyDialog();var i=this._getInnerDialog();if(!i.isOpen||!i.isOpen()){b.open();}jQuery.sap.delayedCall(100,this,function(){b.focus();});if(b&&b._oDialog){var a=b._oDialog.getInitialFocus();var c=document.getElementById(a);if(c&&c.getAttribute("role")==="progressbar"){c.removeAttribute("role");c.setAttribute("role","status");}}if(d){d.then(jQuery.proxy(this.hide,this),jQuery.proxy(this.hide,this));}};sap.extent.uilib.util.BusyLoading.prototype.hide=function(){if(this._dwrAggregator.collectUntill==0||!this._dwrAggregator.isFinalResponse()){return;}var b=this._getBusyDialog();var i=this._getInnerDialog();jQuery.sap.clearDelayedCall(this._iDealyedCallId);this._iDealyedCallId=null;if(i.removeAllAriaLabelledBy&&i.getAriaLabelledBy){i.removeAllAriaLabelledBy(i.getAriaLabelledBy());}b.close();if(this._oRefocusRef){if(typeof this._oRefocusRef.focus==="function"){this._oRefocusRef.focus();}this._oRefocusRef=null;}};},"sap/extent/uilib/util/CommonPictureUploadUtils.js":function(){jQuery.sap.declare("sap.extent.uilib.util.CommonPictureUploadUtils");sap.extent.uilib.util.CommonPictureUploadUtils=function(){};sap.extent.uilib.util.CommonPictureUploadUtils.prototype.init=function(){};sap.extent.uilib.util.CommonPictureUploadUtils.prototype.getResizedCanvas=function(r,h,w,m){var a=document.createElement('canvas');var c=a.getContext('2d');var b=1;if(w>m&&w>h){b=m/w;}else if(h>m){b=m/h;}a.height=h*b;a.width=w*b;c.drawImage(r,0,0,w,h,0,0,w*b,h*b);return a;};sap.extent.uilib.util.CommonPictureUploadUtils.prototype._calcImageDrwDimForFit=function(){var i=this.originalImage;var r;var m;var d;var a;var t=this.targetImgDimToMaskPreviewRatio;var b=this.maskSize.width*t;var c=this.maskSize.height*t;var e=this.maskPreviewSize.width*t;var f=this.maskPreviewSize.height*t;if(i.height>=f&&i.width>=e){if(i.width/i.height>e/f){m=Math.min(1,f/i.height);}else{m=Math.min(1,e/i.width);}if(i.width/i.height>b/c){r=Math.min(1,b/i.width);}else{r=Math.min(1,c/i.height);}r=Math.max(r,m);}else{r=Math.max(f/i.height,e/i.width);m=r;}this._ratio=r;this._minRatio=m;};sap.extent.uilib.util.CommonPictureUploadUtils.prototype._updateSlider=function(m,r,a,i){if(m>1||r>1)a=r;this.oSlider.setMin(m*100);this.oSlider.setMax(a*100);this.oSlider.setValue(r*99);this.oSlider.setValue(r*100);if(r>=1){this.oSlider.setEnabled(false);this.oSlider.onmouseover=jQuery.proxy(function(){if(!this.oversizeTooltip){var b=i?sap.ui.getCore().getLibraryResourceBundle("sap.sf.peopleprofile.i18n").getText("EMPFILE_PP3_CANNOT_ZOOM_BG"):sap.ui.getCore().getLibraryResourceBundle("sap.sf.peopleprofile.i18n").getText("EMPFILE_PP3_CANNOT_ZOOM");this.oversizeTooltip=new sap.m.Popover({placement:sap.m.PlacementType.VerticalPreferredBottom,showHeader:false,content:[new sap.m.Text({text:b}).addStyleClass("EditProfileButtonMargin")]})}this.oversizeTooltip.openBy(this.oSlider);},this);}else{this.oSlider.setEnabled(true);this.oSlider.onmouseover=function(){return false};}this.oSlider.rerender();};sap.extent.uilib.util.CommonPictureUploadUtils.prototype.dataURItoBlob=function(d){var b;if(d.split(',')[0].indexOf('base64')>=0){b=atob(d.split(',')[1]);}else{b=unescape(d.split(',')[1]);}var m=d.split(',')[0].split(':')[1].split(';')[0];var a=new Uint8Array(b.length);for(var i=0;i<b.length;i++){a[i]=b.charCodeAt(i);}return new Blob([a],{type:m});};sap.extent.uilib.util.CommonPictureUploadUtils.prototype.isImageFile=function(f){if(f.type==="image/jpeg"||f.type==="image/png"||f.type==="image/bmp"||f.type==="image/gif"||f.type==="image/x-icon"||f.type==="image/pjpeg"){return true;}return false;};sap.extent.uilib.util.CommonPictureUploadUtils.prototype.isFileSupportedByPhotoCrop=function(i){if(typeof(i)!='object'){return false;}var a=/image\/jpeg|image\/jpg|image\/png|image\/gif/gi;return i.type.match(a);};},"sap/extent/uilib/util/CommonUtils.js":function(){jQuery.sap.declare("sap.extent.uilib.util.CommonUtils");sap.extent.uilib.util.CommonUtils=function(){};(function(){var c=null;var n={"ECTCALCFIELD":1,"ECTAMOUNTPERCENTFIELD":1,"DOUBLE":1,"DECIMAL":1,"LONG":1,"NUMBER":1};sap.extent.uilib.util.CommonUtils.getInstance=function(){if(!c){c=new sap.extent.uilib.util.CommonUtils();}return c;};var s=sap.ui.getCore().getConfiguration();sap.extent.uilib.util.CommonUtils.setStrikedSpanId=function(C){if(C.getParent()&&C.getParent().getDomRef()){var q=jQuery(C.getParent().getDomRef());if(q.find("span[role='note']")&&q.find("span[class='strikethroughTextPattern']").length>0){var b=q.find("span[class='strikethroughTextPattern']")[0].id;var d=b.split("-");q.find("input").attr("aria-describedby",d[0]);}}};sap.extent.uilib.util.CommonUtils.removeHeadings=function(h){if(jQuery(h).find("div[role='heading']")){var b=jQuery(h).find("div[role='heading']");if(b.length>0){for(var i=0,l=b.length;i<l;i++){document.getElementById(b[0].id).removeAttribute("aria-level");document.getElementById(b[0].id).removeAttribute("role");}}}};sap.extent.uilib.util.CommonUtils.prototype.announceInvisibleMessage=function(m,M,S,o){if(o.oInvisibleMessage){o.oInvisibleMessage.announce(m,M);var t=o;setTimeout(function(){t.oInvisibleMessage.announce("",M);},S);}};sap.extent.uilib.util.CommonUtils.prototype.layoutColumnWidth=null;sap.extent.uilib.util.CommonUtils.prototype.init=function(){};sap.extent.uilib.util.CommonUtils.prototype.isIE9=function(){if(navigator.appVersion.indexOf("MSIE")!=-1){if(parseFloat(navigator.appVersion.split("MSIE")[1])<10){return true;}}return false;};sap.extent.uilib.util.CommonUtils.prototype.isIE10OrOlder=function(){if(navigator.appVersion.indexOf("MSIE")!=-1){if(parseFloat(navigator.appVersion.split("MSIE")[1])<11){return true;}}return false;};sap.extent.uilib.util.CommonUtils.prototype.isFirefox=function(){return navigator.userAgent.toLowerCase().indexOf('firefox')>-1;};sap.extent.uilib.util.CommonUtils.prototype.isSafari=function(){var u=navigator.userAgent.toLowerCase();if(u.indexOf('safari')!=-1){if(u.indexOf('chrome')<=-1){return true;}}return false;};sap.extent.uilib.util.CommonUtils.prototype.getBlindnessSupport=function(){if((typeof pageHeaderJsonData!="undefined")&&pageHeaderJsonData.accessibilityPreferences){return pageHeaderJsonData.accessibilityPreferences.blindnessSupport;}return false;};sap.extent.uilib.util.CommonUtils.prototype.isLargeData=function(m){var d=m&&m.getData()||null;var t=d&&d.data&&d.data.technicalInfo||null;if(t&&t.length>=20){return true;}return false;};sap.extent.uilib.util.CommonUtils.prototype.calculateComboWidth=function(t,C,b){if(b){setTimeout(this.calculateComboWidthInner.bind(this,t,C),0);}else{this.calculateComboWidthInner(t,C);}};sap.extent.uilib.util.CommonUtils.prototype.calculateComboWidthInner=function(t,C){if(this.isLargeData(C.getModel())||!C.getDomRef()){return'auto';}var l=C.getParent().getLayoutData();if(C._hasContext){var d=C.getDomRef();d.style.width="auto";var i=d.offsetWidth;var b=Math.max(230,i);d.style.width=b-38+"px";return;}if(l&&l.getColSpan()==0){if(!this.layoutColumnWidth||!window.SCRATCH_PAD){this.layoutColumnWidth=C.getDomRef().offsetWidth/l.getSpanL();}if(!window.SCRATCH_PAD){window.SCRATCH_PAD=document.createElement('span');window.SCRATCH_PAD.className="sapExtentUilibEditPage";document.body.appendChild(window.SCRATCH_PAD);}window.SCRATCH_PAD.innerHTML=jQuery.sap.encodeHTML(t);var w=window.SCRATCH_PAD.offsetWidth;window.SCRATCH_PAD.innerHTML='';var b=Math.max(230,w+50);if(!this.layoutColumnWidth){this.layoutColumnWidth=C.getDomRef().offsetWidth/l.getSpanL()}var e=b/this.layoutColumnWidth;var r=Math.round(e);if(e>r){r++;}l.setSpanL(Math.min(r,8));l.setSpanM(Math.min(r,8));}if(this._comboChangeTimer){clearTimeout(this._comboChangeTimer);delete this._comboChangeTimer;}if(typeof resizeFieldInTheDialog==="function"){this._comboChangeTimer=setTimeout(function(){resizeFieldInTheDialog();},250);}};var F={color:{"body":"","link":"sapExtentUilibFontConfigColorLink","dimmed":"sapExtentUilibFontConfigColorDimmed","alert":"sapExtentUilibFontConfigColorAlert","callout":"sapExtentUilibFontConfigColorCallout","custom1":"sapExtentUilibFontConfigColorCustom1","custom2":"sapExtentUilibFontConfigColorCustom2"},size:{"small":"sapExtentUilibEditPageFontConfigSizeSmall","normal":"","large":"sapExtentUilibEditPageFontConfigSizeLarge","xlarge":"sapExtentUilibEditPageFontConfigSizeXLarge","xxlarge":"sapExtentUilibEditPageFontConfigSizeXXLarge"},type:{"standard":"","title":""},style:{"bold":"sapExtentUilibFontConfigStyleBold","italic":"sapExtentUilibFontConfigStyleItalic","strike":"sapExtentUilibFontConfigStyleStrike","underline":"sapExtentUilibFontConfigStyleUnderline"}};var T=jQuery.extend(true,{},F,{size:{"normal":"sapExtentUilibEditPageFontConfigSizeNormal","large":"sapExtentUilibEditPageFontConfigSizeLarge"},type:{"title":""}});sap.extent.uilib.util.CommonUtils.prototype.addClassesFromConfigForLabel=function(f,C){a(f,F,C);};sap.extent.uilib.util.CommonUtils.prototype.addClassesFromConfigForText=sap.extent.uilib.util.CommonUtils.prototype.addClassesFromConfigForLabel;sap.extent.uilib.util.CommonUtils.prototype.addClassesFromConfigForTitle=function(f,C){a(f,T,C);};sap.extent.uilib.util.CommonUtils.prototype.addClassesFromConfigForValue=sap.extent.uilib.util.CommonUtils.prototype.addClassesFromConfigForLabel;function a(f,o,C){for(var k in f){if(o.hasOwnProperty(k)){if(typeof f[k]==="string"){C.addStyleClass(o[k][f[k]]);}else if(typeof f[k]==="object"){a(f[k],o[k],C);}else if(typeof f[k]==="boolean"&&!!f[k]){C.addStyleClass(o[k]);}}}};sap.extent.uilib.util.CommonUtils.prototype.getUserPhotoJSON=function(u,b,d,e){var p={urlType:'eduPhoto',photoType:'liveProfile',mod:Date.now()};var o={profile:"SQUARE_40",showUserName:false,nameEllipsis:true,wideAsPhoto:false,showNameWhenNoPhoto:true,shrinkNameToFit:false,focusable:true};if(b&&b!=u){p.userIdEncoded=b;}else{p.userId=u;}if(typeof e==='object'){for(var k in e){o[k]=e[k];}}return{user:{userId:u,photoSrc:p,fullName:d},ariaLabel:d,options:o};};sap.extent.uilib.util.CommonUtils.prototype.setAriaHiddenOnMainContent=function(A){jQuery&&jQuery("#container")[0]&&jQuery("#container")[0].setAttribute("aria-hidden",A);jQuery&&jQuery("#ipsContainer")[0]&&jQuery("#ipsContainer")[0].setAttribute("aria-hidden",A);};if(!Array.prototype.contains){Array.prototype.contains=function(v){var l=this.length;for(var i=0;i<l;i++){if(this[i]===v){return true;}}return false;}}sap.extent.uilib.util.CommonUtils.prototype.getDownloadReasonEnable=function(u){var r="/rest/servicesfoundation/auditlog/v1/readAuditSwitches";var h={headers:{"Content-Type":"application/json; charset=UTF-8"},method:"GET"};fetch(r,h).then(function d(b){return b.json();}.bind(this)).then(function d(b){if(b.value[0].downloadReasonEnabled){this.getDownloadReason(u);}else{this.checkDMSVirsuScanAndDownload(u);}}.bind(this)).catch(function b(e){console.log(e)})};sap.extent.uilib.util.CommonUtils.prototype.getDownloadReason=function(u){sap.ui.require(["sap/sf/surj/shell/util/DownloadReason"],function(D){D.asPromise().then(function(r){if(r){var b=D.getUrlWithReason(u,"downloadReason",r);this.checkDMSVirsuScanAndDownload(b);}}.bind(this));}.bind(this));};sap.extent.uilib.util.CommonUtils.prototype.checkDMSVirsuScanAndDownload=function(u){sap.ui.require(['sap/sf/commons/util/AttachmentUtil'],function(A){A.checkDMSVirusScanAndDownload(u)});};sap.extent.uilib.util.CommonUtils.prototype.getDisplayName=function(u){var d=new jQuery.Deferred();var m=new sap.ui.model.odata.v4.ODataModel({synchronizationMode:"None",operationMode:"Server",serviceUrl:"/odatav4/workforce/Workforce.svc/v1/",groupId:"$auto"});var D=m.bindList("/WorkProfile",undefined,undefined,new sap.ui.model.Filter('legacyId',sap.ui.model.FilterOperator.EQ,u),{"$select":"displayName"});D.attachEventOnce("change",function(e){var r=e.getSource().getContexts();var b=r&&r.length>0&&r[0].getObject()?r[0].getObject().displayName:"";d.resolve(b);}.bind(this));D.getContexts();return d;};sap.extent.uilib.util.CommonUtils.prototype.formatNegativeNumberLTRtoRTL=function(v,m){if(v&&m&&sap.sf.peopleprofile.model.hris.DWRConstants.IS_NUMBER_TYPES_MAP[m]&&pageHeaderJsonData.userLocale==="ar_SA"){var b=Number(v.replace(/,/g,""));if(!isNaN(b)&&b<0){return Math.abs(b)+"-";}}return v;},sap.extent.uilib.util.CommonUtils.prototype.formatAllNegativeNumbersLTRtoRTL=function(v){if(pageHeaderJsonData.userLocale==="ar_SA"){v.forEach(function(b){b=(b instanceof Array)?b:[b];b.forEach(function(d){(d.fieldGroups||[]).forEach(function(g){var m=((g.meta||g.metadata||{}).fields)||{};var e=((g.data||{}).fields)||{};Object.keys(e).forEach(function(k){var f=e[k];var i=f.value instanceof Array;var h=i?f.value:[f.value];h.forEach(function(j,l){if(i){f.value[l]=this.formatNegativeNumberLTRtoRTL(j,m[k].type);}else{f.value=this.formatNegativeNumberLTRtoRTL(j,m[k].type);}},this);},this)},this);},this);},this);}},sap.extent.uilib.util.CommonUtils.prototype.formatNegativeNumberRTLtoLTR=function(b,m){if(b&&pageHeaderJsonData.userLocale=="ar_SA"&&sap.sf.peopleprofile.model.hris.DWRConstants.IS_NUMBER_TYPES_MAP[m]){var v=b.substr(b.length-1,1);if(v.includes("-")){return b.slice(0,-1).replace(/^/,"-");}}return b;};sap.extent.uilib.util.CommonUtils.prototype.getNumberColumnHAlignment=function(b){if(n[b]){return s.getRTL()?sap.ui.core.TextAlign.Left:sap.ui.core.TextAlign.Right;}return undefined;};sap.extent.uilib.util.CommonUtils.prototype.isNumberColumnType=function(b){return!!n[b];};sap.extent.uilib.util.CommonUtils.prototype.getMessageType=function(b){var m={ERROR:sap.ui.core.MessageType.Error,INFORMATION:sap.ui.core.MessageType.Information,NONE:sap.ui.core.MessageType.None,SUCCESS:sap.ui.core.MessageType.Success,WARNING:sap.ui.core.MessageType.Warning};return m[(b||"").toUpperCase()]||sap.ui.core.MessageType.Error};sap.extent.uilib.util.CommonUtils.prototype.showAlertMessageBox=function(o){if(!o){return;}var r=sap.ui.getCore().getModel("i18n").getResourceBundle();var b=(o.data||{}).messages;var e=r.getText("COMMON_Err").toLowerCase();if(b&&b.length){o.isErrorPresent=false;var m={};b.forEach(function(M){M.messageSeverityType=this.getMessageType(M.messageSeverity);m[M.messageSeverityType]="";o.isErrorPresent=!o.isErrorPresent?M.messageSeverityType.toLowerCase()===e:o.isErrorPresent;}.bind(this));o.messageTypeCount=Object.keys(m).length;this._showAlertMessageView(b,o);return;}this._showAlertMessageBoxLegacy(o);};sap.extent.uilib.util.CommonUtils.prototype.oAlertMessageTemplate=new sap.m.MessageItem({type:'{messageSeverityType}',title:'{referenceDifferentiatorLabel}',subtitle:'{messageText}',description:'{messageDescription}',groupName:'{referenceEntityLabel}'});sap.extent.uilib.util.CommonUtils.prototype._showAlertMessageView=function(b,o){var r=sap.ui.getCore().getModel("i18n").getResourceBundle();var d=[];var e=r.getText("COMMON_Close");var t=this;var m=new sap.m.MessageView({groupItems:true,showDetailsPageHeader:false,itemSelect:function(){B.setVisible(true);},items:{path:'/',template:t.oAlertMessageTemplate},});m.addStyleClass("ectMessageView");var B=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("nav-back"),visible:false,press:function(){m.navigateBack();this.setVisible(false);}});var M=new sap.ui.model.json.JSONModel();M.setData(b);m.setModel(M);if(o.actions&&o.actions.length){o.actions.forEach(function(g){var f=new sap.m.Button({text:g,press:function(){this.onCloseAlertMessage(f.getText(),o);D.close();}.bind(this)});d.push(f);},this)}else if(!o.isOptLock||o.isErrorPresent){var f=new sap.m.Button({text:e,press:function(){D.close();}});d.push(f);}var D=new sap.m.Dialog({content:m,contentWidth:"50%",contentHeight:"50%",buttons:d,verticalScrolling:false,customHeader:new sap.m.Bar({contentLeft:[B,new sap.m.Text({text:r.getText("COMMON_Messages")})]})});D.addStyleClass("msgViewDlg");D.attachAfterClose(function(){D.destroy();});D.attachAfterOpen(function(){if(o.messageTypeCount===1){d[0]&&d[0].focus();}});D.open();};sap.extent.uilib.util.CommonUtils.prototype.onCloseAlertMessage=function(A,o){var _=sap.ui.getCore().getModel("i18n").getResourceBundle();if(A===_.getText("ECT_COMMON_PROCEED")||A===sap.m.MessageBox.Action.YES){var b=o.contextEditPage;if(b&&(typeof b._handleProceed==="function")){b._handleProceed(o.contextAction,o.data);}}else if(A===_.getText("ECT_COMMON_CORRECT")||A===sap.m.MessageBox.Action.NO){var b=o.contextEditPage;if(b&&(typeof b._handleCorrect==="function")){b._handleCorrect(o.contextAction,o.data);}}else if(A===_.getText("COMMON_Refresh")){if(o.contextEditPage.date!=null){var d=o.contextEditPage.date;if(new DateFormat("MM/dd/yyyy").parse(d)){d=sap.sf.peopleprofile.util.pp3core.SFAPIHelper.formatDateForCalendar(d);}var p=o.data.values.Portlet;if(p==="History"){o.contextEditPage.historyDialog.loadHistoryData(d,null);}o.contextEditPage._updateEffectiveDate(d);}o.contextEditPage._refreshDialog();}};sap.extent.uilib.util.CommonUtils.prototype._showAlertMessageBoxLegacy=function(o){if(!o.messages||!o.icon){return;}var _=sap.ui.getCore().getModel("i18n").getResourceBundle();var m=(typeof o.messages==="string")?[o.messages]:o.messages;var i=o.icon;var b=!!o.orderedList;var t="",d=this;if(i===sap.m.MessageBox.Icon.ERROR){if(b){t=_.getText("COMMON_Errors_occurred",[m.length]);}else{t=_.getText("COMMON_Err");}}else if(i===sap.m.MessageBox.Icon.WARNING){t=_.getText("COMMON_Warning");}else if(i===sap.m.MessageBox.Icon.INFORMATION){t=_.getText("COMMON_Information");}else if(i===sap.m.MessageBox.Icon.QUESTION){t=_.getText("COMMON_Question_Optimistic_Locking");}else if(i===sap.m.MessageBox.Icon.SUCCESS){t=_.getText("COMMON_Success");}if(b){m="<ol class=\"sapExtentUilibUtilEditFormGeneratorOrderedErrorsList\"><li>"+m.join("</li><li>")+"</li></ol>";}else{m="<div>"+m.join("<br/>")+"</div>";}var e=new sap.ui.core.HTML({sanitizeContent:true}).setContent(m);if(!o.actions){sap.m.MessageBox.show(e,{icon:i,title:t,actions:sap.m.MessageBox.Action.CLOSE,emphasizedAction:null,onClose:jQuery.proxy(function(){if(o.isGoingBack){window.history.back();return;}var j=o.contextEditPage;if(j&&(typeof j.handleErrorDialogClose==="function")){j.handleErrorDialogClose(o.data);}if(o&&o.firstErrorField){o.firstErrorField.focus();}else if(o.data&&o.data.oInput){o.data&&o.data.oInput&&o.data.oInput.focus();}else if(j&&(typeof j.getEditObject==="function")){if(typeof j.getEditObject().getPages==="function"){if(typeof j.getEditObject().getPages()[0].getFooter==="function"){if(typeof j.getEditObject().getPages()[0].getFooter().getContent==="function"){var k=j.getEditObject().getPages()[0].getFooter().getContent();if(k&&k.length>0){k.forEach(function(l){if(l instanceof sap.m.Button&&l.getProperty("text")===_.getText("COMMON_Save")){l.focus();}});}}}}}},this)});if(e&&e.getParent()){var f=e.getParent().getDomRef();if(f&&f.getAttribute("role")==="alertdialog"){var E=e.$().parent().attr("id");var h=f.getAttribute("aria-labelledby");var g=h?(h+" "+E):E;f.setAttribute("aria-describedby",g);f.removeAttribute("aria-labelledby");}}}else{if(i===sap.m.MessageBox.Icon.QUESTION){sap.m.MessageBox.show(e,{icon:i,title:t,actions:o.actions,onClose:jQuery.proxy(function(A){this.onCloseAlertMessage(A,o);},this)});}else{sap.m.MessageBox.show(e,{icon:i,title:t,actions:o.actions,onClose:jQuery.proxy(function(A){this.onCloseAlertMessage(A,o);},this)});}}};})();},"sap/extent/uilib/util/EditFormDirtyCheck.js":function(){jQuery.sap.declare("sap.extent.uilib.util.EditFormDirtyCheck");sap.extent.uilib.util.EditFormDirtyCheck=function(e){this.init(e);return this;};(function(){sap.extent.uilib.util.EditFormDirtyCheck.prototype.init=function(){this._bFormModified=false;this._bFormFieldsRearranged=false;this._aModifiedFields=[];this._tableRowAddCount={};};sap.extent.uilib.util.EditFormDirtyCheck.prototype.modifiedFieldListener=function(e){var f=false;var i=e.getParameter("input");var m=i.getModel();var F=e.getParameter("fieldId");var r=e.getParameter("rowId");var n=e.getParameter("newRow");if(F==='externalCode'&&!i.getVisible()){return;}if(!n&&m){var I=m.getProperty("/dataList")?true:false;var b=m.getProperty("/metadata/fields/"+F+"/type")==="EDUMULTIPLERELATION"?true:false;var N=this._getFieldValue(F,m,I,r,b);var o=m.getProperty("/data/fields/"+F+"/initialValue/");var s=this._getValue(o,I,r,b);if(N!=s&&!(!N&&!s)){f=true;}}var a={fieldId:F,rowId:r};var c=this._aModifiedFields.length;if(c===0&&f){this._aModifiedFields.push(a);}else{var d=false;for(var g=0;g<c;g++){if(this._aModifiedFields[g].fieldId===F&&this._aModifiedFields[g].rowId===r){d=true;if(!f){this._aModifiedFields.splice(g,1);}break;}}if(!d&&f){this._aModifiedFields.push(a);}}this._bFormModified=this.isFormDirty();sap.ui.getCore().getEventBus().publish("peopleProfile",sap.extent.uilib.util.EditFormGenerator.FORM_DIRTY_EVENT_ID,{formModified:this._bFormModified});};sap.extent.uilib.util.EditFormDirtyCheck.prototype.formFieldsChangeListener=function(e){var a=e.getParameter("action");if(a===sap.extent.uilib.util.EditFormGenerator.FORMREADY_TABLEROW_MOVE_UP||a===sap.extent.uilib.util.EditFormGenerator.FORMREADY_TABLEROW_MOVE_DOWN||a===sap.extent.uilib.util.EditFormGenerator.FORMREADY_ATTACHMENT_PRESS){this._bFormFieldsRearranged=true;}else if(a===sap.extent.uilib.util.EditFormGenerator.FORMREADY_ADD_ACTION_NAME){var t=e.getParameter("tableId")?e.getParameter("tableId"):"undefined";this._tableRowAddCount[t]=!this._tableRowAddCount[t]?1:++this._tableRowAddCount[t];}else if(a===sap.extent.uilib.util.EditFormGenerator.FORMREADY_DELETE_ACTION_NAME){var t=e.getParameter("tableId");var r=e.getParameter("rowId");if(r===-1){--this._tableRowAddCount[t];}else{this._bFormFieldsRearranged=true;}}this._bFormModified=this.isFormDirty();sap.ui.getCore().getEventBus().publish("peopleProfile",sap.extent.uilib.util.EditFormGenerator.FORM_DIRTY_EVENT_ID,{formModified:this._bFormModified});};sap.extent.uilib.util.EditFormDirtyCheck.prototype.isFormDirty=function(){var f=false;for(sTable in this._tableRowAddCount){if(this._tableRowAddCount[sTable]!==undefined&&this._tableRowAddCount[sTable]!==0){f=true;break;}}if(!f){f=(this._aModifiedFields.length>0)||this._bFormFieldsRearranged;}return f;};sap.extent.uilib.util.EditFormDirtyCheck.prototype._getFieldValue=function(f,m,i,r,I){var v;if(i){var R=m.getProperty("/dataList/"+r+"/v");for(var a=0,l=R.length;a<l;a++){if(R[a].id===f){v=R[a]["value"];break;}}}else{v=(m.getProperty("/data/fields/"+f)||{})["value"];}return this._getValue(v,i,r,I);};sap.extent.uilib.util.EditFormDirtyCheck.prototype._getTokenizerValue=function(v,i,r){var d;if(v instanceof Array&&v.length>0){var V=i?r:0;d=v[V].defaultValue;}if(d&&d instanceof Array){var t=[];var T;for(var I=0,l=d.length;I<l;I++){if(d[I].actionType!="Delete"){t.push(d[I].actionType==="Add"?d[I].userId:d[I].value);}}}t.sort();return t.toString();};sap.extent.uilib.util.EditFormDirtyCheck.prototype._getValue=function(v,i,r,I){if(v===null||typeof v==="undefined"){return v;}if(I){return this._getTokenizerValue(v,i,r);}if(v instanceof Array){if(v.length>0){var V=i?r:0;v=v[V];}else{return v;}}if(v instanceof Object){if(v.hasOwnProperty("value")){return v.value;}else if(v.hasOwnProperty("id")){return v.id;}else if(v.hasOwnProperty("attachmentId")){return v.attachmentId;}else if(v.hasOwnProperty("userId")){return v.userId;}else{return v;}}if(typeof v==="string"||typeof v==="number"||typeof v==="boolean"){return v;}return this._getValue(v,i,r,I);};})();},"sap/extent/uilib/util/EditFormGenerator.js":'jQuery.sap.declare("sap.extent.uilib.util.EditFormGenerator");jQuery.sap.require("sap.ui.base.EventProvider");jQuery.sap.require("sap.ui.base.Event");jQuery.sap.require("sap.m.Panel");jQuery.sap.require("sap.m.Table");jQuery.sap.require("sap.m.Column");jQuery.sap.require("sap.m.ColumnListItem");jQuery.sap.require("sap.m.PopinDisplay");jQuery.sap.require("sap.m.ScreenSize");jQuery.sap.require("sap.extent.uilib.AlternateSectionLayout");jQuery.sap.require("sap.extent.uilib.AttachmentButton");jQuery.sap.require("sap.ui.layout.VerticalLayout");jQuery.sap.require("sap.ui.layout.HorizontalLayout");jQuery.sap.require("sap.ui.layout.Grid");jQuery.sap.require("sap.ui.layout.GridData");jQuery.sap.require("sap.ui.model.json.JSONModel");jQuery.sap.require("sap.ui.core.CustomData");jQuery.sap.require("sap.ui.core.InvisibleText");jQuery.sap.require("sap.ui.core.InvisibleMessage");jQuery.sap.require("sap.ui.core.format.DateFormat");jQuery.sap.require("sap.extent.uilib.util.PP3GridData");jQuery.sap.require("sap.extent.uilib.util.RulesHelper");jQuery.sap.require("sap.extent.uilib.util.EditFormGeneratorHelper");jQuery.sap.require("sap.extent.uilib.util.MDFConditionalSupport");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.extent.uilib.util.EditFormDirtyCheck");jQuery.sap.require("sap.extent.uilib.util.EditLayoutService");jQuery.sap.require("sap.extent.uilib.util.BusyLoading");jQuery.sap.require("sap.extent.uilib.util.TableGeneratorHelper");jQuery.sap.require("sap.extent.uilib.EditPage");jQuery.sap.require("sap.extent.uilib.model.EditFormGeneratorEvent");jQuery.sap.require("sap.extent.uilib.FormPattern");jQuery.sap.require("sap.m.library");\nsap.extent.uilib.util.EditFormGenerator=function(l,c){this.init(l,c||{createEmptyRow:true});return this;};\nsap.extent.uilib.util.EditFormGenerator.IS_TRANSFORMED_GRID_TO_FORM="__isTransformedGridToForm";sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID="sap.extent.uilib.util.EditFormGenerator.fieldChange";sap.extent.uilib.util.EditFormGenerator.LIVE_FIELDCHANGE_EVENT_ID="sap.extent.uilib.util.EditFormGenerator.liveFieldChange";sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID="sap.extent.uilib.util.EditFormGenerator.formReady";sap.extent.uilib.util.EditFormGenerator.QUICKCARDPRESS_EVENT_ID="sap.extent.uilib.util.EditFormGenerator.quickCardPress";sap.extent.uilib.util.EditFormGenerator.INLINEEDITPRESS_EVENT_ID="sap.extent.uilib.util.EditFormGenerator.inlineEditPress";sap.extent.uilib.util.EditFormGenerator.DETAILS_VISIBILITY_PROPERTY="_sapExtentUilibUtilEditFormGeneratorVisible";sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY="_sapExtentUilibUtilEditFormGeneratorConditionalVisible";sap.extent.uilib.util.EditFormGenerator.FORM_DIRTY_EVENT_ID="sap.extent.uilib.util.EditFormGenerator.formDirty";sap.extent.uilib.util.EditFormGenerator.DEFAULT_INPUT_WIDTH="14em";sap.extent.uilib.util.EditFormGenerator.DEFAULT_DATE_WIDTH=(window.pageHeaderJsonData&&(window.pageHeaderJsonData.userLocale=="zh_CN"||window.pageHeaderJsonData.userLocale=="zh_TW"||window.pageHeaderJsonData.userLocale=="ja_JP"||window.pageHeaderJsonData.userLocale=="ko_KR"))?"11.6em":"10em";sap.extent.uilib.util.EditFormGenerator.DEFAULT_CONTENT_WIDTH="40rem";sap.extent.uilib.util.EditFormGenerator.DEFAULT_TABLE_CONTENT_WIDTH="80%";sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM="reorder-buttons";sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM="delete-button";sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM="details-button";sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM="header-label";sap.extent.uilib.util.EditFormGenerator.FORMREADY_RENDERED_ACTION_NAME="FormRendered";sap.extent.uilib.util.EditFormGenerator.FORMREADY_ADD_ACTION_NAME="Add";sap.extent.uilib.util.EditFormGenerator.FORMREADY_DELETE_ACTION_NAME="Delete";sap.extent.uilib.util.EditFormGenerator.FORMREADY_TABLEROW_MOVE_UP="moveUp";sap.extent.uilib.util.EditFormGenerator.FORMREADY_TABLEROW_MOVE_DOWN="moveDown";sap.extent.uilib.util.EditFormGenerator.FORMREADY_ATTACHMENT_PRESS="attachmentPress";sap.extent.uilib.util.EditFormGenerator.BLOCK_ID_COMPENSATION_INFORMATION="COMPENSATION_INFORMATION";sap.extent.uilib.util.EditFormGenerator.EXTENT_RANGESET={name:"EXTENT",points:[240,320,480,560,600,768,960,1024,1120,1280,1440,1600,1920],unit:"px",names:["XXSmall","Phone","XSmall","Small","Medium","Tablet","Large","XLarge","Desktop","XXLarge","SXGA","WXGA","UXGA","WUXGA"]};sap.extent.uilib.util.EditFormGenerator.EXTENT_RANGESETS={"XXSmall":240,"Phone":240,"XSmall":320,"Small":480,"Medium":560,"Tablet":600,"Large":768,"XLarge":960,"Desktop":1024,"XXLarge":1120,"SXGA":1280,"WXGA":1440,"UXGA":1600,"WUXGA":1920};sap.extent.uilib.util.EditFormGenerator.DEFAULT_POPIN_MIN_WIDTH=sap.m.ScreenSize.Large;sap.extent.uilib.util.EditFormGenerator.DEFAULT_GRID_PROPERTIES={vSpacing:0};sap.extent.uilib.util.EditFormGenerator.LEGAL_ENTITY_FIELD_IDS=["jobInfo-company","employmentInfo-company","globalAssignmentInfo-company","pensionPayoutsInfo-company"];sap.extent.uilib.util.EditFormGenerator.PERSON_INFO_PER_PERSON_UUID="personInfo-per-person-uuid";(function(){var E=sap.extent.uilib.util.EditFormGeneratorHelper;\nsap.extent.uilib.util.EditFormGenerator.prototype.init=function(l,c){if(!sap.ui.Device.media.hasRangeSet(sap.extent.uilib.util.EditFormGenerator.EXTENT_RANGESET.name)){sap.ui.Device.media.initRangeSet(sap.extent.uilib.util.EditFormGenerator.EXTENT_RANGESET.name,sap.extent.uilib.util.EditFormGenerator.EXTENT_RANGESET.points,sap.extent.uilib.util.EditFormGenerator.EXTENT_RANGESET.unit,sap.extent.uilib.util.EditFormGenerator.EXTENT_RANGESET.names);}this._oFields={};this._newFieldLayout={};this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._sMainGroupUi5Id=null;this._oListener=l;this._bCreateEmptyRow=c.createEmptyRow;this._defaultToPorletTitleWhenEmpty=c.hasOwnProperty("defaultToPorletTitleWhenEmpty")?c.defaultToPorletTitleWhenEmpty:false;this._oForm=null;this._oFormData=null;this._sBlockId=null;this._oLayoutsByIdMap={};this._aPanels=[];this._oLabels={};this._oRules={};this._oDateFormat=E.getDateFormat();this._oCascadePicklistInfo={};this._bIsEffectiveDated=c.effectiveDated?c.effectiveDated:false;this._bForceShowOldValue=false;this._bShowBorderBottom=false;this._oCollectedRulesPropagation={};this._oEmptyObjectFormData=null;this._oLayoutDataConfig={spanL:3,spanM:4,spanS:12};this._bIsLayoutDataConfigChanged=false;this._iMaxGroupSize=1;this._oDefaultPopinTable={"WUXGA":9,"UXGA":8,"WXGA":7,"SXGA":6,"XXLarge":5,"Desktop":5,"XLarge":4,"Large":4,"Tablet":4,"Medium":3,"Small":2,"XSmall":1,"Phone":1,"XXSmall":1};this._oEventProvider=new sap.ui.base.EventProvider();this._oEventBus=sap.ui.getCore().getEventBus();this._oSCBHelper=new sap.extent.uilib.util.SCBPicklistHelper(this);this._oMdfConditionalSupport=new sap.extent.uilib.util.MDFConditionalSupport(this);this._oPrimaryFieldInfo={};this._oCommonUtils=sap.extent.uilib.util.CommonUtils.getInstance();this._iLastModifiedModelId=null;this._iLastModifiedRowIndex=-1;this._cacheRulesMetaChanges={};this._iPanelIndexes={};this.initDirtyChecker();};\nsap.extent.uilib.util.EditFormGenerator.prototype.initDirtyChecker=function(){this._oDirtyChecker=new sap.extent.uilib.util.EditFormDirtyCheck();this._oEventProvider.attachEvent(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,null,this._oDirtyChecker.modifiedFieldListener,this._oDirtyChecker);this._oEventProvider.attachEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,null,this._oDirtyChecker.formFieldsChangeListener,this._oDirtyChecker);};\nsap.extent.uilib.util.EditFormGenerator.prototype.destroy=function(){for(var g in this._oFields){for(var f in this._oFields[g]){if(this._oFields[g][f].destroy&&typeof this._oFields[g][f].destroy==="function"){this._oFields[g][f].destroy();delete this._oFields[g][f];this._oFields[g][f]=null;}}delete this._oFields[g];this._oFields[g]=null;}this._oFields=null;this._oListener=null;this._oForm=null;this._oFormData=null;this._oDateFormat=null;this._oCascadePicklistInfo={};this._fnAddNewForm=null;this._oEmptyObjectFormData=null;this._oPrimaryFieldInfo=null;this._oEventProvider.destroy();};\nsap.extent.uilib.util.EditFormGenerator.prototype.attachFieldChange=function(d,f,l){this._oEventProvider.attachEvent(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,d,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.detachFieldChange=function(f,l){this._oEventProvider.detachEvent(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.attachLiveFieldChange=function(d,f,l){this._oEventProvider.attachEvent(sap.extent.uilib.util.EditFormGenerator.LIVE_FIELDCHANGE_EVENT_ID,d,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.detachLiveFieldChange=function(f,l){this._oEventProvider.detachEvent(sap.extent.uilib.util.EditFormGenerator.LIVE_FIELDCHANGE_EVENT_ID,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.attachQuickCardPress=function(d,f,l){this._oEventProvider.attachEvent(sap.extent.uilib.util.EditFormGenerator.QUICKCARDPRESS_EVENT_ID,d,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.detachQuickCardPress=function(f,l){this._oEventProvider.detachEvent(sap.extent.uilib.util.EditFormGenerator.QUICKCARDPRESS_EVENT_ID,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.attachInlineEditPress=function(d,f,l){this._oEventProvider.attachEvent(sap.extent.uilib.util.EditFormGenerator.INLINEEDITPRESS_EVENT_ID,d,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.detachInlineEditPress=function(d,f,l){this._oEventProvider.detachEvent(sap.extent.uilib.util.EditFormGenerator.INLINEEDITPRESS_EVENT_ID,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.attachFormReady=function(d,f,l){this._oEventProvider.attachEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,d,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype.detachFormReady=function(d,f,l){this._oEventProvider.detachEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,d,f,l);};\nsap.extent.uilib.util.EditFormGenerator.prototype._getEditForm=function(f,I){var F=jQuery.isEmptyObject(this._oFields);f=jQuery.extend(true,{},f);var p=[];var P=[];var o=f.fieldGroups;this._sDepFormattedAddress=f.relatedEmployeesFormattedAddress;if(f.editLayoutConfigurations){if(jQuery.isArray(f.editLayoutConfigurations)){sap.extent.uilib.util.EditLayoutService.processSectionLayouts(f.editLayoutConfigurations,o);}else{for(var a=0,l=o.length;a<l;a++){var e=o[a];var b=f.editLayoutConfigurations.editableFieldConfig;sap.extent.uilib.util.EditLayoutService.matchLayoutToFieldGroup(e,b);}}}this._oForm=f;this._oFields={};this._oFormData=o;this._sBlockId=f.portletID;this._oCascadePicklistInfo={};this._sTableOperation=null;this._sTableId=null;this._bForceShowOldValue=false;this._invalidFieldIdList=null;this._fnAddNewForm=null;this._portletEditable=!!f.portletEditable;this._isWorkflowUpdate=f.hasOwnProperty("workflow");if(I){this._invalidFieldIdList=I.invalidFieldIdList;}if(f.hasOwnProperty("rules")){this._oRules=f.rules;}if(f.hasOwnProperty("securityKey")){sap.extent.uilib.EditPage._cacheSecurityKeyInForm=f.securityKey;}if(this._listenerImplementsFunction("getCustomPopinTable")){var c=this._oListener.getCustomPopinTable();if(c){this._oDefaultPopinTable=c;}}this._initLayoutData(o,null,f.isHistory);if(this._isWorkflowUpdate){this._bForceShowOldValue=true;}if(!this._bIsEffectiveDated&&this._listenerImplementsFunction("setShowEffectiveDate")&&typeof this._listenerImplementsFunction("setEffectiveDate")){if(!f.isFromDetailsDialog&&f.hasOwnProperty("effectiveDated")&&f.effectiveDated){this._bIsEffectiveDated=true;this._oListener.setShowEffectiveDate(true,f.sEffectiveDateHelpText);if(!f.hasOwnProperty("bIgnoreDateSetValue")){var d=null;if(this._isWorkflowUpdate){var A=f.actionVO;d=A&&A.effectiveDate&&A.effectiveDate.dateInStringFormat;}else if(f.isHistory&&f.isCorrection){d=f.effectiveDateId||f.effectiveDate;}if(this._listenerImplementsFunction("setEffectiveDateEditable")&&f.hasOwnProperty("effectiveDateWritable")){this._oListener.setEffectiveDateEditable(f.effectiveDateWritable);}this._oListener.setEffectiveDate(d||this._getEffectiveDate());}}else{this._oListener.setShowEffectiveDate(false);}}if(f.hasOwnProperty("eventFields")&&f.eventFields){this._buildEventFields(f,p);}this._updateTotalCompHistoryData(f);if(this._oListener&&typeof this._oListener.setShowAddButton==="function"){this._oListener.setShowAddButton(false);}if(f.hasOwnProperty("submitButtonText")&&f.submitButtonText)this._oListener.getSubmitButton().setText(f.submitButtonText);var g=this._isFormHasMultipleMGroups();var h,j;for(var i=0;i<o.length;i++){h=o[i];var C=this._bCreateEmptyRow;j=this._buildFieldGroup(h,i,g?false:true,C);if(j){if(this._oEmptyObjectFormData&&this._oEmptyObjectFormData.id==h.id){P.push(j);}else{p.push(j);}E.addCustomDataForComponent(j,sap.extent.uilib.util.EditFormGeneratorHelper.FORM_BLOCK_ID_KEY,f.portletID);}}if(this._listenerImplementsFunction("setShowAddButton")&&o.length==1&&o[0]&&o[0].layout&&o[0].layout.renderStyle=="table"){var s=true;var k=h.data.technicalInfo.length;var m=h.metadata.maxRows;if(m&&k>=m){s=false;}this._oListener.setShowAddButton(s);if(f.portletTitle){var n=this._oBundle.getText("ECT_COMMON_ADD",f.portletTitle);if(this._listenerImplementsFunction("setAddButtonText")){this._oListener.setAddButtonText(n);}}this._oListener.attachAddPress(jQuery.proxy(this.addEmptyTableRowInVerticalLayout,this,j));}h=null;j=null;if(this._oEmptyObjectFormData&&this.canCreateAddButton(this._oEmptyObjectFormData.metadata)){var q=new sap.ui.layout.VerticalLayout({width:"100%"});var M=new sap.ui.model.json.JSONModel({deletedPanels:[]});q.setModel(M);p.push(q);if(P.length>0){jQuery.each(P,function(y,V){V=V.getContent()[0];if(V instanceof sap.m.Panel){q.addContent(V);}jQuery.each(V.getContent(),function(z,B){if(B instanceof sap.m.Panel){q.addContent(B);}});});}var t=function(y){j=y._buildFieldGroup(jQuery.extend(true,{},y._oEmptyObjectFormData),i++,false,false);var z=j.getContent()[0].getContent()[0];y._addPanelTemplateAfterRenderingDelegate(z);q.addContent(z);if(q.getContent().length>0){q.setVisible(true);}};if(this._oListener.allowInlineAddButton&&this._oListener.allowInlineAddButton()){var u=new sap.m.Button({text:this._oBundle.getText("ECT_COMMON_ADD",this._oEmptyObjectFormData.metadata.label),icon:"sap-icon://add",type:sap.m.ButtonType.Transparent,press:[function(y){t(this);},this]});u.addStyleClass("sapExtentUilibUtilEditFormGeneratorAddRowButton");p.push(new sap.ui.layout.VerticalLayout({width:"100%",content:u}));}else{this._fnAddNewForm=function(){t(this);};var v;if(this._oEmptyObjectFormData.metadata&&this._oEmptyObjectFormData.metadata.label){v=this._oEmptyObjectFormData.metadata.label;}else if(f.portletTitle){v=f.portletTitle;}if(v){var n=this._oBundle.getText("ECT_COMMON_ADD",v);if(this._listenerImplementsFunction("setAddButtonText")){this._oListener.setAddButtonText(n);}}this._oListener.setShowAddButton(true);}}this._updateCascadePicklistStatus();if(!this._bShowBorderBottom&&p.length===1){p[0].addStyleClass("sapExtentUilibUtilEditFormGeneratorNoBorderBottom");}this._triggerConditionalSupport();this._aPanels=p;this._setPanelIndexInForm();if(f.initRules){this._executeUIRules(null,f.initRules);}if(f.insertRules&&f.isHistory&&!f.isCorrection){this._executeUIRules(null,f.insertRules);}this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_RENDERED_ACTION_NAME,firstInit:F,blockId:this.getBlockId(),isFromDetailsDialog:f.isFromDetailsDialog});for(var w=0,L=sap.extent.uilib.util.EditFormGenerator.LEGAL_ENTITY_FIELD_IDS.length;w<L;w++){var x=this.getInputById(sap.extent.uilib.util.EditFormGenerator.LEGAL_ENTITY_FIELD_IDS[w]);if(x){sap.ui.getCore().getModel("RDP")&&sap.ui.getCore().getModel("RDP").setProperty("/companyId",x.getSelectedKey());break;}}if(this._oForm.hasOwnProperty("cachedRulesMetaChanges")){this._cacheRulesMetaChanges=this._oForm.cachedRulesMetaChanges;}this._applyCachedRulesMetaChanges();return p;};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateTotalCompHistoryData=function(f){if(f.hasOwnProperty("totalCompHistoryData")&&f.totalCompHistoryData){if(this._bUpdateLastModifiedDetails){sap.extent.uilib.util.EditFormGeneratorHelper.updateTotalCompHistory(f);}sap.ui.getCore().setModel(new sap.ui.model.json.JSONModel(f.totalCompHistoryData),"totalCompHistoryData");}else if(sap.ui.getCore().getModel("totalCompHistoryData")){sap.ui.getCore().getModel("totalCompHistoryData").setData(null);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._applyCachedRulesMetaChanges=function(){var t=this;this._cacheRulesMetaChanges=this._cacheRulesMetaChanges||{};jQuery.each(this._cacheRulesMetaChanges,function(m,R){jQuery.each(R,function(a,f){jQuery.each(f,function(I,F){jQuery.each(F,function(s,p){jQuery.each(p,function(P,v){t.updatePropertyById(s,parseInt(a,10),P,v,false,true,null,m)})})})})});};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateCascadePicklistStatus=function(){for(var p in this._oCascadePicklistInfo){var I=this.getInputsById(p);if(I&&I.length>0){for(var a=0,b=I.length;a<b;a++){var P=E.getInputValue(I[a]);if(!P){var c=this._oCascadePicklistInfo[p];for(var d=0,e=c.length;d<e;d++){var C=this.getInputById(c[d],a);if(C){var o=E.getMeta(C);if(o&&o.parentFieldId){C.setEnabled(false);}}}}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildFieldGroup=function(f,a,c,C){var m=f.metadata;var g=f.id||f.metadata.id||f.metadata.sectionId;if(m.hasOwnProperty("emptyObject")&&m.emptyObject){this._oEmptyObjectFormData=f;this._oEmptyObjectFormData.data.technicalInfo=[{actionType:"Add",id:-1}];m.emptyObject=false;return null;}var d=f.data||{};var l=f.layout;var v=new sap.ui.layout.VerticalLayout();var s=f.id||f.metadata.id||f.metadata.sectionId;E.addCustomDataForComponent(v,"sectionId",s);if(!m.hasOwnProperty("group")||!(m.group==="EXPLICIT_RELATION")){v.setWidth("100%");}if(f.alternateSections){E.copyMetaAndData(f.alternateSections,m,d,true);}var G;if(f.id==="PERSON_GLOBAL_INFO"){G=f.data&&f.data.fields&&f.data.fields.country&&f.data.fields.country.hasOwnProperty("cascadeChildren")&&f.data.fields.country.cascadeChildren.length>0&&f.data.fields.country.cascadeChildren[0];G=G&&G.editLayoutConfigurations&&G.editLayoutConfigurations.group;}E.applyMaxFieldsToShow(m,G?G:l);var M=l;f._sMainGroupId=(f.id||f.metadata.id||f.metadata.sectionId)+"_"+a;this._sMainGroupUi5Id=f._sMainGroupId;if(!M||M.renderStyle=="panel"){this._buildFGPanel(f,m,d,l,v,M,a,c,C);}else if(M.renderStyle==="table"){this._buildFGTable(f,m,d,l,v,a,C);}if(g&&v){this._oLayoutsByIdMap[g]=this._oLayoutsByIdMap[g]||[];this._oLayoutsByIdMap[g].push(v);}return v;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getHeight=function(c,I){var h=0;for(var i=0;i<c.length;i++){if(c[i]===I){return h;}else{h+=c[i].getDomRef()&&c[i].getDomRef().offsetHeight;}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._findHeightOfContentAbove=function(c,p){var P=c.getParent();if(P===p){return this._getHeight(p.getContent(),c);}else{return this._getHeight(P.getContent(),c)+this._findHeightOfContentAbove(c.getParent(),p);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._handlePanelLayoutAfterRendering=function(p,a,b){var t=0;if(this._listenerImplementsFunction("scrollTo")&&this._listenerImplementsFunction("getCurrentPage")){var P=this._oListener.getCurrentPage();if(P){if(p.getDomRef()){t=this._findHeightOfContentAbove(p,P);this._oListener.scrollTo(t);this._bScrollToLastItem=false;}else{setTimeout(function(){if(a&&b){this._setPanelIndexInForm();var c=this._newFieldLayout[b][a];var d=c.getParent()&&c.getParent().getParent().getParent();t=this._findHeightOfContentAbove(d,P);this._oListener.scrollTo(t);this._bScrollToLastItem=false;c.focus();}}.bind(this),0);}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._addPanelTemplateAfterRenderingDelegate=function(p){var P={onAfterRendering:function(){this._handlePanelLayoutAfterRendering(p);p.removeEventDelegate(P);if(this._oForm.initRules){this._executeUIRules(this._getPanelRowIndex(p),this._oForm.initRules);}this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_ADD_ACTION_NAME,tableId:p.getModel().getData().id});}};p.addEventDelegate(P,this);};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildFGPanel=function(f,m,d,l,p,M,a,c,C){if(this._oFields&&!this._oFields[f._sMainGroupId+"_0"]){this._iPanelIndexes[f._sMainGroupId]=0;}p.addStyleClass("sapExtentUilibUtilEditFormGeneratorFGPanel");var g=[];var b=[];if(f.id==="PERSON_GLOBAL_INFO"){var G=f.data&&f.data.fields&&f.data.fields.country&&f.data.fields.country.cascadeChildren;if(G&&G.length){for(var e=0;e<G.length;e++){g.push(G[e].editLayoutConfigurations);}}}if(f.id==="BIOGRAPHICAL_INFO_LOC"){var G=f.data&&f.data.fields&&f.data.fields.country&&f.data.fields.country.cascadeChildren;if(G&&G.length){for(var e=0;e<G.length;e++){b.push(G[e].editLayoutConfigurations);}}}d=E.splitFormData(m,d);var v=null;var P=null;var h=m.drivenById||!c||(this._oListener.allowInlineAddButton&&this._oListener.allowInlineAddButton())||typeof this._fnAddNewForm==="function";if(m.hasMultiple){if(!this._oEmptyObjectFormData&&h){P=new sap.m.Toolbar({content:[new sap.m.Title({text:m.title||m.label})],design:sap.m.ToolbarDesign.Transparent});P.setVisible(d.length===0);P.addStyleClass("sapExtentUilibUtilEditFormGeneratorToolbar");p.addContent(P);P.addEventDelegate({onAfterRendering:jQuery.proxy(function(u){if(jQuery(".sapExtentUilibUtilEditFormGeneratorToolbar").find("header, div[role=\'heading\']")&&jQuery(".sapExtentUilibUtilEditFormGeneratorToolbar").find("header, div[role=\'heading\']").length>0){sap.extent.uilib.util.CommonUtils.removeHeadings(".sapExtentUilibUtilEditFormGeneratorToolbar");}},P)});}v=new sap.ui.layout.VerticalLayout({width:"100%"});v.addStyleClass("sapExtentUilibUtilEditFormGeneratorFGPanelVL");var o=new sap.ui.model.json.JSONModel({deletedPanels:[]});v.setModel(o);p.addContent(v);}else{var o=new sap.ui.model.json.JSONModel({deletedPanels:[]});p.setModel(o);v=p;}var t=this;function j(d,u,w,x){if(P!=null){P.setVisible(false);}if(d.technicalInfo&&d.technicalInfo.length==0){d.technicalInfo.push({id:-1,actionType:"Add"});}var N=jQuery.extend({},f,{data:d,metadata:jQuery.extend(true,{},m)});var y=N.metadata;var z=E.getDataSizeTweakMetaAndData(y,d);var D=false;if(f.id==="PERSON_GLOBAL_INFO"&&x!==null&&x!==undefined&&g&&g.length){l=g[x]&&g[x].group?g[x].group:null;M=l;}if(f.id==="BIOGRAPHICAL_INFO_LOC"&&x!==null&&x!==undefined&&b&&b.length){l=b[x]&&b[x].group?b[x].group:null;M=l;}if(!l){D=true;l=E.buildDefaultPanelLayout(y);M=l;}if(f.alternateSections&&D){var B=E.buildAlternateSectionsLayoutGroups(f.alternateSections,f.editLayoutConfigurations&&f.editLayoutConfigurations.elementId);l.items=l.items.concat(B);}var F=f._sMainGroupId+"_"+t._iPanelIndexes[f._sMainGroupId];u._sMainGroupUi5Id=F;N._sMainGroupId=F;u._addPrimaryFieldInfo(F,N);var H=new sap.ui.model.json.JSONModel(N);H.setSizeLimit(z);var J=u._buildPanel(M,l,y,d,a,F);if((y.drivenById&&y.drivenResolverIds)||y.isConditionalGroup||y.restrictingFieldResolver){if(y.isConditionalGroup){y[sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY]=false;u._oMdfConditionalSupport.registerConditionalGroup(y.drivenById,y.id,v,y);}else if(y.restrictingFieldResolver){u._oMdfConditionalSupport.registerPlaceholderGroup(y.restrictingFieldResolver,y.id,y.restrictingFieldValues,v,y);}else{y[sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY]=false;u._oMdfConditionalSupport.registerPlaceholderGroup(y.drivenById,y.id,y.drivenResolverIds,v,y);}}J.setModel(H);var K=J.getHeaderToolbar();if(y.fieldsOrder&&y.fieldsOrder.length===0){J.setProperty("visible",true);if(K){K.setProperty("visible",true);}}v.addContent(J);t._iPanelIndexes[f._sMainGroupId]+=1;if(D){l=null;}v.removeStyleClass("sapExtentUilibUtilEditFormGeneratorFGPanelVL");return J;}function k(u,U){var w=j(E.getEmptyFormData(m),u,true);if(U){u.updateLastModifiedDetails(w.getModel().getId(),0);u._addPanelTemplateAfterRenderingDelegate(w);}var x=w.getParent();if(x.getContent().length>0){x.setVisible(true);u._setPanelIndexInForm();if(m.maxRows==1){if(u&&u._listenerImplementsFunction("setShowAddButton")){u._oListener.setShowAddButton(false);}x.getModel()&&x.getModel().setProperty("/deletedPanels",[]);}}}for(var I=0,L=d.length;I<L;I++){var n=j(d[I],this,false,I);if(this._bUpdateLastModifiedDetails){this.updateLastModifiedDetails(n.getModel().getId(),I);}}if(d.length===0&&C&&(!m.actions||(m.actions&&m.actions.create))){k(this,false);}if(!this._oEmptyObjectFormData&&this.canCreateAddButton(m)){var A=m.hasOwnProperty("maxRows")?d.length<m.maxRows:true;if(h){var q=new sap.m.Button({text:this._oBundle.getText("COMMON_Add",m.label),type:sap.m.ButtonType.Default,visible:A,press:[function(u){this.eFlag=1;k(this,true);this._updateCascadePicklistStatus();},this]});q.addStyleClass("sapExtentUilibUtilEditFormGeneratorAddRowButton");q.addEventDelegate({onAfterRendering:function(){var B=q.getText();var u=m.label;var $=document.getElementById(q.getId());if($){$.setAttribute("aria-label",B+" "+u);}}});p.addContent(q);}else{this._fnAddNewForm=function(){k(this,true);};if(m.label){var s=this._oBundle.getText("ECT_COMMON_ADD",m.label);if(this._listenerImplementsFunction("setAddButtonText")){this._oListener.setAddButtonText(s);}}this._oListener.setShowAddButton&&this._oListener.setShowAddButton(A);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._isFormHasMultipleMGroups=function(){var n=0;jQuery.each(this._oFormData,function(a,f){var m=f.metadata;if((m.hasOwnProperty("hasMultiple")&&m.hasMultiple)||(m.hasOwnProperty("emptyObject")&&m.emptyObject)){n+=1;}});return n>1;};\nsap.extent.uilib.util.EditFormGenerator.prototype.getFieldError=function(f){var R=[];var t=this;jQuery.each(f,function(F,a){jQuery.each(t._oFormData,function(s,e){var b=e.metadata.fieldsOrder;if(b.contains(F)){R.push(e.metadata.fields[F].label+" : "+f[F]);delete f[F]}jQuery.each(e.metadata.fields,function(c,d){if(d.cascadeChildren&&d.cascadeChildren.length){jQuery.each(d.cascadeChildren,function(g,h){var j=h.fieldsOrder;if(j.contains(F)){R.push(h.fields[F].label+" : "+f[F]);delete f[F]}})}})})});return R;};\nsap.extent.uilib.util.EditFormGenerator.prototype._addEndDateButton=function(d,c,D){var a=d.technicalInfo;var p=d.fields["payComponentRecurring-pay-component"].value;var h=false;if(p){jQuery.each(p,function(b,e){if(e&&e.isEndDatedPayment){h=true;return false;}});}if(h){if(!this._addEndDateDialog){this._addEndDateDialog=sap.ui.xmlfragment("endDateDialog","sap.sf.peopleprofile.view.hris.fragment.endDateDialog",this);}c.push(new sap.m.Button({icon:"sap-icon://calendar",type:sap.m.ButtonType.Transparent,text:this._oBundle.getText("EMPFILE_HRIS_PAY_COMPONENTS_DEFINE_END_DATES"),press:[function(e){this._endDateDialogCreate(D);},this]}));this.validEndDates={};this.validEndDateValues={};}};\nsap.extent.uilib.util.EditFormGenerator.prototype._endDateDialogCreate=function(d){this._endDateDialogData=new sap.ui.model.json.JSONModel({});var e=[];var a=this._getEffectiveDate();var b=sap.extent.uilib.util.EditFormGeneratorHelper.DATE_FORMAT;e=[];jQuery.each(d,function(c,f){if(f&&f.isEndDatedPayment){f.effectiveDate=new Date(a);f.dateFormat=b;f.childrenData={value:f.childrenData&&f.childrenData.value?f.childrenData.value:""};e.push(f);}});this._endDateDialogData.setProperty("/items",e);this._addEndDateDialog.setModel(this._endDateDialogData,"endDateDialogData");this._addEndDateDialog.setModel(sap.ui.getCore().getModel("i18n"),"i18n");this._addEndDateDialog.open();};\nsap.extent.uilib.util.EditFormGenerator.prototype.endDateDialogHandleClose=function(){this.endDatePopupClosedByOk=true;for(sId in this.validEndDates){if(!this.validEndDates[sId]){this.endDatePopupClosedByOk=false;}}if(this.endDatePopupClosedByOk){for(sId in this.validEndDates){var e=sap.ui.getCore().byId(sId);this.validEndDateValues[sId]=e.getValue();}this._addEndDateDialog.close();}};\nsap.extent.uilib.util.EditFormGenerator.prototype.endDateDialogHandleCancel=function(){this._addEndDateDialog.close();};\nsap.extent.uilib.util.EditFormGenerator.prototype.afterCloseEndDateDialog=function(e){if(!this.endDatePopupClosedByOk){this.endDatePopupClosedByOk=false;for(sId in this.validEndDates){var o=sap.ui.getCore().byId(sId);o.setValueState(sap.ui.core.ValueState.None);this.validEndDates[sId]=true;if(this.validEndDateValues[sId]){o.setValue(this.validEndDateValues[sId]);}else{o.setValue(null);}}}this.endDatePopupClosedByOk=false;if(this._listenerImplementsFunction("getSubmitButton")){oSubmitButton=this._oListener.getSubmitButton();for(sId in this.validEndDateValues){if(oSubmitButton){oSubmitButton.setEnabled(true);}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.handleEndDatePicker=function(e){oEndDatePicker=e.oSource;sValue=e.getParameter("value");oValue=new Date(sValue);bValid=e.getParameter("valid");sId=e.getParameter("id");this._iEvent++;if(bValid){oEndDatePicker.setValueState(sap.ui.core.ValueState.None);this.validEndDates[sId]=true;}else if(isNaN(oValue)||oValue>new Date(this._getEffectiveDate())){oEndDatePicker.setValueState(sap.ui.core.ValueState.Error);oEndDatePicker.setValueStateText(this._oBundle.getText("ECT_PP3_ERROR_INVALID_DATE_FORMAT",this._oBundle.getText("ECT_PP3_DateFormat")));this.validEndDates[sId]=false;}else{oEndDatePicker.setValueState(sap.ui.core.ValueState.Error);oEndDatePicker.setValueStateText(this._oBundle.getText("EMPFILE_HRIS_PAYMENT_END_DATE_BEFORE_START_DATE"));this.validEndDates[sId]=false;}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildFGTable=function(f,m,d,l,v,a){var t=[];var T=new sap.m.Title({text:m.label});if(m.hasOwnProperty("fontConfig")){this._oCommonUtils.addClassesFromConfigForTitle(m.fontConfig,T);}t.push(T);if(m.tableSummary&&m.tableSummary!=""){var o=new sap.m.Label({text:this._oBundle.getText(m.tableSummary)});o.addStyleClass("sapUiInvisibleText");t.push(o);}if(d.fields&&d.fields["payComponentRecurring-pay-component"]&&(!this._oForm.isHistory)){this._addEndDateButton(d,t,d.fields["payComponentRecurring-pay-component"]&&d.fields["payComponentRecurring-pay-component"].value)}v.addContent(new sap.m.Toolbar({visible:!!m.label||!!m.tableSummary||t.length>1,content:t,design:sap.m.ToolbarDesign.Transparent}));this._oDialog=this._oListener instanceof sap.extent.uilib.EditPage?this._oListener:null;if(!this._oDialog){if(this._newHirePageView){this._oDialog=this._newHirePageView;}else{this._oDialog=this._listenerImplementsFunction("getView")&&this._oListener.getView();}}var b=new sap.m.Label({text:"Loading..."});v.addContent(b);var c=v.indexOfContent(b);if(this._oDialog&&!this._oDialog.getDomRef()){var s=this;setTimeout(function(){s._buildTable.apply(s,[f,m,d,l,v,a,o,c]);},1000);}else{this._buildTable(f,m,d,l,v,a,o,c);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildTable=function(f,m,d,l,v,a,t,T){var s=E.getDataSizeTweakMetaAndData(m,d,f.blockType);var M=this._formatDataForTable(f.id,f.blockType,f.titleField,m,d,l);M._sMainGroupId=f.id+"_"+a;M.uniqueFieldId=f.uniqueFieldId;var F=new sap.ui.model.json.JSONModel(M);F.setSizeLimit(s);var o=sap.extent.uilib.util.TableGeneratorHelper.getTable(this,v,t,M,F);v.insertContent(o,T);if((m.group==="EXPLICIT_RELATION")&&m.fieldsOrder&&(m.fieldsOrder.length==1)){o.addStyleClass("sapExtentUilibUtilEditFormGeneratorExplicitRelation");o.setFixedLayout(false);}v.removeContent(T+1);var o=v.getContent()[T];var A=null;if(this.canCreateAddButton(m)){var _=this;var L=new sap.ui.core.InvisibleText({text:m.label});var A=new sap.m.Button({text:_._oBundle.getText("COMMON_Add"),type:sap.m.ButtonType.Default,ariaLabelledBy:L,press:[function(e){_._tableRowOperation("add",this.getModel(),null,v,undefined,o);},o]});E.addCustomDataForComponent(A,"buttonAction","Add");A.addStyleClass("sapExtentUilibUtilEditFormGeneratorAddRowButton");v.insertContent(new sap.m.HBox({items:[A]}).addStyleClass("pp3AddRowButtonContainer"),T+1);v.insertContent(L,T+2);}var b=null;if(m.type==="LAZYDATAGRID"){b=new sap.m.Button({text:this._oBundle.getText("ECT_PP3_LOAD_MORE"),type:sap.m.ButtonType.Transparent,visible:{parts:["/metadata/requestParams","/dataList/"],formatter:function(R,D){if(R){var c=parseInt(R.rowCount)||0;if(c>D.length){return true;}}return false;}},press:[function(e){if(this._listenerImplementsFunction("getLazyDataGridItems")){var c=e.getSource().getModel();var d=c.getData();if(d){var m=d.metadata;var R=m.requestParams;var g=m.attributes;var D=12;var p={pageSize:D,pageNumber:Math.ceil(d.dataList.length/D)+1};var I=this._oListener.getLazyDataGridItems(R,g,p);I.fail(function(h){E.handleBackendError(h);});I.done(jQuery.proxy(function(n){var h=d.dataList;if(h.length>0){var k=h[0];for(var i=0;i<n.data.technicalInfo.length;i++){var q=jQuery.extend(true,{},k);q.rowInfo=n.data.technicalInfo[i];for(var j=0;j<k.v.length;j++){var C=q.v[j];if(n.data.fields[C.meta.id]){C.value=n.data.fields[C.meta.id].value[i];C.oldValue=n.data.fields[C.meta.id].oldValue[i];}}h.push(q);}}c.updateBindings(true);},this));}}},this]});E.addCustomDataForComponent(b,"buttonAction","ShowMore");b.addStyleClass("sapExtentUilibUtilEditFormGeneratorLoadMoreButton");v.addContent(b);}this._updateTableButtons(F,A);v.addStyleClass("sapExtentUilibUtilEditFormGeneratorTableContainer");};\nsap.extent.uilib.util.EditFormGenerator.prototype._getFormDataForGroupId=function(g){var a=null;var c=null;for(var p=0,b=this._aPanels.length;p<b;p++){c=this._aPanels[p];if(!c){continue;}if(c instanceof sap.ui.layout.VerticalLayout){a=this._getFormDataFromLayout(c,g,a);if(a){break;}}else if(c instanceof sap.m.Panel){var d=c.getModel().getData();if(g.match(new RegExp(d._sMainGroupId,"ig"))){a=d;break;}}}return a;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getFormDataFromLayout=function(c,g,a){var C=c.getContent();for(var b=0,l=C.length;b<l;b++){if(C[b]instanceof sap.ui.layout.VerticalLayout){a=this._getFormDataFromLayout(C[b],g,a);if(a){break;}}else if(C[b]instanceof sap.m.Table||C[b]instanceof sap.m.Panel){var d=C[b].getModel().getData();if(d._sMainGroupId&&g.match(new RegExp(d._sMainGroupId,"ig"))){a=d;break;}}}return a;};\nsap.extent.uilib.util.EditFormGenerator.prototype.validationcheckRequiredBlockTypes=["HOME_ADDRESS","PERSON_GLOBAL_INFO"];\nsap.extent.uilib.util.EditFormGenerator.prototype._hasValidationRequired=function(g){if(g&&(g.metadata.grid||g.metadata.type=="FIELDSGROUP"||this.validationcheckRequiredBlockTypes.contains(g.blockType))&&(g.metadata.hasMultiple||this.is1To1AssociationWithDelete(g.metadata))){return true;}return false;};\nsap.extent.uilib.util.EditFormGenerator.prototype.is1To1AssociationWithDelete=function(m){return m&&m.actions&&m.actions.delete&&(m.maxRows==1);};\nsap.extent.uilib.util.EditFormGenerator.prototype._hasInitData=function(f){var a=true;jQuery.each(f,function(b,c){var d=sap.extent.uilib.util.EditFormGeneratorHelper.getInputFromFieldLayout(c.field);if(d&&d.getValue()!=""){a=false;}});return a;};\nsap.extent.uilib.util.EditFormGenerator.prototype._requiredHasInitDataOrEmpty=function(f){var R=false;var I=false;jQuery.each(f,function(a,b){var c=sap.extent.uilib.util.EditFormGeneratorHelper.getInputFromFieldLayout(b.field);if(c){if(c.getValue()){I=true;}else if(c.getModel().getData().metadata.fields[a].required){R=true;}}});return!(R&&I);};\nsap.extent.uilib.util.EditFormGenerator.prototype._validate=function(){var a={hasErrors:false,errors:[]};var m=this,I,f;jQuery.each(this._oFields,function(g,b){var c=m._getFormDataForGroupId(g);if(!(m._hasValidationRequired(c)&&!m._oFields[g].bInputChangedByUser&&m._hasInitData(m._oFields[g])&&m._requiredHasInitDataOrEmpty(m._oFields[g]))){jQuery.each(b,function(F,o){if(F!=="bInputChangedByUser"){var d=E.getInputsFromLayout(o.field);jQuery.each(d,function(e,h){if(!h.getModel()||h instanceof sap.m.Link||h instanceof sap.m.Button&&h._isTimeButton){return true;}I=h.getModel().getData().metadata.fields[F];if(!I||!E.standardVisibilityFormatter(I.visible,true,I[sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY])||((typeof I.writable==="boolean")&&!I.writable)){return true;}if(I.required){m._validateRequiredField(h);}if(typeof h.getValueState==="function"){if(h.getValueState()==="None"&&I._actualType==="DOCURLLINK"){var v=E.getInputValue(h);var V={};if(I._urlColType==="name"){V=E.isUrlNameValid(v,I);}else{V=E.isUrlValid(v,I);}if(!V.valid){h.setValueState("Error");h.setValueStateText(V.message);}}if(h.getValueState()==="Error"){a.hasErrors=true;a.errors.push(h.getValueStateText());if(!f){f=h;a.firstErrorField=f;}if(!h.getParent().getVisible()){h.getParent().setVisible(true);}}}});}});}});return a;};\nsap.extent.uilib.util.EditFormGenerator.prototype.canCreateAddButton=function(m){if(typeof m.writable==="boolean"&&!m.writable){return false;}if(m.actions&&!m.actions.create){return false;}if((m.hasOwnProperty("hasMultiple")&&m.hasMultiple)||(m.hasOwnProperty("emptyObject")&&m.emptyObject)||(m.hasOwnProperty("maxRows")&&m.maxRows>0)){return true;}return false;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getTableData=function(c,o){var m=c.getModel();var M=m.getData();var O={id:M.id,data:{fields:{},technicalInfo:[]},blockType:M.blockType,metadata:M.metadata};var f=O.data.fields;var t=M.dataList,T,C;var e=true;var a,F,v;for(var b=0,l=t.length;b<l;b++){T=t[b];C=T.v;if(T.rowInfo&&T.rowInfo.actionType=="Add"){e=true;for(var d=0,g=C.length;d<g;d++){var v=C[d].value;if(!E.isValueEmpty(v)){e=false;break;}}if(e){continue;}}if(T.rowInfo){T.rowInfo.lastModified=false;}if(m.getId()===this._iLastModifiedModelId&&T.rowInfo){if((T.rowInfo.actionType==="Delete"&&this._iLastModifiedRowIndex===T.rowInfo.id)||(T.rowInfo.actionType!=="Delete"&&this._iLastModifiedRowIndex===T.rowInfo.orderPos-1)){T.rowInfo.lastModified=true;}}O.data.technicalInfo.push(T.rowInfo);for(var d=0,g=C.length;d<g;d++){a=C[d];F=a.id;v=a.value;if(F!==sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM&&F!==sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM){if(f.hasOwnProperty(F)){f[F].value.push(v);}else{f[F]={value:[v]};}}}}o.push(O);};\nsap.extent.uilib.util.EditFormGenerator.prototype._getPanelData=function(c,o,f,R){var m=c.getModel();var e=null;if(!m){return null;}if(m.getData().data.technicalInfo&&m.getData().data.technicalInfo[0]){m.getData().data.technicalInfo[0].lastModified=m.getId()===this._iLastModifiedModelId;}if(m.getProperty("/eventFields")&&!e){var a=m.getProperty("/eventFields/value/value");var b={event:a};e=b;var d=m.getProperty("/data/fields");var g=Object.getOwnPropertyNames(d);for(var p=0;p<g.length;p++){var h=g[p];if(h.indexOf("event-reason")!==-1){var j=m.getProperty("/data/fields/"+h+"/value/0");var k=m.getProperty("/metadata/fields/"+h);var l=E.getValue(j,k);if(l){e[h]=l;}}}if(e){this._oForm.eventReasonFields=e;}return null;}var O=jQuery.extend(true,{},m.getData());if(!(!(this._listenerImplementsFunction("getActionType")&&(this._oListener.getActionType()=="NEW_HIRE")||(O.blockType&&O.blockType=="USERINFO_BLOCK"))&&sap.extent.uilib.util.EditFormGenerator.prototype._isEmptyForm(O.data.fields))){for(var F in O.metadata.fields){var n=O.data&&O.data.fields&&O.data.fields[F]&&O.data.fields[F].value;if(sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(O.metadata.fields[F])==="TIME"&&n){var M=m.getProperty("/_sMainGroupId");R=R?R:0;var I=[];var t=this._oFields[M];var q=t&&t[F]&&t[F].field;q&&E.getInputsFromLayout(q,I);inputTimeValue=I.length==1?E.getInputValue(I[0]):E.getInputValue(this.getInputById(F,R,"",M));O.data.fields[F].value[0]=inputTimeValue;}}}var P=c.getContent();var C=null;for(var s=0,L=P.length;s<L;s++){if(P[s]instanceof sap.ui.layout.VerticalLayout){C=[];this._getDataFromLayout(P[s],C);if(C.length>0){O.data.fields[C[0].metadata.id]={value:[C[0].data],oldValue:[]};if(!O.metadata.fieldsOrder.contains(C[0].metadata.id)){O.metadata.fieldsOrder.push(C[0].metadata.id);}O.metadata.fields[C[0].metadata.id]={metadata:C[0].metadata,layout:null};}}}if(O.metadata.hasMultiple){var u=O.data.technicalInfo[0];if(u&&(u.orderPos==undefined||u<0)){u.orderPos=this._getPanelRowIndex(c);}f.push(O);return;}o.push(O);};\nsap.extent.uilib.util.EditFormGenerator.prototype._getEditFormData=function(){var o=[],O=null;var c=null;for(var p=0,a=this._aPanels.length;p<a;p++){c=this._aPanels[p];if(!c){continue;}if(c instanceof sap.ui.layout.VerticalLayout){this._getDataFromLayout(c,o);}else if(c instanceof sap.m.Panel){this._getPanelData(c,o);}}if(this._oForm){if(this._oForm.portletID==="ADDRESS_INFORMATION"&&this._oForm.portletTitle&&o.length>0){o[0].metadata.label=this._oForm.portletTitle;}this._oForm.fieldGroups=o;this._oForm.effectiveDate=this._getEffectiveDate();}if(sap.extent.uilib.EditPage._cacheSecurityKeyInForm){this._oForm.securityKey=sap.extent.uilib.EditPage._cacheSecurityKeyInForm;delete sap.extent.uilib.EditPage._cacheSecurityKeyInForm;}return this._oForm;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getDataFromLayout=function(c,o){var C=c.getContent();var f=[];for(var a=0,l=C.length;a<l;a++){if(C[a]instanceof sap.ui.layout.VerticalLayout){this._getDataFromLayout(C[a],o);}else if(C[a]instanceof sap.m.Table){this._getTableData(C[a],o);}else if(C[a]instanceof sap.m.Panel){this._getPanelData(C[a],o,f,a);}}var L=c.getModel();var d,D;if(L&&(d=L.getProperty("/deletedPanels"))){for(a=0,l=d.length;a<l;a++){D=d[a].getData();if(D.data.technicalInfo[0]&&D.data.technicalInfo[0].id>0){D.data.technicalInfo[0].lastModified=d[a].getId()===this._iLastModifiedModelId;f.push(D);}}}if(f.length>0){this._convertFormToTableData(f,o);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._setPanelIndexInForm=function(){var c=null;this._newFieldLayout={};for(var p=0,a=this._aPanels.length;p<a;p++){c=this._aPanels[p];if(!c){continue;}if(c instanceof sap.ui.layout.VerticalLayout){this._setPanelIndexInLayout(c);}else if(c instanceof sap.m.Panel){this._setPanelIndexForControl(c);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._setPanelIndexInLayout=function(c,a,b){var C=c.getContent();for(var d=0,l=C.length;d<l;d++){if(C[d]instanceof sap.ui.layout.VerticalLayout){this._setPanelIndexInLayout(C[d],a,b);}else if(C[d]instanceof sap.m.Panel){this._setPanelIndexForControl(C[d],d,b);}else if(C[d]instanceof sap.m.Table){var p=C[1].getModel().getProperty("/id");if(!this._newFieldLayout.hasOwnProperty(p)){this._newFieldLayout[p]={};}this._newFieldLayout[p]=C[d];}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._setPanelIndexForControl=function(c,R,a){var m=c.getModel();if(!m){return null;}var p=c.getContent();for(var b=0,l=p.length;b<l;b++){var d=p[b].getModel().getProperty("/metadata");if(p[b]instanceof sap.m.Panel||p[b]instanceof sap.ui.layout.Grid||p[b]instanceof sap.ui.layout.VerticalLayout){if(d&&d.resolver){if(a){var e=d.resolver.split(".");d._sPanelIdInLayout=e[0]+"_"+R+"."+e[1]+"_"+a;}else{d._sPanelIdInLayout=d.resolver+"_"+R;}this._getInputsFromLayoutInPanel(p[b],d._sPanelIdInLayout);}else{if(p[0].getModel().getData().id){var f=p[0].getModel().getData().id+"_"+R;this._getInputsFromLayoutInPanel(p[b],f);}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._setSubPanelFieldsInPanel=function(c,m,a){var C=c.getContent();for(var i=0;i<C.length;i++){if(C[i]instanceof sap.ui.layout.VerticalLayout){this._setSubPanelFieldsInPanel(C[i],m,i);}else if(C[i]instanceof sap.m.Panel){var b=C[i].getModel().getProperty("/metadata");if(b.resolver){var d=b.resolver.split(".");b._sPanelIdInLayout=m+"."+d[1]+"_"+i;this._getInputsFromLayoutInPanel(C[i],b._sPanelIdInLayout);}}else if(C[i]instanceof sap.ui.layout.Grid){var b=C[i].getModel().getProperty("/metadata");if(b.resolver){var d=b.resolver.split(".");b._sPanelIdInLayout=m+"."+d[d.length-1]+"_"+a;this._getInputsFromLayoutInPanel(C[i],b._sPanelIdInLayout);}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getInputsFromLayoutInPanel=function(f,p){var c=f.getContent();var C;for(var I=0,l=c.length;I<l;I++){C=c[I];if(C instanceof sap.m.InputBase||C instanceof sap.m.CheckBox||C instanceof sap.m.Link||C instanceof sap.m.Switch||C instanceof sap.extent.uilib.BulletChart||C instanceof sap.m.UploadCollection||C instanceof sap.extent.uilib.AttachmentButton||C instanceof sap.m.ComboBox||C instanceof sap.sf.commons.DatePicker){var a=sap.extent.uilib.util.EditFormGeneratorHelper.getFieldId(C);if(!this._newFieldLayout.hasOwnProperty(p)){this._newFieldLayout[p]={};}this._newFieldLayout[p][a]={};this._newFieldLayout[p][a].field=C;this._newFieldLayout[p][a]=(C);}else if(C instanceof sap.ui.layout.VerticalLayout||C instanceof sap.ui.layout.HorizontalLayout||C instanceof sap.ui.layout.Grid){this._getInputsFromLayoutInPanel(C,p);}else if(C instanceof sap.m.Panel){this._setSubPanelFieldsInPanel(C,p,I);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._isEmptyForm=function(f){var a=true;jQuery.each(f,function(b,c){if(c&&c.value&&(c.value[0]||(c.value[0]===0))){a=false;}});return a;};\nsap.extent.uilib.util.EditFormGenerator.prototype._convertFormToTableData=function(f,o){var n={metadata:undefined,data:{technicalInfo:[],fields:{}}};n.id=f[0].id;n.blockType=f[0].blockType;n.portletId=f[0].portletId;var a=1;for(var b=0,l=f.length;b<l;b++){var F=f[b];if(!n.metadata&&F.hasOwnProperty("metadata")){n.metadata=F.metadata;n.metadata.grid=true;}else{var m=[];if(n.metadata.hasOwnProperty("fieldsOrder")&&F.metadata.hasOwnProperty("fieldsOrder")){m=n.metadata.fieldsOrder.concat(F.metadata.fieldsOrder.filter(function(I){return n.metadata.fieldsOrder.indexOf(I)==-1;}));}jQuery.extend(true,n.metadata,F.metadata);if(m.length>0){n.metadata.fieldsOrder=m;}}if(!F.hasOwnProperty("data")||(F.data.technicalInfo&&F.data.technicalInfo[0].actionType!="Delete"&&this._isEmptyForm(F.data.fields))){if(!this._listenerImplementsFunction("isDetailsDataAvailable")||!this._oListener.isDetailsDataAvailable(F)){continue;}}var c=F.data;if(c.hasOwnProperty("technicalInfo")&&c.technicalInfo.length===1){if(c.technicalInfo[0].actionType!=="Delete"){c.technicalInfo[0].orderPos=a;a++;}n.data.technicalInfo.push(c.technicalInfo[0]);}if(c.hasOwnProperty("fields")){for(var s in c.fields){if(c.fields[s]===null){continue;}if(!n.data.fields[s]){n.data.fields[s]={value:[],oldValue:[]};}var v=c.fields[s].value;v=(v&&v.length===1)?v[0]:"";n.data.fields[s].value[b]=v;var d=c.fields[s].oldValue;if(d){d=(d&&d.length===1)?d[0]:"";n.data.fields[s].oldValue[b]=d;}var e=c.fields[s].st;if(e){e=(e&&e.length===1)?e[0]:"";if(!n.data.fields[s].st){n.data.fields[s].st=[];}n.data.fields[s].st[b]=e;}if(c.fields[s].hasOwnProperty("contextData")){if(!n.data.fields[s].contextData){n.data.fields[s].contextData=[];}n.data.fields[s].contextData[b]=c.fields[s].contextData[0];}}}this._addCountryCodeToTechnicalInfo(n.data.technicalInfo,F,b);}n.effectiveDate=this._getEffectiveDate();o.push(n);return o;};\nsap.extent.uilib.util.EditFormGenerator.prototype._addCountryCodeToTechnicalInfo=function(t,f,a){if(t&&t[a]&&f.countryCode){t[a].countryCode=f.countryCode;}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getEffectiveDate=function(){var e=this._oDateFormat.format(new Date());if(this._oListener&&typeof this._oListener.getEffectiveDate==="function"){var o=this._oListener.getEffectiveDate();if(o&&o instanceof Date){e=this._oDateFormat.format(o);}}return e;};\nsap.extent.uilib.util.EditFormGenerator.prototype._addNew=function(){this.eFlag=1;if(this._fnAddNewForm){this._fnAddNewForm();this._updateCascadePicklistStatus();this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_ADD_ACTION_NAME});}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getTableAddButton=function(p){var c=p.getContent();for(var a=0,l=c.length;a<l;a++){if(c[a]instanceof sap.m.HBox){var A=c[a].getItems()[0];if(A instanceof sap.m.Button&&E._getCustomData(A,"buttonAction")==="Add"){return A;}}}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype._cellsFactory=function(p,I,c){var t=this._getTableAddButton(p);var m=c.getProperty("meta");if(m.id===sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM){var u=new sap.m.Button({enabled:"{meta/arrowTopEnabled}",icon:"sap-icon://arrow-top",tooltip:this._oBundle.getText("COMMON_Move_Up"),type:sap.m.ButtonType.Transparent,press:[function(v){this._tableRowOperation("moveUp",v.getSource().getModel(),v.getSource().getParent().getParent().getBindingContext(),p,undefined,null);},this]});u.addStyleClass("rearrangeButtons");var d=new sap.m.Button({enabled:"{meta/arrowBottomEnabled}",icon:"sap-icon://arrow-bottom",tooltip:this._oBundle.getText("COMMON_Move_Down"),type:sap.m.ButtonType.Transparent,press:[function(v){this._tableRowOperation("moveDown",v.getSource().getModel(),v.getSource().getParent().getParent().getBindingContext(),p,undefined,null);},this]});d.addStyleClass("rearrangeButtons");return new sap.ui.layout.HorizontalLayout({content:[u,d]});}else if(m.id===sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM){var D=this._oBundle.getText("COMMON_Delete");var o=c.getModel().getData();var P=o.metadata.label;var R=c.getPath().split("/")[2];R=Number(R)+1;var a=D+" "+P+" "+R;var b=new sap.m.Button({enabled:"{meta/deleteEnabled}",visible:"{meta/deleteEnabled}",icon:"sap-icon://delete",tooltip:a,type:sap.m.ButtonType.Transparent,press:[function(v){this._tableRowOperation("delete",v.getSource().getModel(),v.getSource().getParent().getBindingContext(),p,undefined,null);},this]});if(this._oCommonUtils.getBlindnessSupport()){b.setText(D);}b.addEventDelegate({onAfterRendering:function(v){var B=v.srcControl.getDomRef();if(B&&this._oCommonUtils.getBlindnessSupport()){B.setAttribute("aria-labelledby",B.getAttribute("aria-describedby"));B.removeAttribute("aria-describedby");B.removeAttribute("title");}}},this);return b;}else if(m.id===sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM){var e=new sap.m.Button({text:this._oBundle.getText("ECT_PP3_SHOW_MORE_FIELDS"),press:[function(v){this._tableRowOperation("showDetails",v.getSource().getModel(),v.getSource().getParent().getBindingContext(),p,undefined,null);},this]});return e;}else if(m.id===sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM){var o=c.getModel().getData();var f=0;if(o.titleField=="##default"){while(f<(o.metadataAsList.fields.length-1)&&o.metadataAsList.fields[f].type=="DATE"){f++;}}else if(o.titleField=="NO Field Title"){f=-1;}else if(o.titleField){while(f<(o.metadataAsList.fields.length-1)){if(o.metadataAsList.fields[f].id==o.titleField){break;}f++;}}if(o.dataList&&o.dataList.length>0&&o.dataList[0].v&&o.dataList[0].v.length>0){var C=new sap.m.Text({text:{parts:[c.getPath().split("v")[0]+"v/"+f+"/value",c.getPath().split("v")[0]+"v/"+f+"/meta"],formatter:function(v,m){if(v){return E.getLabelValue(v,m);}}},maxLines:1});C.addStyleClass("sfPeopleProfileEditFormHeaderFake");return C;}}else{var M=c.getModel().getData();var I=c.getProperty("id");var R=c.getPath().split("/")[2];var s=M._sMainGroupId+"_"+R;var g="100%";m.rowID=M.dataList[R].rowInfo.id;this._addPrimaryFieldInfo(s,M);var h;if(m.type=="ATTACHMENT"){m.targetUserId=sap.ui.getCore().getModel("user").getProperty("/userId");m.attachRowId=m.rowID;var j=M.data.fields;var k=M.metadata.fields;for(var x=0;x<M.dataList[R].v.length;x++){var l=M.dataList[R].v[x].id;if(l!=sap.extent.uilib.util.EditFormGenerator.PERSON_INFO_PER_PERSON_UUID&&l.indexOf("-uuid")>-1){m.uuid=M.dataList[R].v[x].value;}if(M.dataList[R].v[x].id.indexOf("record-hash")>-1){m.recordHash=M.dataList[R].v[x].value;}}h=new sap.extent.uilib.AttachmentButton({visible:{path:"meta/editable"},text:{path:"value"},press:[function(v){var h=v.getSource();var w=E.getFieldId(h);var m=E.getMeta(h);if(this._oListener instanceof sap.extent.uilib.EditPage){this._oListener.getParent().removeAllCustomData();this._oListener.getParent().addCustomData(new sap.ui.core.CustomData({key:"FocusIdforAttachmentIcon",value:h.sId}));}var y={};jQuery.extend(true,y,m);if(y.hasOwnProperty("required")){y.required=false;}var z={fieldGroups:[{metadata:{fields:{}},data:{fields:{}}}]};var A=z.fieldGroups[0].data.fields;var B=z.fieldGroups[0].metadata.fields;var V=h.getBinding("text").getValue();B[w]=y;A[w]={value:[V],initialValue:[V]};var G;if(!j.hasOwnProperty(this._searchRecordHash(j))){G=jQuery.extend(true,{},k);}else{G=jQuery.extend(true,{},j);}A[this._searchRecordHash(G)]=jQuery.extend(true,{},G[this._searchRecordHash(G)]);A[this._searchUUID(G)]=jQuery.extend(true,{},G[this._searchUUID(G)]);var H=this._getRowIndexByInput(h);var J=h.getModel().getData().dataList[H];for(var x=0;x<J.v.length;x++){if(J.v[x].id.indexOf("-uuid")>-1){if(A[this._searchUUID(G)].value&&typeof A[this._searchUUID(G)].value==="string"){A[this._searchUUID(G)].value=J.v[x].value;}else if(A[this._searchUUID(G)].value&&A[this._searchUUID(G)].value.length>0){A[this._searchUUID(G)].value.length=0;A[this._searchUUID(G)].value[0]=J.v[x].value;}}if(J.v[x].id.indexOf("record-hash")>-1){if(A[this._searchRecordHash(G)].value&&typeof A[this._searchRecordHash(G)].value==="string"){A[this._searchRecordHash(G)].value=J.v[x].value;}else if(A[this._searchRecordHash(G)].value&&A[this._searchRecordHash(G)].value.length>0){A[this._searchRecordHash(G)].value.length=0;A[this._searchRecordHash(G)].value[0]=J.v[x].value;}}if(J.v[x].id==m.id){if(A[m.id].value&&A[m.id].value.length>1){A[m.id].value.length=0;A[m.id].value[0]=J.v[x].value;}}}if(h.getBinding("text").getValue()&&h.getBinding("text").getValue().hasOwnProperty("recordHash")&&typeof A[this._searchRecordHash(G)].value==="string"){A[this._searchRecordHash(G)].value=h.getBinding("text").getValue().recordHash;}else if(h.getBinding("text").getValue()&&h.getBinding("text").getValue().hasOwnProperty("recordHash")&&h.getBinding("text").getValue().recordHash!=null&&B[w].module!="empprofile"){A[this._searchRecordHash(G)].value[0]=h.getBinding("text").getValue().recordHash;}if(h.getBinding("text").getValue()&&h.getBinding("text").getValue().hasOwnProperty("uuid")&&typeof A[this._searchUUID(G)].value==="string"){A[this._searchUUID(G)].value=h.getBinding("text").getValue().uuid;}else if(h.getBinding("text").getValue()&&h.getBinding("text").getValue().hasOwnProperty("uuid")&&h.getBinding("text").getValue().uuid!=null&&B[w].module!="empprofile"){A[this._searchUUID(G)].value[0]=h.getBinding("text").getValue().uuid;}if(k[this._searchRecordHash(k)]){B[this._searchRecordHash(k)]=jQuery.extend(true,{},k[this._searchRecordHash(k)]);}if(k[this._searchRecordHash(k)]){B[this._searchRecordHash(k)]=jQuery.extend(true,{},k[this._searchRecordHash(k)]);}if(k[this._searchUUID(k)]){B[this._searchUUID(k)]=jQuery.extend(true,{},k[this._searchUUID(k)]);}z.formariahiddenLabel=B[w].label||B[w].id;if(this._listenerImplementsFunction("addFormData")){if(B[w].module=="empprofile"){if(this._oListener.getCustomData().length<=0){E.addCustomDataForComponent(this._oListener,"EPSecurityToken",this.getEPSecurityToken(h.getModel().getData(),H));E.addCustomDataForComponent(this._oListener,"parentFormData",h.getModel().getData());E.addCustomDataForComponent(this._oListener,"rowIndex",H);}else if(this._oListener.getCustomData().length>=1){E._setCustomData(this._oListener,"EPSecurityToken",this.getEPSecurityToken(h.getModel().getData(),H));E._setCustomData(this._oListener,"parentFormData",h.getModel().getData());E._setCustomData(this._oListener,"rowIndex",H);}}this._oListener.addFormData(z,true,"",true);if(this._listenerImplementsFunction("attachEventOnce")){this._oListener.attachEventOnce("donePress",null,function(v){var z=v.getParameter("data");if(z){var K=z.fieldGroups[0]?z.fieldGroups[0].data.fields[w].value[0]:null;if(K&&K.isUploading){K=null;}if(K){var L=this._oFields[E.getMainGroupId(h)];L&&(L.bInputChangedByUser=true);}this._setRowUpdate(h);h.getBinding("text").setValue(K?K:[]);var N=sap.extent.uilib.util.EditFormGeneratorHelper.getRowId(h);if(K.length==0){var O=this._searchRecordHash(z.fieldGroups[0].data.fields);var Q=O&&z.fieldGroups[0].data.fields[O].value[0];Q&&this.updatePropertyById(this._searchRecordHash(z.fieldGroups[0].data.fields),N,"value",Q,"","","",E.getMainGroupId(h));var S=this._searchUUID(z.fieldGroups[0].data.fields);var T=S&&z.fieldGroups[0].data.fields[S].value[0];T&&this.updatePropertyById(this._searchUUID(z.fieldGroups[0].data.fields),N,"value",T,"","","",E.getMainGroupId(h));}else{this.updatePropertyById(this._searchRecordHash(z.fieldGroups[0].data.fields),N,"value",K.recordHash,"","","",E.getMainGroupId(h));this.updatePropertyById(this._searchUUID(z.fieldGroups[0].data.fields),N,"value",K.uuid,"","","",E.getMainGroupId(h));}h.getBinding("text").refresh(true);}},this);}}this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_ATTACHMENT_PRESS});},this]});E.addCustomData(I,m,undefined,s,h);}else{h=this._buildInput(I,m,this._getInputPathConfig("value","meta/writable","meta/editable","meta/selectOptions","meta/maxLength","meta/placeholder","meta"),undefined,s,g,R);}E.addCustomDataForComponent(h,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_ROW_ID_INDEX,R);var n=[];if(sap.ui.getCore().getModel("user")&&sap.ui.getCore().getModel("user").getProperty("/isDebugEnabled")){var q=sap.extent.uilib.util.EditFormGeneratorHelper.buildInputForDebug(I,h,true,R);n=[q];}else{n=[h];}if(this._bIsEffectiveDated||this._bForceShowOldValue){n.push(new sap.extent.uilib.ConfigurableLabel({text:{parts:["oldValue","value","meta"],formatter:E.calcFieldFormatter},oldValue:{parts:["oldValue","value","meta"],formatter:E.standardOldValueFormatter},otherValue:{parts:["otherValue","value","meta"],formatter:E.standardOldValueFormatter}}));}var F=new sap.ui.layout.VerticalLayout({content:n,visible:{parts:["meta/visible"],formatter:E.standardVisibilityFormatter},width:"100%"});this._addToFields(s,I,F);return F;}};\nsap.extent.uilib.util.EditFormGenerator.prototype._searchUUID=function(d){if(d){for(var f in d){if(d[f]&&d[f].id&&d[f].id!=sap.extent.uilib.util.EditFormGenerator.PERSON_INFO_PER_PERSON_UUID&&d[f].id.indexOf("-uuid")>-1){return f;}else if(f!=sap.extent.uilib.util.EditFormGenerator.PERSON_INFO_PER_PERSON_UUID&&f.indexOf("-uuid")>-1){return f;}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._searchRecordHash=function(d){if(d){for(var f in d){if(d[f]&&d[f].id&&d[f].id.indexOf("record-hash")>-1){return f;}else if(f.indexOf("record-hash")>-1){return f;}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._tableReFocus=function(p){var c=p.getContent()||[];for(var a=0,l=c.length;a<l;a++){if(c[a]instanceof sap.m.Table){var t=c[a];var I=t.getItems();if(I.length==0){jQuery("#"+t.getId()+"-nodata").focus();}else if((I.length>this._iTableIndex)&&I[this._iTableIndex]){var C=I[this._iTableIndex].getCells();for(var b=0,d=C.length;b<d;b++){if(C[b]instanceof sap.m.Button){C[b].focus();}}}else{for(var b=0,d=c.length;b<d;b++){if(c[b]instanceof sap.m.Button){c[b].focus();}}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._formatDataForTable=function(I,b,t,m,d,l){var M={};M.id=I;M.blockType=b;M.titleField=t;M.metadata=m;M.metadataAsList={};M.data=d;M.metadataAsList.fields=[];M.dataList=[];M.tablePopinMinScreenWidth=sap.extent.uilib.util.EditFormGenerator.DEFAULT_POPIN_MIN_WIDTH;var f=[];if(l&&l.group&&l.group.items){var L=l.group.items;for(var i=0;i<L.length;i++){var F=L[i];if(m.fields.hasOwnProperty(F)){f.push(F);m.fields[F].id=F;M.metadataAsList.fields.push(m.fields[F]);}}}else{for(var a=0;a<m.fieldsOrder.length;a++){var F=m.fieldsOrder[a];f.push(F);m.fields[F].id=F;M.metadataAsList.fields.push(m.fields[F]);}}for(var i=0;i<f.length;i++){var F=f[i];if(d.fields&&d.fields[F]){d.fields[F].id=F;if(M.dataList.length==0){if(d.fields[F].value.length==d.technicalInfo.length){for(var j=0;j<d.fields[F].value.length;j++){var p=m.fields[F].cascadeParentData;m.fields[F].cascadeParentData=null;var o=jQuery.extend(true,{},m.fields[F]);if(p){o.cascadeParentDataValue=p.value[j];}var O=sap.extent.uilib.util.EditFormGeneratorHelper.getOtherValue(F,j,d);if(d.fields[F].oldValue){M.dataList.push({v:[this._getCellObject(F,d.fields[F].value[j],d.fields[F].oldValue[j],O,o,d.technicalInfo[j])],rowInfo:d.technicalInfo[j]});}else{M.dataList.push({v:[this._getCellObject(F,d.fields[F].value[j],null,O,o,d.technicalInfo[j])],rowInfo:d.technicalInfo[j]});}}}else{return M;}}else{for(var j=0;j<d.fields[F].value.length;j++){var p=m.fields[F].cascadeParentData;m.fields[F].cascadeParentData=null;var o=jQuery.extend(true,{},m.fields[F]);if(p){o.cascadeParentDataValue=p.value[j];}m.fields[F].cascadeParentData=p;var O=sap.extent.uilib.util.EditFormGeneratorHelper.getOtherValue(F,j,d);if(d.fields[F].oldValue){M.dataList[j].v.push(this._getCellObject(F,d.fields[F].value[j],d.fields[F].oldValue[j],O,o,d.technicalInfo[j]));}else{M.dataList[j].v.push(this._getCellObject(F,d.fields[F].value[j],null,O,o,d.technicalInfo[j]));}}}}}this._addFakeItems(M);if(m.hasOwnProperty("addAtFirst")&&!m.addAtFirst){M.dataList.sort(function(R,c){return R.rowInfo.orderPos-c.rowInfo.orderPos;});}return M;};\nsap.extent.uilib.util.EditFormGenerator.prototype._addFakeItems=function(m){var a=false;var h=false;for(var j=0;j<m.dataList.length;j++){var R=m.dataList[j].rowInfo||{};var b=E.isRowDeletetable(R,m.metadata);if(m.blockType==="NATIONAL_ID_CARD"||m.blockType==="PAY_COMPONENT_RECURRING"||m.blockType==="PAY_COMPONENT_NON_RECURRING"){b=true;}var c=E.isRowRearrangeable(R,m.metadata);if(b){a=true;}if(j==0){if(c){m.metadataAsList.fields.push({id:sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM,label:this._oBundle.getText("ECT_PP3_REARRANGE")});}if(h){m.metadataAsList.fields.push({id:sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM,label:this._oBundle.getText("ECT_PP3_SHOW_MORE_FIELDS")});}}if(c){m.dataList[j].v.push({id:sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM,meta:{id:sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM,arrowTopEnabled:m.dataList.length>0&&j>0,arrowBottomEnabled:m.dataList.length>0&&j<m.dataList.length-1}});}if(h){m.dataList[j].v.push({id:sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM,meta:{id:sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM}});}m.dataList[j].v.push({id:sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM,meta:{id:sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM,deleteEnabled:b?m.dataList.length>0:false}});}if(a){m.metadataAsList.fields.push({id:sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM,label:this._oBundle.getText("COMMON_Delete")});}};\nsap.extent.uilib.util.EditFormGenerator.prototype._addHeaderOnPopIn=function(m){if(m&&m.dataList&&m.metadataAsList&&m.metadataAsList.fields){if(m.blockType!=="BACKGROUND_BLOCK"){return;}for(var j=0;j<m.dataList.length;j++){var c=0;for(var i=0;i<m.metadataAsList.fields.length;i++){if(m.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM||m.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM){c--;}}if(c<0){m.metadataAsList.fields.splice(c,0,{id:sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM});m.dataList[j].v.splice(c,0,{id:sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM,meta:{id:sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM}});}else{m.metadataAsList.fields.push({id:sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM});m.dataList[j].v.push({id:sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM,meta:{id:sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM}});}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getCellObject=function(f,c,o,O,m,R){var b=R.hasOwnProperty("writable")?R.writable:true;var a=R.hasOwnProperty("editable")?R.editable:true;if(m.cacheCascade){if(Array.isArray(m.cacheCascade)&&m.cacheCascade.length>0){for(var i=0;i<m.cacheCascade.length;i++){var C=m.cacheCascade[i];var d=m.cascadeParentDataValue;if(typeof d!=="string"){d=m.cascadeParentDataValue&&m.cascadeParentDataValue.value;}if(C.fields&&C.fields[f]&&C.fields[f].cascadeParentValue===d){m=C.fields[f];break;}}}}if(!b){m.writable=false;}if(!a){m.editable=false;}if(m.isTrend){if((m.id=="rating"||m.id=="label")&&(((!!!R.editable||!!!R.matchingToScale)&&R.actionType!="Add")||!!R.forceDisplayValueAsLabel)){m.forceDisplayValueAsLabel=true;}else{m.forceDisplayValueAsLabel=false;}}var e=R.hasOwnProperty("fieldsMeta");if(e){m=R.fieldsMeta.fields[f];}if(!o){return{id:f,value:E.setValue(c,m),otherValue:E.setValue(O,m),meta:m};}else{return{id:f,value:E.setValue(c,m),oldValue:E.setValue(o,m),otherValue:E.setValue(O,m),meta:m};}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getTableFromLayout=function(p){var t=null;for(var i=0,l=p.getContent().length;i<l;i++){if(p.getContent()[i]instanceof sap.m.Table){t=p.getContent()[i];break;}}return t;};\nsap.extent.uilib.util.EditFormGenerator.prototype.addEmptyTableRowInVerticalLayout=function(p){var t=this._getTableAddButton(p);var T=this._getTableFromLayout(p);this._tableRowOperation("add",t.getModel(),null,p,undefined,T);};\nsap.extent.uilib.util.EditFormGenerator.prototype._tableRowOperation=function(o,m,b,p,a,t){if(m){var d=m.getData();var c=false;var f=false;var M=d.metadata;this._iTableIndex=b?this._getIndexFromBindingContext(b):-1;var e=a&&a.fields;var n=a&&a.hasOwnProperty("noUpdateBindings")&&a.noUpdateBindings;var g=false;switch(o){case"moveUp":this._moveTableRow(this._iTableIndex,this._iTableIndex-1,d);f=true;this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_TABLEROW_MOVE_UP});break;case"moveDown":this._moveTableRow(this._iTableIndex,this._iTableIndex+1,d);f=true;this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_TABLEROW_MOVE_DOWN});break;case"delete":var s=m.getProperty("/_sMainGroupId")+"_"+this._iTableIndex;delete this._oFields[m.getProperty("/_sMainGroupId")+"_"+this._iTableIndex];this._deletedRowId=m.getProperty("rowInfo/id",b);var h=m.getProperty("rowInfo/actionType",b);if(this._deletedRowId==null||this._deletedRowId>-1||h===""){this.updateLastModifiedDetails(m.getId(),this._deletedRowId);m.setProperty("rowInfo/actionType","Delete",b);f=true;var C=m.getProperty("v",b);if(C&&!n){for(var i=0;i<C.length;i++){if(C[i].meta&&C[i].meta.submitOnFieldChange){delete this._cacheRulesMetaChanges[s];this._submitFieldOnChange(C[i].meta.id);c=true;break;}}}}else{for(var i=this._iTableIndex+1;i<d.dataList.length;i++){if(d.dataList[i].rowInfo&&d.dataList[i].rowInfo.orderPos){d.dataList[i].rowInfo.orderPos--;}}d.dataList.splice(this._iTableIndex,1);}if(d.dataList.length===0&&d.metadataAsList&&Array.isArray(d.metadataAsList.fields)){for(var i=d.metadataAsList.fields.length-1;i>=0;i--){if(d.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM||d.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM||d.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM){d.metadataAsList.fields.splice(i,1);}else{break;}}}break;case"add":var D={rowInfo:{id:-1,actionType:"Add",orderPos:1},v:[]};if(d.dataList.length>0){D=jQuery.extend(true,D,d.dataList[d.dataList.length-1]);if(D.rowInfo.id>=0){D.rowInfo.id=-1;D.rowInfo.actionType="Add";}else{D.rowInfo.id--;D.rowInfo.actionType="Add";}g=d.metadata.hasOwnProperty("addAtFirst")&&d.metadata.addAtFirst;D.rowInfo.orderPos=g?1:D.rowInfo.orderPos+1;if(d.blockType==="NATIONAL_ID_CARD"||d.blockType==="PAY_COMPONENT_RECURRING"||d.blockType==="PAY_COMPONENT_NON_RECURRING"){D.rowInfo.deletable=true;}D.rowInfo.writable=true;D.rowInfo.editable=true;if(D.rowInfo.hasOwnProperty("recordHash")){D.rowInfo.recordHash=null;}if(D.rowInfo.hasOwnProperty("uuid")){D.rowInfo.uuid=null;}for(var i=0;i<D.v.length;i++){if(D.v[i].meta&&(typeof D.v[i].meta.cascadeParentValue!="undefined")&&D.v[i].meta.selectOptions){D.v[i].meta.selectOptions=[];}D.v[i].meta.valueType="";D.v[i].meta.valueState="None";D.v[i].meta.placeholder="";var j=D.v[i].meta.id;var F=d.metadata.fields;if(d.metadata&&F&&F[j]){D.v[i].meta.writable=F[j].writable;D.v[i].meta.editable=F[j].editable;if(D.v[i].meta.hasOwnProperty("visible")){delete D.v[i].meta.visible;}if(typeof F[j].selectOptions!=="undefined"&&(typeof D.v[i].meta.cascadeParentValue=="undefined")){D.v[i].meta.selectOptions=F[j].selectOptions;}}if(D.v[i].meta.hasOwnProperty("forceDisplayValueAsLabel")){D.v[i].meta.forceDisplayValueAsLabel=false;}var v=null;if(D.v[i].meta.defaultValue){v=D.v[i].meta.defaultValue;}else if(e&&e[D.v[i].id]){v=E.getRuleDataFieldValue(e[D.v[i].id],false);}else{v=E.cloneValueField(D.v[i].value,true,D.v[i],d.metadataAsList.fields);}D.v[i].value=v;if(D.v[i].meta.type==="ATTACHMENT"){D.v[i].value=[];}if(D.v[i].oldValue){var k=null;if(D.v[i].meta.defaultValue){k=D.v[i].meta.defaultValue;}else if(e&&e[D.v[i].id]){k=E.getRuleDataFieldValue(e[D.v[i].id],true);}else{k=E.cloneValueField(D.v[i].oldValue,true,D.v[i],d.metadataAsList.fields);}D.v[i].oldValue=k;}D.v[i].otherValue=null;}if(g){d.dataList.splice(0,0,D);}else{d.dataList.push(D);}}else{for(var i=0;i<d.metadataAsList.fields.length;i++){var l=jQuery.extend(true,{},d.metadataAsList.fields[i]);if(l.id!==sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM||l.id!==sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM){var q="";var k="";if(e&&e[d.metadataAsList.fields[i].id]){q=E.getRuleDataFieldValue(e[l.id],false);k=E.getRuleDataFieldValue(e[l.id],true);}else{q=M.fields[l.id].defaultValue||((M.fields[l.id].value)||"");k=M.fields[l.id].defaultValue||((M.fields[l.id].value)||"");}if(l.module=="empprofile"&&!l.isTrend){D.rowInfo.rearrange=true;}D.v.push(this._getCellObject(l.id,q,k,"",l,D.rowInfo));if(D.v[i].meta.type==="ATTACHMENT"){D.v[i].value=[];}}}d.dataList.push(D);this._addFakeItems(d);}this.updateLastModifiedDetails(m.getId(),D.rowInfo.orderPos-1);f=true;break;case"update":for(var u=0,w=d.dataList.length;u<w;u++){var x=d.dataList[u];if(a.technicalInfo[0].id==x.rowInfo.id){d.dataList[u].rowInfo.actionType="Update";for(var I=0,L=x.v.length;I<L;I++){var y=x.v[I];if(e&&e[y.id]){if(y.meta&&y.meta.type==="ECTCALCFIELD"){var z=e[y.id];y.value=E.getValue(z.value&&z.value[0],y.meta);y.oldValue=E.getValue(z.oldValue&&z.oldValue[0],y.meta);}else{y.value=E.getRuleDataFieldValue(e[y.id],false);y.oldValue=E.getRuleDataFieldValue(e[y.id],true);}}}}}f=true;break;default:break;}if(n){return;}this._sTableOperation=o;m.updateBindings(f);this._updateTableButtons(m,this._getTableAddButton(p));this._updateCascadePicklistStatus();this._sTableId=d.id;if(a){for(var A=0,B=d.metadataAsList.fields.length;A<B;A++){if(d.metadataAsList.fields[A].submitOnFieldChange){if(!(c&&sap.ui.getCore().getModel("user").getProperty("/isInternalHire")))this._submitFieldOnChange();break;}}}if(t!==null&&o==="add"){setTimeout(this.focusInputAfterAdd.bind(this,t,g),0);}if(d.blockType=="BACKGROUND_BLOCK"&&(o==="moveUp"||o==="moveDown")){setTimeout(this.focusInputAfterRearrange.bind(this,p.getContent()[1],o,this._iTableIndex),0);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.focusInputAfterAdd=function(t,a){var R=t.getItems().length;var b=a?0:(R-1);var o=t.getItems()[b];for(var c=0,C=o.getCells().length;c<C;c++){var d=o.getCells()[c].getContent()[0];if((d instanceof sap.m.InputBase)&&d.getEnabled()){d.focus();return;}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.focusInputAfterRearrange=function(t,o,T){var R=t.getItems().length;var a=(o=="moveUp")?T-1:T+1;var b=t.getItems()[a];for(var c=0,C=b.getCells().length;c<C;c++){var d=b.getCells()[c].getContent()[0];if((d instanceof sap.m.InputBase)&&d.getEnabled()){d.focus();return;}}};\nvar r=/\\/dataList\\/(\\d+)/;\nsap.extent.uilib.util.EditFormGenerator.prototype._getIndexFromBindingContext=function(b){var p=b.getPath();if(r.test(p)){return parseInt(p.match(r)[1]);}return-1;};\nsap.extent.uilib.util.EditFormGenerator.prototype._moveTableRow=function(f,t,d){var R=d.dataList.splice(f,1)[0];d.dataList.splice(t,0,R);d.dataList[f].rowInfo.orderPos=f+1;d.dataList[t].rowInfo.orderPos=t+1;if(d.dataList[f].rowInfo.rearrange){d.dataList[f].rowInfo.actionType="Update";}if(d.dataList[t].rowInfo.rearrange){d.dataList[t].rowInfo.actionType="Update";}};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateTableButtons=function(m,t){var d=m.getData();if(d.metadata.hasOwnProperty("maxRows")&&d.metadata.maxRows>0){var D=d.dataList;var a=D.length;for(var i=0;i<D.length;i++){if(D[i].rowInfo&&D[i].rowInfo.actionType==="Delete"){a--;}}var s=a<d.metadata.maxRows;if(!this._fnAddNewForm&&!(d.metadata.group==="EXPLICIT_RELATION")&&this._oListener&&typeof this._oListener.setShowAddButton==="function"&&this._oFormData&&this._oFormData.length==1){this._oListener.setShowAddButton(s);}if(t){t.setVisible(s);}}if(d.dataList.length==0){return;}var A=d.dataList[0].v.length-2;var b=d.dataList[0].v.length-2;var c=d.dataList[0].v.length-1;for(var i=0;i<d.dataList.length;i++){var R=d.dataList[i].rowInfo;var e=E.isRowDeletetable(R,d.metadata);var f=E.isRowRearrangeable(R,d.metadata);if(i==0){if(f){m.setProperty("/dataList/0/v/"+A+"/meta/arrowTopEnabled",false);m.setProperty("/dataList/0/v/"+b+"/meta/arrowBottomEnabled",true);}m.setProperty("/dataList/0/v/"+c+"/meta/deleteEnabled",e?true:false);continue;}else if(i==d.dataList.length-1){if(f){m.setProperty("/dataList/"+i+"/v/"+A+"/meta/arrowTopEnabled",true);m.setProperty("/dataList/"+i+"/v/"+b+"/meta/arrowBottomEnabled",false);}m.setProperty("/dataList/"+i+"/v/"+c+"/meta/deleteEnabled",e?true:false);continue;}else{if(f){m.setProperty("/dataList/"+i+"/v/"+A+"/meta/arrowTopEnabled",true);m.setProperty("/dataList/"+i+"/v/"+b+"/meta/arrowBottomEnabled",true);}m.setProperty("/dataList/"+i+"/v/"+c+"/meta/deleteEnabled",e?true:false);}}if(d.dataList.length==1){m.setProperty("/dataList/0/v/"+A+"/meta/arrowTopEnabled",false);m.setProperty("/dataList/0/v/"+b+"/meta/arrowBottomEnabled",false);}};\nsap.extent.uilib.util.EditFormGenerator.prototype.updateLastModifiedDetails=function(m,R){this._iLastModifiedModelId=m;this._iLastModifiedRowIndex=R;};\nsap.extent.uilib.util.EditFormGenerator.prototype.clearLastModifiedDetails=function(){this._iLastModifiedModelId=null;this._iLastModifiedRowIndex=-1;};\nsap.extent.uilib.util.EditFormGenerator.prototype.isModified=function(){return this._iLastModifiedModelId!=null;};\nsap.extent.uilib.util.EditFormGenerator.prototype.deletePanel=function(p,m){var P=p.getParent();if(P instanceof sap.extent.uilib.AlternateSectionLayout){var c=p.getContent();for(var i=0;i<c.length;i++){if(c[i]instanceof sap.ui.layout.Grid){var g=c[i].getContent();for(var j=0;j<g.length;j++){var I=E.getInputFromFieldLayout(g[j]);if(I&&I instanceof sap.m.InputBase){var b=I.getBinding("value");if(b){b.setValue("");}}}}}return;}var M=p.getModel();if(M&&M.getData()){this.updateLastModifiedDetails(M.getId(),0);var f=M.getData();var s=f._sMainGroupId;var R=this._getPanelRowIndex(p);for(var F in f.metadata.fields){if(f.metadata.fields[F].driverField){this._oMdfConditionalSupport.conditionalBeforeChangeHandler(F,R);}else if(f.metadata.fields[F].metadata){this._deleteNestedPanels(p);if(this._oLayoutsByIdMap[F]&&this._oLayoutsByIdMap[F][R]){delete this._oLayoutsByIdMap[F].splice(R,1);}}}var d=true;if(f.hasOwnProperty("data")&&f.data.hasOwnProperty("technicalInfo")){f.data.technicalInfo[0].actionType="Delete";if(R>-1&&f.metadata&&f.metadata.onChildDelete&&m){this._handleRowDeletion(R,f.metadata,p);}if(P instanceof sap.ui.layout.VerticalLayout){if(f.metadata.hasMultiple&&P.getModel()){P.getModel().getProperty("/deletedPanels").push(M);if(P.getContent().length===1){P.getParent().getContent()[0]instanceof sap.m.Toolbar&&P.getParent().getContent()[0].setVisible(true);}}if(!f.metadata.hasMultiple&&P.getModel()){P.getModel().getProperty("/deletedPanels").push(M);}P.removeContent(p);if(!P.getContent().length){P.setVisible(false);}this._iPanelIndexes[p.getModel().getData()._sMainGroupId.slice(0,-2)]-=1;p.destroy();}else if(P instanceof sap.m.Panel){delete f.data.technicalInfo[0].actionType;P.removeContent(p);d=false;if(!this._alternateSection){this._alternateSection=[]}this._alternateSection.push(p);var c=p.getContent();for(var i=0;i<c.length;i++){if(c[i]instanceof sap.ui.layout.Grid){var g=c[i].getContent();for(var j=0;j<g.length;j++){var I=E.getInputFromFieldLayout(g[j]);if(I&&I instanceof sap.m.InputBase){this.updateProperty(I,"value","");}}}}var _=this;if(!this._oAddAlternateButton){this._oAddAlternateButton=new sap.m.Button({text:this._oBundle.getText("ECT_PP3_ADD_ALT_LANGUAGE"),type:sap.m.ButtonType.Default,press:[function(e){P.addContent(_._alternateSection[0]);_._alternateSection.splice(0,1);if(_._alternateSection==0){P.removeContent(this);delete _._oAddAlternateButton}}]}).addStyleClass("sapExtentUilibAddAlternateBtn");P.addContent(this._oAddAlternateButton);}}else if(this._oListener&&typeof this._oListener.deleteContent==="function"){this._oListener.deleteContent(p);}if(f.data.technicalInfo[0].id==null||f.data.technicalInfo[0].id>-1){if(f.hasOwnProperty("metadata")&&f.metadata.hasOwnProperty("fields")){for(var F in f.metadata.fields){if(f.metadata.fields[F].submitOnFieldChange){this._submitFieldOnChange(F);break;}}}}}if(d){delete this._oFields[s];this._setPanelIndexInForm();}}if(P.getContent()&&P.getContent().length===0){P.addStyleClass("sapExtentUilibUtilEditFormGeneratorFGPanelVL");}var a;var t=M.getData().data&&M.getData().data.technicalInfo;if(t&&t.length>0){a=t[0].id;}this._handleAddButtonVisibility(a,f);this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_DELETE_ACTION_NAME,tableId:M.getData().id,rowId:a});};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleAddButtonVisibility=function(d,f){if(d&&E.isOneToOneAssociation(f)&&!f.metadata.isConditionalChange){if(this._listenerImplementsFunction("setShowAddButton")){this._oListener.setShowAddButton(true);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._deleteNestedPanels=function(c){var C=c.getContent();for(var I=0,l=C.length;I<l;I++){if(C[I]instanceof sap.ui.layout.VerticalLayout){this._deleteNestedPanels(C[I]);}else if(C[I]instanceof sap.m.Panel){this.deletePanel(C[I]);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._deleteNestedPanels=function(c){var C=c.getContent();for(var I=0,l=C.length;I<l;I++){if(C[I]instanceof sap.ui.layout.VerticalLayout){this._deleteNestedPanels(C[I]);}else if(C[I]instanceof sap.m.Panel){this.deletePanel(C[I]);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getPanel=function(m,d,p){var P=p&&p.title||m.label||"";var o=null;if(m.hasOwnProperty("titleType")&&m.titleType=="resolver"){o=new sap.m.Title({text:{parts:["/data/fields/"+P+"/value/0"],formatter:(function(g){return function(j){return(j&&typeof j=="object"?(j.name||j.primaryDisplayText):j)||g;};})(this._oForm.portletTitle)}});}else{o=new sap.m.Title({text:P||(this._defaultToPorletTitleWhenEmpty&&this._oForm.portletTitle)||this._oForm.formariahiddenLabel||"",wrapping:true});}if(m.hasOwnProperty("fontConfig")){this._oCommonUtils.addClassesFromConfigForTitle(m.fontConfig,o);}var e=p&&p.hasOwnProperty("expandable")?p.expandable:(m.collapsible||m.hasMultiple);var b=!!(e&&!m.collapsed);var D=this._oBundle.getText("COMMON_Delete");var s=new sap.ui.core.InvisibleText({text:P});var t;if(sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){t="";}else{t=D+" "+P;}var a=this._oBundle.getText("COMMON_Edit");var B=this._oCommonUtils.getBlindnessSupport();function c(g,j){if(g&&g.length>0){return typeof j=="undefined"?false:j;}return false;}var T=[o,new sap.m.ToolbarSpacer(),s];if(this._listenerImplementsFunction("allowInlineEditButton")&&this._oListener.allowInlineEditButton()&&d.technicalInfo&&d.technicalInfo.length&&d.technicalInfo[0].id){T.push(new sap.m.Button({icon:"sap-icon://edit",type:"Transparent",text:B?a:"",tooltip:a+" "+P,ariaLabelledBy:B?s:"",press:[function(g){this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.INLINEEDITPRESS_EVENT_ID,{oData:d});},this]}));}var f=null;T.push(new sap.m.Button({visible:{parts:["/metadata/requireAddressValidation"],formatter:function(g){return!!g;}},enabled:{parts:["/metadata/isFormDirty"],formatter:function(g){return!!g;}},icon:"sap-icon://validate",type:"Transparent",text:this._oBundle.getText("ECT_ADDRESS_VALIDATION_REQUIRED"),tooltip:this._oBundle.getText("ECT_ADDRESS_VALIDATION_REQUIRED"),press:[function(g){var u="MAIN";var F=m.fieldsOrder[0].split("-");if(F.length==3&&F[2]!="type"){u=F[2]}this.onValidateAddress(f,u)},this]}));T.push(new sap.m.Button({visible:{parts:["/metadata/writable","/metadata/actions","/data/technicalInfo","/metadata/hasMultiple","/metadata/editable"],formatter:function(w,g,j,k,l){if(p.alternateSection&&!(Util.findURLParam("userType")=="ONBSimplify"&&!l)){return true;}if(typeof w==="boolean"&&!w){return false;}if(g){return g.delete?g.delete:false;}return c(j,k);}},icon:"sap-icon://delete",type:"Transparent",text:B?D:"",tooltip:t,ariaLabelledBy:B?s:"",press:[function(g){var f=g.getSource().getParent().getParent();this.deletePanel(f,true);this.oInvisibleMessage=new sap.ui.core.InvisibleMessage();this._oCommonUtils.announceInvisibleMessage(this._oBundle.getText("ECT_PP3_BE_DELETED",P),sap.ui.core.InvisibleMessageMode.Assertive,1000,this);},this]}));var h=new sap.m.Toolbar({visible:{parts:["/data/technicalInfo","/metadata/hasMultiple","/metadata/fields"],formatter:function(g,j,M){if(E.hasOnlyHiddenFields(M)){return false;}var k=this.getContent()[0];if(k.getText()||c(g,j)){return true;}return false;}},content:T});h.addStyleClass("sapExtentUilibUtilEditFormGeneratorToolbar");if(this._oForm.formariahiddenLabel){h.addStyleClass("sapUiInvisibleText");}if(p.titleLevel){h.getTitleControl().setLevel(p.titleLevel);}f=new sap.m.Panel({headerToolbar:h,expandable:(e&&P!==""),expanded:b,content:new sap.ui.layout.Grid(sap.extent.uilib.util.EditFormGenerator.DEFAULT_GRID_PROPERTIES),width:"auto",visible:{parts:["/metadata/"+sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY,"/metadata/fields"],formatter:function(g,M){if(E.hasOnlyHiddenFields(M)){return false;}if(g===undefined){return true;}return g;}},expand:function(g){if(g.getParameter("expand")){f.addStyleClass("sapExtentUilibUtilEditFormGeneratorPanelExpanded");}else{f.removeStyleClass("sapExtentUilibUtilEditFormGeneratorPanelExpanded");}},accessibleRole:p.accessibleRole?p.accessibleRole:sap.m.PanelAccessibleRole.Form});f.addStyleClass("sapExtentUilibUtilEditFormGeneratorPanelExpanded");return f;};\nsap.extent.uilib.util.EditFormGenerator.prototype.onValidateAddress=function(p,u){var o=[],f=[],s=[],S;if(this._aCurrentSuggReply&&this._aCurrentSuggReply.length){s=this._aCurrentSuggReply}if(p.sId=="press"){p=this._oValidationResponseDialog.getModel().getData().oPanel;var F=this._oValidationResponseDialog.getModel().getProperty("/sectionData/fieldsData/0/fields");var t=this;if(F){var R=null;var m=p.getModel().getData()._sMainGroupId.split("_");if(this._newHirePageView&&!this._isReHire){R=m[3];}else{R=m[2]-1;}F.forEach(function(d){t.updatePropertyById(d.id,R,"value",d.defaultValue,false);});delete this._aCurrentSuggReply;this.onCloseAddressValidation(true);return;}if(!this._validationSelection){sap.m.MessageBox.show(this._oBundle.getText("ECT_ADDRESS_VALIDATION_SELECT_ONE"),{icon:sap.m.MessageBox.Icon.ERROR});return;}var a=this._oValidationResponseDialog.getModel().getProperty("/addrSuggList/"+(this._validationSelection-1)+"/rangeSelection");var b=this._oValidationResponseDialog.getModel().getProperty("/addrSuggList/"+(this._validationSelection-1)+"/showTextBox");if(a){this._validationSelection.push(a);}else if(b){sap.m.MessageBox.show(this._oBundle.getText("COMMON_ERR_DATA_REQUIRED",this._oValidationResponseDialog.getModel().getProperty("/addrSuggList/"+(this._validationSelection-1)+"/textBoxPlaceHolder")),{icon:sap.m.MessageBox.Icon.ERROR});return;}s.push(this._validationSelection);S=this._oValidationResponseDialog.getModel().getData().oldData;u=this._oValidationResponseDialog.getModel().getData().useSection;}else{this._getPanelData(p,o,f);if(f.length>0){this._convertFormToTableData(f,o);}S=sap.sf.peopleprofile.model.pp3core.DWRConverter.convertODataToDWRData({fieldGroups:o})}if(S instanceof Array&&S[0].hasOwnProperty("fieldsData")&&S[0].fieldsData[0].hasOwnProperty("fields")){for(var i=0;i<S[0].fieldsData[0].fields.length;i++){if(S[0].fieldsData[0].fields[i].id.indexOf("attachment-id")>-1){S[0].fieldsData[0].fields.splice(i,1);}}}var c=this._oListener.validateAddress(this._getEffectiveDate(),S,this._sBlockId,s,u,(this._sBlockId=="DEPENDENT_INFORMATION"));c.fail(function(e){E.handleBackendError(e);});c.done(jQuery.proxy(function(v){v.oldData=S;v.useSection=u;v.oPanel=p;this._aCurrentSuggReply=v.currentSuggReply;this._oValidationResponseDialog=sap.ui.xmlfragment("sap.extent.uilib.fragments.addressValidation",this);this._oValidationResponseDialog.setModel(new sap.ui.model.json.JSONModel(v));this._oValidationResponseDialog.open()},this));this.onCloseAddressValidation(false);};\nsap.extent.uilib.util.EditFormGenerator.prototype.displayErrorValidation=function(s){return s?sap.ui.core.ValueState.Error:sap.ui.core.ValueState.None};\nsap.extent.uilib.util.EditFormGenerator.prototype.onSelectAddressOption=function(e){this._validationSelection=[];this._validationSelection.push(e.oSource.getProperty("text"))};\nsap.extent.uilib.util.EditFormGenerator.prototype.onCloseAddressValidation=function(f){if(this._oValidationResponseDialog){this._oValidationResponseDialog.close();this._oValidationResponseDialog.destroy();this._oValidationResponseDialog=null;delete this._validationSelection}if(f){delete this._aCurrentSuggReply;}};\nsap.extent.uilib.util.EditFormGenerator.prototype.showButton=function(s){return s=="success"};\nsap.extent.uilib.util.EditFormGenerator.prototype.showButtonClose=function(s){return s=="error"};\nsap.extent.uilib.util.EditFormGenerator.prototype._addFieldGroupToPanel=function(p,c){p.addContent(c);};\nsap.extent.uilib.util.EditFormGenerator.prototype._addContentToPanel=function(p,c){var I=c.getContent&&c.getContent();I=I&&I[0];if(c instanceof sap.m.Panel||c instanceof sap.extent.uilib.AlternateSectionLayout||(c instanceof sap.ui.layout.VerticalLayout&&(I instanceof sap.m.Table||I instanceof sap.ui.layout.VerticalLayout||I instanceof sap.m.Panel))||(I&&I instanceof sap.m.TextArea)){p.addContent(c);}else{I=p.getContent();I=I[I.length-1];if(!(I instanceof sap.ui.layout.Grid)){I=new sap.ui.layout.Grid(sap.extent.uilib.util.EditFormGenerator.DEFAULT_GRID_PROPERTIES);p.addContent(I);}I.addContent(c);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._insertContent=function(c,R){if(R&&R.getParent()){var l=R.getParent();var g=l.getParent();var I=g.indexOfContent(l);g.insertContent(c,I+1);var G=g.getContent();if(I+2<G.length){var L=G[I+2].getLayoutData();if(L&&L instanceof sap.ui.layout.GridData){L.setLinebreak(true);}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildPanel=function(p,l,m,d,g,M){var P=null;var o=m;var a=d;if(p&&p.alternateSection&&m.alternateSections&&m.alternateSections.fieldGroups){o=m.alternateSections.fieldGroups[p.index];}if(o){P=this._getPanel(o,a,p);if(p.items){for(var i=0;i<p.items.length;i++){this._buildGroup(p.items[i],l,o,a,P,undefined,undefined,g,M?M:-1);}}if(p.alternateSection&&P.getContent()&&P.getContent()[0].getContent()&&P.getContent()[0].getContent().length==0){return null;}var D=E.createDetailsButton(o,this._portletEditable,this._handleDetailsButtonPress,p,this);if(!o.hasOwnProperty("showDetailsLink")){var _=o._subPanelAdded;if(!_){P.addContent(D);}else{P.insertContent(D,(P.getContent().length-m._subPanelAdded));}}else{P.addContent(D);}}else{console.warn("Unable to find metadata for panel: "+p&&p.title);}if(P){var t=this;P.addEventDelegate({onAfterRendering:jQuery.proxy(function(e){var b=e.srcControl.getModel().getProperty("/data/technicalInfo");if(b&&b[0]&&b[0].actionType==="Delete"&&e.srcControl){t.deletePanel(e.srcControl);}if(jQuery(".sapExtentUilibUtilEditFormGeneratorFGPanel").find("header, div[role=\'heading\']")&&jQuery(".sapExtentUilibUtilEditFormGeneratorFGPanel").find("header, div[role=\'heading\']").length>0){sap.extent.uilib.util.CommonUtils.removeHeadings(".sapExtentUilibUtilEditFormGeneratorFGPanel");}if(jQuery(".sapExtentUilibUtilEditFormGeneratorTableContainer").find("header, div[role=\'heading\']")&&jQuery(".sapExtentUilibUtilEditFormGeneratorTableContainer").find("header, div[role=\'heading\']").length>0){sap.extent.uilib.util.CommonUtils.removeHeadings(".sapExtentUilibUtilEditFormGeneratorTableContainer");}if(jQuery(".sapExtentUilibUtilEditFormGeneratorToolbar").find("header, div[role=\'heading\']")&&jQuery(".sapExtentUilibUtilEditFormGeneratorToolbar").find("header, div[role=\'heading\']").length>0){sap.extent.uilib.util.CommonUtils.removeHeadings(".sapExtentUilibUtilEditFormGeneratorToolbar");}if(this._oExpandButton){var s=p&&p.title||o.label||"";this._oExpandButton.$().attr("aria-label",s+" "+t._oBundle.getText("GOALS_V2_Goal_Intro_Container_Expand_Collapse_Tooltip"));}},P)});}return P;};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleDetailsButtonPress=function(e){if(this._listenerImplementsFunction("getDetailedInfo")){var a=e.getSource().getModel().getData().data.technicalInfo[0].id;var b=0;var p=e.getSource().getParent();var v=e.getSource().getParent().getParent();this._oNonDetailsData=e.getSource().getModel().getData();if(p instanceof sap.m.Panel&&v instanceof sap.ui.layout.VerticalLayout){b=v.indexOfContent(p);}var d=this._oListener.getDetailedInfo(a,this._sBlockId,b,e.getSource().getModel());d.done(jQuery.proxy(this.onDetailsDataLoaded,this));}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildGroup=function(g,l,m,d,p,I,R,a,M){var t=g.details.renderStyle;var L;switch(t){case"panel":var s=this._buildPanel(g.details,l,m,d,a,M);if(s){this._addContentToPanel(p,s);if(!m._subPanelAdded){m._subPanelAdded=0}m._subPanelAdded++}return;case"flow":L=jQuery.extend({},this._oLayoutDataConfig);break;case"form":default:L=jQuery.extend({linebreak:true},this._oLayoutDataConfig);break;}var G=g.details.items;for(var i=0;i<G.length;i++){var f=G[i];var F=f.id;var o=this._getMetaForField(F,m);if(!o){continue;}if(o.type=="ATTACHMENT"){o.targetUserId=sap.ui.getCore().getModel("user").getProperty("/userId");o.recordHash=this.getSecurityTokenBasedOnKey(this._searchRecordHash(m.fields),d,m);o.uuid=this.getSecurityTokenBasedOnKey(this._searchUUID(m.fields),d,m);if(d.technicalInfo&&d.technicalInfo.length>0&&d.technicalInfo[0].id){o.attachRowId=d.technicalInfo[0].id;}else if(this._oForm&&this._oForm.hasOwnProperty("isHistory")&&this._oForm.isHistory){o.attachRowId=this._oForm.id;}jQuery.sap.log.info("oMetaForField.record-hash= "+o.recordHash);jQuery.sap.log.info("oMetaForField.uuid= "+o.uuid);}if(o.metadata&&(o.metadata.type==="FIELDSGROUP"||o.metadata.type==="DATAGRID")){var D=this._getDataForField(F,d);if(!D||!Array.isArray(D.value)){D=[{}];}else{D=D.value;}for(var j=0;j<D.length;j++){this._buildNestedFieldGroup(o,D[j],p);}continue;}var b=this._buildField(F,o,this._getDataForField(F,d,o),a,M);var c=jQuery.extend({},L);if(f.hasOwnProperty("colspan")){jQuery.each(c,function(h,k){var n=k*f.colspan;c[h]=n<12?n:12;});c.colSpan=f.colspan;}if(o.type==="DATE"&&t!="form"&&!f.hasOwnProperty("colspan")){if(this._iMaxGroupSize<3){c={spanL:5,spanM:5,spanS:12};}else{c={spanL:c.spanL-1,spanM:3,spanS:12};}}if(o.type==="ATTACHMENT"||o.type==="PAY_COMPONENT_PIRCHART"||(o.type==="TIMEBUTTON"&&o.id==="tlmLocalizationActionButton")){c={linebreak:true,spanL:12,spanM:12,spanS:12};}else if(o.type==="WORKSCHEDULECOMBOBOX"){c={spanL:6,spanM:12,spanS:12};}if(o.type==="TextArea"){c={linebreak:true,spanL:12,spanM:12,spanS:12};}var e=new sap.extent.uilib.util.PP3GridData(c);if(i===0){e.setLinebreak(true);}if(o.type!=="multipleRelation"||(o.type=="multipleRelation"&&o.maxRows==1)){b.setLayoutData(e);}if(I){this._insertContent(b,R);R=b.getContent()[1]||b.getContent()[0];continue;}if(o.visible!=="none"){this._addContentToPanel(p,b);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.onDetailsDataLoaded=function(d){if(this._listenerImplementsFunction("addFormData")){d.isFromDetailsDialog=true;if(this._oNonDetailsData&&this._oNonDetailsData.data){for(var n in this._oNonDetailsData.data.fields){for(var a=0;len=d.fieldGroups.length,a<len;a++){for(var D in d.fieldGroups[a].data.fields){if((n===D)&&this._oNonDetailsData.data.fields.hasOwnProperty(n)&&!(n.indexOf("-uuid")>-1||n.indexOf("record-hash")>-1)){if(this._oNonDetailsData.metadata.fields[n].type=="ATTACHMENT"&&this._oNonDetailsData.data.fields[n].value&&this._oNonDetailsData.data.fields[n].value.length==0){this._oNonDetailsData.data.fields[n].value=[""];}d.fieldGroups[a].data.fields[D]=this._oNonDetailsData.data.fields[n];d.fieldGroups[a].metadata.fields[D]=this._oNonDetailsData.metadata.fields[n];}}}}}this._oListener.addFormData(d,d.isOk,true);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildNestedFieldGroup=function(m,d,p){var f={id:m.id,metadata:m.metadata,layout:m.layout,data:d};var F=0;if(m.metadata&&m.metadata.id&&this._oLayoutsByIdMap&&this._oLayoutsByIdMap.hasOwnProperty(m.metadata.id)){var g=this._oLayoutsByIdMap[m.metadata.id];F=g?g.length:0;}var n=this._buildFieldGroup(f,F,false,false);this._addFieldGroupToPanel(p,n);};\nsap.extent.uilib.util.EditFormGenerator.prototype._addToFields=function(m,I,f){if(!this._oFields.hasOwnProperty(m)){this._oFields[m]={};}this._oFields[m][I]={};this._oFields[m][I].field=f;};\nsap.extent.uilib.util.EditFormGenerator.prototype._removeField=function(m,I,M){if(this._oFields.hasOwnProperty(m)&&this._oFields[m].hasOwnProperty(I)){var p=this._oFields[m][I].field.getParent();if(p&&typeof p.removeContent==="function"){p.removeContent(this._oFields[m][I].field);if(M&&M.getData()&&M.getData().data&&M.getData().data.fields){delete M.getData().data.fields[I];delete M.getData().metadata.fields[I];}this._oFields[m][I]=null;delete this._oFields[m][I];}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getFromFields=function(m,I){if(this._oFields.hasOwnProperty(m)&&(this._oFields[m].hasOwnProperty(I)||this._oFields[m].hasOwnProperty("FIELD_WITH_CONTEXT"+I))){return this._oFields[m][I]||this._oFields[m]["FIELD_WITH_CONTEXT"+I];}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype.setReHire=function(a){this._isReHire=a;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getInputFromFields=function(m,I){var f=this._getFromFields(m,I);if(f&&f.field){return E.getInputFromFieldLayout(f.field);}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getInputValueById=function(m,I){var f=this._getFromFields(m,I);if(f&&f.field){var o=E.getInputFromFieldLayout(f.field);if(o){return E.getInputValue(o);}}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getMetaForField=function(I,m){return m.fields[I];};\nsap.extent.uilib.util.EditFormGenerator.prototype.getFields=function(){return this._oFields;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getDataForField=function(I,d,m){var f=d.fields[I];if(I&&(I.indexOf("record-hash")>-1||I.indexOf("-uuid")>-1)){if(f&&f.value&&f.value[0].length){return f;}else if(f&&f.value&&m&&m.value){f.value[0]=m.value;return f;}}if(f){if(m&&m.st){if(!f.st||f.st.length==0||(f.st.length===1&&!f.st[0])){f.st=[m.st];}}return f;}else if(m){return{value:[null],oldValue:[null]};}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildField=function(f,F,o,g,m,R){var a=false;if(this._invalidFieldIdList){if(this._invalidFieldIdList.indexOf(f)>-1){a=true;}}var u=F.hasOwnProperty("oldValueDisplayPageZero")&&F.oldValueDisplayPageZero?true:this._bIsEffectiveDated;var b=E.buildField(f,m,this._sInputWidth,F,o,g,u,jQuery.proxy(this._addListenersToInput,this),a,R);if(F&&F.type!=="multipleRelation"&&b.getContent().length>1){var l=b.getContent()[0];var I=b.getContent()[1];this._oLabels[f+m]=l;if(this.eFlag===1){setTimeout((function(){if(I instanceof sap.m.InputBase){I.focus();}else if(I instanceof sap.ui.layout.HorizontalLayout){for(var i=0;i<I.getContent().length;i++){var c=I.getContent()[i];if(c instanceof sap.m.InputBase){c.focus();break;}}}}).bind(this),1000);this.eFlag=0;}if(I){if(typeof I.getContent==="function"&&(I.getContent().length>0)&&typeof I.getContent()[0].getValue==="function"&&typeof I.getContent()[0].addAriaLabelledBy==="function"){I.getContent()[0].addAriaLabelledBy(l);}else if(typeof I.addAriaLabelledBy==="function"){if(l&&typeof l.getContent==="function"&&(l.getContent().length>0)){I.addAriaLabelledBy(l.getContent()[0])}else{I.addAriaLabelledBy(l);}}}}this._addToFields(m,f,b);if(F&&((F.hasOwnProperty("drivenById")&&F.drivenById!==undefined)||(F.hasOwnProperty("restrictingFieldResolver")&&F.restrictingFieldResolver!==undefined))){F[sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY]=false;this._oMdfConditionalSupport.registerDrivenByControls(F.drivenById||F.restrictingFieldResolver,f);}if(o&&o.additionalMetaAndData){this._oMdfConditionalSupport.registerDriverField(f);}return b;};\nsap.extent.uilib.util.EditFormGenerator.prototype._submitFieldOnChange=function(I,m,R){var s=this._getEditFormData();if(m&&m.rule&&m.rule.onChange){s.triggerRule={fieldId:I,rules:m.rule&&m.rule.onChange}}if(this._oCollectedRulesPropagation[I]&&this._oCollectedRulesPropagation[I].length>0&&!s.triggerRule){s.triggerRule={fieldId:I,rules:[]}}jQuery.each(this._oCollectedRulesPropagation&&this._oCollectedRulesPropagation[I],function(a,v){s.triggerRule.rules.push(v);});this._oCollectedRulesPropagation={};if(this._listenerImplementsFunction("submitOnFieldChange")){var S=this._oListener.submitOnFieldChange(s.effectiveDate,I,s,this._sBlockId);S.fail(function(e){E.handleBackendError(e);});S.done(jQuery.proxy(function(n){this._bUpdateLastModifiedDetails=true;if(!jQuery.isEmptyObject(this._cacheRulesMetaChanges)){n.cachedRulesMetaChanges=this._cacheRulesMetaChanges;}this._updateFormData(n,R);delete this._bUpdateLastModifiedDetails;},this));return S;}};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateFormData=function(n,R){if(!this._listenerImplementsFunction("isFormDataInvalid")){return;}if(this._oListener.isFormDataInvalid(n)){if(n.status=="error"||n.status=="failure"){E.displayBackendResponse(n);}return;}if(this._listenerImplementsFunction("setFormData")){this._oLayoutsByIdMap={};this._oListener.setFormData(n,"","",R);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateFieldDataMDF=function(f,a,b,I){this.updatePropertyById(f,b,"data",a,false,null,I);this._oMdfConditionalSupport.conditionalBeforeChangeHandler(f,b);this._oMdfConditionalSupport.conditionalChangeHandler(f,b);this._triggerConditionalSupport();};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateFormDataPartiallyMDF=function(n){if(!n.fieldGroups||!n.fieldGroups.length){return;}var f,m,a,t,l,L,o,b;for(var i=0;i<n.fieldGroups.length;i++){f=n.fieldGroups[i];if(!f.metadata||!f.metadata.fields){continue;}if(!f.metadata.resolver){var F=f.metadata.fields;for(var c in F){if(F[c].onChange&&!F[c].onChange.onChangePresent){return;}}}m=f.metadata;if(m.type==="DATAGRID"&&(l=this._oLayoutsByIdMap[m.id])&&f.layout&&f.layout.renderStyle==="table"){L=l[0];o=L.getModel();b=o.getData();b.data=f.data;o.setData(this._formatDataForTable(f.id,null,null,b.metadata,f.data,b.layout));continue;}this._updateFieldGroupDataMDF(f);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateFieldGroupDataMDF=function(f){var m=f.metadata.fields;var t=f.data.technicalInfo.length?f.data.technicalInfo:[{}];for(var a=0;a<t.length;a++){var b=t[a].orderPos?t[a].orderPos-1:0;for(var c in m){if(f.data&&f.data.fields&&f.data.fields[c]){var d=E.getSingleRowDataByRowId(f.data.fields[c],a);if(m[c].hasOwnProperty("metadata")){var n={data:d.value[0],layout:m[c].layout,metadata:m[c].metadata};this._updateFieldGroupDataMDF(n);}else{this._updateFieldDataMDF(c,d,b,m[c].driverField);if(m[c].required){this._validateRequiredField(this.getInputById(c));}}}}if(t.length>1&&a<(t.length-1)){this._fnAddNewForm&&this._fnAddNewForm();}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.updateFormDataPartiallyEC=function(m,f,R){for(var i=0;i<f.length;i++){var o=f[i].metadata;var a=f[i].data;var F;if(o&&o.hasOwnProperty("fields")){for(F in o.fields){var b=this.getInputById(F,R);if(b){for(var p in o.fields[F]){this.updatePropertyById(F,R,p,o.fields[F][p],false,true);}}}var g=this._sOnFieldChangeTriggerMainGroup;if(m.getData().layout&&(m.getData().layout.renderStyle==="panel")){g=m.getData().id;}if((R>=0)&&g){if((!this._cacheRulesMetaChanges[g]||!this._cacheRulesMetaChanges[g][R])&&!jQuery.isEmptyObject(o.fields)){if(!this._cacheRulesMetaChanges[g]){this._cacheRulesMetaChanges[g]={};}this._cacheRulesMetaChanges[g][R]={};this._cacheRulesMetaChanges[g][R]["fields"]=o.fields;}else{var t=this;jQuery.each(o.fields,function(F,P){jQuery.each(P,function(s,V){if(t._cacheRulesMetaChanges[g]&&t._cacheRulesMetaChanges[g][R]&&t._cacheRulesMetaChanges[g][R]["fields"]&&!t._cacheRulesMetaChanges[g][R]["fields"][F]){t._cacheRulesMetaChanges[g][R]["fields"][F]={};}t._cacheRulesMetaChanges[g][R]["fields"][F][s]=V;})})}}}var d=false;if(a&&a.hasOwnProperty("fields")){for(F in a.fields){if(F==="jobInfo-company"){d=true;}var v=a.fields[F].value[0];if(jQuery.isNumeric(v)){v=v.toString();}this.updatePropertyById(F,R,"value",v,d,true);if(!d){this.fireFieldChangeEventId(F,R,null,true);}d=false;}}m.updateBindings();}};\nsap.extent.uilib.util.EditFormGenerator.prototype.fireFieldChangeEventId=function(f,R,I,F){I=I||this.getInputById(f,R);if(!I){return;}var n=false;var m=I&&I.getModel();var d=m&&m.getData();if(d&&d.dataList){var a=d.dataList[R].rowInfo;if(a.id===-1){n=(this._oForm&&this._oForm.isFromDetailsDialog)?false:true;}}var p={fieldId:f,rowId:R,newRow:n,input:I,srcControl:this};if(F&&!(d&&d.blockType==="NATIONAL_ID_CARD")){var e=new sap.ui.base.Event(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,this._oEventProvider,p);this._oDirtyChecker.modifiedFieldListener(e);}else{this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,p);}};\nsap.extent.uilib.util.EditFormGenerator.prototype.updatePropagateFieldsOnRequest=function(d,R){this.supervisorChangeCallDone=false;var a=(d&&d.results)||[];for(var b=0,l=a.length;b<l;b++){var p=(a[b]&&a[b].propagations)||[];for(var c=0,e=p.length;c<e;c++){var f=p[c];this.updatePropertyById(f.id,R,"value",f.value,true);var I=this.getInputById(f.id,R);if(I){this.fireFieldChangeEventId(f.id,R,I,true);}if(f.id==="jobInfo-manager-id"){this.supervisorChangeCallDone=true;}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleRuleChange=function(I,l,m,p){if(I){this._sOnFieldChangeTriggerMainGroup=E.getMainGroupId(I);}var g=this._sOnFieldChangeTriggerMainGroup;var s=E.getFieldId(I);var o=E.getMeta(I);var M=I.getModel();var d=M.getData();var P=null;var R=this._getRowIndexByInput(I);R=(R===-1)?0:R;var S=this._getEditFormData();if(o&&o.onChange&&o.onChange.onChangePresent&&this._listenerImplementsFunction("onFieldChange")){var v=E.getInputValue(I);var e=[];this._getFieldToParentStack(e,I,o);var a=E.getEventVOObject(s,d.metadata,v,l,R,e,false);P=this._oListener.onFieldChange(a,S);this.handleMDFFieldChange(P,I,l);P.then(jQuery.proxy(function(){this._proceedWithUIRules(I,R,s,g,m,p);},this));}else if(o&&o.hasOwnProperty("rule")&&this._listenerImplementsFunction("getRuleData")){P=this._oListener.getRuleData(s,S,o.rule,M,R);P.done(jQuery.proxy(function(b){this._proceedWithUIRules(I,R,s,g,m,p,b);},this));sap.extent.uilib.util.EditFormGeneratorHelper.disableComboBoxAutoCloseByPromise(I,P);if(!this.busyLoading){this.busyLoading=new sap.extent.uilib.util.BusyLoading();}if(!sap.ui.getCore().getModel("user").getProperty("/isInternalHire")){this.busyLoading.show(P);}P.fail(function(b){E.handleBackendError(b);});}};\nsap.extent.uilib.util.EditFormGenerator.prototype._proceedWithUIRules=function(I,R,s,g,m,p,o){delete this._sOnFieldChangeTriggerMainGroup;var v=E.getInputValue(I);if(this.getBlockId()==sap.extent.uilib.util.EditFormGenerator.BLOCK_ID_COMPENSATION_INFORMATION){var a=E.getMainGroupId(I);var f=E.getFieldId(I);if(E.hasSubmitOnFieldChange(m)&&E.rowSubmitOnFieldChangeFieldsNotEmpty(this._oForm.rowSubmitOnFieldChangeFieldsNotEmpty,this._oFields,a,R)){this._submitFieldOnChange(f,m,R);}}var b;var P;if(I instanceof sap.extent.uilib.SearchableComboBox){b=I.getItemByKey(v);if(b){P=b.getPropagation();}}if(E.hasRequestPropagationValues(m)&&(!P||P.length===0)){var S=this._oSCBHelper._getFoundationSearchOptions(I,m,1);this.requestPropagationValues(S,v,m.searchOptions.propagateFieldsOnRequest,m.dataSource,R);}if(R!=-1){I=this.getInputById(s,R,false,g)||I;}if(!I){return;}m=E.getMeta(I);if(m&&(m.hasOwnProperty("onChangeRule")||(m.onChange&&m.onChange.uiRules))){setTimeout(function(){this._handleUIRuleChange(I);}.bind(this),0);}var c=I.getParent()&&I.getParent().getParent().getParent();if(c){var d=this;this._bInitialDataLoad=false;this._oEventBus.publish(sap.extent.uilib.model.EditFormGeneratorEvent.CHANNEL,sap.extent.uilib.model.EditFormGeneratorEvent.InitialMDFEditDataLoaded,{callback:function(){d._bInitialDataLoad=true;}});if(!this._bInitialDataLoad){setTimeout(function(){d._handlePanelLayoutAfterRendering(c,s,p);},0);}}this.setFocusOnInput(I);var R=this._getRowIndexByInput(I);var f=E.getFieldId(I);var a=E.getMainGroupId(I);this._cascadeChildHandler(v,f,R,true,a,o);};\nsap.extent.uilib.util.EditFormGenerator.prototype.setFocusOnInput=function(I){setTimeout(function(){I&&I.focus();},0);};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleRowDeletion=function(R,m,p){var e=[{id:m.id,resolver:m.resolver,rowIndex:R}];this._getFieldToParentStack(e,p,m);var o=E.getEventVOObject(m.id,m,null,null,R,e,true);var s=this._getEditFormData();var O=this._oListener.onFieldChange(o,s);this.handleMDFFieldChange(O,p);};\nsap.extent.uilib.util.EditFormGenerator.prototype.updateProperty=function(I,p,v,f){this._updateProperty(I,p,v,f);};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateProperty=function(I,p,v,f,P){if(I){var F=E.getFieldId(I);var m=E.getMeta(I);if(!F||!m){return;}var o=E.getInputValue(I);var b=null;var M;var u=false;if(p=="writable"){if(I instanceof sap.extent.uilib.SFSwitch){b=I.getBinding("enabled");}else if(I instanceof sap.extent.uilib.UploadCollectionPP3){b=I.getBinding("uploadEnabled");}else{b=I.getBinding("editable");}u=true;}else if(p=="visible"){var s=E.getMainGroupId(I);var a=this._getFromFields(s,F);if(a&&a.field){b=a.field.getBinding("visible");}u=true;}else if(p=="value"){if(I instanceof sap.m.ComboBox){b=I.getBinding("selectedKey");}else if(I instanceof sap.sf.surj.shell.controls.SearchInput){b=I.getBinding("value");}else if(I instanceof sap.m.InputBase){b=I.getBinding("value");}else if(I instanceof sap.extent.uilib.SFSwitch){b=I.getBinding("stateAsString");}else if(I instanceof sap.m.RadioButtonGroup){b=I.getBinding("selectedIndex");}else if(I instanceof sap.m.CheckBox){b=I.getBinding("selected");}else if(I instanceof sap.m.UploadCollection){var c=I.getBinding("items").getPath();var O=I.getModel().getProperty(c+"/0");if(!Array.isArray(v)){I.getModel().setProperty(c,[v]);}else{I.getModel().setProperty(c,v);}if(!P){I.getModel().updateBindings();}if(this._listenerImplementsFunction("cacheAttachmentsInfo")&&O!=""&&O!=v){var d=O;if(typeof O=="object"&&O.hasOwnProperty("attachmentId")){d=O.attachmentId;}if(this._canDeleteAttachment(I,d)){var A=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(I);A.attachmentId=d;this._oListener.cacheAttachmentsInfo("delete",A);}}}var e=E.setValue(v,m);if(f&&m.id=="jobInfo-company"){var V=b.getValue();if(jQuery.isArray(b.getValue())){V=V[0];}var g=E.getValue(V,m);if(e&&(g==e.id)){f=false;}}if(e!==null&&e!==undefined&&e!==""){this.resetValueState(I);}}else if(p=="data"||p=="metadata"){M=I.getModel();if(!M||!M.getData()){return;}var h=M.getData();if(h[p]){h[p].fields[F]=v;if(!P){M.updateBindings(true);}}}else if(p=="required"){if(v===false){this.resetValueState(I);}b=I.getBinding("required");u=true;m[p]=v;}else{M=I.getModel();if(M&&M.getData()){M.getData().metadata.fields[F][p]=v;if(!P){M.updateBindings();}}}if(b){if(b instanceof sap.ui.model.CompositeBinding){var B=b.getBindings();var j=false;for(var i=0;i<B.length;i++){if(B[i].getPath().indexOf("/"+p)>-1){b=B[i];j=true;break;}}if(!j){if(I instanceof sap.extent.uilib.SearchableComboBox||I instanceof sap.sf.surj.shell.controls.SearchInput){b=B[0];}}}if(p=="value"&&(I instanceof sap.m.ComboBox)){this._cascadeChildHandler(v,F)}if(p=="visible"&&(I instanceof sap.m.Switch)){var k=a.field.getContent();if(k.length>0){this.setContentVisible(k,v);}}if(b instanceof sap.ui.model.CompositeBinding){v=[v];e=[e];if(b&&b.aBindings){for(idx=0;idx<b.aBindings.length;idx++){if(b.aBindings[idx].sMode=="OneWay"){b.aBindings[idx].setBindingMode(sap.ui.model.BindingMode.Default)}}}}b.setValue(u?v:e);if(b instanceof sap.ui.model.CompositeBinding){v=[v];e=[e];if(b&&b.aBindings){for(idx=0;idx<b.aBindings.length;idx++){if(b.aBindings[idx].sMode=="Default"){b.aBindings[idx].setBindingMode(sap.ui.model.BindingMode.OneWay)}}}}b.refresh(true);}if(f){var l=E.getInputValue(I);if(I instanceof sap.extent.uilib.SearchableComboBox){I.fireSelectionChange({selectedItem:l,userChange:false});}else if(I instanceof sap.sf.surj.shell.controls.SearchInput){I.fireItemChange({selectedItem:l,userChange:false});}else if(I instanceof sap.m.ComboBoxBase){I.fireSelectionChange({selectedItem:I.getItemByKey(l),forceChange:true,userChange:false});}else if(I instanceof sap.m.InputBase){I.fireChange({value:l,newValue:l,userChange:false});}else if(I instanceof sap.m.Switch){I.fireChange({state:l,userChange:false});}else if(I instanceof sap.m.CheckBox){I.fireSelect({selected:l,userChange:true});}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.setContentVisible=function(f,v){if(f&&f.length){for(var i=0;i<f.length;i++){var c=f[i];if(c){c.setVisible(v);var a=null;if(c.getContent){a=c.getContent();}else if(c.getItems){a=c.getItems();}if(a&&a.length){this.setContentVisible(a,v);}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.resetValueState=function(I){var o=E.getMeta(I);if(I.getValueStateText&&this._oBundle&&I.getValueStateText()===this._oBundle.getText("COMMON_ERR_DATA_REQUIRED",[o.label])){I.setValueState&&I.setValueState(sap.ui.core.ValueState.None);I.setValueStateText&&I.setValueStateText("");}};\nsap.extent.uilib.util.EditFormGenerator.prototype.getPropertyOf=function(f,R,p){var I=this.getInputById(f,R);if(I){var b=null;var m;if(p=="writable"){b=I.getBinding("editable");}else if(p=="visible"){var s=E.getMainGroupId(I);var F=this._getFromFields(s,f);if(F&&F.field){b=F.field.getBinding("visible");}if(b instanceof sap.ui.model.CompositeBinding){return E.standardVisibilityFormatter.apply(null,b.getValue());}}else if(p=="value"){return E.getInputValue(I);}else if(p=="data"||p=="metadata"){m=I.getModel();if(!m||!m.getData()){return;}var M=m.getData();if(M[p]){return M[p].fields[f];}}else{m=I.getModel();if(m&&m.getData()){return m.getData().metadata.fields[f][p];}}if(b){return b.getValue();}}else if(this._oLayoutsByIdMap[f]){var g=this._oLayoutsByIdMap[f][R];switch(p){case"visible":return g.getProperty("visible");case"title":break;case"collapsible":break;case"collapsed":break;case"disabled":break;}}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleUIRuleChange=function(I,p){var o=E.getMeta(I);var R=this._getRowIndexByInput(I);R=(R===-1)?null:R;var a=o.onChangeRule||(o.onChange&&o.onChange.uiRules);this._executeUIRules(R,a,p);setTimeout(resizeFieldInTheDialog,0);};\nsap.extent.uilib.util.EditFormGenerator.prototype._executeUIRules=function(R,a,p){var c={};if(jQuery.isNumeric(R)){c.rowId=R;}sap.extent.uilib.util.RulesHelper.executeUIRules(a,this._oRules,jQuery.proxy(function g(f,s){if(!s&&jQuery.isNumeric(R)){return 1;}var I=this.getInputsById(f);if(I.length===0){I=this._oLayoutsByIdMap[f];}return I?I.length:0;},this),jQuery.proxy(function g(f,j,P){if(jQuery.isNumeric(R)){return this.getPropertyOf(f,R,P);}return this.getPropertyOf(f,j,P);},this),jQuery.proxy(function u(f,j,P,v,l,s){var I=!s&&jQuery.isNumeric(R)?R:j;var F=this.getInputById(f,I,"","",p);if(F){if(F instanceof sap.extent.uilib.SearchableComboBox&&v&&P=="value"){v={id:v,primaryDisplayText:l};}this._updateProperty(F,P,v,P==="value");}else{var g=this._oLayoutsByIdMap[f]?this._oLayoutsByIdMap[f][I]:null;if(g){if(P==="title"){sap.extent.uilib.util.EditFormGeneratorHelper.setGroupTitleByLayout(v,g);return;}if(P==="expanded"||P==="expandable"){if(!(g instanceof sap.m.Panel)){var C=g.getContent()[0];var o=g.getParent();if(C instanceof sap.m.Panel){g=C}else if(o instanceof sap.m.Panel){g=o}else{return;}}}try{g.setProperty(P,v);}catch(e){console.log("cannot apply the property"+P+" on Filed"+f)}}}},this),c);};\nsap.extent.uilib.util.EditFormGenerator.prototype._triggerConditionalSupport=function(){this._oMdfConditionalSupport.processsAllDriverFields();};\nsap.extent.uilib.util.EditFormGenerator.prototype._dependentFieldsListener=function(p,d,m,b,R){var v=[];var o=[];var I;var a=[];for(var i=0;i<d.length;i++){I=R==-1?this.getInputsById(d[i]):[this.getInputById(d[i],R)];if(Array.isArray(I)){for(var j=0;j<I.length;j++){var V=E.getInputValue(I[j]);if(this._listenerImplementsFunction("validate")&&V){var M=E.getMainGroupId(I[j]);var c=E.getMeta(I[j]);var e=false;if(c.searchType&&c.searchType=="WORKER"){e=true;}var s=this._oSCBHelper._getFoundationSearchOptions(I[j],c,1);s.internalCode=V;s.controllerName=E.getTypeFromMeta(c)=="CASCADE"?null:c.dataSource;s.requestId=i;o.push(s);var f=this._getEditFormData();a.push(I[j]);}}}}if(o.length>0){var g=this._oListener.validate(o,V,(E.getTypeFromMeta(c)=="CASCADE"?null:c.dataSource),f);v.push(g);g.fail(E.handleBackendError);g.done(jQuery.proxy(function(a,h,D){for(var i=0;i<D.length;i++){if(typeof D[i]=="object"){var k=a.find(function(q){return(h.getFieldId(q)==D[i].childFieldId)});if(D[i].hasOwnProperty("valid")&&!D[i].valid){this._updateProperty(k,"value",undefined);this.updateValueState(k,null,null,"Warning");}if(D[i].hasOwnProperty("recordHashes")){for(var l in D[i].recordHashes){var n=h.getMainGroupId(k);var R=h.getRowId(k);this.updatePropertyById(l,R,"value",D[i].recordHashes[l],false,true,"",n);}}}else{if(!D[i]){this._updateProperty(k,"value",undefined);this.updateValueState(k,null,null,"Warning");}}}},this,a,E));return v;}};\nsap.extent.uilib.util.EditFormGenerator.prototype._removeCascadeChildren=function(m,f,M){var c=m.getProperty("/metadata/fields/"+f+"/cascadeChildren/fields");for(var a in c){this._removeField(M,a,m);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._validateCascadeChange=function(m,g,I,l,v,s){var a=this;var b=true;var t=a._oBundle.getText("ECT_INVALID_VALUE");var M=null;var f=m.slice(0,m.indexOf("_"+g));if(f&&s&&s.fieldGroups){var F=null;s.fieldGroups.some(function(e){if(e.id===f&&e.data.fields[I]){F=e;return true;}});if(F&&F.metadata&&F.data&&F.data.fields){var c=F.metadata;if(c.uniqueFieldId===I){var d=F.data.fields[I].value;d.forEach(function(e,h){if(h<(d.length-1)&&e.value===v){b=false;M=a._oBundle.getText("ECT_VALUE_ALREADY_EXISTS_FOR_FIELD",[v,l]);return true;}})}}}if(b&&this._oFormData&&this._oFormData.length>0){this._oFormData.some(function(e,h){if(e&&e.id==f){switch(f){case"PERSON_GLOBAL_INFO":if(e.countryCode==v){b=false;M=a._oBundle.getText("ECT_VALUE_ALREADY_EXISTS_FOR_FIELD",[v,l]);return true;}break;case"BIOGRAPHICAL_INFO_LOC":if(e.countryCode==v){b=false;M=a._oBundle.getText("ECT_VALUE_ALREADY_EXISTS_FOR_FIELD",[v,l]);return true;}break;}}});}if(!b&&M){sap.m.MessageBox.show(M,{icon:sap.m.MessageBox.Icon.ERROR,title:t});}return b;};\nsap.extent.uilib.util.EditFormGenerator.prototype._cascadeChangeListener=function(e){var s=e.getSource();var I=E.getFieldId(s);var m=E.getMeta(s);var M=E.getMainGroupId(s);var g=E.getGroupNumber(s);var c=m.cascadeChildren;var v=E.getInputValue(s);var o=s.getModel();if(m.elementId){if(this._oListener&&typeof this._oListener.getCascadeData==="function"&&v){var S=this._getEditFormData();var C=this.getCSFValues(M,m.contextualSearchFields||[]);var t=this;if(!this._validateCascadeChange(M,g,I,m.label,v,S)){s.setValue&&s.setValue(null);s.setSelectedItem&&s.setSelection(null);return;}if(this._cascadeChangeListenerTimeout){clearTimeout(this._cascadeChangeListenerTimeout)}this._cascadeChangeListenerTimeout=setTimeout(function(){var j=I,k=e.getParameter("customChangeSource"),U=false;if(window.isECDataQualityServiceAvailable&&k){j=k;U=true;}if(o&&o.getData()&&o.getData().data&&o.getData().data.technicalInfo&&o.getData().data.technicalInfo.length){var G=o.getData().data.technicalInfo[0].id;if(o.getData().data.technicalInfo[0].actionType=="Add"){G=null;}}var l=t._oListener.getCascadeData(m.elementId,j,v,C,m.dataSource,S,G);sap.extent.uilib.util.EditFormGeneratorHelper.disableComboBoxAutoCloseByPromise(s,l);if(!sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){if(!this.busyLoading){this.busyLoading=new sap.extent.uilib.util.BusyLoading();}this.busyLoading.show(l);}l.fail(function(n){E.handleBackendError(n);});l.done(jQuery.proxy(function(h){var n=true;var p=false;var q=false;if(h&&h.fieldGroups&&h.fieldGroups[0]&&h.fieldGroups[0].metadata){p=h.fieldGroups[0].metadata.requireAddressValidation;}else if(h&&h.sections&&h.sections[0]){p=h.sections[0].requireAddressValidation}s.getModel().setProperty("/metadata/requireAddressValidation",p);h&&h.fieldGroups&&h.fieldGroups.some(function(x,y){if(x.metadata&&x.metadata.fields){for(var z in x.metadata.fields){if(x.metadata.fields.hasOwnProperty(z)&&!(x.metadata.fields[z].id.indexOf("-uuid")>-1||x.metadata.fields[z].id.indexOf("record-hash")>-1)){n=false;return true;}else if(x.metadata.fields.hasOwnProperty(z)&&(x.metadata.fields[z].id.indexOf("-uuid")>-1||x.metadata.fields[z].id.indexOf("record-hash")>-1)){q=true;}}}});if(!n){var L=h.editLayoutConfigurations&&h.editLayoutConfigurations.editableFieldConfig;t._removeCascadeChildren(s.getModel(),I,M);t._updateCascadeChildren(h,s,L);t._updateCascadePicklistStatus();}else if(n&&!U){t._removeCascadeChildren(s.getModel(),I,M);if(q){t._updateCascadeChildren(h,s);}var w="EMPFILE_HRIS_NO_DATA_FOR_THIS_COUNTRY";if(t._oForm&&t._oForm.isFromDetailsDialog){w="EMPFILE_HRIS_NO_DEPENDENT_DATA_FOR_THIS_COUNTRY";}setTimeout(function(){sap.m.MessageBox.error(t._oBundle.getText(w),{icon:sap.m.MessageBox.Icon.ERROR,initialFocus:sap.m.MessageBox.Action.OK,onClose:(function(A){s.focus();}).bind(t)});},0);}return h;},this));l.then(jQuery.proxy(function(h){if(h&&h.actionResult&&h.actionResult.status==="failure"){E.displayBackendResponse(h.actionResult,null,t);t._resetLegalEntityToPrevious(o,m,s);}else{t._executeRules(m,s);}},this));},250);}}else{var a=null;if(m.cacheCascade){var b=-1;for(var i=0;i<m.cacheCascade.length;i++){for(var f in m.cacheCascade[i].fields){a=m.cacheCascade[i].fields[f];if(a.cascadeParentValue===v){b=i;}break;}if(b>-1){break;}}a=null;if(b>-1){a=m.cacheCascade[b];for(var f in a.fields){var F=this._getFromFields(M,f);if(F){F=F.field;if(F instanceof sap.ui.layout.VerticalLayout){F=F.getContent().length===3?F.getContent()[1]:F.getContent()[0];}if(F instanceof sap.m.ComboBox){var B=F.getBinding("items");if(B){F.getModel().setProperty(B.getPath(),a.fields[f].selectOptions,B.getContext());var d=F.getModel().getData();d.metadata.fields[f]["selectOptions"]=a.fields[f].selectOptions;}F.setSelectedKey("");}delete c.fields[f];}}}}if(c){var u=false;for(var f in m.cascadeChildren.fields){this._removeField(M,f,o);var d=s.getModel().getData();delete d.data.fields[f];delete d.metadata.fields[f];u=true;}if(u){s.getModel().updateBindings(true);}}if(!a||jQuery.isEmptyObject(a.fields)||jQuery.isEmptyObject(c.fields)){return;}var h={fieldGroups:[{metadata:a,data:{fields:{}}}]};for(var f in a.fields){h.fieldGroups[0].data.fields[f]={value:[""]};}this._updateCascadeChildren(h,s);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._resetLegalEntityToPrevious=function(m,M,I){if(!m||!M||!I)return;if(M.id==="jobInfo-company"){var d=m.getData();if(d.data&&d.data.fields&&d.data.fields["jobInfo-company"]){this._resetFieldValueToPrevious(m,"jobInfo-company",I);this._resetDependentToPrevious(m,M);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._resetDependentToPrevious=function(m,M){if(E.hasDependentFields(M)){for(var i=0,l=M.searchOptions.dependentFields.length;i<l;i++){var f=M.searchOptions.dependentFields[i];var I=this.getInputsById(f);if(I&&I.length>0){for(var j=0,a=I.length;j<a;j++){this._resetFieldValueToPrevious(m,f,I[j]);}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._resetFieldValueToPrevious=function(m,f,I){var o=m.getData().data.fields[f].oldValue;if(o&&o.length>0){var p=o[0];if(!p){p={id:"",value:"",primaryDisplayText:""};}p.id=p.id+"";if(!p.value)p.value=p.id;var b=I.getBinding("selectedKey");if(b){b.getBindings()[0].setValue(p);m.updateBindings(true);}this._resetLastValue(I,p.id);I.setValueState(sap.ui.core.ValueState.None);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateCascadeChildren=function(c,s,l){var f=sap.extent.uilib.util.EditFormGeneratorHelper.getFieldId(s);var R=this._getRowIndexByInput(s);if(this._handleNoCascadeChildren(c)){this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,{input:s,rowId:R,fieldId:f,noCascadeChildren:true});return;}var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(s);var M=sap.extent.uilib.util.EditFormGeneratorHelper.getMainGroupId(s);var g=sap.extent.uilib.util.EditFormGeneratorHelper.getGroupNumber(s);var C=c.fieldGroups[0];var o=C.metadata||{};var a=C.data||{};m.cascadeChildren=o;var b=s.getModel();if(b&&b.getData()){var d=b.getData();sap.extent.uilib.util.EditFormGeneratorHelper.copyMetaAndData(c,d.metadata,d.data,false);if(d.data.technicalInfo&&d.data.technicalInfo[0]){var e=c.fieldGroups[0].data;d.data.technicalInfo[0].hideCountryFlag=e&&e.technicalInfo&&e.technicalInfo[0].hideCountryFlag;}this._sMainGroupUi5Id=M;var u=false;var L=false;var h=C.id;if(!h){u=true;}else{h=h.replace(/\\_/ig,"").toLowerCase();}if(l&&l.length){for(var j=0;j<l.length;j++){var k=l[j].id.toLowerCase();if(k.indexOf("globalinfo")!==-1){k="personglobalinfo";}if(h===k){L=true;var I=[];var G;switch(k){case"homeaddress":var n=l[j].group.addressCSFItems;if(n&&n[0]){G={};G.group=n[0];}else{G=l[j];}break;default:G=l[j];break;}if(G&&c.fieldGroups){c.fieldGroups[0].editLayoutConfigurations=G;this._initLayoutData(c.fieldGroups);var I=c.fieldGroups[0].layout.items;this._resetLayoutConfig(I);for(var p=I.length-1;p>=0;p--){var q=I[p];this._buildGroup(q,null,o,a,null,true,s,g,M);}this._removeDetailsButton(s);}else{u=true;}break;}}}else{u=true;}u=!L?true:u;if(u){var D=sap.extent.uilib.util.EditFormGeneratorHelper.buildFormLayout(o);this._buildGroup(D,null,o,a,null,true,s,g,M);this._removeDetailsButton(s);}if(C.alternateSections){d.alternateSections=C.alternateSections;this._updateAlternateSections(C.alternateSections,d.metadata,d,M,s,g,l);}}if(c.fieldGroups.length>1){var t=-1;for(var v=0,w=this._aPanels.length;v<w;v++){var d=this._aPanels[v].getContent()[0].getModel().getData();if(d.id===C.id){t=v;break;}}if(t>-1){for(var v=this._aPanels.length-1;v>t;v--){this.deletePanel(this._aPanels[v].getContent()[0],false);this._aPanels.splice(v,1);}if(l){for(var v=1,w=c.fieldGroups.length;v<w;v++){var F=c.fieldGroups[v];sap.extent.uilib.util.EditLayoutService.matchLayoutToFieldGroup(F,l);}this._initLayoutData(c.fieldGroups);}for(var v=1,w=c.fieldGroups.length;v<w;v++){var F=c.fieldGroups[v];var x=this._buildFieldGroup(F,0,false,false);this._aPanels.push(x);if(this._listenerImplementsFunction("addPanel")){this._oListener.addPanel(x);}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._removeDetailsButton=function(s){var p=s.getParent().getParent().getParent();var P=p.getContent();var l=P.length;for(var a=0;a<l;a++){var c=P[a];if(c.sId.indexOf("detailsBtn_")!==-1){c.getParent().removeContent(c);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleNoCascadeChildren=function(c){if(!c||!c.fieldGroups.length){return true;}else if(c.status==="failure"){E.displayBackendResponse(c);return true;}};\nsap.extent.uilib.util.EditFormGenerator.prototype._resetLayoutConfig=function(I){for(var a=0,l=I.length;a<l;a++){var e=I[a].details;if(e&&e.items&&e.renderStyle==="flow"){this._iMaxGroupSize=Math.max(this._iMaxGroupSize,e.items.length);}}this._setMaxGroupSize();};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateAlternateSections=function(a,m,d,M,s,g,l){var o=s.getModel();if(m.alternateSections){var f=m.alternateSections.fieldGroups;for(var i=0;i<f.length;i++){var A=f[i].fields;for(var b in A){this._removeField(M,b,o);}}var c=m.alternateSections.fieldGroups.length;for(var i=0;i<c;i++){m.alternateSections.fieldGroups[i]=a.fieldGroups[i].metadata;}}var e=m.alternateSections&&m.alternateSections.fieldGroups||[];var p=s.getParent().getParent().getParent();var P=p.getContent();E.copyMetaAndData(a,m,d.data,true);if(!l.length){l=l.concat(sap.extent.uilib.util.EditFormGeneratorHelper.buildAlternateSectionsLayoutGroups(a,d.editLayoutConfigurations&&d.editLayoutConfigurations.elementId));}for(var h=0;h<l.length;h++){var L=l[h];if(L.id.indexOf("alternateFields")!==-1){var I=L.group.items;for(var j=0;j<I.length;j++){var k=I[j];for(var n=0;n<e.length;n++){var F=d.alternateSections.fieldGroups[n].data;var q=P[n+1];this._buildGroup(k,null,e[n],F,q,null,s,g,M);}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.removeAltLangFieldsData=function(I){var p=I.getParent().getParent().getParent();var P=p.getContent();for(var a=1,l=P.length;a<l;a++){var A=P[a];if(typeof A.getContent==="function"){var c=A.getContent();for(var i=0;i<c.length;i++){if(c[i]instanceof sap.ui.layout.Grid){var g=c[i].getContent();for(var j=0;j<g.length;j++){var I=E.getInputFromFieldLayout(g[j]);if(I&&I instanceof sap.m.InputBase){I.setValue("");var b=I.getBinding("value");if(b){b.setValue("");}}}}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._standardChangeListener=function(e){var m=e.getSource().getModel();this._changeListener(e,"value");if(m.getProperty("/metadata/requireAddressValidation")){m.setProperty("/metadata/isFormDirty",this.isFormDirty());}};\nsap.extent.uilib.util.EditFormGenerator.prototype._isUniqueComboValue=function(I,v){var m=0;for(var i=0;i<I.length;i++){if(E.getInputValue(I[i])==v){m++;}}return m>1;};\nsap.extent.uilib.util.EditFormGenerator.prototype._propagationHandler=function(p,a,R){R=(R===-1)?0:R;var P=E.getMeta(p);var m=p.getModel().getData().metadata;var I=m&&m.type==="DATAGRID";var M=I&&E.getMainGroupId(p);var s=P.searchOptions&&P.searchOptions.searchType;var b=function(c){if(typeof(v)==="string"&&isNaN(c)){try{JSON.parse(c);}catch(e){return false;}return true;}return false;};for(var i=0;i<a.length;i++){var f=a[i].id;var v=a[i].value;var o=null;if(I&&M){o=(this._oFields[M][f]&&E.getInputsFromLayout(this._oFields[M][f].field,[])[0])||null;}else{o=this.getInputById(f,R);}if(o&&typeof(v)!="undefined"){if(b(v)){v=JSON.parse(v).value;}v=this._getPropagationPrecedenceValue(f,s,v)||v;this._updateProperty(o,"value",v,true);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getPropagationPrecedenceValue=function(f,s,v){var a=this._oForm.propagationPreferences&&this._oForm.propagationPreferences[f];if(a){for(var b=0,l=a.length;b<l;b++){if(a[b].sourceType==s){a[b].propagatedValue=v;break;}}for(var c=0,d=a.length;c<d;c++){var e=a[c].propagatedValue;if(!E.isEmpty(e)){return e;}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._liveChangeListener=function(e){var I=e.getSource();var f=E.getFieldId(I);this._maxLengthValidation(I);if(I._lastValue){I.sfLastValue=I._lastValue;}this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.LIVE_FIELDCHANGE_EVENT_ID,{fieldId:f,input:I});if(I.getValueState&&I.getValueState()==sap.ui.core.ValueState.Error){I.sfLastValue="";}};\nsap.extent.uilib.util.EditFormGenerator.prototype._maxLengthValidation=function(I){var m=false;var M=I&&typeof I.getMaxLength=="function"&&I.getMaxLength();if(!M||(M<=0)){return;}var s=I.getValue()&&I.getValue().length;if(s>=M){m=true;var o=E.getMeta(I);I.setValueState(sap.ui.core.ValueState.Warning);I.setValueStateText(this._oBundle.getText("EMPFILE_HRIS_WARNING_REACHED_MAX_LENGTH",[o.label,M]));E._setCustomData(I,E.MAX_LENGTH_REACHED,true);}if(!m){E._setCustomData(I,E.MAX_LENGTH_REACHED,false);I.setValueState(sap.ui.core.ValueState.None);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._requiredFieldListener=function(e){var I=e.getSource();this._validateRequiredField(I);};\nsap.extent.uilib.util.EditFormGenerator.prototype._standardDateValidValueListener=function(e){var c=e.getSource();var I=E.getMeta(c);if(c&&e.getParameter("valid")===false){c.setValueState(sap.ui.core.ValueState.Error);c.setValueStateText(E.getValidationErrorMessageForBasicTypes(c,I));E.addCustomDataForComponent(c,"invalidDateValue",true)}else if(c.getValueStateText()!=this._oBundle.getText("COMMON_ERR_DATA_REQUIRED",[I.label])){c.setValueState(sap.ui.core.ValueState.None);c.setValueStateText("");E.addCustomDataForComponent(c,"invalidDateValue",false)}};\nsap.extent.uilib.util.EditFormGenerator.prototype._workScheduleGetValueByFieldIdListener=function(e){var v="";var f=e.getParameter("fieldId");var p=e.getParameter("propertyName");if(f=="effective-date"){v=this._getEffectiveDate();}else if(f=="userId"){if(this._listenerImplementsFunction("getActionType")&&this._oListener.getActionType()=="NEW_HIRE"){v=null;}else{v=sap.ui.getCore().getModel("user").getProperty("/userId");}}else{v=sap.extent.uilib.util.EditFormGeneratorHelper.getInputValue(this.getInputById(f));}e.getSource().setProperty(p,v);};\nsap.extent.uilib.util.EditFormGenerator.prototype._workScheduleFinderAssignmentListener=function(e){var w=e.getParameter("workSchedule");var v={code:w.getExternalCode(),id:w.getInternalId(),name:w.getExternalName(),primaryDisplayText:e.getParameter("displayText")};var I=e.getSource();this.updateProperty(I,"value",v);I.fireSelectionChange();};\nsap.extent.uilib.util.EditFormGenerator.prototype._validateRequiredField=function(I){if(!I){return}var o=E.getMeta(I);if(!o.required){return;}if(I.getValueState&&I.getValueState()===sap.ui.core.ValueState.Error&&I.getValueStateText()!=this._oBundle.getText("COMMON_ERR_DATA_REQUIRED",[o.label])){return;}if(E.isInputEmpty(I)){if(o._parentMeta=="EDUMULTIPLERELATION"){var t=o.oTokenizerRef;if(t&&t.getTokens().length>0){return;}}I.setValueState&&I.setValueState(sap.ui.core.ValueState.Error);I.setValueStateText&&I.setValueStateText(this._oBundle.getText("COMMON_ERR_DATA_REQUIRED",[o.label]));I.fireValidationError({bFieldEmpty:true});if(I.getModel()&&I.getModel().getData()){var f=I.getModel().getData();if(f.alternateSections){for(var j=0;j<f.alternateSections.fieldGroups.length;j++){var m=f.alternateSections.fieldGroups[j].metadata;if(m.fields.hasOwnProperty(o.id)&&m.label){var l=[f.metadata.label,m.label,o.label];I.setValueStateText(this._oBundle.getText("COMMON_ERR_DATA_REQUIRED",l.join(" - ")));}}}}}else{I.setValueState&&I.setValueState(sap.ui.core.ValueState.None);I.setValueStateText&&I.setValueStateText("");I.fireValidationError({bFieldEmpty:false});}};\nsap.extent.uilib.util.EditFormGenerator.prototype._returnValue=function(v){if(typeof v=="object"){return v.value;}else if(typeof v=="string"){return v;}return"";};\nsap.extent.uilib.util.EditFormGenerator.prototype._setPrimaryFieldsValueStates=function(I,a){for(var i=0;i<I.length;i++){I[i].setValueState(a?"Error":"None");I[i].setValueStateText(a?this._oBundle.getText("ECT_PP3_ERROR_SINGLE_PRIMARY_NATIONALID_CARD_TYPE"):"");}};\nsap.extent.uilib.util.EditFormGenerator.prototype._clearErrorState=function(e){var I=e.getSource();if(I.getValueState&&I.getValueState()==sap.ui.core.ValueState.Error){I.setValueState(sap.ui.core.ValueState.None);I.setValueStateText("");}};\nsap.extent.uilib.util.EditFormGenerator.prototype._cascadeChildHandler=function(v,f,R,s,m,o){if(this._oCascadePicklistInfo.hasOwnProperty(f)){R=(R&&R>-1)?R:0;var c=this._oCascadePicklistInfo[f];var a=o&&o.fieldGroups||[];for(var i=0;i<c.length;i++){var C=c[i];var b=this.getInputById(C,R,undefined,m);if(b&&E.getMeta(b).parentFieldId!==f){continue;}if(b){b.setEnabled(!!v);}if(s){var d=false;for(var j=0;j<a.length;j++){var e=a[j].data&&a[j].data.fields||{};if(e[C]){d=true;break;}}if(!d){this._updateProperty(b,"value","",true);}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._changeListener=function(e,p){if(e&&!e.sSkipPreChangeListener&&this._listenerImplementsFunction("handlePreChangeListener")&&this._oListener.handlePreChangeListener(e,p,this)){return;}var I=e.getSource();if(!I){return;}this._sMainGroupUi5Id=E.getMainGroupId(I);if(this._oFields[this._sMainGroupUi5Id]){this._oFields[this._sMainGroupUi5Id].bInputChangedByUser=true;}var m=E.getMeta(I);var M=I.getModel();if(!M){return;}var R=this._getRowIndexByInput(I);var l;var u=e.getParameters().hasOwnProperty("userChange")?e.getParameter("userChange"):true;this._setRowUpdate(I);if(I.hasOwnProperty("sfLastValue")){l=I.sfLastValue;}else if(I instanceof sap.m.ComboBox&&I._lastValue){l=I.getItemByText(I._lastValue);l=l?l.getKey():"";}if(I.getValueState&&I.getValueState()==sap.ui.core.ValueState.Error){I.sfLastValue=l;return;}if(I.setValueState&&I.setValueStateText){I.setValueState(sap.ui.core.ValueState.None);I.setValueStateText("");}var b=I.getBindingContext();var B=I.getBinding(p);var f=E.getFieldId(I);sap.extent.uilib.EditPage._sSetInputFieldForFocusAfterRendering=f;sap.extent.uilib.EditPage._sGroupIdForFocusAfterRendering=E.getMainGroupId(I);var a=I.getModel().getProperty("/metadata")._sPanelIdInLayout;var c=E.getMainGroupId(I);M.setProperty("/metadata/fields/"+f+"/_isFieldEdited",true);var v=E.getInputValue(I);I.sfLastValue=v;var o;var P;var A=false;var d=-1;var F=false;if(m._parentMeta&&m._parentMeta=="MULTIPLERELATION"){var g;if(b){g=b.getPath().split("/");}else{g=B.getBindings()[0].getPath().split("/");}var f=g[3];var R=parseInt(g[6]);var D=M.getData();if(D){if(D.data&&D.data.fields&&D.data.fields[f]&&D.data.fields[f].value[0]){var C=D.data.fields[f].value[0];var h=C[R];var s=false;for(var i=0;i<C.length;i++){if(i!=R){s=E._compareValueField(E.setValue(v,m),C[i].value,m.type);if(s&&C[i].actionType!="Delete"){A=!s;break;}else if(s&&C[i].actionType=="Delete"){h.actionType="";d=i;break;}}}if(s&&d==-1){F=true;v=E.getValue(h.value,m);}else if(!s&&d>-1){h=jQuery.extend(true,{},h);h.actionType="Delete";D.data.fields[f].value[0].push(h);}}}}if(u&&B){this.updateLastModifiedDetails(M.getId(),b?this._getIndexFromBindingContext(b):0);if(I instanceof sap.sf.surj.shell.controls.SearchInput){var S=null;if(I._getSuggestionsTable().getSelectedItem()){S=I._getSuggestionsTable().getSelectedItem().__oResultItem;}var V=E.setValue(S,m);var j=B.getBindings()[0].getValue();if(m.sendDeleted&&j){j=j.hasOwnProperty("deleted")?j.deleted:j.id;V=V||{};V.deleted=j;}if(S&&V!=null){var t=S.name;var k=!!S.employments?S.employments[0]:null;if(k!=null){t+=k.title!=""?(this._oBundle.getText("ECT_NO_DATA")!==k.title?", "+k.title:""):"";t+=k.locationName!=""?(this._oBundle.getText("ECT_NO_DATA")!==k.locationName?", "+k.locationName:""):"";}if(this._oBundle.getText("COMMON_NO_SELECTION")===t){V.primaryDisplayText="";}else{V.primaryDisplayText=t;}if(V.hasEmploymentDifferentiatorText){V.primaryDisplayText=([V.name,V.employments[0].employmentDifferentiatorText]).join(", ");}if(m._parentMeta&&m._parentMeta=="EDUMULTIPLERELATION"){V.displayValue=V.primaryDisplayText;}}if(V||!e.getParameter("value")){B.getBindings()[0].setValue(V);}else{V=B.getBindings()[0].getValue();if(V&&V.hasOwnProperty("primaryDisplayText")){V.primaryDisplayText=e.getParameter("value");}else{V={primaryDisplayText:e.getParameter("value")};}B.getBindings()[0].setValue(V);}if(S&&m._parentMeta&&m._parentMeta=="EDUMULTIPLERELATION"){G();}B.getBindings()[0].refresh(true);}else if(I instanceof sap.m.ComboBoxBase){var S=I.getItemByKey(v+"");var V=E.setValue(v,m);if(I instanceof sap.extent.uilib.SearchableComboBox){var j=B.getBindings()[0].getValue();if(m.sendDeleted&&j){j=j.hasOwnProperty("deleted")?j.deleted:j.id;V=V||{};V.deleted=j;}if(S&&V!=null){var t=S.getTitle();if(this._oBundle.getText("COMMON_NO_SELECTION")===t){V.primaryDisplayText="";}else{V.primaryDisplayText=t;}if(m._parentMeta&&m._parentMeta=="EDUMULTIPLERELATION"){V.displayValue=V.primaryDisplayText;}}else if(e.sSkipPreChangeListener&&I&&I.getValue()){V.primaryDisplayText=I.getValue();}B.getBindings()[0].setValue(V);if(S&&m._parentMeta&&m._parentMeta=="EDUMULTIPLERELATION"){G();}}else if(I instanceof sap.extent.uilib.ComboBox){if(S&&V!=null){V.primaryDisplayText=S.getText();}B.setValue(V);}if(F){M.updateBindings(true);}}else if(I instanceof sap.m.UploadCollection){}else if(I instanceof sap.m.TimePicker){if(B.getBindings){B.getBindings()[0].setValue(v);B.setValue([E.setValue(v,m),m.hideSeconds]);}}else{if(B.getBindings){B.getBindings()[0].setValue(E.setValue(v,m));}else{B.setValue(E.setValue(v,m));}}B.refresh();}if(M.getProperty("/metadata/fields/"+f+"/implementCustomChangeListenerLogicFirst")){this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,{fieldId:f,input:I,fnExecuteRulesCallBack:jQuery.proxy(this._executeRules,this)});return;}if(A&&m._parentMeta&&m._parentMeta=="MULTIPLERELATION"){if(b){M.setProperty(b.getPath()+"/actionType","Add");}else{var g=B.getBindings()[0].getPath().split("/");g.splice(g.length-1,1);M.setProperty(g.join("/")+"/actionType","Add");}}if(d>-1){var g;if(b){g=b.getPath().split("/");}else{g=B.getBindings()[0].getPath().split("/");}var f=g[3];var R=parseInt(g[6]);var D=M.getData();if(D){D.data.fields[f].value[0].splice(d,1);M.updateBindings(true);}}if(I instanceof sap.extent.uilib.SearchableComboBox){o=I.getItemByKey(v);if(o){P=o.getPropagation();}}if(P){if(m.rule&&m.rule.onChange){var n=this._oCollectedRulesPropagation;jQuery.each(P,function(H,J){var K=J&&J.id;var L=M.getProperty("/metadata/fields/"+K);if(L&&L.submitOnFieldChange&&n[K]){jQuery.each(m.rule.onChange,function(N,J){n[K].push(J)});}else if(L&&L.submitOnFieldChange){n[K]=m.rule&&m.rule.onChange;}});}this._propagationHandler(I,P,R);}if(I instanceof sap.m.RadioButtonGroup){B.setValue(E.setValue(v,m));}if(!E.hasRules(m)){this._cascadeChildHandler(v,f,R,true,c);}var q=[];var w=this;if(E.hasDependentFields(m)){q=this._dependentFieldsListener(I,m.searchOptions.dependentFields,M,b,R);}if(this.getBlockId()==sap.extent.uilib.util.EditFormGenerator.BLOCK_ID_COMPENSATION_INFORMATION){jQuery.when.apply(jQuery,q).done(function(){if(E.hasRules(m)){w._executeRules(m,I,l,a);}else if(y()){w._submitFieldOnChange(f,m,R);}});}else{if(y()){jQuery.when.apply(jQuery,q).done(function(){x();});}else if(m.type!=="CASCADE"||(m.type==="CASCADE"&&!m.elementId)){if(!(m.id=="nationalIdCard-national-id"&&e.getId()=="change"&&e.getParameters().value&&e.getParameters().value.length!==(m.placeholder&&m.placeholder.length))){jQuery.when.apply(jQuery,q).done(function(){w._executeRules(m,I,l,a);});}}}function x(){var H=w._submitFieldOnChange(f,m);if(H){H.then(function(J){if(J.actionResult&&J.actionResult.status==="failure"){w._resetLegalEntityToPrevious(M,m,I);}else{w._executeRules(m,I,l,a);}});}else{w._executeRules(m,I,l,a);}}function y(){return(E.hasSubmitOnFieldChange(m)&&E.rowSubmitOnFieldChangeFieldsNotEmpty(w._oForm.rowSubmitOnFieldChangeFieldsNotEmpty,w._oFields,c,R));}if(!E.hasRules(m)&&E.hasRequestPropagationValues(m)&&(!P||P.length===0)){var z=this._oSCBHelper._getFoundationSearchOptions(I,m,1);this.requestPropagationValues(z,v,m.searchOptions.propagateFieldsOnRequest,m.dataSource,R);}function G(){var D=M.getData();D.metadata.fields[f]._isFieldEdited=true;var H=I.getBindingInfo(p).parts[0].path;M.setProperty(H+"/actionType","Add");var J=parseInt(H.substring(H.length-1))+1;var K=I.getBindingInfo(p).parts;K.splice(0,1,H.substring(0,H.length-1)+J);var L={parts:K,formatter:function(N,m){return E.getValue(N,m);}};I.bindProperty(p,L);}this.fireFieldChangeEventId(f,R,I,false);if(M&&M.getData().hasOwnProperty("id")&&M.getData().id=="HOME_ADDRESS"){setTimeout(resizeFieldInTheDialog,0)}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getInputPathConfig=function(p,e,s,I,m,P,M){return{path:p,editablePath:e,enabledPath:s,itemsPath:I,maxLength:m,placeholder:P,metadata:M};};\nsap.extent.uilib.util.EditFormGenerator.prototype._executeRules=function(m,I,l,p){if(E.hasRules(m)){this._handleRuleChange(I,l,m,p);}else{if(m.hasOwnProperty("onChangeRule")||(m.onChange&&m.onChange.uiRules)){this._handleUIRuleChange(I,p);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildInput=function(f,I,o,g,m,w,R){var a=E.buildInput(f,I,o,g,m,w||this._sInputWidth,jQuery.proxy(this._addListenersToInput,this),R);return a;};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleFieldWithContext=function(I){var p=I.getContent()[0];var q=I.getContent()[1];var f=E.getFieldId(p);var R=this._getRowIndexByInput(p);R=(R===-1)?0:R;var c="/data/fields/"+f+"/contextData/"+R;if(q){q.attachPress(function(e){var m=E.getMeta(p);if(e.getSource().getIcon()=="sap-icon://world"){var C=p.getModel().getProperty(c);if(!C){var o=[{fields:{},technicalInfo:[]}];p.getModel().setProperty("/data/fields/"+f+"/contextData",o);C=p.getModel().getProperty(c);}if(this._listenerImplementsFunction("addFormData")){var a={fieldGroups:[{data:C,metadata:m.contextMeta}]};if(m.writable==false){var b=m.contextMeta&&m.contextMeta.fields;if(b){for(var k in b){b[k].writable=m.writable;}}}if(this._oForm.mdfCore){a.mdfCore=this._oForm.mdfCore;}this._oListener.addFormData(a,true);}if(this._listenerImplementsFunction("attachEventOnce")){this._oListener.attachEventOnce("donePress",null,function(e){var F=e.getParameter("data");p.getModel().setProperty(c,F.fieldGroups[0].data);},this);}}else if(e.getSource().getIcon()=="sap-icon://org-chart"){if(this._listenerImplementsFunction("openOrgChart")){var v=E.getInputValue(p);this._oListener.openOrgChart(v);}return;}else if(e.getSource().getIcon()=="sap-icon://documents"){var d=p.getModel().getProperty("/metadata/fields/"+f+"/defaultScreenForQuickCard");this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.QUICKCARDPRESS_EVENT_ID,{fieldId:f,input:p,controllerName:"genericObjectController",searchType:m.searchOptions.searchType,value:E.getInputValue(p),defaultScreenId:d,btnId:e.mParameters.id});}else{var d=p.getModel().getProperty("/metadata/fields/"+f+"/defaultScreenForQuickCard");var Q=null;if(d&&this._listenerImplementsFunction("getMeta")){Q=this._oListener.getMeta(d);}else if(this._listenerImplementsFunction("getMetadataForAction")){Q=this._oListener.getMetadataForAction("genericObjectController",m.searchOptions.searchType,{operation:"CREATE"});}Q.fail(function(g){E.handleBackendError(g);});Q.done(jQuery.proxy(function(D){if(this._listenerImplementsFunction("addFormData")){this._oListener.addFormData(D);}},this));}},this);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._addListenersToInput=function(I,f,o,a,g,m,w,R){if(I.attachSelectionChange){I.attachSelectionChange(this._clearErrorState,this);}if(I.attachChange){I.attachChange(this._requiredFieldListener,this);}if(I.attachSelectionChange){I.attachSelectionChange(this._requiredFieldListener,this);}var p=false;var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(o);switch(t){case"MULTIPLERELATION":case"ECTFIELDWITHCUSTOMCONTEXT":case"FIELD_WITH_CONTEXT":case"LOCALIZED":this._handleFieldWithContext(I);return I;case"USER":if(o.searchOptions&&o.searchOptions.defaultSearchValues){p=o.searchOptions.defaultSearchValues.isGACEEnabled==="YES";}if(t==="USER"&&p){I.attachSuggest(function(j){var k=j.getSource().getSettings();k.additionalCriteria.employmentEffectiveFrom=k.additionalCriteria.employmentEffectiveTo=this._getEffectiveDate();},this);I.attachItemSelected(function(j){this._clearErrorState(j);this._changeListener(j,"value");},this);I.attachChange(function(j){this._changeListener(j,"value");},this);}case"HRIS_FINDUSER":if(o.searchOptions&&o.searchOptions.defaultSearchValues){p=o.searchOptions.defaultSearchValues.isGACEEnabled==="YES";}if(t==="HRIS_FINDUSER"&&p){I.attachItemSelected(function(j){this._clearErrorState(j);this._changeListener(j,"value");},this);I.attachChange(function(j){j.getSource().setValue("");this._changeListener(j,"value");},this);}case"FOUNDATION_AUTOCOMPLETE":case"WORKSCHEDULECOMBOBOX":case"PICKLISTAUTOCOMPLETE":case"CASCADE":case"SELECT":case"USER":case"HRIS_FINDUSER":case"USERINFOMETADATAOPTIONS":if(!p){if(!o.hasOwnProperty("selectOptions")){this._oSCBHelper.listen(I);if(t==="FOUNDATION_AUTOCOMPLETE"||t==="WORKSCHEDULECOMBOBOX"){var b=I.getBindingInfo("value");b.formatter=jQuery.proxy(function(v){if(v){if(typeof v==="string"||typeof v==="number"){if(t==="FOUNDATION_AUTOCOMPLETE"||t==="WORKSCHEDULECOMBOBOX"){var C=o.dataSource;var u=sap.ui.getCore().getModel("user").getProperty("/userId");var S={};var P=this.searchByInternalCode(S,v,C,u);P.done(jQuery.proxy(function(V){if(V&&V.primaryDisplayText){I.setValue(V.primaryDisplayText);}},this));}return String(v);}return E.searchableComboBoxValueFormatter(v);}return undefined;},this);I.bindProperty("value",b);if(t==="WORKSCHEDULECOMBOBOX"){I.attachGetValueByFieldId(jQuery.proxy(this._workScheduleGetValueByFieldIdListener,this));I.attachWorkScheduleFinderAssignment(jQuery.proxy(this._workScheduleFinderAssignmentListener,this));}}}I.attachSelectionChange(function(j){var F=j.getSource();var k=F.getItemByText(F._lastValue);F.sfLastValue=k?k.getKey():"";if(this._comboChangeTimer){clearTimeout(this._comboChangeTimer);delete this._comboChangeTimer;}var e=this;var n={};jQuery.extend(true,n,j);this._comboChangeTimer=setTimeout(function(){if(n.getSource().getSelectedKey()!=="-1"){e._changeListener(n,"selectedKey");if(o.type==="CASCADE"){e._cascadeChangeListener(n,"selectedKey");}}},500);},this);}if(o.parentFieldId){if(this._oCascadePicklistInfo[o.parentFieldId]){var c=this._oCascadePicklistInfo[o.parentFieldId];if(c.indexOf(f)===-1){c.push(f);}}else{this._oCascadePicklistInfo[o.parentFieldId]=[f];}}if(o.oTokenizerRef){o.oTokenizerRef.attachTokenChange({parent:I},function(j,D){var P=D.parent;this._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FIELDCHANGE_EVENT_ID,{fieldId:sap.extent.uilib.util.EditFormGeneratorHelper.getFieldId(P),rowId:this._getRowIndexByInput(P),input:P});},this);}break;case"DATE":I.attachChange(this._standardDateValidValueListener,this);I.attachChange(this._standardChangeListener,this);break;case"DOUBLE":case"DECIMAL":case"LONG":case"NUMBER":case"ECTCALCFIELD":case"ECTAMOUNTPERCENTFIELD":I.attachChange(this._standardChangeListener,this);break;case"ATTACHMENT":var _=I;var d={onAfterRendering:jQuery.proxy(function(){this._setUploadUrl(_,o,o.recordHash,o.uuid,o.attachRowId);_.removeEventDelegate(d);},this)};I.addEventDelegate(d);I.attachUploadComplete(this._uploadComplete,this);I.attachFileDeleted(this._fileDeleted,this);I.attachChange(this.onAttachmentChangeSetUploadUrl,this);break;case"ECTSIMPLELINKFIELD":I.attachPress(function(j){var L=j.getSource();var M=E.getMeta(L);var A=L.getModel()?L.getModel().getProperty(M["_sap.extent.uilib.util.EditFormGenerator.ActionDataPath"]):null;var k=this._getRowIndexByInput(L);R=(R===-1)?0:R;if(A&&A.hasOwnProperty("tokens")){var n=sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(L,"originalHref");if(!n){n=L.getHref()||"";L.addCustomData(new sap.ui.core.CustomData({key:"originalHref",value:n}));}for(var T in A.tokens){var q=A.tokens[T];var I=this.getInputsById(q);if(I){if(jQuery.isArray(I)){I=I[k]}var u=E.getInputValue(I);n=n.replace(T,u);}}L.setHref(n);if(L.getTarget()=="_self"){L.getDomRef().href=n;window.location.href=n;}else{window.open(n,L.getTarget());j.preventDefault();}}},this);break;case"BOOLEAN":I.attachChange(function(j){this._changeListener(j,"stateAsString");},this);break;case"CHECKBOX":I.attachSelect(function(j){this._changeListener(j,"selected");},this);break;case"PAY_COMPONENT_PIRCHART":break;case"RADIO_BUTTON_GROUP":I.attachSelect(function(j){this._changeListener(j,"selectedIndex");},this);break;case"TEXT":break;case"TIMEBUTTON":break;case"STRING":default:I.attachChange(this._standardChangeListener,this);break;}I.attachLiveChange&&I.attachLiveChange(this._liveChangeListener,this);if(o.hasOwnProperty("drivenById")&&o.drivenById!==undefined){o[sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY]=false;}var l=this._getLabel(f,m);if(l&&typeof I.addAriaLabelledBy==="function"){var e=this;var h={onAfterRendering:function(){var l=this._getLabel(f,m);var j=I.getAriaLabelledBy().length==1&&l.getId()===I.getAriaLabelledBy()[0];if(!j){if(l&&l instanceof sap.m.Label){l.setLabelFor(I);}I.addAriaLabelledBy(l);}var k=I.getBindingContext()?e._getLabel(I.getModel().getProperty(I.getBindingContext().sPath).id,m):null;if(k&&I.getAriaLabelledBy().length==1&&k.sId!=I.getAriaLabelledBy()[0]){I.removeAllAriaLabelledBy();I.addAriaLabelledBy(k);}I.removeEventDelegate(h);}};I.addEventDelegate(h,this);}function s(j){var C=j.getParameter("element");if(C){if(C.setValueState){C.setValueState(sap.ui.core.ValueState.Error);}var k=E.getValidationErrorMessageForBasicTypes(C,o);if(k){C.setValueStateText(k);}}}I.attachValidationError(s);I.attachParseError(s);I.attachValidationSuccess(function(j){var C=j.getParameter("element");if(C&&C.setValueState){C.setValueState("None");C.setValueStateText("");}});if(sap.extent.uilib.util.EditFormGenerator.LEGAL_ENTITY_FIELD_IDS.indexOf(o.id)!=-1){I.attachSelectionChange(function(j){var C=j.getSource().getSelectedKey();sap.ui.getCore().getModel("RDP")&&sap.ui.getCore().getModel("RDP").setProperty("/companyId",C);},this);}return I;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getLabel=function(f,m){var l=this._oLabels[f+m]||this._oLabels[f+this._sMainGroupUi5Id];if(l===undefined&&m&&typeof m.split==="function"){var M=m.split("_");M.splice((M.length-1),1);m=M.join("_");l=this._oLabels[f+m];}return l;};\nsap.extent.uilib.util.EditFormGenerator.prototype._listenerImplementsFunction=function(f){if(this._oListener&&this._oListener[f]&&typeof this._oListener[f]==="function"){return true;}return false;};\nsap.extent.uilib.util.EditFormGenerator.prototype._addPrimaryFieldInfo=function(m,f){if(!this._oPrimaryFieldInfo[m]){this._oPrimaryFieldInfo[m]={uniqueFieldId:f.uniqueFieldId,primaryFieldId:f.metadata.primaryFieldId,primaryForEachFieldId:f.metadata.primaryForEachFieldId};}};\nsap.extent.uilib.util.EditFormGenerator.prototype._initLayoutData=function(f,R,I){this._bResetContentWidth=true;if(f.length>1){this._bShowBorderBottom=true;}var l,m;for(var i=0;i<f.length;i++){l=f[i].layout;if(this._listenerImplementsFunction("getEditLayout")){var c=null;if(sap.employeecentral&&sap.employeecentral.timemanagement&&sap.employeecentral.timemanagement.workbench&&sap.employeecentral.timemanagement.workbench.timeRecordings&&sap.employeecentral.timemanagement.workbench.timeRecordings.absenceForm&&sap.employeecentral.timemanagement.workbench.timeRecordings.absenceForm.AbsenceForm&&this._oListener instanceof sap.employeecentral.timemanagement.workbench.timeRecordings.absenceForm.AbsenceForm){c=this._oListener.getEditLayout()}else{c=sap.extent.uilib.util.EditLayoutService.getLayout(f[i]);}if(c){l=c;}if(c&&c.addButtonText&&this._listenerImplementsFunction("setAddButtonText")){this._oListener.setAddButtonText(c.addButtonText);}}if(l){var e=f[i];e.layout=l;if(l.items.length===0&&l.renderStyle==="table"){if(I){this._iMaxGroupSize=e.metadata&&e.metadata.fieldsOrder&&e.metadata.fieldsOrder.length;if(this._iMaxGroupSize<4){if(e.data&&e.data.hasOwnProperty("technicalInfo")&&e.data.technicalInfo.length===1){if(E.isRowDeletetable(e.data.technicalInfo[0],e.metadata)){this._iMaxGroupSize++;}if(E.isRowRearrangeable(e.data.technicalInfo[0],e.metadata)){this._iMaxGroupSize++;}}}this._iMaxGroupSize=this._iMaxGroupSize>4?4:this._iMaxGroupSize;}else{this._bResetContentWidth=false;}}else{for(var a=0,b=l.items.length;a<b;a++){var d=l.items[a].details;if(d&&d.renderStyle==="flow"){this._iMaxGroupSize=Math.max(this._iMaxGroupSize,d.items.length);}}}}if(!this._bShowBorderBottom&&f[i].metadata.hasMultiple){this._bShowBorderBottom=true;}m=f[i].metadata;for(var F in m.fields){if(m.fields[F].metadata){this._initLayoutData([m.fields[F]],true,I);}}}if(!R){this._setMaxGroupSize(I);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._setMaxGroupSize=function(a){var c=sap.extent.uilib.util.EditFormGenerator.DEFAULT_CONTENT_WIDTH;this._sInputWidth=sap.extent.uilib.util.EditFormGenerator.DEFAULT_INPUT_WIDTH;if(this._iMaxGroupSize===1){this._oLayoutDataConfig={spanL:12,spanM:12,spanS:12};}else if(this._iMaxGroupSize===2){this._oLayoutDataConfig={spanL:4,spanM:6,spanS:12};}else if(this._iMaxGroupSize===3){this._oLayoutDataConfig={spanL:4,spanM:4,spanS:12};}else if(!this._bIsLayoutDataConfigChanged){this._oLayoutDataConfig={spanL:3,spanM:4,spanS:12};}if(this._iMaxGroupSize>=2){c=(sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled)?18*this._iMaxGroupSize+"rem":17*this._iMaxGroupSize+"rem";this._sInputWidth="100%";}if(sap.ui.Device.system.phone){this._sInputWidth="100%";}if(this._listenerImplementsFunction("setContentWidth")){this._oListener.setContentWidth(c,this._bResetContentWidth,a);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._buildEventFields=function(f,p){var e=f.eventFields;var a=new sap.m.Panel({expanded:true,content:new sap.ui.layout.Grid()});var b="/eventFields/";var c=b+"value";var d=b+"label";var g=b+"required";var h=b+"writable";var j=b+"editable";var k=b+"selectOptions";var l=new sap.m.Label({text:{path:d},required:{path:g},width:"100%"});this._addContentToPanel(a,l);var m="eventFields_";var m="eventFields_";this._sMainGroupUi5Id="eventFields_";var n=this._buildInput(e.id,e.metaData,this._getInputPathConfig(c,h,j,k),0,m);var o={metadata:{fields:{}},data:{fields:{}},eventFields:f.eventFields};o.metadata.fields[e.id]=e.metaData;o.data.fields[e.id]=e.data;var F=new sap.ui.model.json.JSONModel(jQuery.extend(true,{},o));a.setModel(F);var C=[];C.push(l);C.push(n);var q=new sap.ui.layout.VerticalLayout({content:C,width:"100%"});var L=new sap.ui.layout.GridData(this._oLayoutDataConfig);q.setLayoutData(L);this._addContentToPanel(a,q);p.push(a);};\nsap.extent.uilib.util.EditFormGenerator.prototype.replaceConditionalPlaceHolderWithRealControl=function(f,p){var n=this._buildFieldGroup(f,0,false,false);var c=n.getContent();jQuery.each(c,function(I,C){if(!p.getContent().length){p.setVisible(true);}p.addContent(C);});if(n.getModel()){p.setModel(n.getModel());}var m=f.metadata;this._oLayoutsByIdMap[m.id]=[p];var F=m.fields;var t=this;jQuery.each(F,function(a,o){var b=o.metadata;if(b&&(b.type==="DATAGRID"||b.type==="FIELDSGROUP")){var l=t._oLayoutsByIdMap[b.id];if(l&&l.length>1){var d=l[l.length-1];t._oLayoutsByIdMap[b.id]=[d];}}});if(p.getContent()&&p.getContent().length){p.removeStyleClass("sapExtentUilibUtilEditFormGeneratorFGPanelVL");}};\nsap.extent.uilib.util.EditFormGenerator.prototype.addConditionalGroupToPlaceholder=function(f,p){var n=this._buildFieldGroup(f,0,false,false);this._addFieldGroupToPanel(p,n);return n;};\nsap.extent.uilib.util.EditFormGenerator.prototype.addConditionalField=function(f,F,o,p,a,m,R){var b=this._buildField(f,F,o,a,m,R);var l=this._oLayoutDataConfig;if(F.type==="ATTACHMENT"){l={linebreak:true,spanL:12,spanM:12,spanS:12};}b.setLayoutData(new sap.extent.uilib.util.PP3GridData(l));this._addContentToPanel(p,b);return b;};\nsap.extent.uilib.util.EditFormGenerator.prototype.getBlockId=function(){return this._sBlockId;};\nsap.extent.uilib.util.EditFormGenerator.prototype.deleteFieldGroup=function(f){if(this._listenerImplementsFunction("deleteContent")){this._oListener.deleteContent(f);var I=this._aPanels.indexOf(f);if(I>-1){this._aPanels.splice(I,1);}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.getFieldGroupById=function(f){var p=this._aPanels;for(var i=0;i<p.length;i++){var m=p[i].getModel();if(m&&m.getData()){var d=m.getData();if(d.hasOwnProperty("metadata")&&d.metadata.sectionId===f){return p[i];}}}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype.getInputById=function(f,R,I,g,p,G){var a=this.getInputsById(f);var b="FIELD_WITH_CONTEXT"+f;if(I){for(var c=0;c<a.length;c++){var m=E.getMainGroupId(a[c]);if(this._sMainGroupUi5Id&&this._sMainGroupUi5Id===m){return a[c];}else{var s=m.split("_");var P=s[s.length-1];if(P==R){return a[c];}}}return;}var g=this._sOnFieldChangeTriggerMainGroup||g;if(a.length>1&&g){var d=[];for(var c=0;c<a.length;c++){var m=E.getMainGroupId(a[c]);if(m==g){d.push(a[c]);}}if(d.length>0){a=d;}}if(a.length==1){return a[0];}else if(a.length>1){var e=p;if(e){var h=e.split(".");for(var i=0;i<h.length;i++){if(this._newFieldLayout[h[i]]){if(this._newFieldLayout[h[i]][f]){return this._newFieldLayout[h[i]][f];}else if(this._newFieldLayout[h[i]][b]){return this._newFieldLayout[h[i]][b]}}}}else if(typeof(G)==="number"){return a[G];}else{return a[R?R:0];}}return a[R?R:0];};\nsap.extent.uilib.util.EditFormGenerator.prototype.getInputsById=function(f){var I=[];var F;var g=[];for(var G in this._oFields){F=this._oFields[G];if(F["FIELD_WITH_CONTEXT"+f]){f="FIELD_WITH_CONTEXT"+f;}if(F[f]){g.push(G);}}g.sort(function(g,b){var c=g.substring(g.lastIndexOf("_")+1);var d=b.substring(b.lastIndexOf("_")+1);return c-d;});for(var a=0,l=g.length;a<l;a++){E.getInputsFromLayout(this._oFields[g[a]][f].field,I);}return I;};\nsap.extent.uilib.util.EditFormGenerator.prototype.updatePropertyById=function(f,R,p,v,F,P,I,g){var o=this.getInputById(f,R,I,g);if(o){this._updateProperty(o,p,v,F,P);}};\nsap.extent.uilib.util.EditFormGenerator.prototype.updateValueState=function(I,f,R,v){if(!I){I=this.getInputById(f,R);}if(I&&typeof I.setValueState==="function"){I.setValueState(v);I.setValueStateText(this._oBundle.getText("ECT_PP3_DEPENDENT_FIELD_CLEARED"));}};\nsap.extent.uilib.util.EditFormGenerator.prototype.deleteFieldGroupById=function(f){var F=this.getFieldGroupById(f);if(F){this.deleteFieldGroup(F);}};\nsap.extent.uilib.util.EditFormGenerator.prototype.getCSFValues=function(m,c,p,g){var o=[],C={},a,f,F,v,O;if(!c){return C;}for(i=0;i<c.length;i++){f=c[i];if(f==="start-date"||f==="effectiveStartDate"||f==="mdfSystemEffectiveStartDate"){if(!this.getInputById(f)){C[f]=this._getEffectiveDate();continue;}}F=this._getFromFields(m,f);if(F){v=E.getInputValue(E.getInputFromFieldLayout(F.field));C[f]=v;}else{o.push(f);}}for(i=0;i<o.length;i++){F=null;f=o[i];var I=this.getInputById(f,"","","",p,g);if(I){O=E.getMainGroupId(I);F=this._getFromFields(O,f);}else if(this._listenerImplementsFunction("getOtherCSFField")){F=this._oListener.getOtherCSFField(f);if(!F&&f==="jobInfo-event-reason"){var b=["compInfo-event-reason","employmentInfo-event-reason","globalAssignmentInfo-event-reason"];for(var j=0;j<b.length;j++){F=this._oListener.getOtherCSFField(b[j]);if(F){break;}}}}if(F){v=E.getInputValue(E.getInputFromFieldLayout(F.field));C[f]=v;}}return C;};\nsap.extent.uilib.util.EditFormGenerator.prototype.getPropagationPreference=function(f){return this._oForm.propagationPreferences&&this._oForm.propagationPreferences[f];};\nsap.extent.uilib.util.EditFormGenerator.prototype.handleMDFFieldChange=function(o,I,l){o.fail(function(e){E.handleBackendError(e);});o.done(jQuery.proxy(function(R){var a=jQuery.extend(true,{},R.actionResult);var s=a&&a.status;if(a&&(s=="failure"||s=="warning"||(s=="success"&&a.global&&a.global.length>0))){a.yesNo=true;a.oInput=I;a.lastValue=l;a.response=R;var t=this;setTimeout(function(){E.displayBackendResponse(a,null,t);},0);if(I&&(s==="failure")){this._resetLastValue(I,l);}}if((s!=="failure"&&s!=="warning")){this._updateMDFData(R);}},this));};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleProceed=function(c,d){if(d.response){this._updateMDFData(d.response);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._handleCorrect=function(c,d){if(d.oInput){this._resetLastValue(d.oInput,d.lastValue);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._resetLastValue=function(I,l){if(typeof l=="undefined"){l="";}this._updateProperty(I,"value",l,false);I.sfLastValue=l;};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateMDFData=function(d){this.updateMDFFormData(d);this.updateMDFCoreFields(d);if(this._oForm.initRules){setTimeout(function(){delete this._sOnFieldChangeTriggerMainGroup;this._executeUIRules(null,this._oForm.initRules);}.bind(this),0);}};\nsap.extent.uilib.util.EditFormGenerator.prototype.updateMDFFormData=function(n){if(n.partialUpdate){if(n.noMeta){var f=n.fieldGroups;for(var a=0,l=f.length;a<l;a++){for(var b in f[a].data.fields){this._updateFieldDataMDF(b,f[a].data.fields[b],0);}}}else{setTimeout(function(){this._updateFormDataPartiallyMDF(n);}.bind(this),0)}}else{this._updateFormData(n);}};\nsap.extent.uilib.util.EditFormGenerator.prototype.updateMDFCoreFields=function(n){if(!n.mdfCore||!n.mdfCore.coreFields){return;}var c=n.mdfCore.coreFields;for(var C in c){this._oForm.mdfCore.coreFields[C]=c[C];}};\nsap.extent.uilib.util.EditFormGenerator.prototype.getEditForm=function(f,I){return this._getEditForm(f,I);};\nsap.extent.uilib.util.EditFormGenerator.prototype.validate=function(){return this._validate();};\nsap.extent.uilib.util.EditFormGenerator.prototype.getEditFormData=function(){return this._getEditFormData();};\nsap.extent.uilib.util.EditFormGenerator.prototype.addNew=function(){return this._addNew();};\nsap.extent.uilib.util.EditFormGenerator.prototype.getInputValueById=function(m,f){return this._getInputValueById(m,f);};\nsap.extent.uilib.util.EditFormGenerator.prototype.getPicklistValues=function(p,P,o,I,R){if(this._oListener&&typeof this._oListener.getPicklistValues==="function"){return this._oListener.getPicklistValues(p,P,o,I,R);}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype.getPicklistLabel=function(p,o){if(this._listenerImplementsFunction("getPicklistLabel")){return this._oListener.getPicklistLabel(p,o);}};\nsap.extent.uilib.util.EditFormGenerator.prototype.getAjaxKey=function(){if(this._oListener&&typeof this._oListener.getAjaxKey==="function"){return this._oListener.getAjaxKey();}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype.getFACValues=function(u,s,c){if(this._oListener&&typeof this._oListener.getFACValues==="function"){return this._oListener.getFACValues(u,s,c);}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype.requestPropagationValues=function(s,v,p,c,R){if(this._oListener&&typeof this._oListener.requestPropagationValues==="function"){return this._oListener.requestPropagationValues(s,v,p,c,R);}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype.searchByInternalCode=function(s,v,c,u){if(this._oListener&&typeof this._oListener.searchByInternalCode==="function"){return this._oListener.searchByInternalCode(s,v,c,u);}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getRowIndexByInput=function(I){var m=I.getModel();if(m&&m.getData()&&m.getData().hasOwnProperty("dataList")){return E.getRowId(I);}else{var M=E.getMainGroupId(I);var f=E.getFieldId(I);return this._getFieldRowIndex(f,M);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getFieldRowIndex=function(f,m){var R=-1;var I=this.getInputsById(f);if(I){for(var i=0;i<I.length;i++){if(I[i]&&(E.getMainGroupId(I[i])===m)){R=i;break;}}}return R;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getPanelRowIndex=function(p){var P=p.getParent();var c=P.getContent();var R=0;for(var I=0,l=c.length;I<l;I++){if(c[I]instanceof sap.m.Panel){if(c[I]==p){return R;}else{R++;}}}return-1;};\nsap.extent.uilib.util.EditFormGenerator.prototype._getFieldToParentStack=function(s,c,m){var R=m.resolver||"",a=R.split("."),p=null,P=null;if(a.length===1){return;}a.pop();p=a.join(".");P=c.getParent();while(P!=null){if(P instanceof sap.m.Table||P instanceof sap.m.Panel){m=P.getModel().getData().metadata;if(m.resolver===p){s.push({rowIndex:this._getPanelRowIndex(P),id:m.id,resolver:m.resolver});this._getFieldToParentStack(s,P,m);break;}}P=P.getParent();}};\nsap.extent.uilib.util.EditFormGenerator.prototype.getParentOfField=function(c){var p=c&&c.getParent();while(p!=null){if(p instanceof sap.m.Table||p instanceof sap.m.Panel){return p;}p=p.getParent();}return null;};\nsap.extent.uilib.util.EditFormGenerator.prototype._setRowUpdate=function(I){var R=this._getRowIndexByInput(I);setTimeout(function(){R=(R===-1)?0:R;if(R>-1){var a=this.isFormDirty()?"Update":null;I.getModel().setProperty("/dataList/"+R+"/rowInfo/actionType",a);var t=I.getModel().getProperty("/data/technicalInfo");if(!I.getModel().getProperty("/dataList")&&t&&t[0]&&t[0].id>0){I.getModel().setProperty("/data/technicalInfo/0/actionType",a);}}}.bind(this),0);};\nsap.extent.uilib.util.EditFormGenerator.prototype.getPanel=function(p){if(typeof p!="undefined"){return this._aPanels[p];}return this._aPanels;};\nsap.extent.uilib.util.EditFormGenerator.prototype.setLayoutDataConfig=function(n){if(n&&n.spanS&&n.spanM&&n.spanL){this._oLayoutDataConfig=n;this._bIsLayoutDataConfigChanged=true;}};\nsap.extent.uilib.util.EditFormGenerator.prototype.setEditFormData=function(n){for(var p=0,a=this._aPanels.length;p<a;p++){oControl=this._aPanels[p];if(oControl instanceof sap.ui.layout.VerticalLayout){var c=oControl.getContent();for(var b=0,l=c.length;b<l;b++){if(c[b]instanceof sap.m.Table){var m=c[b].getModel().getData();m.data.technicalInfo=n;var d={rowInfo:{},v:m.dataList[0].v};m.dataList=[];for(var i=0;i<n.length;i++){d.rowInfo=n[i];m.dataList.push(d);}if(n.length==0){for(var i=m.metadataAsList.fields.length-1;i>=0;i--){if(m.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM||m.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM||m.metadataAsList.fields[i].id===sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM){m.metadataAsList.fields.splice(i,1);}else{break;}}}}}}}};\nsap.extent.uilib.util.EditFormGenerator.prototype.isFormDirty=function(){return this._oDirtyChecker.isFormDirty();};\njQuery.sap.log.setLevel(jQuery.sap.log.Level.INFO);\nsap.extent.uilib.util.EditFormGenerator.prototype.onAttachmentChangeSetUploadUrl=function(e){var a=e.getSource();var I=E.getMeta(a);var A=I.id;var s=this._getAttachmentSecurityTokens(a);this._setUploadUrl(a,s.fieldMeta,s.recordHash,s.uuid,I.attachRowId);};\nsap.extent.uilib.util.EditFormGenerator.prototype.getEPSecurityToken=function(f,c){var s={};if(f.dataList[c].rowInfo.recordHash==null&&f.dataList[c].rowInfo.uuid==null){s.recordHash=f.metadata.recordHash;s.uuid=f.metadata.uuid;}else{s.recordHash=f.dataList[c].rowInfo.recordHash;s.uuid=f.dataList[c].rowInfo.uuid;}return s;};\nsap.extent.uilib.util.EditFormGenerator.prototype._uploadComplete=function(e){var I=e.getSource();var f=e.getParameter("files");var R=f&&f[0]&&f[0].responseRaw&&f[0].responseRaw.match(/{.*}/);var o=sap.sf.peopleprofile.model.pp3core.DWRJSONUtils.parseJSONForAttachemnt(R[0]);if(o.success){var a=E.getMeta(I);jQuery.sap.log.info("_uploadComplete: prev record-hash= "+a.recordHash);jQuery.sap.log.info("_uploadComplete: prev uuid= "+a.uuid);var b=I.getAttachmentDataFromResponse(o);jQuery.extend(true,a,b);if(this._listenerImplementsFunction("cacheAttachmentsInfo")){this._oListener.cacheAttachmentsInfo("upload",jQuery.extend(true,{},a),I);}jQuery.sap.log.info("_uploadComplete: new attachmentId= "+a.attachmentId);jQuery.sap.log.info("_uploadComplete: new record-hash= "+a.recordHash);jQuery.sap.log.info("_uploadComplete: new uuid= "+a.uuid);this._updateRecordHash(a.recordHash,a.uuid,I);if(a.module=="empprofile"){var c=this._oListener.getCustomData()[1].getValue();var d=this._oListener.getCustomData()[2].getValue();c.dataList[d].rowInfo.recordHash=a.recordHash;c.dataList[d].rowInfo.uuid=a.uuid;}this._attachmentChanged(e);}};\nsap.extent.uilib.util.EditFormGenerator.prototype._fileDeleted=function(e){var a=e.getParameter("documentId");var I=e.getSource();var o=E.getMeta(I);o.attachmentId=a;o.bDeleteAttachment=this._canDeleteAttachment(e.getSource(),a);var b=I.getModel().getData().data.fields[this._searchRecordHash(I.getModel().getData().data.fields)];var c=b&&b.value;o.recordHash=c instanceof Array?c[0]:c;var d=I.getModel().getData().data.fields[this._searchUUID(I.getModel().getData().data.fields)];var u=d&&d.value;o.uuid=u instanceof Array?u[0]:u;if(!o.recordHash||!o.uuid){var s=this._getAttachmentSecurityTokens(I);o.recordHash=typeof s.recordHash=="object"&&s.recordHash&&s.recordHash.length==1?s.recordHash[0]:s.recordHash;o.uuid=typeof s.uuid=="object"&&s.uuid&&s.uuid.length==1?s.uuid[0]:s.uuid;}var D=new jQuery.Deferred();D.done(jQuery.proxy(this._onDeleteAttDone,this));D.fail(jQuery.proxy(this._onDeleteAttFail,this));e=jQuery.extend(true,{},e);if(o.module=="empprofile"){var f=this._oListener.getCustomData()[2].getValue();var g=this._oListener.getCustomData()[1].getValue().dataList[f].rowInfo;o.recordHash=g.recordHash;o.uuid=g.uuid;}sap.sf.peopleprofile.model.pp3core.DWRUtilsAdapter.deleteAtt(D,o,e);};\nsap.extent.uilib.util.EditFormGenerator.prototype._onDeleteAttDone=function(d,a,e){if(this._listenerImplementsFunction("getSubmitButton")){this._oListener.getSubmitButton().setEnabled(true);}if(!d.success){sap.m.MessageBox.show(d.message);return;}var R=d.result;var I=jQuery.extend(true,{},a);if(this._listenerImplementsFunction("cacheAttachmentsInfo")&&I.bDeleteAttachment){this._oListener.cacheAttachmentsInfo("delete",I,null);}if(R&&R[this._searchRecordHash(R)]){this._updateRecordHash(R[this._searchRecordHash(R)],R[this._searchUUID(R)],I.attachInput);}else{jQuery.sap.log.error("Missing record-hash from deleteAtt() DWR response for field "+I.id);}!e.getSource().bIsDestroyed&&this._attachmentChanged(e);};\nsap.extent.uilib.util.EditFormGenerator.prototype._getAttachmentSecurityTokens=function(a){var A=E.getFieldId(a);var f=this._getFormDataForAttachInput(a);if(f){var m=f.metadata.fields;var d=f.data.fields;if(this._isValidSecurityValue(d[this._searchRecordHash(d)])&&this._isValidSecurityValue(d[this._searchUUID(d)])){return{recordHash:d[this._searchRecordHash(d)].value,uuid:d[this._searchUUID(d)].value,fieldMeta:m[A]};}if(m[d[this._searchRecordHash(m)]]&&m[this._searchRecordHash(m)].value&&m[this._searchUUID(m)]&&m[this._searchUUID(m)].value){return{recordHash:m[this._searchRecordHash(m)].value,uuid:m[this._searchUUID(m)].value,fieldMeta:m[A]};}}jQuery.sap.log.error("Missing record-hash or uuid for field "+A);var F=this._getFormDataIndexForAttachment(A,f);return{recordHash:null,uuid:null,fieldMeta:(F!=-1)?f.metadata.fields[A]:null};};\nsap.extent.uilib.util.EditFormGenerator.prototype._getFormDataForAttachInput=function(a){if(a.getModel()&&a.getModel().getData()){return a.getModel().getData();}else{var A=E.getFieldId(a);var f=this._getFormDataIndexForAttachment(A);return(f!=-1)?this._oFormData[f]:null;}};\nsap.extent.uilib.util.EditFormGenerator.prototype._getFormDataIndexForAttachment=function(a,f){for(var i=0,l=this._oFormData.length;i<l;i++){var m=this._oFormData[i].metadata.fields;for(var F in m){if(F===a){return i;}if(m[F].hasOwnProperty("cascadeChildren")&&Array.isArray(m[F].cascadeChildren)&&m[F].cascadeChildren[0].hasOwnProperty("fields")){var c=m[F].cascadeChildren[0].fields;for(sFields in c){if(sFields==a){return i;}}}else if(m[F].hasOwnProperty("cascadeChildren")&&typeof m[F].cascadeChildren=="object"&&m[F].cascadeChildren.hasOwnProperty("fields")){for(sFields in c){if(sFields==a){return i;}}}}if(f&&f.hasOwnProperty("metadata")&&f.metadata.hasOwnProperty("fields")){var m=f.metadata.fields;for(var F in m){if(F===a){return i;}}}}return-1;};\nsap.extent.uilib.util.EditFormGenerator.prototype._isValidSecurityValue=function(I){return(I&&(((I.value instanceof Array)&&I.value.length>0&&I.value[0])||(typeof I.value=="string"&&I.value.length>0&&I.value)));};\nsap.extent.uilib.util.EditFormGenerator.prototype._updateRecordHash=function(R,u,a){var f=this._getFormDataForAttachInput(a);if(f){if(R){f.data.fields[this._searchRecordHash(f.data.fields)]={value:[R]};jQuery.sap.log.info("_updateRecordHash: data.fields record-hash= "+R);}else{jQuery.sap.log.error("_updateRecordHash is called with empty record-hash");}if(u){f.data.fields[this._searchUUID(f.data.fields)]={value:[u]};jQuery.sap.log.info("_updateRecordHash: data.fields uuid= "+u);}else{jQuery.sap.log.error("_updateRecordHash is called with empty uuid");}}else{jQuery.sap.log.error("Failed to update record-hash for field "+E.getFieldId(a));}};\nsap.extent.uilib.util.EditFormGenerator.prototype._onDeleteAttFail=function(e,o){jQuery.sap.log.error("Error occurred while calling deleteAtt:\\n sErrorString: "+e+"\\n oError: "+((o&&o instanceof Object)?JSON.stringify(o):o));};\nsap.extent.uilib.util.EditFormGenerator.prototype._attachmentChanged=function(e){this._changeListener(e,"items");};\nsap.extent.uilib.util.EditFormGenerator.prototype._canDeleteAttachment=function(I,a){var f=E.getFieldId(I);var R=E.getRowId(I);var s="/data/fields/"+f+"/initialValue/"+(R?R:"0");var b=I.getModel().getProperty(s);var e=b&&(b.attachmentId==a);var c=this._oForm&&this._oForm.effectiveDated;var d=c?(e?false:true):true;return d;};\nsap.extent.uilib.util.EditFormGenerator.prototype._setUploadUrl=function(a,f,b,u,c){if(f.module=="empprofile"){b=this._oListener.getCustomData()[0].getValue().recordHash;u=this._oListener.getCustomData()[0].getValue().uuid;}var U="";var I=E.getMeta(a);I.attachmentHash=b;I.uuid=u;if(this._listenerImplementsFunction("getUploadUrl")){var F=E.getFieldId(a);I.id=F;var A=f.controller||"hrisAttachmentController";U=this._oListener.getUploadUrl(F,I,A);}if(f.module){U+="&module="+f.module;}if(f.logReadAccess===true||f.logReadAccess==="true"){U+="&logReadAccess=true";}var s=this.getUploadUrlWithSecurityTokens(U,b,u,c);a.setUploadUrl(s);};\nsap.extent.uilib.util.EditFormGenerator.prototype.getUploadUrlWithSecurityTokens=function(u,a,b,c){if(!a||!b){return u;}var U=u;var a=a instanceof Array?(a.length>0?a[0]:"null"):a;U+=("&"+E.ATTACHMENT_HASH+"="+a);var b=b instanceof Array?(b.length>0?b[0]:"null"):b;U+=("&"+E.UUID+"="+b);U+=("&"+E.ROW_ID+"="+(c<0?"":c==null?"":c));jQuery.sap.log.info("upload record-hash= "+a);jQuery.sap.log.info("upload uuid= "+b);return U;};\nsap.extent.uilib.util.EditFormGenerator.prototype.getSecurityTokenBasedOnKey=function(s,d,m){if(!s){return"";}var o=this._getDataForField(s,d);if(!this._isValidSecurityValue(o)){o=this._getMetaForField(s,m);}var t=null;if(o&&o.value){if(o.value instanceof Array&&o.value.length>0){t=o.value[0];}else{t=o.value;}}jQuery.sap.log.info("getSecurityTokenBasedOnKey: "+s+"= "+t);return t;};\n})();\nfunction resizeFieldInTheDialog(){var e=jQuery(".sapExtentUilibUtilEditFormGeneratorPanelExpanded");var a=e.find("div.sapUiRespGrid");jQuery.each(a,function(i,I){var b=I.children;var g=Array.prototype.slice.call(b).filter(function(f){return f.className.indexOf("sapUiRespGridBreak")!=-1;}).length;if(g>=1){var o=0;jQuery.each(b,function(f,h){if(h.className.indexOf("sapUiRespGridSpanInvisible")==-1){if(h.className.indexOf("sapUiRespGridBreak")!=-1){o=jQuery(h).offset().left;}else if(jQuery(h).offset().left==o&&o!=0){h.className="sapUiRespGridBreak "+h.className;}}});}var d=[];var c=[];jQuery.each(b,function(f,h){if(f>0&&h.className.indexOf("sapUiRespGridBreak")==0){d.push(c);c=[];}if(h.firstChild.style.display=="none"||h.className.indexOf("sapUiRespGridSpanInvisible")>-1){h.style.height="auto";}var j={divDom:h,divHeight:h.offsetHeight};c.push(j);if(f==b.length-1){d.push(c);}});d=jQuery.grep(d,function(f){if(f.length>1){var r=false;var h=f[0].divHeight;for(var C=0,R=f.length;C<R;C++){if(f[C].divHeight>65&&f[C].divHeight!=h){r=true;}if(f[C].divDom.offsetWidth>(f[C].divDom.offsetParent&&f[C].divDom.offsetParent.offsetWidth*0.9)){f.splice(C,1);R--;if(R==1){r=false;}}}return r;}return false});jQuery.each(d,function(r,f){var h=0;jQuery.each(f,function(j,k){if(k.divHeight>h){h=k.divHeight;}});jQuery.each(f,function(j,k){k.divHeight=h})});jQuery.each(d,function(r,f){jQuery.each(f,function(h,j){if(j.divDom.firstChild.className.indexOf("sapExtentUilibUtilEditFormGeneratorField")>-1){j.divDom.style.height=j.divHeight+"px";j.divDom.style.position="relative";j.divDom.firstChild.style.position="absolute";var O=j.divDom.querySelector(".strikethroughTextPattern");if(O){O.style.width="100%";O.style.textOverflow="ellipsis";}}else{j.divDom.style.height="auto";}})});})}\n',"sap/extent/uilib/util/EditFormGeneratorHelper.js":function(){jQuery.sap.declare("sap.extent.uilib.util.EditFormGeneratorHelper");jQuery.sap.require("sap.m.Bar");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.Label");jQuery.sap.require("sap.m.Input");jQuery.sap.require("sap.m.InputType");jQuery.sap.require("sap.m.Link");jQuery.sap.require("sap.m.library");jQuery.sap.require("sap.m.TimePicker");jQuery.sap.require("sap.m.Tokenizer");jQuery.sap.require("sap.m.Token");jQuery.sap.require("sap.m.CheckBox");jQuery.sap.require("sap.m.MessageItem"),jQuery.sap.require("sap.m.MessageView");jQuery.sap.require("sap.ui.core.Icon");jQuery.sap.require("sap.ui.core.IconPool");jQuery.sap.require("sap.ui.core.LocaleData");jQuery.sap.require("sap.ui.core.MessageType");jQuery.sap.require("sap.ui.layout.HorizontalLayout");jQuery.sap.require("sap.ui.layout.VerticalLayout");jQuery.sap.require("sap.extent.uilib.ComboBox");jQuery.sap.require("sap.extent.uilib.util.SCBPicklistHelper");jQuery.sap.require("sap.extent.uilib.ConfigurableLabel");jQuery.sap.require("sap.extent.uilib.SearchableComboBox");jQuery.sap.require("sap.extent.uilib.SearchableComboBoxWorkSchedule");jQuery.sap.require("sap.extent.uilib.CalculatorField");jQuery.sap.require("sap.extent.uilib.HoursAndMinutes");jQuery.sap.require("sap.extent.uilib.TextAreaExtent");jQuery.sap.require("sap.extent.uilib.BulletChart");jQuery.sap.require("sap.extent.uilib.SFSwitch");jQuery.sap.require("sap.extent.uilib.LinkWithIcon");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.extent.uilib.util.HelpManager");jQuery.sap.require("sap.extent.uilib.util.PayGroupPopup");jQuery.sap.require("sap.extent.uilib.UploadCollectionPP3");jQuery.sap.require("sap.sf.peopleprofile.model.pp3core.DWRJSONUtils");jQuery.sap.require("sap.extent.uilib.util.datatypehandler.ControlHandler");jQuery.sap.require("sap.ui.model.type.Integer");jQuery.sap.require("sap.ui.model.type.Float");jQuery.sap.require("sap.ui.model.type.String");jQuery.sap.require("sap.extent.uilib.SearchInput");jQuery.sap.require("sap.sf.commons.DatePicker");jQuery.sap.require("sap.sf.commons.DateTimePicker");sap.ui.core.format.NumberFormat.oDefaultFloatFormat.emptyString="";sap.ui.core.format.NumberFormat.oDefaultIntegerFormat.emptyString="";sap.extent.uilib.util.EditFormGeneratorHelper={};(function(){sap.extent.uilib.util.EditFormGeneratorHelper.DATE_FORMAT="yyyy-MM-dd";sap.extent.uilib.util.EditFormGeneratorHelper.DATETIME_FORMAT_ISO="yyyy-MM-ddTHH:mm:ssZ";sap.extent.uilib.util.EditFormGeneratorHelper.TIME_FORMAT="HH:mm:ss";sap.extent.uilib.util.EditFormGeneratorHelper.TIME_FORMAT_NO_SECONDS="HH:mm";if(!sap.ui.getCore().getModel("i18n")){jQuery.sap.require("sap.ui.model.resource.ResourceModel");sap.ui.getCore().setModel(new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath('sap.extent.uilib.i18n.i18n','.properties')}),"i18n");}sap.extent.uilib.util.EditFormGeneratorHelper._oUIDateFormat=sap.ui.core.format.DateFormat.getDateInstance({pattern:sap.ui.getCore().getModel("i18n").getResourceBundle().getText("ECT_PP3_MMMDDYYYY")});sap.extent.uilib.util.EditFormGeneratorHelper._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();window.getDateFormat=function(){sap.extent.uilib.util.EditFormGeneratorHelper._oDateFormat=sap.ui.core.format.DateFormat.getDateInstance({pattern:sap.extent.uilib.util.EditFormGeneratorHelper.DATE_FORMAT,calendarType:sap.ui.core.CalendarType.Gregorian});};window.getDateFormat();sap.extent.uilib.util.EditFormGeneratorHelper._oDateTimeFormat=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:sap.extent.uilib.util.EditFormGeneratorHelper.DATETIME_FORMAT_ISO,UTC:true});var b=sap.extent.uilib.util.EditFormGeneratorHelper._oBundle;sap.extent.uilib.util.EditFormGeneratorHelper._oDecimalFormatSymbols={groupingSeparator:b.getText("COMMON_NumericGroupingSeperator"),decimalSeparator:b.getText("COMMON_DecimalPoint"),minusSign:b.getText("ECT_PP3_NEGATIVESIGN")};sap.extent.uilib.util.EditFormGeneratorHelper.getDecimalFormatSymbols=function(){return sap.extent.uilib.util.EditFormGeneratorHelper._oDecimalFormatSymbols;};sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_MAIN_GROUP_ID_INDEX="mainGroupId";sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_META_INDEX="meta";sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_GROUP_NUMBER_INDEX="groupNumber";sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_ROW_ID_INDEX="rowId";sap.extent.uilib.util.EditFormGeneratorHelper.SHOW_HIDE_THRESHOLD=1;sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_ID_KEY="id";sap.extent.uilib.util.EditFormGeneratorHelper.FORM_BLOCK_ID_KEY="blockId";sap.extent.uilib.util.EditFormGeneratorHelper.MAIN_GROUP_ID="group0";sap.extent.uilib.util.EditFormGeneratorHelper.DEFAULT_ALTERNATE_SECTIONS_BASENAME="alternateSections";sap.extent.uilib.util.EditFormGeneratorHelper.MAX_LENGTH_REACHED="maxLengthReached";sap.extent.uilib.util.EditFormGeneratorHelper.LAYOUT_EXCEPTION_ITEMS={"group0":true,"addButtonText":true};sap.extent.uilib.util.EditFormGeneratorHelper.ATTACHMENT_HASH="attachment-hash";sap.extent.uilib.util.EditFormGeneratorHelper.RECORD_HASH="record-hash";sap.extent.uilib.util.EditFormGeneratorHelper.UUID="uuid";sap.extent.uilib.util.EditFormGeneratorHelper.ROW_ID="rowId";function g(i){var e=i.hasOwnProperty("groupingEnabled")?i.groupingEnabled:true;return{minIntegerDigits:0,groupingEnabled:e,parseAsString:true,source:{groupingEnabled:e,parseAsString:true,}};}function a(i){var e=i.hasOwnProperty("groupingEnabled")?i.groupingEnabled:true;return{minIntegerDigits:0,maxFractionDigits:i.maxFractionDigits,groupingEnabled:e,source:{groupingEnabled:e}};}function c(){return{groupingEnabled:true,source:{groupingEnabled:true}};}function d(e,i){var j=(i!==null||i!==undefined)?i:"";if(j!==""){var k=e.getSelectedItem()||{mProperties:{}};if(k.mProperties){return k.mProperties.text||(j+"");}}return j+"";}function f(t,i){if(!i.writable){return null;}var T=null;var C=null;T=g(i);if(t=="LONG"||t=="NUMBER"){C=sap.ui.model.type.Integer;}else{C=sap.ui.model.type.Float;}if(typeof i.groupingEnabled!="undefined"){T.source=null;}if(T.source){var o=sap.extent.uilib.util.EditFormGeneratorHelper.getDecimalFormatSymbols();T.groupingSeparator=T.source.groupingSeparator=o.groupingSeparator;T.decimalSeparator=T.source.decimalSeparator=o.decimalSeparator;T.minusSign=T.source.minusSign=o.minusSign;}return new C(T);}sap.extent.uilib.util.EditFormGeneratorHelper.buildInput=function(F,I,o,e,m,w,j,r){var p=o.path||"/data/fields/"+F+"/value/0";var E=o.editablePath;var k=o.enabledPath;var R=o.requiredPath;var l=o.itemsPath;var M=o.maxLength;var P=o.placeholder;var n=o.metadata;var q=I.displayFormat?"/metadata/fields/"+F+"/displayFormat":I.displayFormat;var t;var u=false;var v="off";var T=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(I);switch(T){case"EDUMULTIPLERELATION":var x=new sap.m.Tokenizer({width:"100%",tokens:{path:p+"/defaultValue/",filters:[new sap.ui.model.Filter("actionType",sap.ui.model.FilterOperator.NE,"Delete")],template:new sap.m.Token({editable:I.writable,key:"{value}",text:"{displayValue}",delete:function(i){sap.extent.uilib.util.EditFormGeneratorHelper._eduMultipleRelationAction(i.getSource().getModel(),i.getSource().getBindingContext(),"delete",F);this.getParent().removeToken(this);}})}});x.addStyleClass("EDUMULTIPLERELATION");var U={type:"HRIS_FINDUSER",_parentMeta:T,label:I.label,required:I.required,oTokenizerRef:x,module:I.module,autoCompleteHideUserName:I.autoCompleteHideUserName,id:I.id};var y=p+"/defaultValue/"+I.valueLen;var z={path:y};if(I.writable||(I.writable==false&&I.valueLen==0)){var A=sap.extent.uilib.util.EditFormGeneratorHelper.buildInput(F,U,z,e,m,"10rem",j,r);}var B=new sap.ui.layout.VerticalLayout({allowWrapping:true,width:'100%',content:[x,A]});x.attachTokenChange(function(i){if(!I.required)return;var x=i.getSource();if(A&&x.getTokens().length<=0){A.setValueState(sap.ui.core.ValueState.Error);A.setValueStateText(sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_ERR_DATA_REQUIRED",[I.label]));}});return B;case"MULTIPLERELATION":I.primaryFieldMeta._parentMeta=T;if(I.maxRows==1){o.path=o.path||"/data/fields/"+F+"/value/0/0/value";t=sap.extent.uilib.util.EditFormGeneratorHelper._buildInputWithContext(F,I,o,e,m,j);if(j&&typeof j==="function"){j(t,F,I,o,e,m,w);}return t;}o.path="value";var C=new sap.m.Table({keyboardMode:"Edit",width:"100%",fixedLayout:false,backgroundDesign:sap.m.BackgroundDesign.Transparent,columns:[new sap.m.Column({demandPopin:true,header:new sap.m.Label({text:"{/metadata/fields/"+F+"/primaryFieldMeta/label}",required:"{/metadata/fields/"+F+"/primaryFieldMeta/required}"})}),new sap.m.Column({demandPopin:true,header:new sap.m.Label({text:""})})],items:{filters:[new sap.ui.model.Filter("actionType",sap.ui.model.FilterOperator.NE,"Delete")],path:"/data/fields/"+F+"/value/0",factory:function(i,A1){if(o){o.editablePath="";o.enabledPath="";o.itemsPath="";}var B1=sap.extent.uilib.util.EditFormGeneratorHelper._buildInputWithContext(F,I,o,e,m,"100%",j);if(j&&typeof j==="function"){j(B1,F,I,o,e,m,w);}var C1=B1.getContent()[0];C1.attachSelectionChange(function(D1){var t=D1.getSource();var F=sap.extent.uilib.util.EditFormGeneratorHelper.getFieldId(t);sap.extent.uilib.util.EditFormGeneratorHelper._multipleRelationAction(D1.getSource().getModel(),D1.getSource().getBindingContext(),"change",null,F);});return new sap.m.ColumnListItem({cells:[B1,new sap.m.Button({icon:"sap-icon://delete",enabled:{parts:[k||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},press:function(D1){sap.extent.uilib.util.EditFormGeneratorHelper._multipleRelationAction(D1.getSource().getModel(),D1.getSource().getBindingContext(),"delete");}})]})}}});sap.extent.uilib.util.EditFormGeneratorHelper.addCustomData(F,I,e,m,C);var G=new sap.m.Button({text:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_Add"),icon:"sap-icon://add",enabled:{path:k||"/metadata/fields/"+F+"/writable"},press:function(i){var F=this.getCustomData()[0].getValue();sap.extent.uilib.util.EditFormGeneratorHelper._multipleRelationAction(i.getSource().getModel(),i.getSource().getBindingContext(),"add",null,F);}});sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(G,"id",F);var H=new sap.ui.layout.VerticalLayout({width:"100%",content:[C,G],visible:{parts:sap.extent.uilib.util.EditFormGeneratorHelper.getVisibilityBindingPaths(F),formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardVisibilityFormatter}});return H;case"ECTFIELDWITHCUSTOMCONTEXT":case"FIELD_WITH_CONTEXT":case"LOCALIZED":var J=sap.extent.uilib.util.EditFormGeneratorHelper._buildInputWithContext(F,I,o,e,m,j,r);if(j&&typeof j==="function"){j(J,F,I,o,e,m,w,r);}return J;case"USER":case"HRIS_FINDUSER":var K="";var L={};if(I.searchOptions&&I.searchOptions.defaultSearchValues){u=I.searchOptions.defaultSearchValues.isGACEEnabled==="YES"}else if(T==="HRIS_FINDUSER"){var N=false;var O=["hrId","managerId","matrixManager","secondManager","customManager"];if(O.contains(I.id)){if(typeof ECTSearchAdoptionUtils!=='undefined')u=ECTSearchAdoptionUtils.isGACEEnabled?true:false;I.bPersonBased=u;}}if((T==="USER"||T==="HRIS_FINDUSER")&&u){t=new sap.extent.uilib.SearchInput({placeholder:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_NO_SELECTION"),searchType:K,settings:{findtype:'fullname',additionalCriteria:L},tooltip:{path:p,formatter:function(i){if(i){return i.primaryDisplayText;}}},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},value:{parts:[p,n||"/metadata/fields/"+F],formatter:function(i,A1){if((i&&typeof i==="object")){return i.primaryDisplayText;}return undefined;}},oCurrentInputMeta:I});}case"FOUNDATION_AUTOCOMPLETE":case"PICKLISTAUTOCOMPLETE":case"CASCADE":case"SELECT":case"USERINFOMETADATAOPTIONS":if(!u){if(I.hasOwnProperty("selectOptions")){var Q=function(i){if(typeof i==="boolean"){return i;}if(i){if(typeof i==="object"){if(typeof i.value==="boolean"){return i.value;}if(i.hasOwnProperty("id")){return i.id;}return i.value||"";}if(typeof i==="string"||typeof i==="number"){return i;}}return"";};var S=function(i){return{path:p,formatter:function(A1){var B1=Q(A1);if(i){return d(this,B1);}return B1;}};};t=new sap.extent.uilib.ComboBox({placeholder:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_NO_SELECTION"),editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},items:{path:l||"/metadata/fields/"+F+"/selectOptions",template:new sap.ui.core.Item({key:"{value}",text:"{label}",tooltip:"{label}",enabled:{path:"disabled",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultEnabledFormatter}})},tooltip:this.setValueByCheckBlindnessSupport(S(true),""),selectedKey:S(),width:w});if(T==="SELECT"&&I.ariaDescribedBy){t.addAriaDescribedBy(new sap.ui.core.InvisibleText({text:I.ariaDescribedBy}).toStatic());}var V=true;t.addEventDelegate({onAfterRendering:jQuery.proxy(function(A1){var B1=jQuery('#main--content').children();if(B1.length>0){var C1=B1.length;for(var i=0;i<C1-1;i++){var D1=jQuery(B1[i]).find(".stepPanelStatusIconIncomplete");var E1=jQuery(B1[i]).find(".stepPanelStatusIconComplete");var F1=jQuery(B1[i]).find("button[aria-label='Expand/Collapse']")[0];if(B1[i]!==undefined||D1[0]!==undefined||E1[0]!==undefined){if(D1.length>0){D1[0].setAttribute("aria-hidden","true");if(F1!==undefined){F1.setAttribute("aria-label",D1[0].title+" "+F1.title)}}if(E1.length>0){E1[0].setAttribute("aria-hidden","true");if(F1!==undefined){F1.setAttribute("aria-label",E1[0].title+" "+F1.title)}}}}}var G1=this.getSelectedKey();if(!!I.forceDisplayValueAsLabel&&V){this.setValue(G1);V=false;}if(G1){var H1=this.getSelectedItem()||{mProperties:{}};this.setTooltip(H1.mProperties.text||G1)}},t)});}else{var W=function(i){return{parts:[p,"/metadata/fields/"+F+"/type"],formatter:function(A1,T){var B1=s(A1,T);if(i){return d(this,B1)}return B1;}}};t=new sap.extent.uilib.SearchableComboBox({placeholder:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_NO_SELECTION"),editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},tooltip:this.setValueByCheckBlindnessSupport(W(true),""),enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},selectedKey:{parts:[p,n||"/metadata/fields/"+F],formatter:function(i,A1){return sap.extent.uilib.util.EditFormGeneratorHelper.getValue(i,A1);}},value:W(),width:w});if(T.toUpperCase()=="HRIS_FINDUSER"){t.setHideOpenButton(true);}}}break;case"DATE":var X={valueFormat:sap.extent.uilib.util.EditFormGeneratorHelper.DATE_FORMAT,displayFormat:sap.ui.getCore().getModel("i18n").getResourceBundle().getText("ECT_PP3_MMMDDYYYY"),displayFormatType:sap.ui.getCore().getModel("user").getProperty("/userLocaleIslamic"),editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},value:{parts:[{path:p},{path:"/metadata/fields/"+F+"/defaultValue"}],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardInputFormatter},width:w==sap.extent.uilib.util.EditFormGenerator.DEFAULT_INPUT_WIDTH?sap.extent.uilib.util.EditFormGenerator.DEFAULT_DATE_WIDTH:w,tooltip:{path:p,formatter:function(i){if(!i){return sap.ui.getCore().getModel("i18n").getResourceBundle().getText("DATETIME_NUMBER_FORMATS_ECT_PP3");}else{var A1=sap.extent.uilib.util.EditFormGeneratorHelper._oUIDateFormat.parse(i);return sap.extent.uilib.util.EditFormGeneratorHelper._oUIDateFormat.format(A1);}}}};var Y=sap.ui.getCore().getModel("user").getProperty("/userSecondaryLocale");if(Y){X.secondaryCalendarType=sap.ui.core.CalendarType.Islamic;X.displayFormatType=sap.ui.core.CalendarType.Gregorian;}t=new sap.sf.commons.DatePicker(X);if(I.writable){t.setPlaceholder(this._oBundle.getText("DATETIME_NUMBER_FORMATS_ECT_PP3"));}else{t.setPlaceholder(" - ");}var Z=sap.extent.uilib.util.CommonUtils.getInstance();t.addEventDelegate({onAfterRendering:jQuery.proxy(function(t){var i=t.getDomRef();if(i&&i.getAttribute("title")&&Z.getBlindnessSupport()){i.removeAttribute("title");}},this,t)});break;case"TIME":var $=new sap.ui.core.LocaleData(sap.ui.getCore().getConfiguration().getLocale());t=new sap.m.TimePicker({editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},value:{parts:[p,"/metadata/fields/"+F+"/hideSeconds"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.timePickerValueFormatter},displayFormat:q?{path:q}:{parts:["/metadata/fields/"+F+"/hideSeconds","/metadata/fields/"+F+"/twelveHourFormat"],formatter:function(i,A1){var B1="";if(i){B1=$.getTimePattern("short");}else{B1=$.getTimePattern("medium");}if(!A1){B1=B1.replace(/\a/gi,"");B1=B1.replace(/\h/gi,"H")}return B1;}},tooltip:{parts:[p,q?q:"","/metadata/fields/"+F+"/hideSeconds"],formatter:function(i,A1,B1){if(!A1){if(B1){A1=$.getTimePattern("short");}else{A1=$.getTimePattern("medium");}}if(!i){return A1;}var C1=sap.ui.core.format.DateFormat.getTimeInstance({pattern:A1});var D1=C1.parse(i);return C1.format(D1);}},placeholder:{path:P||"/metadata/fields/"+F+"/placeholder"},width:w});break;case"HOURSANDMINUTES":t=new sap.extent.uilib.HoursAndMinutes({editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},value:{path:p},tooltip:{path:p},placeholder:{path:P||"/metadata/fields/"+F+"/placeholder"},width:w});break;case"RADIO_BUTTON_GROUP":var a1=[];if(I.radioButtonsData){jQuery.each(I.radioButtonsData,function(i,A1){a1.push(new sap.m.RadioButton({text:A1.primaryDisplayText,customData:new sap.ui.core.CustomData({key:"id",value:A1.id})}));});}t=new sap.m.RadioButtonGroup({enabled:{path:k||"/metadata/fields/"+F+"/editable"},selectedIndex:{path:p,formatter:sap.extent.uilib.util.EditFormGeneratorHelper.radioButtonGroupFormatter},width:"100%",buttons:a1}).addStyleClass("sapSFAdminPPSettingRadioGroup");break;case"DATETIME":t=new sap.sf.commons.DateTimePicker({valueFormat:sap.extent.uilib.util.EditFormGeneratorHelper.DATETIME_FORMAT_ISO,editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},value:{path:p},displayFormat:q?{path:q}:{path:p,formatter:function(i){return sap.extent.uilib.util.EditFormGeneratorHelper._getUIDateTimeFormat();}},tooltip:{path:p,formatter:function(i){if(!i){return"";}else{var A1=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:sap.extent.uilib.util.EditFormGeneratorHelper._getUIDateTimeFormat()});return A1.format(new Date(i));}}},placeholder:{path:P||"/metadata/fields/"+F+"/placeholder"},width:w});break;case"DOUBLE":case"DECIMAL":case"LONG":case"NUMBER":case"INT":var b1=sap.ui.core.TextDirection;var c1=sap.ui.getCore().getConfiguration();var d1=pageHeaderJsonData.userLocale==="ar_SA";var e1=sap.ui.core.TextAlign;t=new sap.m.Input({editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},liveChange:function(i){sap.extent.uilib.util.EditFormGeneratorHelper.stripPercent(this);var A1={groupingSeparator:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_NumericGroupingSeperator"),decimalSeparator:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_DecimalPoint"),minusSign:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("ECT_PP3_NEGATIVESIGN"),groupingEnabled:I.hasOwnProperty("groupingEnabled")?I.groupingEnabled:true,parseAsString:true};var B1=null;if(T=="LONG"||T=="INT"){B1=sap.ui.core.format.NumberFormat.getIntegerInstance(A1,sap.ui.getCore().getConfiguration().getLocale());}else{B1=sap.ui.core.format.NumberFormat.getFloatInstance(A1,sap.ui.getCore().getConfiguration().getLocale());}var C1=B1.parse(this.getValue()).toString();var D1,E1,F1,G1,H1,I1=0;if(isNaN(C1)){this.setValueState(sap.ui.core.ValueState.Error);this.setValueStateText(sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_ERR_INVALID_NUMBER",I.label));}else if(C1&&C1.indexOf('.')>-1&&I.type==='DECIMAL'){D1=C1.split('.');E1=D1[0].length;F1=D1[1].length;if((E1>I.maxLength)||(F1>I.decimalPrecision)){if(E1>I.maxLength){D1[0]=D1[0].substring(0,I.maxLength);C1=D1[0]+'.'+D1[1];G1=I.maxLength;H1="EMPFILE_HRIS_DATA_LONG";I1++;}if(F1>I.decimalPrecision){C1=D1[0]+'.'+D1[1].substring(0,I.decimalPrecision);G1=I.decimalPrecision;H1="EMPFILE_HRIS_PRECISION_LONG";I1++;}this.setValueState(sap.ui.core.ValueState.Warning);if(I1===2){this.setValueStateText(sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("EMPFILE_HRIS_DECIMAL_PRECISION_LONG",[I.label,I.maxLength,I.decimalPrecision]));}else{this.setValueStateText(sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText(H1,[I.label,G1]));}var J1=this;if(this._liveChangeForNumber){clearTimeout(this._liveChangeForNumber);delete this._liveChangeForNumber;}this._liveChangeForNumber=setTimeout(function(){J1.setValue(B1.format(C1));J1.setValueState(sap.ui.core.ValueState.None);J1.setValueStateText("");},1000)}else{this.setValueState(sap.ui.core.ValueState.None);this.setValueStateText("");}}else if(C1.length>I.maxLength){this.setValueState(sap.ui.core.ValueState.Warning);this.setValueStateText(sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("EMPFILE_HRIS_DATA_LONG",[I.label,I.maxLength]));var J1=this;if(this._liveChangeForNumber){clearTimeout(this._liveChangeForNumber);delete this._liveChangeForNumber;}this._liveChangeForNumber=setTimeout(function(){J1.setValue(B1.format(C1.substring(0,I.maxLength)));J1.setValueState(sap.ui.core.ValueState.None);J1.setValueStateText("");},1000)}else{this.setValueState(sap.ui.core.ValueState.None);this.setValueStateText("")}},value:{parts:[{path:p,type:f(T,I)},{path:"/metadata/fields/"+F+"/defaultValue",type:f(T,I)}],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardInputFormatter},tooltip:{parts:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?"":[p],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardTooltipFormatter},type:sap.m.InputType.Text,textDirection:d1?b1.RTL:b1.LTR,textAlign:c1.getRTL()?e1.Right:e1.Left,width:w});break;case"TEXT":var f1=jQuery("html").hasClass("sapUiSizeCozy")?"sapUiSmallMarginTop":"sapUiTinyMarginTop";t=new sap.m.Text({text:{path:p+"/text"},width:"100%"}).addStyleClass(f1);break;case"ECTCALCFIELD":case"ECTAMOUNTPERCENTFIELD":if(!I.maxLength||(I.maxLength&&I.maxLength<=0)){I.maxLength=20;}t=new sap.extent.uilib.CalculatorField({maxLength:{path:M||"/metadata/fields/"+F+"/maxLength"},editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},liveChange:function(i){sap.extent.uilib.util.EditFormGeneratorHelper.stripPercent(this);},enabled:{path:k||"/metadata/fields/"+F+"/editable"},required:{path:R||"/metadata/fields/"+F+"/required"},value:{parts:[p],type:f(T,I),formatter:function(i){if(i){var A1=i.length-1;if(sap.ui.getCore().getConfiguration().getRTL()&&i[A1]===this._oBundle.getText("ECT_PP3_NEGATIVESIGN")){i=i.substr(A1)+i.substr(0,A1);}}return i;}},tooltip:{parts:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?"":[p],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardTooltipFormatter},type:sap.m.InputType.Text,width:w});t.setRowID(I.rowID);t.setValueType(I.valueType);break;case"ATTACHMENT":t=sap.extent.uilib.util.datatypehandler.ControlHandler.createInput(T,F,o,p);I.id=F;I.attachInput=t;break;case"TEXTAREA":t=new sap.m.TextArea({maxLength:{path:M||"/metadata/fields/"+F+"/maxLength"},editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},value:{parts:[p,"/metadata/fields/"+F+"/defaultValue"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardInputFormatter},width:"100%",rows:(I.rows&&I.rows>0)?I.rows:6});break;case"MODETEXTAREA":t=new sap.m.TextArea({maxLength:{path:M||"/metadata/fields/"+F+"/maxLength"},editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable"},required:{path:R||"/metadata/fields/"+F+"/required"},value:{path:p,type:new sap.ui.model.type.String(),formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardInputFormatter},width:w,rows:6});break;case"ECTSIMPLELINKFIELD":var g1=p;I["_sap.extent.uilib.util.EditFormGenerator.ActionDataPath"]=g1+"/actionData/urlInfo";t=new sap.m.Link({text:{path:g1+"/linkText"},href:{path:g1+"/actionData/urlInfo/url"},target:{path:g1+"/actionData/urlInfo/target",formatter:function(i){switch(i){case"same":return"_self";case"new":return"_blank";default:return"_self";}}},accessibleRole:I.accessibleRole?I.accessibleRole:sap.m.LinkAccessibleRole.Default,width:"100%"});if(I.hasOwnProperty("fontConfig")){var Z=sap.extent.uilib.util.CommonUtils.getInstance();Z.addClassesFromConfigForLabel(I.fontConfig.value,t);}break;case"TIMEBUTTON":var h1;if(I.ariaDescribedBy){h1=new sap.ui.core.InvisibleText({text:I.ariaDescribedBy}).toStatic();}var i1;if(I.ariaLabelledBy){i1=new sap.ui.core.InvisibleText({text:I.ariaLabelledBy}).toStatic();}t=new sap.m.Button({id:I.id,text:{path:"/metadata/fields/"+F+"/text"},type:I.buttonType,ariaHasPopup:I.ariaHasPopup,visible:{path:"/metadata/fields/"+F+"/visible"},icon:I.icon,tooltip:{path:"/metadata/fields/"+F+"/tooltip"},ariaDescribedBy:h1,ariaLabelledBy:i1});t._isTimeButton=true;if(I.styleClass){t.addStyleClass(I.styleClass);}break;case"BOOLEAN":var j1=sap.ui.getCore().getModel("i18n").getResourceBundle();t=new sap.extent.uilib.SFSwitch({customTextOn:j1.getText("COMMON_Yes"),customTextOff:j1.getText("COMMON_No"),stateAsString:{path:p,formatter:function(i){if(i===""){return null;}return i;}},enabled:{parts:[k||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},visible:!I.isHidden});t.addStyleClass("PP3SFSwitchTextStyle");break;case"CHECKBOX":t=new sap.m.CheckBox({selected:{path:p},enabled:{path:k||"/metadata/fields/"+F+"/editable"},editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter}});break;case"PAY_COMPONENT_PIRCHART":t=sap.ui.view({viewName:"sap.sf.peopleprofile.view.hris.block.CompensationCharts",type:sap.ui.core.mvc.ViewType.XML});var k1={};if(sap.ui.getCore().getModel("totalCompHistoryData")){k1=sap.ui.getCore().getModel("totalCompHistoryData").getData();}t.getController().updateModel(k1);break;case"WORKSCHEDULECOMBOBOX":var l1=function(i){return{path:p,formatter:function(A1,T){var B1=s(A1,T);if(i){return d(this,B1)}return B1;}}};t=new sap.extent.uilib.SearchableComboBoxWorkSchedule({effectiveDate:{path:"/metadata/fields/"+F+"/effectiveDate"},oldValueInternalId:{path:"/data/fields/"+F+"/oldValue/0/id"},tooltip:l1(true),placeholder:sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_NO_SELECTION"),editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable"},required:{path:R||"/metadata/fields/"+F+"/required"},selectedKey:{parts:[p,n||"/metadata/fields/"+F],formatter:function(i,A1){return sap.extent.uilib.util.EditFormGeneratorHelper.getValue(i,A1);}},value:l1(),workScheduleInternalId:{path:p+"/id"},manageWorkScheduleAllowed:{path:"/metadata/fields/"+F+"/manageWorkScheduleAllowed"},width:w});break;case"TIMEOFFBALANCE":var m1=I;m1.type="STRING";m1._parentMeta=T;var n1=sap.extent.uilib.util.EditFormGeneratorHelper.buildInput(F,m1,o,e,m,w,j,r);var o1=I.payableTimeAccounts;var p1=new sap.extent.uilib.LinkWithIcon({icon:"sap-icon://slim-arrow-right",text:sap.ui.getCore().getModel("i18n").getResourceBundle().getText("TIMEANDLABOR_ADMIN_MAKE_PAYOUT"),visible:{path:"/metadata/fields/"+F+"/hasPayableTimeAccounts"},press:function(i){if(o1&&o1.length>0){jQuery.sap.require("sap.sf.timemanagement.payoutAndPurchase.controls.PayoutCreationFormDialog");var A1=sap.ui.getCore().getModel("user").getProperty("/userId");var B1=o1[0];var C1=o1.map(function(H1){return H1.timeAccountExternalCode;});var D1=sap.ui.core.format.DateFormat.getDateInstance();var E1=D1.format(B1.terminationDate,true);var F1=D1.parse(E1);var G1=new sap.sf.timemanagement.payoutAndPurchase.controls.PayoutCreationFormDialog({currentScenario:"TERMINATE",timeAccountExternalCodes:C1,payout:{userId:A1,postingDate:F1,accrualSeparated:B1.balanceType==="ACCRUAL",timeAccountNav:{externalCode:B1.timeAccountExternalCode},accountTypeNav:{externalCode:B1.timeAccountTypeExternalCode}}});G1.open();}}}).addStyleClass("sapExtentUilibPayoutLinkWithIcon sapExtentUilibLinkWithIcon ");if(I.hasNotBookableTimeAccounts===true){var q1=sap.ui.getCore().getModel("i18n").getResourceBundle().getText("TIMEANDLABOR_TIME_ACCOUNT_NOT_BOOKABLE_ON_TERMINATION_DATE_BUT_TODAY");var r1=new sap.m.FormattedText({htmlText:q1});var s1=[n1,p1,r1];}else{var s1=[n1,p1];}var t1=new sap.ui.layout.VerticalLayout({width:"100%",content:s1});return t1;case"TIMEOFFWORKSCHEDULE":var u1=I;u1.type="WORKSCHEDULECOMBOBOX";u1._parentMeta=T;var v1=sap.extent.uilib.util.EditFormGeneratorHelper.buildInput(F,u1,o,e,m,w,j,r);v1.addStyleClass("sapExtentUilibSearchableComboBoxWorkSchedule");var w1=new sap.m.Button({text:sap.ui.getCore().getModel("i18n").getResourceBundle().getText("TIMEANDLABOR_WSF_UI_DETAILS"),visible:{path:p,formatter:sap.extent.uilib.util.EditFormGeneratorHelper.workscheduleDetailsVisibilityFormatter},press:[sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._openWSDetails,v1]}).addStyleClass("sapExtEntUilibWorkScheduleDetails");var x1=new sap.ui.layout.HorizontalLayout({width:"100%",content:[v1,w1]});var y1=new sap.m.Button({type:"Transparent",text:sap.ui.getCore().getModel("i18n").getResourceBundle().getText("TIMEANDLABOR_WSF_UI_FIND_A_WORKSCHEDULE"),visible:{path:"/metadata/fields/"+F+"/manageWorkScheduleAllowed"},press:[sap.extent.uilib.SearchableComboBoxWorkSchedule.prototype._openWSFinder,v1]}).addStyleClass("sapExtEntUilibFindWorkSchedule");var z1=new sap.ui.layout.VerticalLayout({width:"100%",content:[x1,y1],visible:{parts:sap.extent.uilib.util.EditFormGeneratorHelper.getVisibilityBindingPaths(F),formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardVisibilityFormatter}});return z1;case"PAYGROUP":return sap.extent.uilib.util.PayGroupPopup.getField(F,I,o,e,m,w,j,r);default:t=new sap.m.Input({maxLength:{path:M||"/metadata/fields/"+F+"/maxLength"},editable:{parts:[E||"/metadata/fields/"+F+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},enabled:{path:k||"/metadata/fields/"+F+"/editable",formatter:sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter},required:{path:R||"/metadata/fields/"+F+"/required"},value:{parts:[{path:p,type:new sap.ui.model.type.String()},{path:"/metadata/fields/"+F+"/defaultValue",type:new sap.ui.model.type.String()}],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardInputFormatter},tooltip:{parts:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?"":[p],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardTooltipFormatter},placeholder:{path:P||"/metadata/fields/"+F+"/placeholder"},type:sap.m.InputType.Text,width:w});v="new-password";}if(I.type==="HIDDEN"&&typeof t.setVisible==="function"){t.setVisible(false);}if(t instanceof sap.m.InputBase&&typeof t.setValueState==="function"){t.bindProperty("valueState",{path:n?n+"/valueState":"/metadata/fields/"+F+"/valueState"});}sap.extent.uilib.util.EditFormGeneratorHelper.addCustomData(F,I,e,m,t);if(I.required&&typeof t.setValueStateText==="function"){t.setValueStateText(sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_ERR_DATA_REQUIRED",[I.label]));}if(j&&typeof j==="function"){j(t,F,I,o,e,m,w,r);}t.addDelegate({onfocusin:function(i){this.setAutoCompleteAttribute(t,v);}.bind(this),onsapfocusleave:function(i){this.setAutoCompleteAttribute(t,'off');}.bind(this)});return t;};sap.extent.uilib.util.EditFormGeneratorHelper.setValueByCheckBlindnessSupport=function(v,V){return pageHeaderJsonData&&pageHeaderJsonData.accessibilityPreferences&&pageHeaderJsonData.accessibilityPreferences.blindnessSupport?V:v;};sap.extent.uilib.util.EditFormGeneratorHelper.setAutoCompleteAttribute=function(i,A){if(!i||!A)return;var F=i.getFocusDomRef();if(F){var $=jQuery(F);if($&&$.is(':input')){$.attr('autocomplete',A);}}};sap.extent.uilib.util.EditFormGeneratorHelper.stripPercent=function(i){var v=i.getValue();var r=new RegExp(/\%/g);if(r.test(v)){i.setValue(v.replace(/\%/g,""));}};sap.extent.uilib.util.EditFormGeneratorHelper.radioButtonGroupFormatter=function(I){var e=-1,B=this.getButtons();jQuery.each(B,function(i,o){var C=o.getCustomData();var j=C.length>0?C[0]:null;if(j&&j.getKey()==="id"&&j.getValue()===I){e=i;return;}});return e;};var s=sap.extent.uilib.util.EditFormGeneratorHelper.searchableComboBoxValueFormatter=function(v,t){if(v&&typeof v==="object"){return v.primaryDisplayText||v.userDisplayValue||v.label||v.name||"";}else if(typeof v==="string"&&t=="USERINFOMETADATAOPTIONS"){return v;}return undefined;};sap.extent.uilib.util.EditFormGeneratorHelper.timePickerValueFormatter=function(v,H){if(!v){return"";}var p;if(H){p=sap.extent.uilib.util.EditFormGeneratorHelper.TIME_FORMAT_NO_SECONDS;}else{p=sap.extent.uilib.util.EditFormGeneratorHelper.TIME_FORMAT;}var m=sap.ui.core.format.DateFormat.getTimeInstance({pattern:p},new sap.ui.core.Locale("en_US"));var o=m.parse(v);return m.format(o);};sap.extent.uilib.util.EditFormGeneratorHelper.workscheduleDetailsVisibilityFormatter=function(v){if(v){return true;}else{return false;}};sap.extent.uilib.util.EditFormGeneratorHelper.addCustomData=function(F,i,e,m,I){sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(I,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_ID_KEY,F);sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(I,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_MAIN_GROUP_ID_INDEX,m);sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(I,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_META_INDEX,i);sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(I,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_GROUP_NUMBER_INDEX,e);sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(I,sap.extent.uilib.util.EditFormGeneratorHelper.MAX_LENGTH_REACHED,false);sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(I,"help-id",F,true)};sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent=function(C,k,v,w){C.addCustomData(new sap.ui.core.CustomData({key:k,value:v,writeToDom:!!w}));};sap.extent.uilib.util.EditFormGeneratorHelper.buildInputForDebug=function(F,i,e,r){var B=new sap.m.Button({icon:"sap-icon://sys-find",tooltip:"Debug",type:sap.m.ButtonType.Transparent,press:jQuery.proxy(function(F,e,r,C){var o=new jQuery.Deferred();var j=[];if(e){var k=[];sap.extent.uilib.util.EditFormGenerator.prototype._getTableData(C.getSource().getParent().getParent(),k);j=sap.sf.peopleprofile.model.pp3core.DWRConverter.convertODataToDWRData({fieldGroups:k});for(var x=0;x<j[0].fieldsData.length;x++){if(parseInt(r)!==x){j[0].fieldsData.splice(x,1)}}}var l=sap.ui.getCore().getModel("user").getProperty("/sessionId");var m=C.getSource().getModel().getProperty('/blockType');var I=C.getSource();this.busyLoading=new sap.extent.uilib.util.BusyLoading();this.busyLoading.show(o);sap.sf.peopleprofile.model.hris.DWRNewHireAdapter.getFieldTraceFromFieldId(o,l,m,F,j);o.done(function(n){var p=[];var q;for(var t in n){var u=[];var t=n[t];if(t.hasOwnProperty("additionalInfo")&&(t.additionalInfo!==null)){var v=t.additionalInfo;var w=[];for(var y in v){w.push(new sap.m.DisplayListItem({label:y,value:v[y]}));}q=new sap.m.List({headerText:t.stepName,items:[w]});}else{u.push(new sap.m.StandardListItem({title:t.value}));q=new sap.m.List({headerText:t.stepName,items:[u]});}p.push(q)}var P=new sap.m.Popover({title:"Field Trace",verticalScrolling:true,content:[p]});P.openBy(I);});},this,F,e,r)});B.addEventDelegate({onAfterRendering:jQuery.proxy(function(I){!I.getModel().getProperty("/blockType")&&I.setVisible(false);},this,B)});return new sap.ui.layout.HorizontalLayout({content:[i,B]})};sap.extent.uilib.util.EditFormGeneratorHelper._buildInputWithContext=function(F,i,I,e,m,j,r){I.editablePath=I.editablePath?I.editablePath:"/metadata/fields/"+F+"/writable";I.enabledPath=I.enabledPath?I.enabledPath:"/metadata/fields/"+F+"/editable";I.itemsPath=I.itemsPath?I.itemsPath.replace("/selectOptions","/primaryFieldMeta/selectOptions"):"/metadata/fields/"+F+"/primaryFieldMeta/selectOptions";i.primaryFieldMeta.contextMeta=i.contextMeta;i.primaryFieldMeta.onChange=i.onChange;i.primaryFieldMeta.writable=i.writable;i.primaryFieldMeta.required=i.required;i.primaryFieldMeta.resolver=i.resolver;var o="/metadata/fields/"+F+"/contextMeta/objectType";var t="/metadata/fields/"+F+"/type";if(!I){o="contextMeta/objectType";t="type";}var C="/metadata/fields/"+F+"/contextMeta/permission/create";var p=sap.extent.uilib.util.EditFormGeneratorHelper.buildInput(F,i.primaryFieldMeta,I,e,m,null,j,r);var P=I.path||"/data/fields/"+F+"/value/0";var B="/metadata/fields/"+F+"/primaryFieldMeta/searchOptions/baseElement";var k="/metadata/fields/"+F+"/primaryFieldMeta/id";var E=new sap.m.Button({type:sap.m.ButtonType.Transparent,enabled:{parts:[I.editablePath,P],formatter:function(q,S){if(sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(S)){return q;}else{return true;}}},visible:{parts:[t,o,P,B,C,k],formatter:function(t,O,S,B,C,F){if(F==="jobInfo-position"&&sap.ui.Device.system.phone){return false;}if((C===false||O==="OrgChart")&&sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(S)){return false;}if(B&&B.startsWith("EmployeeTime")){return false;}return true;}},icon:{parts:[t,o,P],formatter:function(t,O,S){if(t==="LOCALIZED"){return"sap-icon://world";}if(O==="OrgChart"){return"sap-icon://org-chart";}if(sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(S)){return"sap-icon://add";}return"sap-icon://documents";}},tooltip:{parts:[t,o,P],formatter:function(t,O,S){var b=sap.ui.getCore().getModel("i18n").getResourceBundle();if(O==="OrgChart"){return!!b?b.getText("ORGCHART_VIEW_ORGCHART"):"";}if(t==="LOCALIZED"){return b.getText("ECT_PP3_QUICKCARD_TRANSLATION_BUTTON_TOOLTIP_EDIT",i.label);}if(sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(S)){return b.getText("ECT_PP3_QUICKCARD_ADD_BUTTON_TOOLTIP",i.label);}return b.getText("ECT_PP3_QUICKCARD_VIEW_BUTTON_TOOLTIP",i.label);}}});E.addStyleClass("sapExtentUilibUtilEditFormGeneratorFieldWithContextButton");p.attachValidationError(function(q){var u=q.getParameter("bFieldEmpty");var v=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(q.getSource());if(E.getIcon()!="sap-icon://org-chart"&&E.getIcon()!="sap-icon://world"){if(u){if(v&&v.contextMeta&&v.contextMeta.permission&&v.contextMeta.permission.create){E.setIcon("sap-icon://add");}else{E.setVisible(false);}}else{if(v){E.setIcon("sap-icon://documents");}else{E.setVisible(false);}}}});p._hasContext=true;var l=[p,E];if(!(window.smrfLazyLoader&&window.smrfLazyLoader.ECTOrgChartView)&&i.contextMeta&&i.contextMeta.objectType==="OrgChart"){l.splice(1,1)}var n=new sap.ui.layout.HorizontalLayout({content:l});return n;};sap.extent.uilib.util.EditFormGeneratorHelper.buildField=function(F,m,w,o,e,j,u,I,k,r){if(o&&o.type==="multipleRelation"&&o.maxRows>1){return sap.extent.uilib.util.EditFormGeneratorHelper.buildInput(F,o,{},j,m,w,I,r);}var C=[];var l=sap.extent.uilib.util.EditFormGeneratorHelper.buildLabel(F,"/metadata/fields/"+F+"/label","/metadata/fields/"+F+"/required",o);var n=sap.extent.uilib.util.EditFormGeneratorHelper.buildInputs(F,m,w,o,e,j,I,r);if(l&&n[0]){l.setLabelFor(n[0].getIdForLabel());if(o&&o.type==="ATTACHMENT"){n[0]._getFileUploader&&n[0]._getFileUploader().addAriaLabelledBy(l.getId());}}var H=null;if(k){H=new sap.m.HBox();H.addItem(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));H.addItem(l);}if(o.hasOwnProperty("helpText")&&o.helpText){H=H||new sap.m.HBox();var B=sap.ui.getCore().getModel("i18n").getResourceBundle();var p=sap.extent.uilib.util.HelpManager.createHelpIcon(B.getText("ECT_HELP_LINK",o.label),"sapExtentUilibHelpTextIcon");p.setVisible(!o.isHidden);sap.extent.uilib.util.HelpManager.registerHelpElement(p,o.helpText,null,F);sap.extent.uilib.util.EditFormGeneratorHelper.addCustomData(F,o,"","",p);if(!k){H.addItem(l);}H.addItem(p);}if(H){C.push(H);}else{C.push(l);}if(sap.ui.getCore().getModel("user")&&sap.ui.getCore().getModel("user").getProperty("/isDebugEnabled")){var q=sap.extent.uilib.util.EditFormGeneratorHelper.buildInputForDebug(F,n);C=C.concat(q);}else{C=C.concat(n);}if(e&&e.oldValue&&F!=="jobInfo-movePositionWithSupervisor"){if(u){for(var i=0;i<e.oldValue.length;i++){C.push(new sap.extent.uilib.ConfigurableLabel({isRenderedInEditForm:true,oldValue:{parts:["/data/fields/"+F+"/oldValue/0","/data/fields/"+F+"/value/0","/metadata/fields/"+F],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardOldValueFormatter},otherValue:{parts:["/data/fields/"+F+"/otherValue/0","/data/fields/"+F+"/value/0","/metadata/fields/"+F],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardOldValueFormatter}}));}}}var t=new sap.ui.layout.VerticalLayout({content:C,visible:{parts:sap.extent.uilib.util.EditFormGeneratorHelper.getVisibilityBindingPaths(F),formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardVisibilityFormatter},width:"100%"});t.addStyleClass("sapExtentUilibUtilEditFormGeneratorField");var v=function(){var y=l&&l.getVisible&&l.getVisible();var z=false;for(var i=0;i<n.length;i++){var x=n[i];z=(x&&x.getVisible&&x.getVisible());if(z){break;}}if(!y&&!z){t.addStyleClass('hidden');}else{t.removeStyleClass('hidden');}};t.addEventDelegate({onAfterRendering:v});l&&l.addEventDelegate&&l.addEventDelegate({onAfterRendering:v});for(var i=0;i<n.length;i++){var x=n[i];x&&x.addEventDelegate&&x.addEventDelegate({onAfterRendering:v});}return t;};sap.extent.uilib.util.EditFormGeneratorHelper.getVisibilityBindingPaths=function(F){return["/metadata/fields/"+F+"/visible","/metadata/fields/"+F+"/"+sap.extent.uilib.util.EditFormGenerator.DETAILS_VISIBILITY_PROPERTY,"/metadata/fields/"+F+"/"+sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY];};sap.extent.uilib.util.EditFormGeneratorHelper.isReadOnlySecurityField=function(F){return(F==sap.extent.uilib.util.EditFormGeneratorHelper.ATTACHMENT_HASH||F==sap.extent.uilib.util.EditFormGeneratorHelper.UUID||F==sap.extent.uilib.util.EditFormGeneratorHelper.RECORD_HASH);};sap.extent.uilib.util.EditFormGeneratorHelper.buildInputs=function(F,m,w,I,o,e,j,r){var k=[];if(F&&I&&o){var v=o.value;if(v){for(var i=0;i<v.length;i++){if(I.type&&I.type.toUpperCase()=="EDUMULTIPLERELATION"){I.valueLen=v[0].defaultValue.length;}}k.push(sap.extent.uilib.util.EditFormGeneratorHelper.buildInput(F,I,{},e,m,w,j,r));}}return k;};sap.extent.uilib.util.EditFormGeneratorHelper.buildLabel=function(F,l,p,m){var i=F&&(F.indexOf("-uuid")>-1||F.indexOf("record-hash")>-1);var e=i?m.isHidden:!(m.isHidden||m.type==='HIDDEN');var L=new sap.m.Label({text:{path:l||""},tooltip:{path:l||""},required:{path:p||""},width:"100%",visible:e,wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated});if(m.hasOwnProperty("fontConfig")){var C=sap.extent.uilib.util.CommonUtils.getInstance();C.addClassesFromConfigForLabel(m.fontConfig.label,L);}return L;};sap.extent.uilib.util.EditFormGeneratorHelper.buildFlowLayout=function(m){return sap.extent.uilib.util.EditFormGeneratorHelper.buildLayoutByRenderStyle(m,"flow");};sap.extent.uilib.util.EditFormGeneratorHelper.buildAlternateSectionsLayoutGroups=function(A,e){var G=[];if(A.fieldGroups){for(var i=0;i<A.fieldGroups.length;i++){var o=A.fieldGroups[i];var j="alternateFieldsSet"+i;var k={elementId:e,group:{id:null,renderStyle:"panel",items:[]},id:j,maxFieldsToShow:10};if(o.metadata&&o.metadata.fields){k.group.items.push(sap.extent.uilib.util.EditFormGeneratorHelper.buildFormLayout(o.metadata));}G.push(k);}}return G;};var _=0;var D='detailsBtn_';var h='_detailsBtn_altSection_';sap.extent.uilib.util.EditFormGeneratorHelper.createDetailsButton=function(m,e,p,P,C){var j=this;var k=sap.extent.uilib.util.EditFormGeneratorHelper.getFieldsCount(m);var l=k>m.maxFieldsToShow?(k-m.maxFieldsToShow>sap.extent.uilib.util.EditFormGeneratorHelper.SHOW_HIDE_THRESHOLD?true:false):false;if(m.hasOwnProperty("maxFieldsToShow")&&l&&!m.hasOwnProperty("showDetailsLink")){var n=k-m.maxFieldsToShow;var B=P.alternateSection?("_"+_+h+m.id):(D+_);_++;var o=new sap.m.Button(B,{type:sap.m.ButtonType.Default,text:this._getMoreLessBtnText(false,n),press:[function(E){var o=E.getSource();var q=!o.getCustomData()[0].getValue();var M=o.getParent().getModel();var r=M.getData();var t=o.getId();var A=t.slice(t.indexOf(h)+h.length);var u;var v;var F=[];if(A){var w=r.metadata.alternateSections.fieldGroups;w&&w.some(function(N,O){if(N.id==A){u=N.maxFieldsToShow;F=N.fieldsOrder.slice(O);return true;}});}else{u=M.getProperty("/metadata/maxFieldsToShow");var x=M.getProperty("/metadata/fieldsOrder");var L=M.getData().layout;if(r.id==="PERSON_GLOBAL_INFO"){var G=r.data&&r.data.fields&&r.data.fields.country&&r.data.fields.country.cascadeChildren;G=G&&G.editLayoutConfigurations;L=G&&G.group?G.group:L;}var y=[];var z=0;var H=M.getData().metadata;if(H.hasOwnProperty("fieldsOrder")&&H.hasOwnProperty("maxFieldsToShow")){if(L){L=L.items;for(var I=0,J=L.length;I<J;I++){for(var i=0;i<L[I].details.items.length;i++){if(H.fields[L[I].details.items[i].id]){y.push(L[I].details.items[i].id);}}}F=y.slice();}else{F=x.slice();}}}for(var K=u,z=F.length;K<z;K++){var v="/metadata/fields/"+F[K]+"/"+sap.extent.uilib.util.EditFormGenerator.DETAILS_VISIBILITY_PROPERTY;if(M.getProperty(v)!==undefined){M.setProperty(v,q);}}setTimeout(function(){var N=o.getParent();var O=N.getContent()[0];var Q=O.getContent();var R=Q[q?u:(u-1)];if(R){R.focus();var S=R.getDomRef();if(S){var T=jQuery('input',S);if(T&&T.length>0){T[0].focus();}}var U=jQuery(".sapExtentUilibUploadCollection",S);if(U&&U.length===1){var V=jQuery("button",U);if(V&&V.length>0){V[0].focus();}}}},0);o.setText(this._getMoreLessBtnText(q,n));o.getCustomData()[0].setValue(q);setTimeout(resizeFieldInTheDialog,0)},this]});o.addStyleClass("sapExtentUilibUtilEditFormGeneratorShowMoreLessButton");sap.extent.uilib.util.EditFormGeneratorHelper.addCustomDataForComponent(o,"expanded",false);}else if(m.hasOwnProperty("showDetailsLink")){var o=new sap.m.Button({type:sap.m.ButtonType.Default,text:this._oBundle.getText(e?"ECT_PP3_EDIT_DETAILS":"COMMON_Details")}).addStyleClass("sapExtentUilibUtilDetailsBtn");o.attachPress(p,C);}return o;};sap.extent.uilib.util.EditFormGeneratorHelper._getUIDateTimeFormat=function(){var l=new sap.ui.core.LocaleData(sap.ui.getCore().getConfiguration().getLocale());var t=l.getTimePattern("medium");var e=l.getDatePattern("medium");var i=l.getDateTimePattern("medium");return i.replace("{0}",t).replace("{1}",e);};sap.extent.uilib.util.EditFormGeneratorHelper._getMoreLessBtnText=function(i,n){if(i===false){var e=this._oBundle.getText("ECT_PP3_SHOW_MORE_FIELDS",[n]);}else{var e=this._oBundle.getText("ECT_PP3_SHOW_LESS_FIELDS",[n]);}return e;};sap.extent.uilib.util.EditFormGeneratorHelper.buildFormLayout=function(m){return sap.extent.uilib.util.EditFormGeneratorHelper.buildLayoutByRenderStyle(m,"form");};sap.extent.uilib.util.EditFormGeneratorHelper.buildLayoutByRenderStyle=function(m,r){var l={};l.id="group-1";l.type="group";l.details={};l.details.items=[];l.details.renderStyle=r;if(m.hasOwnProperty("fieldsOrder")){for(var e=0,i=m.fieldsOrder.length;e<i;e++){l.details.items.push({"id":m.fieldsOrder[e]});}return l;}if(m.hasOwnProperty("fields")){for(var F in m.fields){l.details.items.push({"id":F});}return l;}if(jQuery.isArray(m)){jQuery.each(m,function(j,k){l.details.items.push({'id':k.id});});return l;}};sap.extent.uilib.util.EditFormGeneratorHelper.buildDefaultPanelLayout=function(m){var l={};l.renderStyle="panel";l["items"]=[];l["items"].push(sap.extent.uilib.util.EditFormGeneratorHelper.buildFormLayout(m));return l;};sap.extent.uilib.util.EditFormGeneratorHelper.standardInputFormatter=function(v,e){if(v){return sap.extent.uilib.util.EditFormGeneratorHelper.getValueFromDataForSTDInpFormatter(v)}else if(e){if(this.getBinding&&this.getBinding("value")&&this.getBinding("value").getBindings().length){this.getBinding("value").getBindings()[0].setValue(e)}return sap.extent.uilib.util.EditFormGeneratorHelper.getValueFromDataForSTDInpFormatter(e)}else{return"";}};sap.extent.uilib.util.EditFormGeneratorHelper.getValueFromDataForSTDInpFormatter=function(v){if(typeof v==="object"){return v.label||v.name||v.value||"";}if(typeof v==="string"&&v!=="NaN"){return v;}};sap.extent.uilib.util.EditFormGeneratorHelper.standardTooltipFormatter=function(v){return sap.extent.uilib.util.EditFormGeneratorHelper.standardInputFormatter(v);};sap.extent.uilib.util.EditFormGeneratorHelper.standardVisibilityFormatter=function(v,e,C){var i=true;if(e!==undefined&&typeof e==="boolean"){i=e;}var j=true;if(C!==undefined&&typeof C==="boolean"){j=C;}var k=true;if(typeof v==="string"){k=v!=="none"&&v!=="false";}else if(typeof v==="boolean"){k=v;}return k&&i&&j;};sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter=function(p,e){if(typeof p==="boolean"&&!p){return false;}return e;};sap.extent.uilib.util.EditFormGeneratorHelper.formatDateForDisplay=function(v){var e=new Date(parseInt(v.substring(0,4),10),parseInt(v.substring(5,7),10)-1,parseInt(v.substring(8,10),10));return sap.extent.uilib.util.EditFormGeneratorHelper._oUIDateFormat.format(new Date(e));};sap.extent.uilib.util.EditFormGeneratorHelper.calcFieldFormatter=function(o,C,m){var t=m.type;if(t==="ECTCALCFIELD"){return sap.extent.uilib.util.EditFormGeneratorHelper.calculatorFieldFormatter(o,C,true);}return"";};sap.extent.uilib.util.EditFormGeneratorHelper.standardOldValueFormatter=function(o,C,m){if(!m||m.type=="HIDDEN"){return"";}var t=m.type;if(sap.extent.uilib.util.EditFormGeneratorHelper._compareValueField(o,C,t)||((typeof o!=="boolean")&&!o)){return"";}if((t==="PICKLISTAUTOCOMPLETE"||t==="CASCADE"||t==="SELECT")&&m.selectOptions&&(m.selectOptions.length>0)){if(o===""){return"";}if(typeof o==="object"&&o.hasOwnProperty("value")&&o.value){o=o.value;}for(var i=0;i<m.selectOptions.length;i++){if(m.picklistId=="ecEmailType"){if(m.selectOptions[i].value==o){o=m.selectOptions[i].label;break;}}else if(m.selectOptions[i].value===o){o=m.selectOptions[i].label;break;}}}else if(t==="USER"){if(C==null||o!=null){return o.primaryDisplayText||o.name;}if(C==null||o==null){return"";}if(C.id===o.id){return"";}return o.primaryDisplayText||o.name;}if(t==="ECTCALCFIELD"){return sap.extent.uilib.util.EditFormGeneratorHelper.calculatorFieldFormatter(o,C,false);}if(t==="DATE"){return sap.extent.uilib.util.EditFormGeneratorHelper.formatDateForDisplay(o)}if(t==="BOOLEAN"){if(o){return sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_Yes");}return sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_No");}return sap.extent.uilib.util.EditFormGeneratorHelper.standardInputOldFormatter(o);};sap.extent.uilib.util.EditFormGeneratorHelper.calculatorFieldFormatter=function(o,C,S){var F="";var e=sap.extent.uilib.util.EditFormGeneratorHelper.getDecimalFormatSymbols();var i=sap.ui.core.format.NumberFormat.getFloatInstance(e);var j=sap.extent.uilib.util.CommonUtils.getInstance();var k=new RegExp("\\"+e.groupingSeparator,"g");var O=o?o.replace(k,""):"";C=C?C.replace(k,""):"";O=j.formatNegativeNumberRTLtoLTR(O,"NUMBER");C=j.formatNegativeNumberRTLtoLTR(C,"NUMBER");var v=i.parse(O);C=i.parse(C);if(S){var l=C-v;if(v!=0){F=((l)/v*100);if(F!=0){F=F.toFixed(2);var m=sap.ui.core.format.NumberFormat.getFloatInstance(e,sap.ui.getCore().getConfiguration().getLocale());F=m.format(F)+"%";}else{F="";}}}else{F=o;}return F;};sap.extent.uilib.util.EditFormGeneratorHelper.standardInputOldFormatter=function(v){if(typeof v==="boolean"){if(v){return sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_Yes");}else{return sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("COMMON_No");}}if(v){if(typeof v==="object"){if(v.primaryDisplayText){return v.primaryDisplayText;}else if(v.userDisplayValue){return v.userDisplayValue;}else if(v.name&&v.value){return v.name+"("+v.value+")";}else{return v.label||v.name||v.value||"";}}if(typeof v==="string"&&v!=="NaN"){return v;}}else{return"";}};sap.extent.uilib.util.EditFormGeneratorHelper.defaultUndefinedToTrueEnabledFormatter=function(v){if(typeof v==="undefined"){return true;}return v;};sap.extent.uilib.util.EditFormGeneratorHelper.defaultEnabledFormatter=function(v){if(typeof v==="boolean"){return!v;}return true;};sap.extent.uilib.util.EditFormGeneratorHelper._compareValueField=function(v,V,t){switch(t){case"DOUBLE":case"LONG":if(v&&V){return v==V;}break;default:break;}if(typeof v===typeof V){if(typeof v==="string"||typeof v==="number"){return v==V;}if(typeof v==="object"&&v!=null&&V!=null){if((v.hasOwnProperty("value")&&V.hasOwnProperty("value")&&v.value==V.value)||(v.hasOwnProperty("id")&&V.hasOwnProperty("value")&&v.id==V.value)||(v.hasOwnProperty("value")&&V.hasOwnProperty("id")&&v.value==V.id)||(v.hasOwnProperty("id")&&V.hasOwnProperty("id")&&v.id==V.id)){return true;}return false;}}else{var m=false;if(typeof v==="string"&&typeof V==="object"){for(var F in V){if(v==V[F]){m=true;}}return m;}if(typeof V==="string"&&typeof v==="object"){for(var F in v){if(V==v[F]){m=true;}}return m;}}return false;};sap.extent.uilib.util.EditFormGeneratorHelper.getInputFromFieldLayout=function(F){var I=null;if(F&&F instanceof sap.ui.layout.VerticalLayout){var C=F.getContent();for(var i=0;i<C.length;i++){if(C[i]instanceof sap.m.InputBase){return C[i];}if(C[i]instanceof sap.ui.layout.HorizontalLayout){var e=C[i].getContent();if(e[0]instanceof sap.m.InputBase){return e[0];}}}}return I;};sap.extent.uilib.util.EditFormGeneratorHelper.getInputValue=function(i){if(i instanceof sap.extent.uilib.SFSwitch){return i.getStateAsString();}if(i instanceof sap.sf.commons.DateTimePicker){v=i.getDateValue();if(v){var e=sap.extent.uilib.util.EditFormGeneratorHelper._oDateTimeFormat.format(v);e=e.charAt(e.length-1)=="Z"?e:e+"Z";return e;}}if(i instanceof sap.extent.uilib.HoursAndMinutes){return i.getValue();}if(i instanceof sap.sf.commons.DatePicker){var v=i.getDateValue();if(v){return sap.extent.uilib.util.EditFormGeneratorHelper._oDateFormat.format(v);}return i.getValue();}if(i instanceof sap.sf.surj.shell.controls.SearchInput){var S;if(i.getBinding("value")&&i.getValue()){S=i.getBinding('value').getValue()[0];}var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(i);return sap.extent.uilib.util.EditFormGeneratorHelper.getValue(S,m);}if(i instanceof sap.m.ComboBox){var j=i.getSelectedKey();var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(i);return sap.extent.uilib.util.EditFormGeneratorHelper.getValue(j,m);}if(i instanceof sap.m.Input){if(i.getBinding("value")&&i.getBinding("value").getType()&&i.getValue()!==""){var t=i.getBinding("value").getType();var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(i);if(t instanceof sap.ui.model.type.Float||t instanceof sap.ui.model.type.Integer){if(m.module&&m.module=="empprofile"){return i.getValue();}else{return i.getBinding("value").getValue();}}}return i.getValue();}if(i instanceof sap.m.TextArea){return i.getValue();}if(i instanceof sap.m.TimePicker){v=i.getDateValue();if(v){var p;var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(i);if(m.hideSeconds){p=sap.extent.uilib.util.EditFormGeneratorHelper.TIME_FORMAT_NO_SECONDS;}else{p=sap.extent.uilib.util.EditFormGeneratorHelper.TIME_FORMAT;}return sap.ui.core.format.DateFormat.getTimeInstance({pattern:p}).format(v);}else{return"";}}if(i instanceof sap.m.RadioButtonGroup){var k=i.getSelectedButton();var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(i);return sap.extent.uilib.util.EditFormGeneratorHelper.getValue(k,m);}if(i instanceof sap.m.CheckBox){return i.getSelected();}if(i instanceof sap.m.UploadCollection){return i.getInputValue();}if(i instanceof sap.extent.uilib.AttachmentButton){return i.getBinding("text")&&i.getBinding("text").getValue();}};sap.extent.uilib.util.EditFormGeneratorHelper.setBindingValue=function(B,p,v,m){if(B instanceof sap.ui.model.CompositeBinding){var e=B.getBindings();for(var i=0;i<e.length;i++){var C=e[i];var P=C.getPath();if(C.getContext()){P=C.getContext().getPath()+"/"+P;}if(P.indexOf("/"+p)>-1){B=C;break;}}}B.setValue(sap.extent.uilib.util.EditFormGeneratorHelper.setValue(v,m));};sap.extent.uilib.util.EditFormGeneratorHelper.setValue=function(v,m){var F;if(m.type==="FIELD_WITH_CONTEXT"&&m.primaryFieldMeta){m=m.primaryFieldMeta;}var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m);switch(t){case"STRING":case"DATE":case"TIME":case"DATETIME":case"LONG":case"INT":case"DOUBLE":case"DECIMAL":case"BOOLEAN":case"NUMBER":case"TEXTAREA":case"CHECKBOX":case"MDFPIIFIELD":case"MDFRALFIELD":case"HOURSANDMINUTES":case"AUTO_NUMBER":case"HIDDEN":F=v;break;case"ECTCALCFIELD":case"ECTAMOUNTPERCENTFIELD":if(sap.sf.peopleprofile.model.pp3core.DWRJSONUtils.isJSON(v)){F=sap.sf.peopleprofile.model.pp3core.DWRJSONUtils.parseJSON(v).value;m.valueType=v.type;}else if(typeof v=="object"&&v!=null){F=v.value;m.valueType=v.type;}else{F=v;}break;case"FOUNDATION_AUTOCOMPLETE":case"WORKSCHEDULECOMBOBOX":case"ECTFIELDWITHCUSTOMCONTEXT":case"USER":if(!v){F=null;}else if(typeof v==="object"){F=v;if(t==="USER"&&!F.id){F.id=v.userId;}}else{F={id:v,value:v};}break;case"SELECT":case"RADIO_BUTTON_GROUP":case"ATTACHMENT":F=v;break;case"HRIS_FINDUSER":if(!v){F=null;}else if(typeof v==="object"){F=v;if(t==="HRIS_FINDUSER"&&!F.id){F.id=v.userId;}}else{F={userId:v};}break;default:if(typeof v==="object"){F=v;}else{F={value:v};}break;}return F;};sap.extent.uilib.util.EditFormGeneratorHelper.getValue=function(v,m){if(!v||!m){return"";}if(m.type==="FIELD_WITH_CONTEXT"&&m.primaryFieldMeta){m=m.primaryFieldMeta;}var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m);switch(t){case"DATE":if(v&&(typeof v!=="string")){return sap.extent.uilib.util.EditFormGeneratorHelper._oDateFormat.format(v);}return v;case"STRING":case"LONG":case"DOUBLE":case"DECIMAL":case"BOOLEAN":case"NUMBER":case"ECTAMOUNTPERCENTFIELD":case"TEXTAREA":case"CHECKBOX":return v;case"ATTACHMENT":if(typeof v==="object"){return v.attachmentId;}return v;case"FOUNDATION_AUTOCOMPLETE":case"WORKSCHEDULECOMBOBOX":case"ECTFIELDWITHCUSTOMCONTEXT":case"USER":case"MULTIPLERELATION":if(typeof v==="object"){return v.id;}return v;case"USERINFOMETADATAOPTIONS":return v;case"HRIS_FINDUSER":if(typeof v==="object"){return v.userId;}return v;case"CASCADE":if(typeof v==="string"||typeof v==="number"){return v;}return v.id||v.value;case"RADIO_BUTTON_GROUP":if(v instanceof sap.m.RadioButton){var C=v.getCustomData();var o=C.length>0?C[0]:null;return o.getValue();}return v;default:if(typeof v==="object"){return v.value;}return v;}};sap.extent.uilib.util.EditFormGeneratorHelper.getLabelValue=function(v,m){if(!v||!m){return"";}var t=m.type.toUpperCase();switch(t){case"DATE":if(typeof v==="string"){if(v&&v.length===10){var e=new Date(parseInt(v.substring(0,4),10),parseInt(v.substring(5,7),10)-1,parseInt(v.substring(8,10),10));return sap.ui.core.format.DateFormat.getDateInstance({style:'medium'}).format(e);}}else if(v instanceof Date){return sap.extent.uilib.util.EditFormGeneratorHelper._oDateFormat.format(v);}return v;default:if(typeof v==="object"){return v.label||v.primaryDisplayText;}return v;}};sap.extent.uilib.util.EditFormGeneratorHelper.cloneValueField=function(v,e,i,j){var n="";if(v){if(typeof v==="string"){var k=i&&(i.id.indexOf("-uuid")>-1||i.id.indexOf("record-hash")>-1);n=e?(k?i.meta.value:""):v;if(j&&(n==undefined)){for(var o in j){if(j[o].id==i.id){var l=(j[o].id.indexOf("-uuid")>-1||j[o].id.indexOf("record-hash")>-1);n=e?(l?j[o].value:""):v;}}}}else if(typeof v==="object"){n={};for(var F in v){n[F]=e?"":v[F];}}}return n;};sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData=function(i,I){var C=null;jQuery.each(i.getCustomData(),function(e,j){if(j.getKey()===I){C=j.getValue();}});return C;};sap.extent.uilib.util.EditFormGeneratorHelper._setCustomData=function(I,v,V){var C=I.getCustomData();if(typeof v==="string"){for(var i=0;i<C.length;i++){if(C[i].getKey()===v){C[i].setValue(V);}}}if(C[v]){C[v].setValue(V);}};sap.extent.uilib.util.EditFormGeneratorHelper.getBlockId=function(F){return sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(F,sap.extent.uilib.util.EditFormGeneratorHelper.FORM_BLOCK_ID_KEY);};sap.extent.uilib.util.EditFormGeneratorHelper.getFieldId=function(i){return sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(i,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_ID_KEY);};sap.extent.uilib.util.EditFormGeneratorHelper.getMainGroupId=function(i){return sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(i,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_MAIN_GROUP_ID_INDEX);};sap.extent.uilib.util.EditFormGeneratorHelper.getGroupNumber=function(i){return sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(i,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_GROUP_NUMBER_INDEX);};sap.extent.uilib.util.EditFormGeneratorHelper.getMeta=function(i){return sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(i,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_META_INDEX);};sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta=function(m){var t=m&&m.type&&m.type.toUpperCase();if(t==="MDFRALFIELD"||t==="MDFPIIFIELD"){return(m&&m.originalType)?m.originalType.toUpperCase():t;}else{return t;}};sap.extent.uilib.util.EditFormGeneratorHelper.getRowId=function(i){return sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(i,sap.extent.uilib.util.EditFormGeneratorHelper.INPUT_DATA_ROW_ID_INDEX);};sap.extent.uilib.util.EditFormGeneratorHelper.isOneToOneAssociation=function(F){var o=false;if(F.metadata&&(F.metadata.maxRows==1)){o=true;}return o;};sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty=function(v){if(v&&typeof v==="object"){v=v.value||v.id||v.attachmentId;}v=typeof v==="string"?v.trim():v;return v===""||v===null||v===undefined;};sap.extent.uilib.util.EditFormGeneratorHelper.isInputEmpty=function(i){var v=sap.extent.uilib.util.EditFormGeneratorHelper.getInputValue(i);return sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(v);};sap.extent.uilib.util.EditFormGeneratorHelper.isUrlNameValid=function(u,i){var r={valid:true,message:""};if(sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(u)){return r;}var e=u.match(/^(?!.*\]|.*\[).*$/);if(!e){r.valid=false;r.message=sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("ECT_PP3_URL_NAME_VALID_MSG",[i.label]);return r;}return r;};sap.extent.uilib.util.EditFormGeneratorHelper.isUrlValid=function(u,i){var r={valid:true,message:""};if(sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(u)){return r;}var e=u.match("^(http|https):(\/\/|\\\\)");if(!e){r.valid=false;r.message=sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("EMPFILE_PP3_URL_VALID_MSG",[i.label]);return r;}if(i&&i.gappsCompanyDomain){e=u.match("docs.google.com/a/"+i.gappsCompanyDomain);if(!e){r.valid=false;r.message=sap.extent.uilib.util.EditFormGeneratorHelper._oBundle.getText("ECT_PP3_URL_GOOGLE_APPS_DOMAIN_VALID_MSG",[i.label]);return r;}}return r;};sap.extent.uilib.util.EditFormGeneratorHelper.getDateFormat=function(){return sap.extent.uilib.util.EditFormGeneratorHelper._oDateFormat;};sap.extent.uilib.util.EditFormGeneratorHelper.displayBackendResponse=function(B,e,i,j){if(!B){jQuery.sap.log.error("displayBackendResponse is called with empty oBackendData");return;}var m="";var C=sap.extent.uilib.util.CommonUtils.getInstance();var k=C.getBlindnessSupport();var o=sap.extent.uilib.util.EditFormGeneratorHelper._oBundle;if(typeof B==='string'){var E=B;B={status:'failure',global:E}}else{B.global=B.global||(B.actionResult?B.actionResult.global:[])||[];if(B.global.length>0){var n=[];for(var l=0,p=B.global.length;l<p;l++){n.push(o.getText(B.global[l])||B.global[l]);}B.global=n;}}switch(B.status){case"success":if(e==="delete"){return true;}m=B.infoMessage||o.getText("COMMON_CHANGES_SAVED_MSG");if(B.global&&B.global.length>0){m=B.global[0];}if(k||B.showDialog){setTimeout(function(){sap.m.MessageBox.show(m,{initialFocus:sap.m.MessageBox.Action.OK,icon:sap.m.MessageBox.Icon.SUCCESS,title:sap.m.MessageBox.Icon.SUCCESS});},0);}else{sap.m.MessageToast.show(m);}return true;case"warning":var q={messages:sap.extent.uilib.util.EditFormGeneratorHelper.splitBackendMessage(B.hasOwnProperty("warningMessage")?B.warningMessage:B.global),icon:sap.m.MessageBox.Icon.WARNING,actions:B.yesNo?[sap.m.MessageBox.Action.NO,sap.m.MessageBox.Action.YES]:[e==="delete"?o.getText("COMMON_Cancel"):o.getText("ECT_COMMON_CORRECT"),o.getText("ECT_COMMON_PROCEED")],contextAction:e,contextEditPage:i,data:B};sap.extent.uilib.util.EditFormGeneratorHelper.showAlertMessageBox(q);return false;case"error":case"failure":var q,r;if(B.values){r=B.values.OptLock;}if(i){var t=i.editPage||i;if(sap.sf.peopleprofile.view.pp3core.edit.DWREditBase&&t instanceof sap.sf.peopleprofile.view.pp3core.edit.DWREditBase){t=t.getEditObject().getEditPage();}if(t&&t.getFieldErrorMsg){var F=t.getFieldErrorMsg(B.field);if(F.length>0){if(!B.global){B.global=[];}B.global=B.global.concat(F);}}}if(r&&r=="refresh"){var R=o.getText("COMMON_Refresh");q={messages:sap.extent.uilib.util.EditFormGeneratorHelper.splitBackendMessage(B.global),icon:sap.m.MessageBox.Icon.QUESTION,actions:[R,sap.m.MessageBox.Action.CANCEL],emphasizedAction:R,contextAction:e,contextEditPage:i,data:B,isOptLock:true};}else{q={messages:sap.extent.uilib.util.EditFormGeneratorHelper.splitBackendMessage(B.global),isGoingBack:j,icon:sap.m.MessageBox.Icon.ERROR,contextEditPage:i,data:B};}sap.extent.uilib.util.EditFormGeneratorHelper.showAlertMessageBox(q);return false;default:m=o.getText("ECT_PP3_UNKNOWN_RESPONSE",[B.status||B]);m=m.replace("{","\\{");m=m.replace("}","\\}");jQuery.sap.log.error(m);return false;}};sap.extent.uilib.util.EditFormGeneratorHelper.splitBackendMessage=function(m){if(!m)return[];var S='||';if(typeof m==='string'){return m.split(S);}var r=[];var i;for(i=0;i<m.length;i++){r=r.concat(m[i].split(S));}if(r.length>1){for(i=0;i<r.length;i++){r[i]=(i+1)+'. '+r[i];}}return r;};sap.extent.uilib.util.EditFormGeneratorHelper._eduMultipleRelationAction=function(m,B,A,F){if(m&&m.getData()){switch(A){case"delete":if(B){var o=m.getData();var e=B.getPath()+"/actionType";var i=parseInt(B.getPath().substring(B.getPath().length-1));var j=m.getProperty(e);m.setProperty(e,"Delete");o.metadata.fields[F]._isFieldEdited=true;return i;}break;}}};sap.extent.uilib.util.EditFormGeneratorHelper._multipleRelationAction=function(m,B,A,p,F){if(m&&m.getData()){switch(A){case"delete":if(B){var o=m.getData();var e=B.getPath()+"/actionType";var i=m.getProperty(e);var P=e.split("/");var F=P[3];var r=P[P.length-2];if(i===""){m.setProperty(e,"Delete");}else if(i==="Add"){o.data.fields[F].value[0].splice(r,1);}m.updateBindings(true);return r;}break;case"add":var o=m.getData();if(o.data.fields[F].value){var j={actionType:"Add"};if(o.data.fields[F].value[0].length>0){p=p||o.data.fields[F].value[0].length;j.value=sap.extent.uilib.util.EditFormGeneratorHelper.cloneValueField(o.data.fields[F].value[0][0].value,true);o.data.fields[F].value[0].splice(p,0,j);}else{j.value="";o.data.fields[F].value[0]=[j];}m.setData(o);}break;default:break;}}};sap.extent.uilib.util.EditFormGeneratorHelper.showAlertMessageBox=function(o){sap.extent.uilib.util.CommonUtils.getInstance().showAlertMessageBox(o);};sap.extent.uilib.util.EditFormGeneratorHelper.getValidationErrorMessageForBasicTypes=function(i,I){var e="";if(i instanceof sap.sf.commons.DatePicker){e=this._oBundle.getText("ECT_PP3_ERROR_INVALID_DATE_FORMAT",[sap.ui.getCore().getModel("i18n").getResourceBundle().getText("ECT_PP3_DateFormat")]);}else{if(I&&I.label){e=this._oBundle.getText("ECT_PP3_ERROR_COMMON_WITH_LABEL",[I.label]);}else{e=this._oBundle.getText("ECT_PP3_ERROR_COMMON");}}return e;};sap.extent.uilib.util.EditFormGeneratorHelper.formatPreviousValueForBackend=function(p,F){if(!sap.extent.uilib.util.EditFormGeneratorHelper.isValueEmpty(p)){switch(F.type.toUpperCase()){case"LONG":case"DOUBLE":case"DECIMAL":case"NUMBER":return sap.ui.core.format.NumberFormat.getInstance().parse(p);default:return p;}}return"";};sap.extent.uilib.util.EditFormGeneratorHelper.getEventVOObject=function(i,m,v,l,r,e,C){var E;if(!r){r=0;}var F=m?m.fields[i]:null;i=F&&F.primaryFieldMeta?F.primaryFieldMeta.id:i;E={fieldId:i,fieldValue:v,oldFieldValue:sap.extent.uilib.util.EditFormGeneratorHelper.formatPreviousValueForBackend(l,F||{type:"STRING"}),onChildDelete:C};if(e&&e.length>0){var j;for(var k=0,n=e.length;k<n;k++){if(k===0){j=E;}else{j=j?{rowContext:j}:{};}j.rowOrder=e[k].rowIndex+1;j.associationName=e[k].id;j.onChildDelete=j.onChildDelete||false;j.resolver=e[k].resolver;}return{rowContext:j};}return E;};sap.extent.uilib.util.EditFormGeneratorHelper.splitFormData=function(m,F){if(jQuery.isEmptyObject(F)&&m.hasMultiple){return[];}F=F||{};var t=F.technicalInfo;var e,i,j;if(!m.hasMultiple&&(!t||t.length<=1)){F.fields=jQuery.extend(true,{},F.fields);if(!t&&m.resolver){F.technicalInfo=[];}i=m.fields;for(e in i){if(!F.fields[e]){F.fields[e]=i[e].metadata?null:{value:[""],oldValue:[""]};}}return[F];}var k=0,l=t.length;var n=[],o;i=m.fields;j=F.fields;for(;k<l;k++){o={fields:{},technicalInfo:[]};for(e in i){o.fields[e]={};if(j[e]){jQuery.each(j[e],function(p){o.fields[e][p]=[j[e][p][k]];});}else{o.fields[e]={value:[""],oldValue:[""]};}}o.technicalInfo.push(t[k]);n.push(o);}return n;};sap.extent.uilib.util.EditFormGeneratorHelper.handleTriggerRuleMessages=function(B){if(B.global&&B.global.length==0){return;}if(!sap.extent.uilib.util.EditFormGeneratorHelper.TRIGGER_RULE_MESSAGE_TYPES){sap.extent.uilib.util.EditFormGeneratorHelper.TRIGGER_RULE_MESSAGE_TYPES={"success":{icon:sap.m.MessageBox.Icon.INFORMATION,title:this._oBundle.getText("COMMON_Information")},"warning":{icon:sap.m.MessageBox.Icon.WARNING,title:this._oBundle.getText("COMMON_Warning")},"failure":{icon:sap.m.MessageBox.Icon.ERROR,title:this._oBundle.getText("COMMON_Err")}};}var m="<ol class=\"sapExtentUilibUtilEditFormGeneratorOrderedErrorsList\" ><li>"+B.global.join("</li><li>")+"</li></ol>";var M=new sap.ui.core.HTML({content:m,sanitizeContent:true});var o=sap.extent.uilib.util.EditFormGeneratorHelper.TRIGGER_RULE_MESSAGE_TYPES[B.status]||{};sap.m.MessageBox.show(M,{icon:o.icon,title:o.title});};sap.extent.uilib.util.EditFormGeneratorHelper.handleBackendError=function(e){jQuery.sap.log.error("An error occurred: "+JSON.stringify(e));};sap.extent.uilib.util.EditFormGeneratorHelper.idsToCopyMap={JOB_INFO:1,COMP_INFO:1};sap.extent.uilib.util.EditFormGeneratorHelper.copyMetaAndData=function(F,m,o,A){if(A&&F.fieldGroups){m.alternateSections={fieldGroups:[]};for(var i=0;i<F.fieldGroups.length;i++){m.alternateSections.fieldGroups.push(F.fieldGroups[i].metadata);}}var e=sap.extent.uilib.util.EditFormGeneratorHelper.idsToCopyMap;for(var j=0;j<F.fieldGroups.length;j++){var S=F.fieldGroups[j];if(!e[S.id]&&!A&&m.sectionId&&S.id&&m.sectionId.toUpperCase()!=S.id.replace(/_/g,"").toUpperCase()){continue;}for(var k in S.metadata.fields){if(S.metadata.fields.hasOwnProperty(k)){m.fields[k]=S.metadata.fields[k];if(!S.data.fields[k]){S.data.fields[k]={value:[""]};}o.fields[k]=S.data.fields[k];}}}};sap.extent.uilib.util.EditFormGeneratorHelper.getDataSizeTweakMetaAndData=function(m,o,e){var M=m.fields;var k=o.fields;var C=null;var l=500;for(var F in M){if(M[F].type==="CASCADE"){C=M[F];if(C.hasOwnProperty("cascadeChildren")&&Array.isArray(C.cascadeChildren)&&C.cascadeChildren.length>0){if(!C.elementId){C.cacheCascade=C.cascadeChildren;}var n=false;var p=C.cascadeChildren;var v=null;if(k[F]){v=k[F].value?k[F].value[0]:null;}for(var i=0;i<p.length;i++){var q=p[i];if(q&&q.fields){for(var r in q.fields){if(q.fields[r].cascadeParentValue==sap.extent.uilib.util.EditFormGeneratorHelper.getValue(v,m.fields[F])){C.cascadeChildren=p[i];n=true;break;}}}if(n){break;}}if(!n){C.cascadeChildren={fields:{},fieldsOrder:[]};}if(k[F]&&k[F].hasOwnProperty("cascadeChildren")){k[F].cascadeChildren=k[F].cascadeChildren[0];}var t=C.cascadeChildren;var u=k[F]?k[F].cascadeChildren:null;if(m.fieldsOrder&&t&&t.fieldsOrder&&t.fieldsOrder.length>0){var w=m.fieldsOrder.indexOf(F);for(var j=0;j<t.fieldsOrder.length;j++){m.fieldsOrder.splice(w+j+1,0,t.fieldsOrder[j]);}}if(t){for(var r in t.fields){M[r]=t.fields[r];if(!C.elementId){M[r].cacheCascade=jQuery.extend(true,[],C.cacheCascade);M[r].cascadeParentData=k[F];}if(u){k[r]=u.fields[r]||{value:[""],oldValue:[""]};if(e=='NATIONAL_ID_CARD'&&sap.ui.getCore().getModel("user")&&sap.ui.getCore().getModel("user").getProperty("/isNewHire")&&k[F].value&&k[F].value.length>1&&!(Util.findURLParam("userType")=="ONBSimplify")){var x=k[F].value;var y={value:[],oldValue:[]};var z=k[r];for(var i=0;i<x.length;i++){y.value.push(z.value[i]||'');y.oldValue.push(z.oldValue[i]||'');}z.value=y.value;z.oldValue=y.oldValue;}}}}}}var A=M[F].selectOptions&&M[F].selectOptions.length||0;l=(A>l?A:l);}return l;};sap.extent.uilib.util.EditFormGeneratorHelper.applyMaxFieldsToShow=function(m,l){var e=this;if(m.alternateSections&&m.alternateSections.fieldGroups&&l.items){m.alternateSections.fieldGroups.forEach(function(z,A){var B;for(var i=l.items.length-1;i>=0;i--){if(l.items[i].id==z.id){B=l.items[i].details;break;}}e.applyMaxFieldsToShow(z,B);});}var k=0;var n=0;var o=sap.extent.uilib.util.EditFormGeneratorHelper.getFieldsCount(m);if(m._appiedMaxFields&&!m.hasMultiple){return true;}m._appiedMaxFields=true;if(m.hasOwnProperty("fieldsOrder")&&m.hasOwnProperty("maxFieldsToShow")&&!m.hasOwnProperty("showDetailsLink")){if(l){l=l.items;for(var L=0,p=l.length;L<p;L++){var q=l[L].details;if(q){for(var i=0,I=q.items.length;i<I;i++){var M=m.fields[q.items[i].id];if(M&&M.type&&M.type==="CASCADE"&&M.cascadeChildren){if(M.cascadeChildren instanceof Array&&M.cascadeChildren.length>0){for(var j=0,r=M.cascadeChildren.length;j<r;j++){n=0;if(k>0){n=k;k=0;}n++;var C=M.cascadeChildren[j];if(C.fieldsOrder&&C.fieldsOrder.length>0){o=sap.extent.uilib.util.EditFormGeneratorHelper.getFieldsCount(m);for(var t in C.fields){o+=C.fields[t].type!="HIDDEN"?1:0;}}for(var u=0,v=l.length;u<v;u++){var w=l[u].details.items;for(var x=0,y=w.length;x<y;x++){if(C.fields[w[x].id]){n++;if(n>m.maxFieldsToShow&&((o-m.maxFieldsToShow)>sap.extent.uilib.util.EditFormGeneratorHelper.SHOW_HIDE_THRESHOLD)){C.fields[w[x].id][sap.extent.uilib.util.EditFormGenerator.DETAILS_VISIBILITY_PROPERTY]=false;}}}}}}else{k++;}}else if(M){var F=M;if(n>0){k=n;n=0;}k++;if(k>m.maxFieldsToShow&&((o-m.maxFieldsToShow)>sap.extent.uilib.util.EditFormGeneratorHelper.SHOW_HIDE_THRESHOLD)){F[sap.extent.uilib.util.EditFormGenerator.DETAILS_VISIBILITY_PROPERTY]=false;}}}}}}else{for(var j=0;j<m.fieldsOrder.length;j++){if(m.fields[m.fieldsOrder[j]]){var F=m.fields[m.fieldsOrder[j]];if(j>=m.maxFieldsToShow&&((o-m.maxFieldsToShow)>sap.extent.uilib.util.EditFormGeneratorHelper.SHOW_HIDE_THRESHOLD)){F[sap.extent.uilib.util.EditFormGenerator.DETAILS_VISIBILITY_PROPERTY]=false;}}}}}};sap.extent.uilib.util.EditFormGeneratorHelper.getFieldsCount=function(m){var H=0;jQuery.each(m.fields,function(i,e){if(e.type=="HIDDEN"){H++;}});return(m.fieldsOrder?(m.fieldsOrder.length-H):0);};sap.extent.uilib.util.EditFormGeneratorHelper.hasOnlyHiddenFields=function(m){for(var F in m){if(m[F].type!=="HIDDEN"){return false;}}return true;};sap.extent.uilib.util.EditFormGeneratorHelper.hasRules=function(m){return m.hasOwnProperty("rule")&&m.rule.hasOwnProperty("onChange")||(m.onChange&&m.onChange.onChangePresent);};sap.extent.uilib.util.EditFormGeneratorHelper.hasSubmitOnFieldChange=function(m){return m.hasOwnProperty("submitOnFieldChange")&&m.submitOnFieldChange;};sap.extent.uilib.util.EditFormGeneratorHelper.hasDependentFields=function(m){return m.searchOptions&&m.searchOptions.dependentFields&&m.searchOptions.dependentFields.length>0;};sap.extent.uilib.util.EditFormGeneratorHelper.hasRequestPropagationValues=function(m){return m.searchOptions&&m.searchOptions.propagateFieldsOnRequest&&m.searchOptions.propagateFieldsOnRequest.length>0;};sap.extent.uilib.util.EditFormGeneratorHelper.rowSubmitOnFieldChangeFieldsNotEmpty=function(r,F,m,e){var i=F&&F[m];if(r&&i&&(e!=-1)){for(var j in i){var k=i[j]&&i[j].field;if(k){var I=sap.extent.uilib.util.EditFormGeneratorHelper.getInputFromFieldLayout(k);var M=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(I);if(M.submitOnFieldChange&&M.required&&sap.extent.uilib.util.EditFormGeneratorHelper.isInputEmpty(I)){return false;}}}}return true;};sap.extent.uilib.util.EditFormGeneratorHelper.replaceFormatWith=function(u,i){var j=/\W*\w\*{0,}\W*/gi;var k=/(\w[^A-Za-z0-1_[]]*\*{0,})|(\w\*{0,})|((?=\[)(\[\W*\w*\W*\]\W*))/gi;var l=/\w/gi;var m=i;if(typeof i==="string"){var n=i.indexOf("*Optionals*");var o=n>=0?i.substring(0,n):i;m=o.match(n>=0?k:j);}var r=[];var p=u.match(j);var q=p?p.length:0;var t=0;for(var v=0;v<q;v++){var w=m[t];if(!w&&t>(m.length-1)){return r.length?r.join(""):u;}try{var x=w.indexOf("*");var y=w.indexOf("[");switch(true){case(y!=-1):v+=sap.extent.uilib.util.EditFormGeneratorHelper.optionalsHandling(p,w,v,r);break;case(x!=-1):v+=sap.extent.uilib.util.EditFormGeneratorHelper.splCharHandling(p,w,v,r);break;default:r.push(w.replace(l,p[v].match(l)[0]));}t++;}catch(e){return u;}}return r.join("");};sap.extent.uilib.util.EditFormGeneratorHelper.splCharHandling=function(e,i,j,r){var l=/\w/gi;var u=e[j].match(/\W{1}/gi);var k=i.replace(l,e[j].match(l)[0]);var n=i.match(/\*/gi).length;if(u){for(var m=0;m<n;m++){k=k.replace("*",u[m]);}r.push(k);}else{for(var m=j;m<=(j+n);m++){if(e[m]){r.push(e[m].match(l)[0]);}}return n;}return 0;};sap.extent.uilib.util.EditFormGeneratorHelper.optionalsHandling=function(e,i,j,r){var k=/\W*\w\*{0,}\W*/gi;var o=i.match(/\[\W*\w*\W*\]/gi)[0].replace(/\[|\]/gi,"");var l="\\w{1,"+(1+o.length)+"}\\W{1,}";var n=new RegExp(l,"gi");if(e[j].match(n)&&!o.match(/\W{1,}/gi)){r.push(e[j]);}else{var o=i.replace(/\[|\]/gi,"");var m=sap.extent.uilib.util.EditFormGeneratorHelper.replaceFormatWith(e.slice(j,(j+o.length)).join(""),o.match(k));if(!!i.match(/\[\w*\W{1,}\w*\]/gi)){r.push(m.replace(/\W$/gi,""));}else{r.push(m);}return o.replace(/\W/gi,"").length-1;}return 0;};sap.extent.uilib.util.EditFormGeneratorHelper.getEmptyFormData=function(m){var e={fields:{},technicalInfo:[{id:-1,actionType:"Add"}]};var F;for(var i in m.fields){if(m.fields[i].metadata){e.fields[i]=null;}else if(i.indexOf("-uuid")>-1||i.indexOf("record-hash")>-1){e.fields[i]={value:[m.fields[i].value],oldValue:[""]}}else{e.fields[i]={value:[""],oldValue:[""]};}}return e;};})();sap.extent.uilib.util.EditFormGeneratorHelper.getSingleRowDataByRowId=function(r,a){var b={};for(var k in r){b[k]=[r[k][a]];}return b;};sap.extent.uilib.util.EditFormGeneratorHelper.isEmpty=function(v){return(typeof v==="undefined")||v===null;};sap.extent.uilib.util.EditFormGeneratorHelper.isFieldGroupEmpty=function(f){var d=f.data.fields;var m=f.metadata.fields;var F,v;for(var s in d){F=m[s];v=d[s].value?d[s].value[0]:undefined;if(sap.extent.uilib.util.EditFormGeneratorHelper.getValue(v,F)){return false;}}return true;};sap.extent.uilib.util.EditFormGeneratorHelper.isRowDeletetable=function(r,m){if(r.hasOwnProperty("deletable")&&r.deletable!=null){return r.deletable;}if(m.hasOwnProperty("deletable")){return m.deletabe;}if(m.hasOwnProperty("writable")){return m.writable;}if(r.hasOwnProperty("writable")){return r.writable;}if(r.hasOwnProperty("editable")){return r.editable;}if(m.hasOwnProperty("actions")){return m.actions.delete;}return true;};sap.extent.uilib.util.EditFormGeneratorHelper.isRowRearrangeable=function(r,m){if(r.hasOwnProperty("rearrange")){return r.rearrange;}if(m.hasOwnProperty("actions")){return m.actions.rearrange;}return false;};sap.extent.uilib.util.EditFormGeneratorHelper.getInputsFromLayout=function(l,i){i=i||[];var c=l.getContent();var C;for(var I=0,L=c.length;I<L;I++){C=c[I];if(C instanceof sap.m.InputBase||C instanceof sap.m.CheckBox||C instanceof sap.m.Link||C instanceof sap.m.Switch||C instanceof sap.extent.uilib.BulletChart||C instanceof sap.m.UploadCollection||C instanceof sap.extent.uilib.AttachmentButton||C instanceof sap.m.Text||(C instanceof sap.m.Button&&C._isTimeButton)){i.push(C);}else if(C instanceof sap.ui.layout.VerticalLayout||C instanceof sap.ui.layout.HorizontalLayout){sap.extent.uilib.util.EditFormGeneratorHelper.getInputsFromLayout(C,i);}}return i;};sap.extent.uilib.util.EditFormGeneratorHelper.getRuleDataFieldValue=function(f,i){var v=i?f.oldValue[0]:f.value[0];return(v&&v.value)?v.value:v;};sap.extent.uilib.util.EditFormGeneratorHelper.enableSection=function(s,e,a){for(var p=0,b=e._aPanels.length;p<b;p++){var c=e._aPanels[p];if(c.getCustomData()[0]&&c.getCustomData()[0].getValue()==s){var f=c.getContent()[0].getModel().getData().data.fields;for(var k in f){e.updatePropertyById(k,0,'visible',a,null);}for(var d=1,g=c.getContent()[0].getContent().length;d<g;d++){var h=c.getContent()[0].getContent()[d].sId;if(h){sap.ui.getCore().byId(h).setVisible(a);}}}}};sap.extent.uilib.util.EditFormGeneratorHelper.addContentToSection=function(s,e,c){for(var p=0,a=e._aPanels.length;p<a;p++){var b=e._aPanels[p];if(b.getCustomData()[0]&&b.getCustomData()[0].getValue()==s){var g=this.getGridFromLayout(b);g.addContent(c);}}};sap.extent.uilib.util.EditFormGeneratorHelper.getGridFromLayout=function(l){for(var i=0;i<l.getContent().length;i++){var s=l.getContent()[i];if(s instanceof sap.m.Panel){var p=s.getContent();for(var j=0;j<p.length;j++){if(p[j]instanceof sap.ui.layout.Grid){return p[j]}}}}};sap.extent.uilib.util.EditFormGeneratorHelper.removeContentFromSection=function(s,e,c){for(var p=0,a=e._aPanels.length;p<a;p++){var b=e._aPanels[p];if(b.getCustomData()[0]&&b.getCustomData()[0].getValue()==s){var g=this.getGridFromLayout(b);g.removeContent(c);}}};sap.extent.uilib.util.EditFormGeneratorHelper.setGroupTitleByLayout=function(t,l){if(t==null||t==undefined||!l){return;}var c=l.getContent()&&l.getContent()[0];if(c instanceof sap.ui.layout.VerticalLayout){c=c.getContent()[0];}if(c instanceof sap.m.Panel){var T=c.getHeaderToolbar()&&c.getHeaderToolbar().getTitleControl();T.setText(t);}};sap.extent.uilib.util.EditFormGeneratorHelper.getOtherValue=function(f,i,d){return d.fields[f].otherValue?d.fields[f].otherValue[i]:"";};sap.extent.uilib.util.EditFormGeneratorHelper.disableComboBoxAutoCloseByPromise=function(i,p){if(i&&i instanceof sap.m.ComboBox&&i.getPickerType()!=="Dialog"&&i.getPicker()){i.getPicker().setModal(true);p.then(function(r){i.getPicker().setModal(false);});}};sap.extent.uilib.util.EditFormGeneratorHelper.updateTotalCompHistory=function(n){if(n.hasOwnProperty("totalCompHistoryData")&&n.totalCompHistoryData["getSalaryPositioningInfoVO"]&&(n.totalCompHistoryData["getSalaryPositioningInfoVO"].salary!=null)){for(var i=0,l=n.fieldGroups.length;i<l;i++){if(n.fieldGroups[i].id=="COMP_INFO"){var f=n.fieldGroups[i].data.fields;if(f["compInfo-range-penetration"]){n.totalCompHistoryData["getSalaryPositioningInfoVO"].rangePenetration=f["compInfo-range-penetration"].value[0];}if(f["compInfo-compa-ratio"]){n.totalCompHistoryData["getSalaryPositioningInfoVO"].compaRatio=f["compInfo-compa-ratio"].value[0];}}}var c=n.changedData;if(c){for(var a=0,b=c.length;a<b;a++){var d=c[a];switch(d.id){case"currencyCode":n.totalCompHistoryData["getSalaryPositioningInfoVO"].currencyCode=d.newValue;break;case"salary":n.totalCompHistoryData["getSalaryPositioningInfoVO"].salary=d.newValue;break;}}}}};},"sap/extent/uilib/util/EditLayoutService.js":function(){jQuery.sap.declare("sap.extent.uilib.util.EditLayoutService");jQuery.sap.require("sap.extent.uilib.util.EditFormGeneratorHelper");sap.extent.uilib.util.EditLayoutService={};sap.extent.uilib.util.EditLayoutService.getLayout=function(f){this.oMeta=f.metadata;this.oAltMeta=f.alternateSections;this.oAltLayout=[];var i=f.id;var e=sap.ui.getCore().getModel("editLayoutConfig");var l=f.editLayoutConfigurations&&f.editLayoutConfigurations;if(l){l=jQuery.extend(true,{},l);}this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();if(!l&&e!=null){var s=e.getProperty("/"+i);if(s){l=jQuery.extend(true,{},s);}}sap.extent.uilib.util.EditLayoutService.removeAddressLayout(i,l,f.data.fields["country"]||f.data.fields["homeAddress-country"]);if(l){sap.extent.uilib.util.EditLayoutService.addMissingFieldsToDefaultLayout(l);if(this.oAltLayout.length&&this.oAltMeta){sap.extent.uilib.util.EditLayoutService.addMissingAltFieldsToDefaultLayout();}}return(l&&jQuery.extend(true,{},l.group))||null;};sap.extent.uilib.util.EditLayoutService.removeAddressLayout=function(i,l,c){if(i!="HOME_ADDRESS"||!l||!l.group||!c){return;}c=c.value[0];var a=l.group;jQuery.each(a.addressCSFItems,function(b,d){if(d.id.indexOf(c)>0){var e=[2,0];e=e.concat(d.items);a.items.splice.apply(a.items,e);}})};sap.extent.uilib.util.EditLayoutService.addMissingAltFieldsToDefaultLayout=function(){var a=this.oAltMeta.fieldGroups;var t=this;jQuery.each(a,function(b,e){var f=e.metadata.fieldsOrder.slice();var c=[];if(t.oAltLayout[b]){var d=t.oAltLayout[b].details.items;if(e.metadata.label){t.oAltLayout[b].details.title=e.metadata.label;}jQuery.each(d,function(l,h){var i=h.details.items;jQuery.each(i,function(j,k){c.push(k.id)})});var g={"details":{"items":[],"maxFieldsToShow":10,"renderStyle":"flow"},"id":"groupemptyAlt"+b,"label":null,"type":"group"};jQuery.each(f,function(h,i){if(!c.contains(i)){g.details.items.push({"details":null,"id":i,"type":"field"})}});d.push(g);}});};sap.extent.uilib.util.EditLayoutService.addMissingFieldsToDefaultLayout=function(l){var f=this.oMeta.fields;var a=this.oMeta.fieldsOrder.slice();jQuery.each(f,function(d,g){var j=g.cascadeChildren;jQuery.each(j,function(k,m){if(m&&m.fieldsOrder){jQuery.each(m.fieldsOrder,function(n,u){if(jQuery.inArray(u,a)<0){a.push(u)}})}})});var i=l.group.items;var h=false;var A=null;var b=0;var e={"details":{"items":[],"maxFieldsToShow":10,"renderStyle":"flow"},"id":"groupempty"+this.oMeta.sectionId,"label":null,"type":"group"};var c={"details":{"items":[],"maxFieldsToShow":10,"renderStyle":"flow"},"id":"groupempty"+this.oMeta.sectionId,"label":null,"type":"group"};var t=this;jQuery.each(i,function(d,g){var j=g.details&&g.details.items||[];if(g.alternateSection){g.details.index=b++;t.oAltLayout.push(g);if(!A){A=d;}}jQuery.each(j,function(k,m){var n=m.id;if(jQuery.inArray(n,a)>=0){a.splice(a.indexOf(n),1);}})});jQuery.each(a,function(d,g){if(f[g]&&f[g].payComponents){h=true;c.details.items.push({"details":null,"id":g,"type":"field"})}else{e.details.items.push({"details":null,"id":g,"type":"field"})}});if(h){i.splice(0,0,c)}if(A){i.splice(A,0,e);return;}if(a.length){i.push(e);}};sap.extent.uilib.util.EditLayoutService.processSectionLayouts=function(s,f){for(iEditLayoutIndex=0;iEditLayoutIndex<s.length;iEditLayoutIndex++){var l=s[iEditLayoutIndex];if(l.portletId==="ADDRESS_INFORMATION"||l.portletId==="PERSON_INFORMATION"){for(var F=0;F<f.length;F++){var e=f[F];if(e.id==="HOME_ADDRESS"||e.id==="PERSON_GLOBAL_INFO"||e.id==="BIOGRAPHICAL_INFO_LOC"){var a=l.editableFieldConfig;this.matchLayoutToFieldGroup(e,l.editableFieldConfig);if(e.id==="HOME_ADDRESS"){break;}}}}}};sap.extent.uilib.util.EditLayoutService.matchLayoutToFieldGroup=function(f,l){var e=f.id;if(!e){return;}e=e.replace(/\_/ig,"").toLowerCase();if(e==="personglobalinfo"){this.setGlobalInfoLayout(f,l);return;}else if(e==="biographicalinfoloc"){this.setBiographicalInfoLocLayout(f,l);return;}for(var L=0,a=l.length;L<a;L++){var b=l[L].id.toLowerCase();if(e==b||(f.id=='EMPLOYMENT_INFO'&&b=='employmentdatesfieldslist')||(f.id=='COMP_INFO'&&b=='compinfoportlet')){f.editLayoutConfigurations=jQuery.extend(true,{},l[L]);if(l[L].maxFieldsToShow&&f.metadata){f.metadata.maxFieldsToShow=l[L].maxFieldsToShow;}var c=f.editLayoutConfigurations.group.items;var d=[];var g=false;var C;if(e==="homeaddress"){d=l[L].group.addressCSFItems;d=!d?[]:d;C=f&&f.data&&f.data.fields&&f.data.fields.country&&f.data.fields.country.value[0];if(!C){C=f&&f.data&&f.data.fields&&f.data.fields["homeAddress-country"]&&f.data.fields["homeAddress-country"].value[0];}g=true;}if(g){var h=false;for(var j=0,k=d.length;j<k;j++){var m=d[j];var n=m.id.replace(/homeaddress\-/gi,"");if(C===n){h=true;for(var i=0;i<m.items.length;i++){c.push(m.items[i]);}if(e==="homeaddress"){f.editLayoutConfigurations.group.addressCSFItems=null;}}}g=false;if(!h){var D=l[L].group.defaultItems||[];if(D.length){f.editLayoutConfigurations.group.items=D.slice();}if(e==="homeaddress"){f.editLayoutConfigurations.group.addressCSFItems=null;}}}if(f.alternateSections){var c=f.editLayoutConfigurations.group.items;var o=0;for(var p=0,q=l.length;p<q;p++){var b=l[p].id.toLowerCase();if(b.search(/alternateFieldsSet/ig)>=0&&f.alternateSections.fieldGroups.length>o){var r={};jQuery.extend(r,l[p].group);r.id=b;r.details={index:o,items:r.items,alternateSection:true,title:l[p].title};r.alternateSection=true;r.expandable=true;r.details.renderStyle="panel";r.maxFieldsToShow=l[p].maxFieldsToShow;delete r.items;var s=f.alternateSections.fieldGroups[o].metadata;s.maxFieldsToShow=r.maxFieldsToShow;s.id=r.id;o++;c.push(r);}}}return;}}};sap.extent.uilib.util.EditLayoutService.setGlobalInfoLayout=function(f,l){var c=f&&f.data&&f.data.fields&&f.data.fields.country&&f.data.fields.country.value;if(c&&c.length){for(var a=0;a<c.length;a++){var C=c[a];this._findMatchingLayoutForCountry(f,C,l,a);}}else{if(f.countryCode){var C=f.countryCode;this._findMatchingLayoutForCountry(f,C,l,null);}}};sap.extent.uilib.util.EditLayoutService._findMatchingLayoutForCountry=function(f,c,l,a){var C={details:{id:null,items:[{details:null,id:"country",position:null}],maxFieldsToShow:50,renderStyle:"flow"},id:null,position:null};for(var b=0;b<l.length;b++){var i=l[b];var d=i.id.replace(/globalInfo\-/gi,"");if(c===d){i.group.items.unshift(C);var o=f.data.fields&&f.data.fields.country&&f.data.fields.country.cascadeChildren[a?a:0];if(o&&o.fields){jQuery.each(o.fields,function(e){var m=false;jQuery.each(i.group.items,function(h,j){jQuery.each(j.details.items,function(h,k){if(k.id==e){m=true;}})});if(m==false){var g={details:{id:null,items:[{details:null,id:e,position:null}],maxFieldsToShow:50,renderStyle:"flow"},id:null,position:null};i.group.items.push(g);}});}if(o){o.editLayoutConfigurations=jQuery.extend(true,{},i);}else{f.editLayoutConfigurations=jQuery.extend(true,{},i);}break;}}};sap.extent.uilib.util.EditLayoutService.setBiographicalInfoLocLayout=function(f,l){var c=f&&f.data&&f.data.fields&&f.data.fields.country&&f.data.fields.country.value;if(c&&c.length){for(var a=0;a<c.length;a++){var C=c[a];this._findMatchingLayoutForCountryForBioInfoLoc(f,C,l,a);}}else{if(f.countryCode){var C=f.countryCode;this._findMatchingLayoutForCountryForBioInfoLoc(f,C,l,null);}}};sap.extent.uilib.util.EditLayoutService._findMatchingLayoutForCountryForBioInfoLoc=function(f,c,l,a){var C={details:{id:null,items:[{details:null,id:"country",position:null}],maxFieldsToShow:50,renderStyle:"flow"},id:null,position:null};for(var b=0;b<l.length;b++){var i=l[b];var d=i.id.replace(/biographicalinfoloc\-/gi,"");if(c===d){i.group.items.unshift(C);var o=f.data.fields&&f.data.fields.country&&f.data.fields.country.cascadeChildren[a?a:0];if(o){o.editLayoutConfigurations=jQuery.extend(true,{},i);}else{f.editLayoutConfigurations=jQuery.extend(true,{},i);}break;}}};},"sap/extent/uilib/util/FieldValueExtractor.js":function(){jQuery.sap.declare("sap.extent.uilib.util.FieldValueExtractor");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");sap.extent.uilib.util.FieldValueExtractor={};sap.extent.uilib.util.FieldValueExtractor._commonUtils=sap.extent.uilib.util.CommonUtils.getInstance();sap.extent.uilib.util.FieldValueExtractor.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();sap.extent.uilib.util.FieldValueExtractor.getFullName=function(d){var v;if(d){if(d.hasOwnProperty("userDisplayValue")){v=d.userDisplayValue;}else{v=this.oBundle.getText("User_Display_Name",[d.firstName?d.firstName:"",d.mi?d.mi:"",d.lastName?d.lastName:""]);}}return v;};sap.extent.uilib.util.FieldValueExtractor.getBooleanValue=function(v){return v?this.oBundle.getText("COMMON_Yes"):this.oBundle.getText("COMMON_No");};sap.extent.uilib.util.FieldValueExtractor._LocaleResolver=function(l){switch(l){case"ar_SA":return"ar-EG";default:return l.replace("_","-")}};sap.extent.uilib.util.FieldValueExtractor.getItemFromDate=function(v){if(!v){return;}var d=null;if(v&&v.length===10){d=new Date();d.setFullYear(parseInt(v.substring(0,4),10),parseInt(v.substring(5,7),10)-1,parseInt(v.substring(8,10),10));}else{d=v;}var l=pageHeaderJsonData.userLocale;var i=Boolean(pageHeaderJsonData.calendarPreferences);if(!i&&(l=="th_TH"||l=="ar_SA")){var o={year:'numeric',month:'short',day:'numeric'};return d.toLocaleDateString(this._LocaleResolver(l),o)}else{var a=sap.ui.core.format.DateFormat.getDateInstance({pattern:sap.ui.getCore().getModel("i18n").getResourceBundle().getText("ECT_PP3_MMMDDYYYY")});return a.format(d);}};sap.extent.uilib.util.FieldValueExtractor.getFavIcon=function(){var i=this.oBundle.getText("ECT_PP3_PRIMARY_VALUE");var f=new sap.ui.core.Icon({src:"sap-icon://favorite",alt:i});f.setTooltip(i);f.addStyleClass("sapExtentUilibFormPatternFavorite");return f;};sap.extent.uilib.util.FieldValueExtractor.getValueObjFromDataField=function(d){var v={value:null,unit:null};if(d.primaryDisplayText||d.name){v.value=d.primaryDisplayText||d.name;if(d.units){v.unit=d.units;}}else if(d.label){v.value=d.label;}else if(d.value){v.value=d.value}return v;};sap.extent.uilib.util.FieldValueExtractor.getItemFromPicklist=function(d,m){if(d.primaryDisplayText){return d.primaryDisplayText;}var s=d.value||d;if(m.forceDisplayValueAsLabel){return s;}var a=m.selectOptions||[];if(s!==null&&s!==undefined&&s!==""){for(var i=0,l=a.length;i<l;i++){if(a[i]&&a[i].value==s){return a[i].label;}}}if(typeof s!=="string"){s="-";}return s;};sap.extent.uilib.util.FieldValueExtractor.getValueField=function(d,m,a,o,e,b,s,B,t){var c=null;var f=null;var g=m.valueType||m.type;var h=t&&t["compId"];var j=this.getDataItemObject(d,m,o,s);var u=j.unit;var v=j.value;g=j.type?j.type:g;var k=j.oldValue;var l=j.link;var n=j.isPrimaryValue;var p=j.oldUnit;var q=m.id;var O=m.type;var q=m.id;var O=m.type;var r=this.updateTarget(d);if(m.type=="MDFRALField"||m.type=="MDFPIIField"){g="MDFRALField";q=m.resolver;O=m.originalType;}var I=(O=="NUMBER"||O=="DECIMAL"||O=="DOUBLE"||O=="LONG");var w=new sap.extent.uilib.ConfigurableLabel({isMaskable:!!(m.maskable&&(v!="-"||e)),masked:this.masked,type:g,href:l,unit:u,technicalValue:c,oldTechnicalValue:f,encryptedText:e,errorFromServer:b,oldUnit:p,fieldId:q,textDirection:I?sap.ui.core.TextDirection.LTR:sap.ui.core.TextDirection.Inherit,originalType:O,blockId:B,compId:h});w.setOldValue(k);w.setTarget(r);w.setText(v);if(m.selectOptions&&m.maskable&&m.logReadAccess){w.setFieldMetaData(m);}if(v!=="-"&&m.fontConfig){this._commonUtils.addClassesFromConfigForValue(m.fontConfig.value,w);}if(m.type==="COLORLABEL"&&d.style){w.setStyle(d.style);}if(v.length>20&&(v.indexOf(" ")<0||v.indexOf(" ")>20)){w.addStyleClass("sapExtentUilibFormPatternBreakAll");}var x;if(a){var y=this.oBundle;x=new sap.ui.layout.VerticalLayout();x.addContent(w);var z=this;l=new sap.m.Link({text:y.getText("ECT_PP3_ALT_LANGAUGES",a.length),press:function(){var C=new sap.m.Popover({placement:sap.m.PlacementType.Top,showHeader:false});var D=new sap.ui.layout.VerticalLayout();D.addStyleClass("sapExtentUilibFormPatternLanguagePopup");C.addContent(D);for(var i=0;i<a.length;i++){if(a.length>1){var E=new sap.m.Label({text:y.getText("ECT_PP3_ALT_LANGUAGE",i+1)});E.addStyleClass("sapExtentUilibFormPatternLanguagePopupTitle");D.addContent(E);}if(s){D.addContent(z.getValueField(a[i].value,m,null,a[i].oldValue,a[i].encryptedValue,a[i].errorMessage,s));}else{D.addContent(z.getValueField(a[i].value,m,null,null,a[i].encryptedValue,a[i].errorMessage));}}C.openBy(l);}});l.addAriaLabelledBy(w);x.addContent(l);return x;}if((m.isPrimary||n||m.valueType==="VALUE-FLAG")&&!m.maskable){x=new sap.ui.layout.HorizontalLayout();x.setAllowWrapping(true);if(d&&m.valueType==="VALUE-FLAG"&&t&&!t.hideCountryFlag){x.addContent(new sap.extent.uilib.CountryFlag({countryCode:typeof d==="string"?d:d.code||d.value}));}x.addContent(w);if(n||m.isPrimary){x.addContent(this.getFavIcon());}return x;}if(m.hasOwnProperty("helpText")&&m.helpText){x=new sap.ui.layout.HorizontalLayout();x.setAllowWrapping(true);x.addContent(w);var A=sap.extent.uilib.util.HelpManager.createHelpIcon(this.oBundle.getText("ECT_HELP_LINK",m.label),"sapExtentUilibHelpTextIcon");sap.extent.uilib.util.HelpManager.registerHelpElement(A,m.helpText);x.addContent(A);return x;}return w;};sap.extent.uilib.util.FieldValueExtractor.updateTarget=function(d){var t="_self";if(d&&d.actionData&&d.actionData.urlInfo&&d.actionData.urlInfo.target&&d.actionData.urlInfo.target=="new"){t="_blank";}return t;};sap.extent.uilib.util.FieldValueExtractor.getDataItemObject=function(d,m,o,s){var r={type:"",link:"",value:"",oldValue:"",unit:"",isPrimaryValue:false,oldUnit:null};if((m.selectOptions&&d!==null&&d!==undefined)||(m.type=="PICKLISTAUTOCOMPLETE"&&!m.selectOptions&&d&&!d.label)){r.value=this.getItemFromPicklist(d,m);if(s&&o){r.oldValue=this.getItemFromPicklist(o,m);}}else if(m.type==="ATTACHMENT"&&d){r.value=(d.linkName?Util.unescapeHTML(d.linkName):"");r.link=d.attachmentUrl;if(sap.ui.Device.system.phone&&window.isMobAttachmentDownLoadRestricted){r.type="STRING"}else{r.type=r.link&&r.link.length>0?"link":"STRING";}}else if(m.type==="ECTSIMPLELINKFIELD"&&d){r.value=d.linkText;r.link=(d.actionData&&d.actionData.urlInfo&&d.actionData.urlInfo.url)||d.url;r.type=r.link&&r.link.length>0?"link":"STRING";}else if(m.type==="LINK"&&d){r.value=d.text||d.label;r.link=d.href||d.url;if(r.link&&r.link.indexOf("window.open")>0){r.type="window.open";}else{r.type=r.link&&r.link.length>0?"link":"STRING";}}else if(m.type==="PAYGROUP"&&d){if(m.payComponents&&m.payComponents.length>0){r.value=d;r.oldValue=o;var a=r.value.indexOf(r.unit);if(a>0){r.unit=m.payComponents[0].currencyCode;for(var i=1;i<m.payComponents.length;i++){if(m.payComponents[i].currencyCode&&m.payComponents[i].currencyCode!==r.unit){r.unit="";break;}}r.value=r.value.substring(0,a);if(s&&o){r.oldValue=o.substring(0,a);}}}}else if(m.type==="HRIS_FINDUSER"){r.value=this.getFullName(d);}else if(m.type==="LONG"&&d){r.value=d.toString();if(o){r.oldValue=o.toString();}r.type="STRING";}else if(m.type==="DATE"&&d){r.value=this.getItemFromDate(d);if(s&&o){r.oldValue=this.getItemFromDate(o);}r.type="STRING";}else if(m.type==="DateTime"&&d){if(d.length>0){r.value=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"medium"}).format(new Date(d));}}else if(m.type==="BOOLEAN"){r.value=this.getBooleanValue(d);r.oldValue=this.getBooleanValue(o);r.type="STRING";}else if(m.type==="EDUMULTIPLERELATION"&&d&&o){r.value=d.displayValue;r.oldValue=o.displayValue;r.type="STRING";}else if(m.type==="WORKSCHEDULECOMBOBOX"&&d&&o){r.value=d.primaryDisplayText;r.oldValue=o.primaryDisplayText;r.type="STRING";}else if(m.type==="multipleRelation"){if(d.value){r.value=d.value.primaryDisplayText;}if(d.oldValue){r.oldValue=d.oldValue.primaryDisplayText;}r.type="STRING";}else if(m.type==="ECTCALCFIELD"||m.type==="ECTAMOUNTPERCENTFIELD"){if(d){var b="";if(d.type=="PERCENTAGE"){b="%"}if(d.value){r.value=d.value+b;}if(o&&o.value){r.oldValue=o.value+b;}if(typeof d==="string"){r.value=d;}r.type="STRING";}}else{if(d&&typeof d==="string"){r.value=d;}else{if(d){var v=this.getValueObjFromDataField(d);r.value=v.value;r.unit=v.unit;if(d.link){r.link=d.link;}if(d.isPrimaryValue){r.isPrimaryValue=true;}}}if(o&&typeof o==="string"){r.oldValue=o;}else if(s&&o){var c=this.getValueObjFromDataField(o);r.oldValue=c.value;oldUnit=c.unit;}if(m.type==="HTML"){r.type="HTML";}}if(!r.value||r.value.length===0){r.value="-";r.type="STRING";}if(s&&(!r.oldValue||r.oldValue.length===0)){r.oldValue=(r.value==="-")?"-":" ";}if(!s){r.oldValue=null;}return r;};},"sap/extent/uilib/util/HelpManager.js":function(){jQuery.sap.declare("sap.extent.uilib.util.HelpManager");jQuery.sap.require("sap.ui.layout.VerticalLayout");jQuery.sap.require("sap.m.Text");jQuery.sap.require("sap.ui.core.HTML");jQuery.sap.require("sap.m.Popover");jQuery.sap.require("sap.m.Button");jQuery.sap.require("sap.ui.core.Icon");sap.extent.uilib.util.HelpManager=function(){alert("Do not instantiate HelpManager! just ")};(function(){"use strict";var h=null;sap.extent.uilib.util.HelpManager.URL_WHITELISTED_PROTOCOLS=["mailto","http","https"];sap.extent.uilib.util.HelpManager.registerHelpElement=function(c,H,o){if(typeof c.attachPress==="function"){c.attachPress(function(e){sap.extent.uilib.util.HelpManager.showTooltip(e.getSource(),H,o);});}};sap.extent.uilib.util.HelpManager.showTooltip=function(s,H,o){var l=null;if(!h){l=new sap.ui.layout.VerticalLayout();l.addStyleClass("sapExtentUilibHelpTextPopupContentContainer");var h=new sap.m.Popover({showHeader:false,content:[l],ariaLabelledBy:l.sId,placement:sap.m.PlacementType.Top,afterOpen:this.focusPopoverContent,afterClose:function(e){var O=e.getParameter("openBy");O.focus();}});}if(!l){l=h.getContent()[0];l.removeAllContent();}var a=g(s);H=a!=null?a:H;sap.extent.uilib.util.HelpManager.addHelpContentToLayout(l,H,o);h.openBy(s);function g(c){var C=c.getCustomData();var a=null;if(C){C.forEach(function(i,b){if(i.getKey()=='meta'){var m=i.getValue();if(m.hasOwnProperty("helpText")){a=m.helpText;}}})}return a;}};sap.extent.uilib.util.HelpManager.addHelpContentToLayout=function(l,H,o){if(typeof H==="string"){H=[H]}var i=o?o:H;jQuery.each(i,function(I,a){var s="";if(typeof a==="object"){var b=a.question;if(b){l.addContent(new sap.m.Title({text:b+"\n"}));}s=H[a.blockId];}else{s=a;}s=s&&s.trim();var c=null;if(s&&s.charAt(0)==="<"){c=sap.extent.uilib.util.HelpManager._createSanitizedHTML(s);}else{c=new sap.m.Text({text:s});}l.addContent(c);l.addContent(new sap.ui.core.HTML({content:"<br/>"}))});if(l&&l.getContent().length){l.removeContent(l.getContent().length-1);}};sap.extent.uilib.util.HelpManager.focusPopoverContent=function(e){var D=e.getSource().getDomRef();jQuery(D).find(".sapMPopoverCont").attr("role","document");};sap.extent.uilib.util.HelpManager._createSanitizedHTML=function(H){jQuery.each(this.URL_WHITELISTED_PROTOCOLS,function(i,p){jQuery.sap.addUrlWhitelist(p);});var o=new sap.ui.core.HTML({content:H,sanitizeContent:true});jQuery.each(this.URL_WHITELISTED_PROTOCOLS,function(i,p){jQuery.sap.removeUrlWhitelist(p);});return o;};sap.extent.uilib.util.HelpManager.createHelpIcon=function(t,s){var H=new sap.ui.core.Icon({src:"sap-icon://sys-help",decorative:false});d(H,t,s);return H;};sap.extent.uilib.util.HelpManager.createHelpButton=function(t,s){var H=new sap.m.Button({icon:"sap-icon://sys-help",type:sap.m.ButtonType.Transparent});d(H,t,s);return H;};function d(H,t,s){if(!t){var b=sap.ui.getCore().getModel("i18n");t=b.getResourceBundle().getText("COMMON_Help");}H.setTooltip(t);if(s){H.addStyleClass(s);}}})();},"sap/extent/uilib/util/JobCodeUtil.js":function(){jQuery.sap.declare("sap.extent.uilib.util.JobCodeUtil");sap.extent.uilib.util.JobCodeUtil={};sap.extent.uilib.util.JobCodeUtil.getAssociatedJobProfiles=function(i){var m=this;var b=this.getParent().getParent().getParent().blockId;var u=sap.ui.getCore().getModel("user").getProperty("/userId");var B=sap.ui.getCore().getModel("i18n").getResourceBundle();smrfLazyLoader.getControllerInstance("jobProfileMgmtController","jdmng","getAssociatedJobProfiles",[u,{callback:function(p){var a=[];for(var c=0;c<p.length;c++){var d=p[c];if(d.hasAssociatedProfile&&!d.hide){a.push(d);}}var l=a.length;if(l==1){i.icon.setText(a[0].associatedProfileName);i.icon.setHref('/xi/ui/jdmng/pages/jobProfileMgmt.xhtml?isFromEP=true&profileId='+a[0].accociatedProfileId+'&selected_user='+u+'&selected_view='+b);}else if(l>1){i.icon.setText(B.getText("JDMNG_ASSOCIATED_JOB_PROFILES"));i.icon.attachPress([a,b,u],sap.extent.uilib.util.JobCodeUtil.clickJobCodeAction);}i.icon.rerender();},errorHandler:function(a,e){typeof console!='undefined'&&console.log&&console.log(a+' '+e);}}]);};sap.extent.uilib.util.JobCodeUtil.clickJobCodeAction=function(e,p){var a=new sap.m.Popover();var l=new sap.m.List();var b=p[0];var c=p[1];var u=p[2];for(var i=0;i<b.length;i++){(function(i){var d=b[i];var f=new sap.m.StandardListItem({title:d.associatedProfileName,type:sap.m.ListType.Active,press:function(){window.location='/xi/ui/jdmng/pages/jobProfileMgmt.xhtml?isFromEP=true&profileId='+d.accociatedProfileId+'&selected_user='+u+'&selected_view='+c;}});l.addItem(f);})(i);}a.setPlacement("Bottom");a.setShowHeader(false);l.setShowSeparators(sap.m.ListSeparators.None);a.addContent(l);a.openBy(e.getSource());};},"sap/extent/uilib/util/LinkHelper.js":function(){jQuery.sap.declare("sap.extent.uilib.util.LinkHelper");sap.extent.uilib.util.LinkHelper={};sap.extent.uilib.util.LinkHelper.resolveUrlTokens=function(e,d){var l=e.getParameter("linkFieldId");var u=e.getParameter("url");var t=e.getParameter("tokens");var v=e.getParameter("valueIndex")||0;var f=d&&d.fieldGroups;if(!f||!Array.isArray(f)||!l||!t||!u){return;}var L=undefined;jQuery.each(f,function(i,F){var m=F.metadata;var d=F.data;var o=m&&m.fields;var b=d&&d.fields;if(!o||!b){return true;}if(b[l]){L=i;}jQuery.each(t,function(c,g){var T=g;if(o['FIELD_WITH_CONTEXT'+T]){T='FIELD_WITH_CONTEXT'+T;}if(!b[T]){return true;}var V=b[T].value[v];if(V&&typeof V==="object"){V=V.userId||V.id;};u=u.replace(c,V?V:"");});});if(L!=undefined&&f[L].data.fields[l]&&f[L].data.fields[l].value&&f[L].data.fields[l].value[v]){var a=f[L].data.fields[l].value[v].actionData;if(a&&a.urlInfo&&a.urlInfo.url){a.urlInfo.url=u;}}};},"sap/extent/uilib/util/MDFConditionalSupport.js":function(){jQuery.sap.declare("sap.extent.uilib.util.MDFConditionalSupport");sap.extent.uilib.util.MDFConditionalSupport=function(e){this.mDrivenByControls={};this.mPlaceholderGroups={};this.mConditionalGroups={};this.mConditionalGroupsWithoutPlaceholder={};this.mDriverIds=[];this.editFormGenerator=e;return this;};sap.extent.uilib.util.MDFConditionalSupport.prototype.registerDrivenByControls=function(d,a){if(!this.mDrivenByControls[d]){this.mDrivenByControls[d]=[];}if(this.mDrivenByControls[d].contains(a)){return;}this.mDrivenByControls[d].push(a);};sap.extent.uilib.util.MDFConditionalSupport.prototype.registerPlaceholderGroup=function(d,a,b,l,g){if(!this.mPlaceholderGroups[d]){this.mPlaceholderGroups[d]=[];}this.mPlaceholderGroups[d].push({drivenGroupId:a,drivenResolverIds:b,layout:l,groupMeta:g});};sap.extent.uilib.util.MDFConditionalSupport.prototype.registerConditionalGroup=function(d,c,l,g){if(!this.mConditionalGroups[d]){this.mConditionalGroups[d]=[];}var t=this.mConditionalGroups[d].findIndex(function(v){return v.drivenGroupId===c;});if(t>-1){this.mConditionalGroups[d][t].layout=l;this.mConditionalGroups[d][t].groupMeta=g;}else{this.mConditionalGroups[d].push({drivenGroupId:c,layout:l,groupMeta:g});}};sap.extent.uilib.util.MDFConditionalSupport.prototype.registerDriverField=function(d){if(this.mDriverIds.contains(d)){return;}this.mDriverIds.push(d);};sap.extent.uilib.util.MDFConditionalSupport.prototype.registerConditionalGroupsWithoutPlaceholder=function(d,c,a,l,g,r){if(!this.mConditionalGroupsWithoutPlaceholder[d]){this.mConditionalGroupsWithoutPlaceholder[d]=[];}this.mConditionalGroupsWithoutPlaceholder[d].push({drivenGroupId:c,drivenResolverId:a,layout:l,groupMeta:g,rowId:r});};sap.extent.uilib.util.MDFConditionalSupport.prototype.processsAllDriverFields=function(){var c,r,i;var m=this;while(this.mDriverIds.length>0){c=this.mDriverIds.splice(0,1)[0];i=this.editFormGenerator.getInputsById(c);jQuery.each(i,function(r,I){m.conditionalBeforeChangeHandler(c,r);m.conditionalChangeHandler(c,r);});}};sap.extent.uilib.util.MDFConditionalSupport.prototype._getAdditionalFieldGroups=function(d,r){var a=this._getInputFromRow(d,r);if(!a){return null;}var b=a.getModel().getProperty("/data/fields/"+d);if(!b||!b.additionalMetaAndData||!b.additionalMetaAndData[0]){return null;}var c=b.additionalMetaAndData[0];if(!c.fieldGroups||!Array.isArray(c.fieldGroups)){return null;}return c.fieldGroups;};sap.extent.uilib.util.MDFConditionalSupport.prototype._getInputFromRow=function(f,r){var i=this.editFormGenerator.getInputsById(f);return i&&i[r]?i[r]:null;};sap.extent.uilib.util.MDFConditionalSupport.prototype.conditionalBeforeChangeHandler=function(d,r){var m=this;var a=this.mDrivenByControls[d];if(a){jQuery.each(a,function(i,f){m.editFormGenerator.updatePropertyById(f,r,sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY,false,false,null,true);});}var b=this.mPlaceholderGroups[d];if(b){jQuery.each(b,function(i,p){var l=p.layout;m.setContentDeleted(l.getContent());l.removeAllContent();});}var c=this.mConditionalGroups[d];if(c){jQuery.each(c,function(i,f){var l=f.layout;m.setContentDeleted(l.getContent());l.removeAllContent();});}var e=this.mConditionalGroupsWithoutPlaceholder[d];if(e){jQuery.each(e,function(i,f){if(f.rowId===r){var l=f.layout;m.setContentDeleted(l.getContent());l.removeAllContent();l.destroy();}});}};sap.extent.uilib.util.MDFConditionalSupport.prototype.setContentDeleted=function(c){var C;for(var i=0,l=c.length;i<l;i++){C=c[i];if(C instanceof sap.ui.layout.VerticalLayout){this.setContentDeleted(C.getContent());}else if(C instanceof sap.m.Panel){this.setContentDeleted(C.getContent());this.editFormGenerator.deletePanel(C);}}};sap.extent.uilib.util.MDFConditionalSupport.prototype.conditionalChangeHandler=function(d,r){r=r>=0?r:0;var m=this,a=m._getAdditionalFieldGroups(d,r),b=m.mDrivenByControls[d],c=m.mPlaceholderGroups[d],e=m.mConditionalGroups[d],f=[],v=[],g=[],h=['collapsed','collapsible','label'],p=['collapsed','collapsible','maxFieldsToShow'];if(a){jQuery.each(a,function(i,k){if(!k.data||!k.metadata){return;}k.metadata.isConditionalChange=true;if(!k.metadata.hasOwnProperty('id')){var l=k.data.fields;var n=k.metadata.fieldsOrder;if(!l||!n){return;}jQuery.each(n,function(j,u){var w=l[u];var x=k.metadata.fields[u];var I=m._getInputFromRow(d,r);var t=m.editFormGenerator.getParentOfField(I);var R=m.editFormGenerator._getPanelRowIndex(t);var C=m.editFormGenerator.getInputById(u,R,true);if(C&&C.getParent()){var M=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(C);M.resolver=x.resolver;M.label=x.label;M.hasOwnProperty("helpText")&&s(C,x);if(x.hasOwnProperty("contextMeta")&&x.contextMeta.hasOwnProperty("fields")&&M.hasOwnProperty("contextMeta")&&M.contextMeta.hasOwnProperty("fields")){var y=M.contextMeta.fieldsOrder.some(function(E){return!x.contextMeta.fieldsOrder.includes(E);});y&&C.getModel().setProperty("/metadata/fields/"+u+"/contextMeta",x.contextMeta);}if(w){m.editFormGenerator._updateFieldDataMDF(u,w,r,true);v.push(u);}}else{var z=sap.extent.uilib.util.EditFormGeneratorHelper.getGroupNumber(I);var A=sap.extent.uilib.util.EditFormGeneratorHelper.getMainGroupId(I);C=m.editFormGenerator.addConditionalField(u,k.metadata.fields[u],w,t,z,A,R);m.registerDrivenByControls(d,u);v.push(u);var B=t.getModel();var D=B.getData();D.metadata.fieldsOrder.push(u);D.metadata.fields[u]=x;D.data.fields[u]=w;B.setData(D);}});}else{var o=k.metadata.id;var q=k.metadata.placeholderGroup;var P=false;if(e){jQuery.each(e,function(j,u){if(u.drivenGroupId===q){jQuery.each(h,function(w,x){if(u.groupMeta[x]){k.metadata[x]=u.groupMeta[x];}});m.editFormGenerator.replaceConditionalPlaceHolderWithRealControl(k,u.layout);g.push(u.drivenGroupId);f.push(u.drivenResolverId);P=true;}});}if(!P&&c){jQuery.each(c,function(j,u){if(k.metadata.restrictingFieldResolver&&(u.groupMeta.resolver===k.metadata.resolver)){m.editFormGenerator.replaceConditionalPlaceHolderWithRealControl(k,u.layout);g.push(u.drivenGroupId);P=true;}else if(u.drivenResolverIds.contains(o)){if(f.contains(o)){return;}jQuery.each(p,function(w,x){if(u.groupMeta[x]){k.metadata[x]=u.groupMeta[x];}});m.editFormGenerator.replaceConditionalPlaceHolderWithRealControl(k,u.layout);g.push(u.drivenGroupId);P=true;}});}if(!P){if(m.editFormGenerator._sOnFieldChangeTriggerMainGroup){delete m.editFormGenerator._sOnFieldChangeTriggerMainGroup;}var I=m.editFormGenerator.getInputById(d,r);var t=m.editFormGenerator.getParentOfField(I);var G=m.editFormGenerator.addConditionalGroupToPlaceholder(k,t);m.registerConditionalGroupsWithoutPlaceholder(d,k.metadata.id,k.metadata.resolver,G,k.metadata,r);}}});}b=m.mDrivenByControls[d];if(b){jQuery.each(b,function(i,j){m.editFormGenerator.updatePropertyById(j,r,sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY,v.contains(j),null,null,true);});}if(c){jQuery.each(c,function(i,j){m.setOverridenVisibilityProperty(j.layout,g.contains(j.drivenGroupId));});}if(e){jQuery.each(e,function(i,j){m.setOverridenVisibilityProperty(j.layout,g.contains(j.drivenGroupId));});}function s(C,i){var l=C.getLabels&&C.getLabels()&&C.getLabels()[0]&&C.getLabels()[0]instanceof sap.m.HBox&&C.getLabels()[0].getItems();l&&l.forEach(function(j,k){if(j.hasStyleClass("sapExtentUilibHelpTextIcon")){if(sap.extent.uilib.util.EditFormGeneratorHelper._getCustomData(j,"meta")){sap.extent.uilib.util.EditFormGeneratorHelper._setCustomData(j,"meta",i);}}})}};sap.extent.uilib.util.MDFConditionalSupport.prototype.setOverridenVisibilityProperty=function(l,v){var c=l.getContent();jQuery.each(c,function(i,C){if(C instanceof sap.m.Panel){C.getModel().setProperty("/metadata/"+sap.extent.uilib.util.EditFormGenerator.OVERRIDEN_VISIBILITY_PROPERTY,v);}});};},"sap/extent/uilib/util/PP3GridData.js":function(){jQuery.sap.declare("sap.extent.uilib.util.PP3GridData");jQuery.sap.require("sap.ui.layout.GridData");sap.ui.layout.GridData.extend("sap.extent.uilib.util.PP3GridData",{metadata:{library:"sap.extent.uilib",properties:{colSpan:{type:"int",group:"Misc",defaultValue:null}}}});},"sap/extent/uilib/util/PayGroupPopup.js":function(){jQuery.sap.declare("sap.extent.uilib.util.PayGroupPopup");jQuery.sap.require("sap.ui.layout.VerticalLayout");jQuery.sap.require("sap.m.Text");jQuery.sap.require("sap.m.Popover");jQuery.sap.require("sap.ui.layout.HorizontalLayout");jQuery.sap.require("sap.m.ObjectNumber");sap.extent.uilib.util.PayGroupPopup=function(){alert("Do not instantiate PayGroupPopup!")};(function(){"use strict";sap.extent.uilib.util.PayGroupPopup.getField=function(f,i,I,g,m,F,a,r){var M=jQuery.extend(true,{},i);M.type="string";var t=sap.ui.getCore().getModel("i18n").getResourceBundle().getText("COMMON_Help");var o=new sap.m.Button({icon:"sap-icon://sys-help",type:sap.m.ButtonType.Transparent,press:jQuery.proxy(sap.extent.uilib.util.PayGroupPopup.show,this,M)});o.setTooltip(t);o.addStyleClass("sapExtentUilibFormPatternLink");var b=sap.extent.uilib.util.EditFormGeneratorHelper.buildInput(f,M,I,g,m,null,undefined,a,r);var T=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[b,o]});return T};sap.extent.uilib.util.PayGroupPopup.getAssociationsToPayRangeHLayout=function(i,p){var l=JSON.parse(p.label);var a=l.associations.join(", ");var P=l.range;var r=new sap.ui.layout.HorizontalLayout();var A=new sap.m.Text({text:a});A.addStyleClass(i?"sapExtentUilibFormPatternPGLHSCompaRatio":"sapExtentUilibFormPatternPGLHS");r.addContent(A);var o=sap.ui.core.IconPool.createControlByURI({src:"sap-icon://arrow-right"});o.addStyleClass("sapExtentUilibFormPatternLabel");r.addContent(o);r.addContent(sap.extent.uilib.util.PayGroupPopup.getPayRange(i,P));return r;};sap.extent.uilib.util.PayGroupPopup.getPayRange=function(i,t){var p=new sap.m.Text({text:t});p.addStyleClass(i?"sapExtentUilibFormPatternPGCRValue":"sapExtentUilibFormPatternPGRPValue");return p;};sap.extent.uilib.util.PayGroupPopup.getPayRangeFormulaHLayout=function(i,p){var w=i?"20rem":"30rem";var d="";var D="";var f=p[i?3:4];var a=i?5:6;var b=p[a];var c;if(b){var n=b.newValue;c=n==="true";}else{c=true;}var F=new sap.ui.layout.HorizontalLayout();F.addStyleClass(i?"sapExtentUilibFormPatternPGLHSCompaRatio":"sapExtentUilibFormPatternPGLHS");var o=new sap.ui.layout.VerticalLayout();o.addStyleClass("sapExtentUilibFormPatternLabel");var A=this.getPayCompValueText(p[1]);var s=(f.externalCode||f.label)+("("+f.newValue+")&#x200E;");var e;if(c){e=" * "+s;}else{e="";}if(i){d=A;D=(this.getPayCompValueText(p[2])+e);}else{var P=this.getPayCompValueText(p[2]);d=(A+" - "+P+e);D=(this.getPayCompValueText(p[3])+e+" - "+P+e);}var g=new sap.ui.core.HTML();g.setContent("<div style=\"width:"+w+"\">"+d+"</div>");var h=new sap.ui.core.HTML();h.setContent("<div style=\"width:"+w+"\" class=\"sapExtentUilibFormPatternPopupHorizontalLine\">"+D+"</div>");o.addContent(g);o.addContent(h);var j=new sap.m.Text({text:"* 100"});F.addContent(o);F.addContent(j);return F;};sap.extent.uilib.util.PayGroupPopup.getPayCompValueText=function(p){var v=(p.externalCode||p.label);if(p.newValue){v=v+(" ("+p.newValue+" "+p.currencyCode+")&#x200E;");}return v;};sap.extent.uilib.util.PayGroupPopup.show=function(m,e){var b=sap.ui.getCore().getModel("i18n").getResourceBundle();var p=new sap.m.Popover({placement:sap.m.PlacementType.Top,showHeader:false});var P=new sap.ui.layout.VerticalLayout();p.addContent(P);var I=m.id;var a=(I==="compInfo-compa-ratio");if(a||I==="compInfo-range-penetration"){P.addStyleClass("sapExtentUilibFormPatternPGPopup");var c=m.payComponents;var o=c[a?4:5];var r=sap.extent.uilib.util.PayGroupPopup.getAssociationsToPayRangeHLayout(a,c[0]);var d=new sap.ui.layout.HorizontalLayout();d.addStyleClass("sapExtentUilibFormPatternSubsequentBlock");var E=new sap.m.Text({text:"="});E.addStyleClass("sapExtentUilibFormPatternLabel");d.addContent(sap.extent.uilib.util.PayGroupPopup.getPayRangeFormulaHLayout(a,c));d.addContent(E);d.addContent(sap.extent.uilib.util.PayGroupPopup.getPayRange(a,o.newValue));P.addContent(r);P.addContent(d);}else{P.addStyleClass("sapExtentUilibFormPatternLanguagePopup");var t=m.payComponents[0].currencyCode;var u;for(var i=0;i<m.payComponents.length;i++){var f=new sap.ui.layout.HorizontalLayout({width:"100%"});if(i<m.payComponents.length-1){f.addStyleClass("sapExtentUilibFormPatternPopupRow");u=m.payComponents[i].currencyCode;if(t!==u){t="";}}else{f.addStyleClass("sapExtentUilibFormPatternPopupHorizontalLine");u=t;}var l=new sap.m.Text({text:m.payComponents[i].label||m.payComponents[i].externalCode||m.label});l.addStyleClass("sapExtentUilibFormPatternLabel");l.addStyleClass("sapExtentUilibFormPatternPopupLabel");f.addContent(l);var n=m.payComponents[i].newValue;var v=new sap.m.ObjectNumber({number:n,tooltip:n+" "+u});if(n){v.setUnit(u);}v.addStyleClass("sapExtentUilibFormPatternPopupValue");f.addContent(v);P.addContent(f);}}p.openBy(e.getSource());};})();},"sap/extent/uilib/util/QuickCardManager.js":function(){jQuery.sap.declare('sap.extent.uilib.util.QuickCardManager');sap.extent.uilib.util.QuickCardManager={};sap.extent.uilib.util.QuickCardManager.quickCard=null;sap.extent.uilib.util.QuickCardManager.create=function(t,c,u,r,a){this.quickCard=Quickcard.newInstance(a);this.quickCard.addEventListener('hide',c);this.show(t,r);this.setVisibleUser(u);};sap.extent.uilib.util.QuickCardManager.getQuickCard=function(){return this.quickCard;};sap.extent.uilib.util.QuickCardManager.show=function(t,r){this.quickCard.show(t,true,r);};sap.extent.uilib.util.QuickCardManager.hide=function(){if(this.quickCard&&this.quickCard.isDialogVisible()){this.quickCard.hide();}};sap.extent.uilib.util.QuickCardManager.setVisibleUser=function(u){this.quickCard.visibleUser=u;};sap.extent.uilib.util.QuickCardManager.getVisibleUser=function(){return this.quickCard?this.quickCard.visibleUser:'';};sap.extent.uilib.util.QuickCardManager.clearVisibleUser=function(){if(this.quickCard){this.quickCard.visibleUser='';}};sap.extent.uilib.util.QuickCardManager.registerQuickCardTimeout=function(t){this.quickCardTimeout=t;};sap.extent.uilib.util.QuickCardManager.clearQuickCardTimeout=function(){if(this.quickCardTimeout){window.clearTimeout(this.quickCardTimeout);}};},"sap/extent/uilib/util/SCBAutoCompleteHelper.js":function(){jQuery.sap.declare("sap.extent.uilib.util.SCBAutoCompleteHelper");sap.extent.uilib.util.SCBAutoCompleteHelper=function(m,a){this.init(m,a);};sap.extent.uilib.util.SCBAutoCompleteHelper.prototype.init=function(m,u){this._searchConfig={searchType:m.searchType,searchText:'',pageNumber:m.pageNumber||1,pageSize:m.pageSize||100,contextualSearchFields:{},customFields:[]};this._controllerName=m.dataSource||"foundationAutoCompleteController";this._utilsAdapter=u;};sap.extent.uilib.util.SCBAutoCompleteHelper.prototype.listen=function(s){s.attachSearchInputted(jQuery.proxy(this.onSearchHandler,this));s.attachPageMoreData(jQuery.proxy(this.onPageMoreDataHandler,this));s.attachPopulateDropdown(jQuery.proxy(this.onPopulateDropDownHandler,this));};sap.extent.uilib.util.SCBAutoCompleteHelper.prototype.onSearchHandler=function(e){var s=e.getSource();this._searchConfig.pageNumber=1;this._searchConfig.searchText=s.getValue();this._search(s,true);};sap.extent.uilib.util.SCBAutoCompleteHelper.prototype.onPageMoreDataHandler=function(e){this._searchConfig.pageNumber+=1;var s=e.getSource();this._search(s,false);};sap.extent.uilib.util.SCBAutoCompleteHelper.prototype.onPopulateDropDownHandler=function(e){var s=e.getSource();this._searchConfig.pageNumber=1;this._searchConfig.searchText='';this._search(s,true);};sap.extent.uilib.util.SCBAutoCompleteHelper.prototype.setContextualSearchFieldValue=function(k,v){};sap.extent.uilib.util.SCBAutoCompleteHelper.prototype._search=function(s,r){var u=sap.ui.getCore().getModel("user").getProperty("/userId");var d=jQuery.Deferred();this._utilsAdapter.getFACValues(d,u,this._searchConfig,this._controllerName);var a=this;d.done(function(b){var m=s.getModel("results");if(!m||r){m=new sap.ui.model.json.JSONModel(b);m.setSizeLimit(b.totalNumberOfRecords||1000);s.setModel(m,"results");var i=new sap.extent.uilib.SearchableComboBoxListItem({type:sap.m.ListType.Active});i.bindProperty("title","results>name");i.bindProperty("key","results>id");s.bindItems("results>/results",i);}else{m.getData().results=jQuery.merge(m.getData().results,b.results);m.setData(m.getData());}s.setPagesLoaded(a._searchConfig.pageNumber);});d.fail(function(e){jQuery.sap.log.error("Autocomplete Search failed!");});};},"sap/extent/uilib/util/SCBPicklistHelper.js":function(){jQuery.sap.declare("sap.extent.uilib.util.SCBPicklistHelper");jQuery.sap.require("sap.extent.uilib.SearchableComboBox");jQuery.sap.require("sap.extent.uilib.SearchableComboBoxListItem");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");jQuery.sap.require("sap.m.ListType");sap.extent.uilib.util.SCBPicklistHelper=function(l){this.init(l);return this;};sap.extent.uilib.util.SCBPicklistHelper.FOUNDATION_TYPE_MAP={"FOUNDATION_AUTOCOMPLETE":true,"WORKSCHEDULECOMBOBOX":true,"USER":true};sap.extent.uilib.util.SCBPicklistHelper.prototype.init=function(l){this.listener=l;this.loaded=[];this.savedResults=[];this.commonUtils=sap.extent.uilib.util.CommonUtils.getInstance();this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();this._dwrAdapter=sap.sf.peopleprofile.model.pp3core.DWRUtilsAdapter;};sap.extent.uilib.util.SCBPicklistHelper.prototype.listen=function(s){s.attachSearchInputted(jQuery.proxy(this.dropdownHandler,this));s.attachPopulateDropdown(jQuery.proxy(this.dropdownHandler,this));s.attachPageMoreData(jQuery.proxy(this.growHandler,this));s.attachSelectionChange(jQuery.proxy(this.selectionChangeHandler,this));s.attachGetLabel(jQuery.proxy(this.getLabelHandler,this));};sap.extent.uilib.util.SCBPicklistHelper.prototype.selectionChangeHandler=function(e){var s=e.getSource();var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(s);this._cacheSelectionChanged(s,m);};sap.extent.uilib.util.SCBPicklistHelper.prototype.isFoundtationType=function(m){var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m);if(sap.extent.uilib.util.SCBPicklistHelper.FOUNDATION_TYPE_MAP[t]||sap.extent.uilib.util.SCBPicklistHelper.FOUNDATION_TYPE_MAP[m.fieldType]){return true;}return false;};sap.extent.uilib.util.SCBPicklistHelper.prototype.dropdownHandler=function(e){var s=e.getSource();var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(s);if(e.sId=="populateDropdown"){s.setSearchValue(null);}else if(e.sId=="searchInputted"){s.setSearchValue(e.getParameter("data"));}var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m);if(t=="PICKLISTAUTOCOMPLETE"||t=="USERINFOMETADATAOPTIONS"){this._handlePicklistAutoComplete(s,m);}else if(this.isFoundtationType(m)){this._handleFoundationAutoComplete(s,m);}else if(t=="HRIS_FINDUSER"){this._handleHrisAutoComplete(s,m);}};sap.extent.uilib.util.SCBPicklistHelper.prototype.handleDropdownClose=function(e){var s=this;if(s.getSelectedKey()==""){s.setSelectedItem(null);}};sap.extent.uilib.util.SCBPicklistHelper.prototype.getLabelHandler=function(e){var s=e.getSource();var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(s);var S=e.getParameter("selectedKey");var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m);if(t==="PICKLISTAUTOCOMPLETE"){this._handlePicklistGetLabel(s,m,S);}};sap.extent.uilib.util.SCBPicklistHelper.prototype._handlePicklistGetLabel=function(s,m,S){var p=Number(S);if(isNaN(p)){return;}var d=this.listener.getPicklistLabel(m.picklistId,p);if(d){d.done(jQuery.proxy(function(l){s.setValue(l,true);var r=sap.extent.uilib.util.EditFormGeneratorHelper.getRowId(s);if(s.getModel().getData().dataList&&s.getModel().getData().dataList[r]){var f=s.getModel().getData().dataList[r].v||[];for(var i=0,a=f.length;i<a;i++){if(f[i]&&(f[i].id===m.id)&&!f[i].value["primaryDisplayText"]){f[i].value["primaryDisplayText"]=l;break;}}}else{var D=s.getModel().getData().data.fields[m.id];if(D&&D.value[0]&&!D.value[0]["primaryDisplayText"]){D.value[0]["primaryDisplayText"]=l;}}},this));}};sap.extent.uilib.util.SCBPicklistHelper.prototype._handleHrisAutoComplete=function(s,M){var u="";var m=M.m||"autocomplete";var f=M.findType||"fullname";var a=M.maxResults||30;var h=M.autoCompleteHideUserName?1:0;var b=M.includeInactive||false;var c=M.includeExternalUsers||false;var d=M.adminPage||false;var e=M.id&&M.id.indexOf("hrId")!=-1?"addNoHr":(M.id&&M.id.indexOf("manager")!=-1?"addNoMgr":undefined);var g=0;var j="";var k=s.getSearchValue();if(k==""){k=null;}else{k=encodeURIComponent(k);}j=this.listener.getAjaxKey();if(j&&j!=""){u="/jsup?query="+k+"&m="+m+"&findtype="+f+"&maxresults="+a+"&hideusername="+h+"&includeInactive="+b+"&includeExternalUsers="+c+"&adminPage="+d+"&groupId="+g+"&addOption="+e+"&_s.crb="+j;if(M.module&&M.module=="empprofile"){u+="&module=empprofile";}jQuery.get(u,jQuery.proxy(function(M,r){try{var R=JSON.parse(r);}catch(l){R={"ResultSet":{"Result":[]}};}var I=new sap.extent.uilib.SearchableComboBoxListItem({type:sap.m.ListType.Active});if(M.usePhotoForAutoComplete){for(var i=0;i<R.ResultSet.Result.length;i++){var p=sap.sf.surj.shell.controls.UserPhotoSrc.parse({urlType:'eduPhoto',photoType:'face',userId:R.ResultSet.Result[i].UserId,mod:R.ResultSet.Result[i].photoMod});R.ResultSet.Result[i].image=p;}I.bindProperty("icon","userSearch>image");}var o=new sap.ui.model.json.JSONModel(R.ResultSet);s.setModel(o,"userSearch");I.bindProperty("title","userSearch>FullName");I.bindProperty("key","userSearch>UserId");if(!M.autoCompleteHideUserName){I.bindProperty("description",{parts:["userSearch>UserId"],formatter:this.getSecondaryDisplayText});}s.bindItems("userSearch>/Result",I);},this,M));}};sap.extent.uilib.util.SCBPicklistHelper.prototype._getPicklistCache=function(){var p=sap.ui.getCore().getModel("picklistCache");if(!p){p=new sap.ui.model.json.JSONModel();sap.ui.getCore().setModel(p,"picklistCache");}return p;};sap.extent.uilib.util.SCBPicklistHelper.prototype._setCache=function(s,m,M,r){var c;if(m.picklistId){c=m.id+"-"+m.picklistId;}else{c=m.id;}var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m);if(t==="PICKLISTAUTOCOMPLETE"){var a=jQuery.extend(true,{},M);var b={id:c,refInfo:r,data:a};var p=this._getPicklistCache();p.setProperty("/"+c,b);}};sap.extent.uilib.util.SCBPicklistHelper.prototype._getCache=function(s,m){var c;if(m.picklistId){c=m.id+"-"+m.picklistId;}else{c=m.id;}s.cacheUsed=false;return;};sap.extent.uilib.util.SCBPicklistHelper.prototype._invalidateCache=function(s,m){var c=m.id;if(!!c){sap.ui.getCore().setModel(null,c);}s.cacheUsed=false;};sap.extent.uilib.util.SCBPicklistHelper.prototype._cacheSelectionChanged=function(s,m){var c=m.id;var k,a;if(s&&s.getSelectedItem()&&s.getSelectedItem().getKey()){k=s.getSelectedItem().getKey();a=sap.ui.getCore().getModel(c);if(!!a&&!!k){a.setProperty("selectedValue",k);var b=new Date();a.setProperty("changeTime",b);}}};sap.extent.uilib.util.SCBPicklistHelper.prototype._checkCSFCache=function(s,m,c){if(!!m&&m.hasOwnProperty("searchOptions")){var C=m.searchOptions.contextualSearchFields;if(C){for(var i=0;i<C.length;i++){if(C[i].valueKey.valueOf()){var d=C[i].valueKey.valueOf();var a=sap.ui.getCore().getModel(d);if(!!a&&a.hasOwnProperty("selectedValue")){var b=a.getProperty("selectedValue");var e=c.getProperty("depValue");if(b!==e){this._invalidateCache(s,m);}}}}}}};sap.extent.uilib.util.SCBPicklistHelper.prototype._getFoundationSearchOptions=function(s,m,p){var a=s.getSearchValue();if(a==""){a=null;}var b=s.getGrowingThreshold();var d=false;if(m.searchOptions&&(m.searchOptions.searchType=="WORKER")){d=true;}var S={"searchType":m.searchOptions.searchType,"pageSize":b,"pageNumber":p,"baseField":m.searchOptions.baseField,"baseElement":m.searchOptions.baseElement,"hrisElementField":m.searchOptions.hrisElementField||m.id,"target":m.searchOptions.target,"valueAttribute":m.searchOptions.valueAttribute,"applyTC":!!m.applyTC,"displayBizPhone":d,"displayJobTitle":d,"searchText":a,"userSysId":m.searchOptions.userSysId,"id":m.searchOptions.id||m.id,"customFields":m.searchOptions.customFields};if(m&&m.hasOwnProperty("includeInactive")){S.includeInactive=m.includeInactive;}var c=m.searchOptions.contextualSearchFields||[];var l=[];var L={};var f,e;var i,g;for(i=0,g=c.length;i<g;i++){f=c[i].fieldId||c[i];e=c[i].valueKey||f;L[e]={id:f,defaultValue:c[i].defaultValue};l.push(e);}var M=sap.extent.uilib.util.EditFormGeneratorHelper.getMainGroupId(s);var h=s.getModel().getProperty('/metadata/_sPanelIdInLayout');var G=sap.extent.uilib.util.EditFormGeneratorHelper.getGroupNumber(s);var C=this.listener.getCSFValues(M,l,h,G);if(C){var o={};for(var j in C){f=L[j].id||j;o[f]=C[j]||L[j].defaultValue;}S.contextualSearchFields=o;}if(m.searchOptions.defaultSearchValues){if(!S.contextualSearchFields){S.contextualSearchFields={};}var k="";for(k in m.searchOptions.defaultSearchValues){if(m.searchOptions.defaultSearchValues.hasOwnProperty(k)&&(!S.contextualSearchFields.hasOwnProperty(k)||sap.extent.uilib.util.EditFormGeneratorHelper.isEmpty(S.contextualSearchFields[k]))){S.contextualSearchFields[k]=m.searchOptions.defaultSearchValues[k];}}}if(m.searchOptions==undefined||m.searchOptions.customFields==undefined||m.searchOptions.customFields.length==0){S.customFields=undefined;}return S;};sap.extent.uilib.util.SCBPicklistHelper.prototype._getPicklistSearchOptions=function(s,m,p){var a=s.getSearchValue();var b=s.getGrowingThreshold();if(a==""){a=null;}var S={"pageNumber":p,"pageIndex":p-1,"pageSize":b,"startIndex":b*(p-1),"endIndex":(b-1)+(b*(p-1)),"filterType":null,"filterValue":a,"parentOptionId":m.parentFieldId};var M=s.getModel("picklist");var d=M&&M.getData();if(d&&(d.totalCount>=0)&&!d.firstPageLoad){S.totalCount=M.getData().totalCount;}return S;};sap.extent.uilib.util.SCBPicklistHelper.prototype._handleNoResults=function(s,d,D){this._oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();var n={};n.id=0;n.objectId=0;n.name=this._oBundle.getText("ECT_NO_DATA");n.primaryDisplayText=this._oBundle.getText("ECT_NO_DATA");n.label=this._oBundle.getText("ECT_NO_DATA");n.value=null;n.parentOptionId=-1;d[D].push(n);d.totalNumberOfRecords=1;s.setSelectedKey("");s.setSelectionDisabled(true);};sap.extent.uilib.util.SCBPicklistHelper.prototype._updateDropDownModel=function(s,m,d,M,b,i){var o=new sap.ui.model.json.JSONModel(d);var t=d.hasOwnProperty("totalNumberOfRecords")&&d.totalNumberOfRecords>1000?d.totalNumberOfRecords:1000;o.setSizeLimit(t);s.setModel(o,M);this._setCache(s,m,o);s.bindItems(b,i);s.setPagesLoaded(1);this.loaded[1]=true;};sap.extent.uilib.util.SCBPicklistHelper.prototype._addPicklistLoadingItem=function(s,m,d,i){var o={"disabled":true,"label":this._oBundle.getText("COMMON_loading"),"parentOptionId":-1,"value":-1};d.picklistOptions.push(o);if(i){this._updateDropDownModel(s,m,d,"picklist","picklist>/picklistOptions",i);}};sap.extent.uilib.util.SCBPicklistHelper.prototype._removeLoadingItem=function(m,d){var D=m.getData();var t=[];if(D[d]){for(var i=0;i<D[d].length;i++){if(!(D[d][i].label===this._oBundle.getText("COMMON_loading"))&&!(D[d][i].name===this._oBundle.getText("COMMON_loading"))){t.push(D[d][i]);}}D[d]=t;}return D[d];};sap.extent.uilib.util.SCBPicklistHelper.prototype.convertPicklistfromMetadataOptions=function(d){if(d.metadataOptions){var c=[];jQuery.each(d.metadataOptions,function(i,o){var a={};a.label=o;a.value=o;c.push(a);});d.picklistOptions=c;delete d.metadataOptions;}};sap.extent.uilib.util.SCBPicklistHelper.prototype._getParentOptionId=function(s,m){var p=null;if(m&&m.parentFieldId){var M=sap.extent.uilib.util.EditFormGeneratorHelper.getMainGroupId(s);var i=this.listener._getInputFromFields(M,m.parentFieldId);if(!i){i=this.listener.getInputById(m.parentFieldId);}p=sap.extent.uilib.util.EditFormGeneratorHelper.getInputValue(i);}return p;};sap.extent.uilib.util.SCBPicklistHelper.prototype._handlePicklistAutoComplete=function(s,m){this.loaded=[];this.savedResults=[];this.loaded[1]=false;sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT=sap.extent.uilib.SearchableComboBox.DEFAULT_LINE_HEIGHT;sap.extent.uilib.SearchableComboBox.COMBO_HEIGHT=sap.extent.uilib.SearchableComboBox.DEFAULT_HEIGHT;var i=new sap.extent.uilib.SearchableComboBoxListItem({type:sap.m.ListType.Active});i.bindProperty("title","picklist>label");i.bindProperty("key","picklist>value");this._getCache(s,m);this._addPicklistLoadingItem(s,m,{picklistOptions:[],totalCount:1,firstPageLoad:true},i);if(s.cacheUsed){s.bindItems("picklist>/picklistOptions",i);}else{var S=this._getPicklistSearchOptions(s,m,1);var p=this._getParentOptionId(s,m);var c=Number(s.getSelectedKey());if(isNaN(c)){c="";}var a;if(m.type=="USERINFOMETADATAOPTIONS"){a=new jQuery.Deferred();this._dwrAdapter&&this._dwrAdapter.searchUserInfoMetadataOptionsByPage(a,m.id,S.filterValue,S.pageNumber,S.pageSize);}else if(m.fromHeaderPage){a=new jQuery.Deferred();this._dwrAdapter&&this._dwrAdapter.getPicklistValues(a,null,m.picklistId,S,c,m.required);}else{a=this.listener.getPicklistValues(p,m.picklistId,S,c,m.required);}if(a){a.done(jQuery.proxy(function(d){this.convertPicklistfromMetadataOptions(d);s.setSelectionDisabled(false);if(d.picklistOptions&&d.picklistOptions.length==0){this._handleNoResults(s,d,"picklistOptions");}if(d.picklistOptions.length<d.totalCount){this._addPicklistLoadingItem(s,m,d);}this._updateDropDownModel(s,m,d,"picklist","picklist>/picklistOptions",i);},this));a.fail(jQuery.proxy(function(d){jQuery.sap.log.error("Picklist search failed:"+d);},this));}}};sap.extent.uilib.util.SCBPicklistHelper.prototype._addFOLoadingItem=function(s,m,d,i){var o={"id":-1,"name":this._oBundle.getText("COMMON_loading"),"primaryDisplayText":this._oBundle.getText("COMMON_loading")};d.results.push(o);if(i){this._updateDropDownModel(s,m,d,"foundation","foundation>/results",i);}};sap.extent.uilib.util.SCBPicklistHelper.prototype.getSecondaryDisplayText=function(s){var d="";if(s){if(jQuery.isArray(s)){jQuery.each(s,function(a,e){d+=e.id+":"+e.value+" "})}else{d="("+s+")"}}if(d.length){sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT=63;sap.extent.uilib.SearchableComboBox.COMBO_HEIGHT=441;}else{sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT=sap.extent.uilib.SearchableComboBox.DEFAULT_LINE_HEIGHT;sap.extent.uilib.SearchableComboBox.COMBO_HEIGHT=sap.extent.uilib.SearchableComboBox.DEFAULT_HEIGHT;}return d;};sap.extent.uilib.util.SCBPicklistHelper.prototype._handleFoundationAutoComplete=function(s,m){this.loaded=[];this.savedResults=[];this.loaded[1]=false;var i=new sap.extent.uilib.SearchableComboBoxListItem({type:sap.m.ListType.Active});i.bindProperty("title","foundation>primaryDisplayText");i.bindProperty("description",{parts:["foundation>secondaryDisplayText"],formatter:this.getSecondaryDisplayText});if(m.searchOptions&&m.searchOptions.searchType=="WORKER"){sap.extent.uilib.SearchableComboBox.COMBO_LINE_HEIGHT=63;sap.extent.uilib.SearchableComboBox.COMBO_HEIGHT=441;i.bindProperty("description",{parts:["foundation>jobTitle","foundation>jobLocation"]});}var v=m.searchOptions.valueAttribute;if(!v){v="id";}i.bindProperty("key","foundation>"+v);i.bindProperty("icon","foundation>image");i.bindProperty("propagation","foundation>propagations");this._getCache(s,m);this._addFOLoadingItem(s,m,{results:[],totalNumberOfRecords:1},i);if(s.cacheUsed){s.bindItems("foundation>/results",i);}else{var S=this._getFoundationSearchOptions(s,m,1);var c="foundationAutoCompleteController";if(m.dataSource){c=m.dataSource;}var f=this.listener.getFACValues(sap.ui.getCore().getModel("user").getData().userId,S,(sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m)=="CASCADE"?null:c));if(f){f.done(jQuery.proxy(function(m,d){if(d.totalNumberOfRecords==-1){delete d.totalNumberOfRecords;}s.setSelectionDisabled(false);if(d.results.length==0){this._handleNoResults(s,d,"results");}else{this._addUserImageURL(m,d);}if(d.results[0]&&!d.results[0].hasOwnProperty(v)){v="id";}i.bindProperty("key","foundation>"+v);d.hasSeparator=this._hasSeparatorItem(d.results);if((d.results.length-(d.hasSeparator?1:0)<(d.totalNumberOfRecords))||d.getNextPage){this._addFOLoadingItem(s,m,d);}this._updateDropDownModel(s,m,d,"foundation","foundation>/results",i);if(d&&d.customMessage&&d.customMessage!=null){if(typeof s.setValueState==="function"){s.setValueState("Information");s.setValueStateText(d.customMessage);}}},this,m));f.fail(jQuery.proxy(function(d){jQuery.sap.log.error("Foundation search failed:"+d);},this));}}};sap.extent.uilib.util.SCBPicklistHelper.prototype._addUserImageURL=function(m,d){if(m.searchOptions.searchType==="WORKER"){for(var i=0;i<d.results.length;i++){d.results[i].image="/localpicture?ps_p_action=show&ps_p_uid="+d.results[i].id+"&p_type=quickcard&_s.crb="+ajaxSecKey;}}return d;};sap.extent.uilib.util.SCBPicklistHelper.prototype.growHandler=function(e){var s=e.getSource();var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(s);var t=sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m);if(t=="PICKLISTAUTOCOMPLETE"||t=="USERINFOMETADATAOPTIONS"){this._handlePicklistGrow(s,m);}else if(this.isFoundtationType(m)){this._handleFoundationGrow(s,m);}};sap.extent.uilib.util.SCBPicklistHelper.prototype._handleGrowResponse=function(s,m,d,a,p){var t;var b;if(!a[d]){return;}var l=true;for(var i=0;i<p;i++){if(this.loaded[i]===false){l=false;}}if(l){t=m.getData();t[d]=jQuery.merge(t[d],a[d]);if(this.commonUtils.isIE9()){b=s.getScrollPosition();}m.setData(t);if(this.commonUtils.isIE9()){s.setScrollPosition(b);}var n=p+1;while(this.loaded[n]===true){if(this.savedResults[n]){m.getData()[d]=jQuery.merge(m.getData()[d],this.savedResults[n]);if(m.getProperty("/totalNumberOfRecords")<(m.getData()[d].length-(m.getData().hasSeparator?1:0))){this._removeLoadingItem(m,d);}m.setData(m.getData());}n++;}}else{this.savedResults[p]=a.results;}this.loaded[p]=true;var S=s.getSelectedItem();if(S){var D=s.getFocusDomRef();if(D){setTimeout(function(){D.setAttribute("aria-activedescendant",S.getId());},500);}}};sap.extent.uilib.util.SCBPicklistHelper.prototype._handlePicklistGrow=function(s,m){if(s.bStopGrowing){return;}s.bStopGrowing=true;var p=s.getPagesLoaded()+1;s.setPagesLoaded(p);this.loaded[p]=false;var a=this._getParentOptionId(s,m);var S=this._getPicklistSearchOptions(s,m,p);var c=Number(s.getSelectedKey());if(isNaN(c)){c="";}var b;if(m.type=="USERINFOMETADATAOPTIONS"){b=new jQuery.Deferred();this._dwrAdapter&&this._dwrAdapter.searchUserInfoMetadataOptionsByPage(b,m.id,S.filterValue,S.pageNumber,S.pageSize);}else if(m.fromHeaderPage){b=new jQuery.Deferred();this._dwrAdapter&&this._dwrAdapter.getPicklistValues(b,null,m.picklistId,S,c,m.required);}else{b=this.listener.getPicklistValues(a,m.picklistId,S,c,m.required);}var M=s.getModel("picklist");b.done(jQuery.proxy(function(d){this.convertPicklistfromMetadataOptions(d);var e=this._removeLoadingItem(M,"picklistOptions").length;if((e+d.picklistOptions.length)<d.totalCount){this._addPicklistLoadingItem(s,m,d);}this._handleGrowResponse(s,M,"picklistOptions",d,p);s.bStopGrowing=false;},this));b.fail(jQuery.proxy(function(d){jQuery.sap.log.error("Picklist search grow failed: "+d);s.bStopGrowing=false;},this));};sap.extent.uilib.util.SCBPicklistHelper.prototype._handleFoundationGrow=function(s,m){if(s.bStopGrowing){return;}s.bStopGrowing=true;var p=s.getPagesLoaded()+1;var l=s;s.setPagesLoaded(p);this.loaded[p]=false;var S=this._getFoundationSearchOptions(s,m,p);var c="foundationAutoCompleteController";if(m.dataSource){c=m.dataSource;}var f=this.listener.getFACValues(sap.ui.getCore().getModel("user").getData().userId,S,(sap.extent.uilib.util.EditFormGeneratorHelper.getTypeFromMeta(m)=="CASCADE"?null:c));var M=s.getModel("foundation");f.done(jQuery.proxy(function(d){if(d.totalNumberOfRecords==-1){delete d.totalNumberOfRecords;}if(d.results){var n=false;this._addUserImageURL(m,d);var r=this._removeLoadingItem(M,"results").length;if(!M.getData().hasSeparator){M.getData().hasSeparator=this._hasSeparatorItem(d.results);}for(var i=0;i<this.loaded.length;i++){if(this.loaded[i]==true&&i==(p+1)){n=true;}}if(((r+d.results.length-(M.getData().hasSeparator?1:0))<M.getData().totalNumberOfRecords&&!n)||d.getNextPage){this._addFOLoadingItem(s,m,d);}this._handleGrowResponse(s,M,"results",d,p);s.bStopGrowing=false;}},this));f.fail(jQuery.proxy(function(d){s.bStopGrowing=false;jQuery.sap.log.error("Foundation search grow failed:"+d);},this));};sap.extent.uilib.util.SCBPicklistHelper.prototype._hasSeparatorItem=function(s){if(s&&Array.isArray(s)&&s.length>0){for(var i=0,l=s.length;i<l;i++){if(s[i].name==null&&s[i].primaryDisplayText.trim()==""){return true;}}}return false;};},"sap/extent/uilib/util/SearchPositionUtil.js":'jQuery.sap.declare("sap.extent.uilib.util.SearchPositionUtil");jQuery.sap.require("sap.sf.surj.shell.util.SearchUtil");SMRF.load(["ajaxservice:genericobject.genericObjectAutoCompleteController"]);var util=jQuery.sap.getObject("sap.sf.surj.shell").util;sap.ui.require(["jquery.sap.global","sap/sf/surj/shell/util/SearchUtil","sap/sf/surj/shell/util/DeferredUtil"],function($,S,D){sap.extent.uilib.util.SearchPositionUtil=Object.create(S);function c(C,o){o=o||{pageNumber:1,itemsReturned:0};return D.invokeAjaxService({serviceName:"genericObjectAutoCompleteController",serviceMethod:"search",arguments:[{searchText:C.searchValue,pageNumber:o.pageNumber,pageSize:7,applyTC:true,searchType:"Position",target:"GenericObject"}]}).then(function(r){var i=r.results;var t=o.totalCount=o.totalCount||r.totalNumberOfRecords;var I=o.itemsReturned=o.itemsReturned+(i&&i.length||0);var h=i&&i.length>0&&I<t;return{type:"Position",items:i,hasMore:h,totalCount:t,more:h?function(){o.pageNumber++;return c(C,o);}:null}});}S.register("Position",{search:c});$.sap.setObject("sap.extent.uilib.util.SearchPositionUtil",{createThrottle:function(){return S.createThrottle();}});});\n',"sap/extent/uilib/util/SearchTalentPoolUtil.js":'jQuery.sap.declare("sap.extent.uilib.util.SearchTalentPoolUtil");jQuery.sap.require("sap.sf.surj.shell.util.SearchUtil");SMRF.load(["ajaxservice:genericobject.genericObjectAutoCompleteController"]);var util=jQuery.sap.getObject("sap.sf.surj.shell").util;sap.ui.require(["jquery.sap.global","sap/sf/surj/shell/util/SearchUtil","sap/sf/surj/shell/util/DeferredUtil"],function($,S,D){sap.extent.uilib.util.SearchTalentPoolUtil=Object.create(S);function c(C,o){o=o||{pageNumber:1,itemsReturned:0};return D.invokeAjaxService({serviceName:"genericObjectAutoCompleteController",serviceMethod:"search",arguments:[{searchText:C.searchValue,pageNumber:o.pageNumber,pageSize:7,applyTC:true,searchType:"TalentPool",target:"GenericObject"}]}).then(function(r){var i=r.results;var t=o.totalCount=o.totalCount||r.totalNumberOfRecords;var I=o.itemsReturned=o.itemsReturned+(i&&i.length||0);var h=i&&i.length>0&&I<t;return{type:"TalentPool",items:i,hasMore:h,totalCount:t,more:h?function(){o.pageNumber++;return c(C,o);}:null}});}S.register("TalentPool",{search:c});$.sap.setObject("sap.extent.uilib.util.SearchTalentPoolUtil",{createThrottle:function(){return S.createThrottle();}});});\n',"sap/extent/uilib/util/TableGeneratorHelper.js":function(){jQuery.sap.declare("sap.extent.uilib.util.TableGeneratorHelper");jQuery.sap.require("sap.extent.uilib.FormPattern");jQuery.sap.require("sap.extent.uilib.util.CommonUtils");sap.extent.uilib.util.TableGeneratorHelper={};sap.extent.uilib.util.TableGeneratorHelper.IGNORE_POPIN=["payComponentRecurring-pay-component","payComponentRecurring-paycompvalue"];sap.extent.uilib.util.TableGeneratorHelper.getWidths=function(v,u,f,c){var m=0;var M=0;if(v&&v.getDomRef()){var s=(window.innerWidth-v.getDomRef().offsetWidth);m=s+324+this.getAdditionalWidthForButtons(f);if(c=="historyDetailItems"){m+=30;}var V=v.getDomRef().offsetWidth;if(u){V=v.getParent().getDomRef().offsetWidth;}M=s+V+1;}else{m=743;M=1537;}return{minWidth:m,maxWidth:M,popInButtons:M<m?true:false};};sap.extent.uilib.util.TableGeneratorHelper.getColumn=function(c,h,w,b,o){o=o||{};var n=new sap.m.Column({width:"10em",header:h,demandPopin:{parts:["id","/metadata/fieldsOrder"],formatter:function(e,d){return sap.extent.uilib.util.TableGeneratorHelper.IGNORE_POPIN.indexOf(e)<0&&d.slice(0,2).indexOf(e)<0;}}});if(o.fieldMeta){var a=sap.extent.uilib.util.CommonUtils.getInstance().getNumberColumnHAlignment(o.fieldMeta.type);if(a){n.setHAlign(a);}}var f=c.getProperty("id");var d=c.getProperty("/metadata/fieldsOrder");var m=c.getProperty("/metadata");var i=false;n.setVisible(c.getProperty("/metadata/fields/"+f+"/type")!="HIDDEN");if(m&&m.hasOwnProperty("actions")){i=m.actions.rearrange;}if(sap.extent.uilib.util.TableGeneratorHelper.IGNORE_POPIN.indexOf(f)<0&&d.slice(0,2).indexOf(f)<0){if(f==sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM||f==sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM||f==sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM||f==sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM){n.setPopinDisplay(sap.m.PopinDisplay.WithoutHeader);if(f==sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM){n.setWidth("6em");}else{var D=(sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled)?"4em":"3em";n.setWidth(D);}if(w.popInButtons){this.setWidth(n,w,i);}}else{this.setWidth(n,w,i);}}return n;};sap.extent.uilib.util.TableGeneratorHelper.setWidth=function(c,w,i){if(w){w.minWidth+=140;w.minWidth+=((i?96:48)+48);c.setMinScreenWidth(w.minWidth+"px");c.setPopinDisplay(sap.m.PopinDisplay.Inline);}};sap.extent.uilib.util.TableGeneratorHelper.getTable=function(e,v,t,m,f){if(e._oDialog&&!e._oDialog.getDomRef()){setTimeout(function(){sap.extent.uilib.util.TableGeneratorHelper.getTable(e._oDialog,useParent);},1000);return;}var a=m.metadataAsList.fields;var w=this.getWidths(e._oDialog,false,a);var r=false;var T=new sap.m.Table({sticky:[sap.m.Sticky.ColumnHeaders],keyboardMode:"Edit",backgroundDesign:sap.m.BackgroundDesign.Transparent,columns:{path:"/metadataAsList/fields",factory:jQuery.proxy(function(i,c){var F=c.getProperty("id");var h=null;var b=e._oCommonUtils.getBlindnessSupport();if(b||(F!==sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM&&F!==sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM&&F!==sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM)){h=new sap.m.Label({text:"{label}",tooltip:"{label}",wrapping:true,wrappingType:sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled?sap.m.WrappingType.Normal:sap.m.WrappingType.Hyphenated,required:"{required}",width:{path:"/metadata/fields/"+F+"/label",formatter:function(l){if(this.sId.indexOf("clone")>0){e._oLabels[F+m._sMainGroupId]=this;return sap.extent.uilib.util.EditFormGenerator.DEFAULT_INPUT_WIDTH;}}},visible:{parts:["/metadata/noHeader","/metadata/fields/"+F+"/type"],formatter:function(n,s){if(typeof n==="boolean"){return!n;}else if(s==="HIDDEN"){return false;}else{return true;}}}});e._oLabels[F+m._sMainGroupId]=h;}var a=c.getModel()&&c.getModel().getData()&&c.getModel().getData().metadataAsList.fields;if(!r&&(e._sTableOperation==="add"||e._sTableOperation==="delete"||e._sTableOperation==="moveUp"||e._sTableOperation==="moveDown")){r=true;w=this.getWidths(e._oDialog,false,a);}return this.getColumn(c,h,w);},this)},items:{path:"/dataList/",filters:[new sap.ui.model.Filter("rowInfo/actionType",sap.ui.model.FilterOperator.NE,"Delete")],template:new sap.m.ColumnListItem({cells:{path:"v",factory:jQuery.proxy(e._cellsFactory,e,v)}})}});if(t){T.addAriaLabelledBy(t);}v.setModel(f);T.addEventDelegate({onAfterRendering:jQuery.proxy(function(v){switch(e._sTableOperation){case"add":e._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_ADD_ACTION_NAME,tableId:e._sTableId});break;case"delete":e._tableReFocus(v);e._oEventProvider.fireEvent(sap.extent.uilib.util.EditFormGenerator.FORMREADY_EVENT_ID,{action:sap.extent.uilib.util.EditFormGenerator.FORMREADY_DELETE_ACTION_NAME,rowId:e._deletedRowId,tableId:e._sTableId});break;}if(v&&v.getContent().length>0){if(jQuery('.sapExtentUilibUtilEditFormGeneratorTableContainer').find("div[role='toolbar']")&&jQuery('.sapExtentUilibUtilEditFormGeneratorTableContainer').find("div[role='toolbar']").length>0){sap.extent.uilib.util.CommonUtils.removeHeadings('.sapExtentUilibUtilEditFormGeneratorTableContainer');}var l=v.getContent();var s;for(var i=0,L=l.length;i<L;i++){if(l[i]instanceof sap.m.Toolbar&&l[i].getContent().length>0&&l[i].getContent()[0]instanceof sap.m.Title){s=l[i].getContent()[0].sId;}if(l[i]instanceof sap.m.Table&&l[i].getDomRef().getAttribute("role")==="application"){l[i].getDomRef().removeAttribute("role");l[i].getDomRef().removeAttribute("aria-roledescription");l[i].getDomRef().setAttribute("aria-labelledby",s);}}}e._sTableOperation=null;r=false;e._sTableId=null;e._iTableIndex=-1;if(e._oScrollTo){if(!e._listenerImplementsFunction("getCurrentPage")){return;}var I=e._oScrollTo;var p=e._oListener.getCurrentPage();var b=p.indexOfContent(I);var P=p.getContent();var B=0;for(var i=0;i<=b;i++){var M=(parseInt(P[i].$().css("margin-top"))||0)+(parseInt(P[i].$().css("margin-bottom"))||0);B+=M;B+=P[i].$().height()||0;}var c=p.$().find("#"+p.getId()+"-cont").height()||0;p.scrollTo(B-c);e._oScrollTo=null;}},this,v)});return T;};sap.extent.uilib.util.TableGeneratorHelper.getAdditionalWidthForButtons=function(f){var t=0;if(f){for(var i=0;i<f.length;i++){if(f[i].id===sap.extent.uilib.util.EditFormGenerator.DELETE_BUTTON_FAKE_ITEM||f[i].id===sap.extent.uilib.util.EditFormGenerator.DETAILS_BUTTON_FAKE_ITEM||f[i].id===sap.extent.uilib.util.EditFormGenerator.DETAILS_HEADER_FAKE_ITEM){t+=50;}else if(f[i].id===sap.extent.uilib.util.EditFormGenerator.REORDER_BUTTONS_FAKE_ITEM){t+=100;}}}return t;};},"sap/extent/uilib/util/datatypehandler/ControlHandler.js":function(){jQuery.sap.declare("sap.extent.uilib.util.datatypehandler.ControlHandler");jQuery.sap.require("sap.extent.uilib.UploadCollectionPP3");sap.extent.uilib.util.datatypehandler.ControlHandler={};sap.extent.uilib.util.datatypehandler.ControlHandler.createInput=function(t,f,i,p){var c;switch(t){case"ATTACHMENT":c=this._createAttachmentControl(f,i,p);break;default:return"Control not implemented!";}return c;};sap.extent.uilib.util.datatypehandler.ControlHandler._createAttachmentControl=function(f,i,p){var b=sap.ui.getCore().getModel("i18n").getResourceBundle();var u=new sap.extent.uilib.UploadCollectionPP3({noDataText:b.getText("ECT_UPLOAD_COLLECTION_NO_DATA_TEXT"),noDataDescription:b.getText("ECT_UPLOAD_COLLECTION_NO_DATA_DESCRIPTION"),multiple:false,uploadEnabled:{parts:["/metadata/fields/"+f+"/writable",p||"/data/fields/"+f+"/value","/metadata/writable"],formatter:function(w,v,P){if(!w||P===false){return false;}if(!v||(typeof v==="object"&&jQuery.isEmptyObject(v))||(v&&v.attachmentId==-1)){return true;}return false;}},required:{path:"/metadata/fields/"+f+"/required"},companyId:"{RDP>/companyId}",effectiveStartDate:"{RDP>/effectiveStartDate}"});u._getFileUploader&&u._getFileUploader().setUseMultipart(true);u.setModel(sap.ui.getCore().getModel("RDP"),"RDP");var a=b.getText("ECT_UPLOAD_BUTTON_TEXT");u._getFileUploader&&u._getFileUploader().setButtonText(a);u._getFileUploader&&u._getFileUploader().setName("fileData1");u.bindAggregation("items",{path:i.path||"/data/fields/"+f+"/value",template:this._createUploadCollectionItemTemplate(f),filters:[new sap.ui.model.Filter({path:"attachmentId",test:function(v){if(!v||v<0){return false;}else{return true;}}})]});return u;};sap.extent.uilib.util.datatypehandler.ControlHandler._createUploadCollectionItemTemplate=function(f){var b=sap.ui.getCore().getModel("i18n").getResourceBundle();var u=new sap.m.UploadCollectionItem({documentId:"{attachmentId}",fileName:{parts:["/data/fields/"+f+"/value/"],formatter:function(v){var l=v&&v[0]&&v[0].linkName;return(l?Util.unescapeHTML(l):"");}},mimeType:{parts:["{fileType}"],formatter:function(F){var m;switch(F){case"txt":m="text/plain";break;case"doc":m="application/ms-word";break;case"pdf":m="application/pdf";break;case"csv":m="text/csv";break;case"htm":m="text/html";break;case"ppt":m="application/ms-powerpoint";break;case"cls":m="application/ms-excel";break;case"gif":m="image/gif";break;case"png":m="image/png";break;case"jpeg":case"jpg":m="image/jpeg";break;case"html":m="text/html";break;case"rtf":m="text/rtf";break;case"bmp":m="image/bmp";break;case"xlsx":m="application/openxmlformats-officedocument.spreadsheetml";break;case"docx":m="application/openxmlformats-officedocument.wordprocessingml";break;case"pptx":m="application/openxmlformats-officedocument.presentationml";break;case"xml":m="text/xml";break;case"msg":m="application/x-msg";break;default:return"TypeNotSupported";}return m;}},thumbnailUrl:"",url:"{attachmentUrl}",enableEdit:false,visibleEdit:false,enableDelete:{parts:["/metadata/fields/"+f+"/writable","/metadata/writable"],formatter:sap.extent.uilib.util.EditFormGeneratorHelper.standardEditableFormatter},visibleDelete:true,attributes:[{"title":b.getText("ECT_UPLOAD_COLLECTION_UPLOADED_ON"),"text":"{lastModified}"},{"title":b.getText("ECT_UPLOAD_COLLECTION_FILE_SIZE"),"text":"{fileSize}"}]});return u;};},"sap/extent/uilib/util/resourcebundle.js":function(){jQuery.sap.declare("sap.extent.uilib.util.resourcebundle");jQuery.sap.require("sap.ui.model.resource.ResourceModel");sap.extent.uilib.util.resourcebundle=(function(){var i=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath('sap.extent.uilib.i18n.i18n','.properties')});return{getResourceBundle:function(){return i.getResourceBundle();},getText:function(t,a){return i.getResourceBundle().getText(t,a);}};}());},"sap/extent/uilib/util/viewTableGenerator.js":function(){jQuery.sap.declare("sap.extent.uilib.util.viewTableGenerator");jQuery.sap.require("sap.m.Table");jQuery.sap.require("sap.extent.uilib.util.TableGeneratorHelper");sap.extent.uilib.util.viewTableGenerator={};sap.extent.uilib.util.viewTableGenerator.getTable=function(f,c,v,u,a){f=f||{};if(!v.getDomRef()){setTimeout(function(){sap.extent.uilib.util.viewTableGenerator.getTable(f,c,v,u,a);},1000);return;}else{var w=sap.extent.uilib.util.TableGeneratorHelper.getWidths(v,u,null,a);var m=(f.metadata||{}).fields;var b=new sap.m.Table({headerText:f.metadata.label,columns:{path:"/metadata/fields",factory:jQuery.proxy(function(i,C){var d=C.sPath.split("/")[3];var h=new sap.m.Label({text:"{label}",tooltip:"{label}"});return sap.extent.uilib.util.TableGeneratorHelper.getColumn(C,h,w,false,{fieldMeta:m[d]});},this)},items:{path:"/data/technicalInfo/",template:new sap.m.ColumnListItem({cells:{path:"/data/fields",factory:jQuery.proxy(function(i,C){var d=C.getModel().getData();var e=d.data.fields;var g=d.metadata.fields;var h=C.sPath.split("/")[3];if(e[h]){var s=i.split("-");var j=s[2];if(g[h].type==="HIDDEN"){return new sap.m.Label("")}else{if(f.blockType=="TREND_BLOCK"){this.setForceDisplayValueAsLabel(g[h],d.data.technicalInfo[j]);}return sap.extent.uilib.util.FieldValueExtractor.getValueField(e[h].value[j],g[h],null,e[h].oldValue?e[h].oldValue[j]:null,e[h].encryptedValue&&e[h].encryptedValue[j],e[h].errorMessage&&e[h].errorMessage[j],true);}}},this)}})}});c.addContent(b);b.setModel(new sap.ui.model.json.JSONModel(f));b.addStyleClass("formPatternTable "+a);return b;}};sap.extent.uilib.util.viewTableGenerator.setForceDisplayValueAsLabel=function(m,t){if((m.id=="rating"||m.id=="label")&&(((!!!t.editable||!!!t.matchingToScale)&&t.actionType!="Add")||!!t.forceDisplayValueAsLabel)){m.forceDisplayValueAsLabel=true;}else{m.forceDisplayValueAsLabel=false;}}},
/**
 * <br/> Copyright (C) 2018 SuccessFactors, Inc. All Rights Reserved <br/>
 *
 * @author: Thamizharasan Mohan Date: June 26, 2018
 *
 * @version $Revision$ $Date$
 */
"sap/extent/uilib/SearchInput.js":function(){jQuery.sap.declare("sap.extent.uilib.SearchInput");jQuery.sap.require("sap.sf.surj.shell.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.sf.surj.shell.controls.SearchInputRenderer");sap.sf.surj.shell.controls.SearchInput.extend("sap.extent.uilib.SearchInput",{renderer:"sap.sf.surj.shell.controls.SearchInputRenderer",_onPageReady:function(e){this._addNoManager(e);sap.sf.surj.shell.controls.SearchInput.prototype._onPageReady.call(this,e);},constructor:function(i,c){if(typeof i=='object'){c=i;i=undefined;}var s="";var a={};var I=c.oCurrentInputMeta;if(I.type==="HRIS_FINDUSER"){a={includeHomeEmpl:"YES",includeSecondEmpl:"YES",displayLocation:"YES",includeECMasteredUsersOnly:"NO",enforceIgnoreProvisioningFlags:"YES",includeInactiveEmpl:"NO",includeInactivePersons:"NO",includeExternalPersons:"NO",resultScope:"Employment",searchType:"Person-Employment-User",enforceIgnoreProvisioningFlags:"YES",isGACEEnabled:"YES"};if(I.includeInactiveEmpl){a.includeInactiveEmpl=true;}I.searchOptions={"defaultSearchValues":{}};I.searchOptions.defaultSearchValues=a;}if(I.searchOptions&&I.searchOptions.defaultSearchValues){c.settings.additionalCriteria=I.searchOptions.defaultSearchValues;c.searchType=I.searchOptions.defaultSearchValues.searchType;if(a.searchType){delete a.searchType;}}var b={};jQuery.extend(true,b,c);sap.sf.surj.shell.controls.SearchInput.prototype.constructor.call(this,i,b);},_addNoManager:function(e){var n=["jobInfo-manager-id","undefined-new-manager","positions-under-manager","managerId"];var N=["hrId"];var m=sap.extent.uilib.util.EditFormGeneratorHelper.getMeta(this);if(n.contains(m.id)){var b=sap.ui.getCore().getModel('i18n').getResourceBundle();var s={};s.label=b.getText("COMMON_AutoComplete_No_Mgr");s.id="NO_MANAGER";var S=e.getParameter('criteria').searchValue.trim().toUpperCase().substring(0,2);this._addNoManagerItem(e,s,S);}else if(N.contains(m.id)){var b=sap.ui.getCore().getModel('i18n').getResourceBundle();var s={};s.label=b.getText("COMMON_AutoComplete_No_Hr_Mgr");s.id="NO_HR";var S=e.getParameter('criteria').searchValue.trim().toUpperCase();this._addNoManagerItem(e,s,S);}},_addNoManagerItem:function(e,n,s){var s=e.getParameter('criteria').searchValue.trim().toUpperCase().substring(0,2);if(n.label.toUpperCase().startsWith(s)){var N={"name":n.label,"userName":null,"userId":n.id,primaryDisplayText:n.label};e.getParameter('items').splice(0,0,N);}}});},
/*!
 * @copyright@
 */
"sap/extent/uilib/ArcChartRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.ArcChartRenderer");sap.extent.uilib.ArcChartRenderer={};sap.extent.uilib.ArcChartRenderer.render=function(r,c){var t=sap.ui.getCore().getModel("i18n").getResourceBundle().getText("EMPFILE_EDU_PERCENT_COMPLETE_NOTE_SHORT",[c.getValue()]);r.write("<div title='",t,"' alt='",t,"' aria-label='",t,"'");r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeControlData(c);r.writeClasses();r.write(">");r.write("</div>");};},"sap/extent/uilib/EffectiveDateRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.EffectiveDateRenderer");sap.extent.uilib.EffectiveDateRenderer={};sap.extent.uilib.EffectiveDateRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapExtentUilibEffectiveDate");r.writeClasses();r.write(">");if(c.getFutureChangesNotification()&&c.getPendingApprovalNotification()){r.write("<div class='sapUiTinyMarginBottom'>");r.renderControl(c.oIcon);r.renderControl(c.oLinkInFlight);r.write("</div>");r.write("<div class='sapUiTinyMarginBottom'>");r.renderControl(c.oIcon);r.renderControl(c.oLinkFuture);r.write("</div>");}else if(c.getFutureChangesNotification()&&c.getPendingApprovalNotification()==null){r.write("<div class='sapUiTinyMarginBottom'>");r.renderControl(c.oIcon);r.renderControl(c.oLinkFuture);r.write("</div>");}else if(c.getPendingApprovalNotification()&&c.getFutureChangesNotification()==null){r.write("<div class='sapUiTinyMarginBottom'>");r.renderControl(c.oIcon);r.renderControl(c.oLinkInFlight);r.write("</div>");}if(c.getDate()){r.write("<div class='sapExtentUilibEffectiveDateSpacer'>");r.write("<span class='sapExtentUilibEffectiveDateText'>");if(c.getShowEffectiveDate()){if(c.getEditable()){r.writeEscaped(c.oBundle.getText('ECT_PP3_EFFECTIVE_DATE_LABEL')+" ");r.renderControl(c._getDatePickerControl());}else{r.writeEscaped(c.oBundle.getText('ECT_PP3_EFFECTIVE_AS_OF')+" ");r.writeEscaped(c.getDate());}}else{r.write("&nbsp;");}r.write("</span>");r.write("</div>");}r.write("</div>");};},"sap/extent/uilib/FormPatternRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.FormPatternRenderer");sap.extent.uilib.FormPatternRenderer={};sap.extent.uilib.FormPatternRenderer.render=function(r,c){var l=c.oBundle.getText("COMMON_LABEL"),v=c.oBundle.getText("ECT_PP3_VALUE"),d=c.oBundle.getText("COMMON_Date");if(!c.getVisible()){return;}r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");if(c.getExpanded()||c.getCollapsedItemCount()>0){r.renderControl(c.titleAndButtons);if(c.getCustomContentTop()){r.write("<div class='sapExtentUilibFormPatternCustomBlock'>");r.renderControl(c.getCustomContentTop());r.write("</div>");}if(c.columns.length===2){r.write("<table class='sapExtentUilibFormPatternOuterTable' role='presentation'>");r.write("<tr><td class='sapExtentUilibFormPatternOuterTableLeft'>");}for(var a=0;a<c.columns.length;a++){if(a===1){r.write("</td><td class='sapExtentUilibFormPatternOuterTableRight'>");}var b=c.getLargeBlock()?2:1;var i=0;r.write("<table class='sapExtentUilibFormPatternTable' role='presentation' summary='"+c.tablesummary+"'>");if(c.columns[a].length>0&&window.innerWidth>sap.extent.uilib.FormPattern.maxPhoneWidth){r.write("<tr>");if(c.columns[a][0].type==="name-value-date"){r.write("<th colspan='1' class='sapExtentUilibFormPatternBlockDateName'></th>");r.write("<th colspan='1' class='sapExtentUilibFormPatternBlockDateValue'></th>");r.write("<th colspan='1' class='sapExtentUilibFormPatternBlockDateDate'></th>");}else{r.write("<th colspan='1' class='sapExtentUilibFormPatternBlockName'></th>");r.write("<th colspan='1' class='sapExtentUilibFormPatternBlockValue'></th>");}r.write("</tr>");r.write("<tr class='sapExtentUilibFormPatternVisuallyHidden'>");if(c.columns[a][0].type==="name-value-date"){r.write("<th scope='col' colspan='1'>"+l+"</th>");r.write("<th scope='col' colspan='1'>"+v+"</th>");r.write("<th scope='col' colspan='1'>"+d+"</th>");}else{r.write("<th scope='col' colspan='1'>"+l+"</th>");r.write("<th scope='col' colspan='1'>"+v+"</th>");}r.write("</tr>");}else{r.write("<tr>");if(window.innerWidth>sap.extent.uilib.FormPattern.maxPhoneWidth){r.write("<th colspan='1' class='sapExtentUilibFormPatternBlockName'></th>");r.write("<th colspan='1' class='sapExtentUilibFormPatternBlockValue'></th>");}else{r.write("<th colspan='1'></th>");}r.write("</tr>");}var I=false;for(i=0;i<c.columns[a].length;i++){r.write("<tr>");if(I){if(c.columns[a][i]&&!c.columns[a][i].group){r.write("<td class='sapExtentUilibFormPatternGroupSplit'>&nbsp;</td></tr><tr>");if(c.childTitleControl&&c.columns[a][i].type!=='valueAsLabel'){r.write("<td colspan=2 class='sapExtentUilibFormPatternBlockFull sapExtentUilibFormPatternControl sNoPaddingStyleClass'>");r.renderControl(c.childTitleControl);r.write("</td></tr><tr>");}}}I=c.columns[a][i].group&&c.columns[a][i].type!=="subvalue";if(c.columns[a][i].type==="name-value"){r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockName sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}if(c.columns[a][i].name&&typeof c.columns[a][i].name.getText==='function'){var l=c.columns[a][i].name.getText();if(l!=null){l=l.replace(/'/g,'');r.write("' data-help-id='"+l);}}r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].name);r.write("</td>");if(window.innerWidth<sap.extent.uilib.FormPattern.maxPhoneWidth){r.write("</tr><tr>");}if(c.columns[a][i].fake){r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockValue sapExtentUilibFormPatternBlockLine");r.write("'>");r.write("</td>");}else{r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockValue sapExtentUilibFormPatternBlockLine");if(!c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleLeft");}r.write("'>");if(c.columns[a][i]&&c.columns[a][i].name&&c.columns[a][i].value&&typeof c.columns[a][i].value.setLabelledBy==='function'){if(typeof c.columns[a][i].name.getText==='function'){c.columns[a][i].value.setLabelledBy(c.columns[a][i].name);}else if(typeof c.columns[a][i].name.getContent==='function'){if(c.columns[a][i].name.getContent().length>0){if(typeof c.columns[a][i].name.getContent()[0].getText==='function'){c.columns[a][i].value.setLabelledBy(c.columns[a][i].name.getContent()[0]);}}}}if(c.columns[a][i]&&c.columns[a][i].name&&c.columns[a][i].value){var V=c.columns[a][i].value;var n=c.columns[a][i].name;if(V instanceof sap.ui.layout.HorizontalLayout&&V.getContent()&&V.getContent().length>0){V.getContent().forEach(function(h){if(h instanceof sap.extent.uilib.ConfigurableLabel&&typeof h.setLabelledBy==='function'&&typeof n.getText==='function'){h.setLabelledBy(n);}});}}r.renderControl(c.columns[a][i].value);if(c.columns[a][i].icon){r.renderControl(c.columns[a][i].icon);}var e=[];if(c.columns[a][i].customContentAsIcon){e=c.columns[a][i].customContentAsIcon;for(var f=0;f<e.length;f++){r.renderControl(e[f]);}}r.write("</td>");}}else if(c.columns[a][i].type==="valueAsLabel"){r.write("<td colspan='"+(window.innerWidth<=sap.extent.uilib.FormPattern.maxPhoneWidth?1:2)+"' class='sapExtentUilibFormPatternBlockName sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].name);if(c.columns[a][i].icon){r.renderControl(c.columns[a][i].icon);}var e=[];if(c.columns[a][i].customContentAsIcon){e=c.columns[a][i].customContentAsIcon;for(var f=0;f<e.length;f++){r.renderControl(e[f]);}}}else if(c.columns[a][i].type==="iconValueAsName"){r.write("<td colspan='"+(window.innerWidth<=sap.extent.uilib.FormPattern.maxPhoneWidth?1:2)+"' class='sapExtentUilibFormPatternBlockName sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}r.write("'>");if(c.columns[a][i].customContentAsIcon&&c.columns[a][i].customContentAsIcon.isLeft===true){e=c.columns[a][i].customContentAsIcon;for(var f=0;f<e.length;f++){r.renderControl(e[f]);}r.write("&nbsp;&nbsp;&nbsp;");}r.renderControl(c.columns[a][i].name);if(c.columns[a][i].customContentAsIcon&&c.columns[a][i].customContentAsIcon.isLeft===false){e=c.columns[a][i].customContentAsIcon;for(var f=0;f<e.length;f++){r.renderControl(e[f]);}}}else if(c.columns[a][i].type==="name-icon-value"){if(i===0){r.write("<td colspan='"+(window.innerWidth<=sap.extent.uilib.FormPattern.maxPhoneWidth?1:3)+"'>");c.columns[a][i].name.addStyleClass("sapExtentUilibFormPatternBoldTitle");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].name);r.renderControl(c.columns[a][i].icon);r.write("</td></tr><tr>");r.write("<td colspan='"+(window.innerWidth<=sap.extent.uilib.FormPattern.maxPhoneWidth?1:3)+"'>");c.columns[a][i].value.addStyleClass("sapExtentUilibFormPatternLargeNumber");r.renderControl(c.columns[a][i].value);r.write("</td>");}else{r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockIconName sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].name);r.renderControl(c.columns[a][i].icon);r.write("</td>");if(window.innerWidth<sap.extent.uilib.FormPattern.maxPhoneWidth){r.write("</tr><tr>");}r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockIconValue");if(!c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleLeft");}r.write("'>");r.renderControl(c.columns[a][i].value);r.write("</td>");}}else if(c.columns[a][i].type==="name-value-date"){r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockDateName sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].name);r.write("</td>");if(window.innerWidth<sap.extent.uilib.FormPattern.maxPhoneWidth){r.write("</tr><tr>");}r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockDateValue sapExtentUilibFormPatternBlockLine'>");r.renderControl(c.columns[a][i].value);r.write("</td>");r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockDateDate sapExtentUilibFormPatternBlockLine");if(!c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleLeft");}r.write("'>");r.renderControl(c.columns[a][i].date);r.write("</td>");}else if(c.columns[a][i].type==="employeeCard"){r.write("<td colspan='"+(window.innerWidth<=sap.extent.uilib.FormPattern.maxPhoneWidth?1:2)+"' class=' sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}else{r.write(" sapExtentUilibFormPatternLargeBlockMiddleLeft");}r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].control);r.write("</td>");}else if(c.columns[a][i].type==="map"){r.write("<td colspan='"+(window.innerWidth<=sap.extent.uilib.FormPattern.maxPhoneWidth?1:2)+"' class='sapExtentUilibFormPatternBlockFull sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}else{r.write(" sapExtentUilibFormPatternLargeBlockMiddleLeft");}r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].control);r.write("</td>");}else if(c.columns[a][i].type==="timeOffItem"){r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockFull sapExtentUilibFormPatternBlockLine");if(c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleRight");}else{r.write(" sapExtentUilibFormPatternLargeBlockMiddleLeft");}r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].control);r.write("</td>");}else if(c.columns[a][i].type==="subvalue"){r.write("<td colspan='1' class='sapExtentUilibFormPatternBlockSubName sapExtentUilibFormPatternBlockChildLine");r.write("'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].name);r.write("</td>");if(window.innerWidth<sap.extent.uilib.FormPattern.maxPhoneWidth){r.write("</tr><tr>");}r.write("<td colspan='"+c.valueColumnSpan+"' class='sapExtentUilibFormPatternBlockSubValue sapExtentUilibFormPatternBlockChildLine");if(!c.columns[a][i].rightCol){r.write(" sapExtentUilibFormPatternLargeBlockMiddleLeft");}r.write("'>");r.renderControl(c.columns[a][i].value);r.write("</td>");}else if(c.columns[a][i].type==='controlWithCustomContent'){r.write("<td colspan='"+c.columns[a][i].columns+"' class='sapExtentUilibFormPatternBlockFull sapExtentUilibFormPatternControl'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].control);if(c.columns[a][i].customContentRight){r.renderControl(c.columns[a][i].customContentRight);}r.write("</td>");}else if(c.columns[a][i].type==='control'){var g=c.columns[a][i].control&&c.columns[a][i].control instanceof sap.extent.uilib.FormPattern;var N="";if(g&&!c.columns[a][i].control.getHasPadding()){N=" sapExtentUilibFormPatternNoPadding";}r.write("<td colspan='"+c.columns[a][i].columns+"' class='sapExtentUilibFormPatternBlockFull sapExtentUilibFormPatternControl"+N+"'>");if(c.columns[a][i].isFieldInvalid==true){r.renderControl(new sap.ui.core.Icon({src:"sap-icon://alert",color:"Orange"}));}r.renderControl(c.columns[a][i].control);r.write("</td>");}else if(c.columns[a][i].type==='charts'&&c.hasTotalCompHistoryData()){r.write("<td colspan='"+c.columns[a][i].columns+"' class='sapExtentUilibFormPatternCharts'>");r.renderControl(c.columns[a][i].control);r.write("</td>");}r.write("</tr>");}r.write("</table>");}if(c.columns.length===2){r.write("</td></tr>");r.write("</table>");}if(!c.getExpanded()&&c.getShowNMore()&&c.moreItem){r.renderControl(c.moreItem);}if(c.getCustomContentBottom()){r.write("<div class='sapExtentUilibFormPatternCustomBlock'>");r.renderControl(c.getCustomContentBottom());r.write("</div>");}}r.write("</div>");};},"sap/extent/uilib/TitleAndButtonsRenderer.js":function(){jQuery.sap.declare("sap.extent.uilib.TitleAndButtonsRenderer");sap.extent.uilib.TitleAndButtonsRenderer={};sap.extent.uilib.TitleAndButtonsRenderer.render=function(r,c){r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.write("<span>");var t=c.getTitle();if(t){r.write("<div>");if(t instanceof sap.m.Title){r.renderControl(t);}else{r.write("<span role='heading' aria-level='5' class='sapExtentUilibFormPatternBlockTitle' id='"+c.sId+"_title'>");r.writeEscaped(t);r.write("</span>")}}if(!c.getIsBlockDescriptionInline()){r.renderControl(c.titleDescriptionIcon);}if(c.getActionButtons()){for(var i=0;i<c.getActionButtons().length;i++){r.renderControl(c.getActionButtons()[i]);if(sap.extent.uilib.FormPattern.bEnhancedScreenReaderEnabled){c.getActionButtons()[i].addAriaLabelledBy('');}else{c.getActionButtons()[i].addAriaLabelledBy(c.sId+'_title');}}}if(t){r.write("</div>");}r.write("</span>");r.write("</div>");if(c.getIsBlockDescriptionInline()){r.renderControl(c.titleDescriptionInline);}};},
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2014 SAP AG. All rights reserved
 */
"sap/extent/uilib/ExpandedPanel.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
jQuery.sap.declare("sap.extent.uilib.ExpandedPanel");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.ExpandedPanel",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true},headerText:{type:"string",group:"Data",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'100%'},height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:'auto'},expandable:{type:"boolean",group:"Appearance",defaultValue:false},expanded:{type:"boolean",group:"Appearance",defaultValue:null}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},headerToolbar:{type:"sap.m.Toolbar",multiple:false},infoToolbar:{type:"sap.m.Toolbar",multiple:false}}}});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare('sap.extent.uilib.ExpandedPanel');sap.extent.uilib.ExpandedPanel.prototype.init=function(){};sap.extent.uilib.ExpandedPanel.prototype.setWidth=function(w){this.setProperty("width",w,true);var d=this.getDomRef();if(d){d.style.width=w;}return this;};sap.extent.uilib.ExpandedPanel.prototype.setHeight=function(h){this.setProperty("height",h,true);var d=this.getDomRef();if(d){d.style.height=h;}return this;};sap.extent.uilib.ExpandedPanel.prototype.setExpandable=function(e){this.setProperty("expandable",e,false);if(e){jQuery.sap.require("sap.ui.core.IconPool");var t=this;var c=sap.ui.core.IconPool.getIconURI("navigation-right-arrow");this.oIconCollapsed=sap.ui.core.IconPool.createControlByURI({id:t.getId()+"-CollapsedImg",src:c}).addStyleClass("sapMPanelExpandableIcon").attachPress(function(E){t.setExpanded(!t.getExpanded());});}return this;};sap.extent.uilib.ExpandedPanel.prototype.setExpanded=function(e){this.setProperty("expanded",e,true);var $=this.$();$.find(".sapMPanelExpandableIcon").toggleClass("sapMPanelExpandableIconExpanded");$.find(".sapMPanelExpandablePart").toggle({});return this;};sap.extent.uilib.ExpandedPanel.prototype.onAfterRendering=function(){var $=this.$();if(this.getExpandable()&&!this.getExpanded()){$.find(".sapMPanelExpandablePart").hide();}};sap.extent.uilib.ExpandedPanel.prototype._getIcon=function(){return this.oIconCollapsed;};},"sap/extent/uilib/ExpandedPanelRenderer.js":function(){jQuery.sap.declare('sap.extent.uilib.ExpandedPanelRenderer');sap.extent.uilib.ExpandedPanelRenderer={};sap.extent.uilib.ExpandedPanelRenderer.render=function(r,c){if(!c.getVisible()){return;}r.write("<section");r.writeControlData(c);r.addClass("sapMPanel");r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeClasses();r.writeStyles();r.write(">");if(c.getExpandable()){var I=c._getIcon();if(c.getExpanded()){I.addStyleClass("sapMPanelExpandableIconExpanded");}else{I.removeStyleClass("sapMPanelExpandableIconExpanded");}r.renderControl(I);}var h=c.getHeaderText();var H=c.getHeaderToolbar();if(H){H.setDesign(sap.m.ToolbarDesign.Transparent,true);if(c.getExpandable()){H.addStyleClass("sapMPanelHdrExpandable");}r.renderControl(H);}else if(h){r.write("<div");r.addClass("sapMPanelHdr");r.addClass("headerforExpandedPanel");if(c.getExpandable()){r.addClass("sapMPanelHdrExpandable");}r.writeClasses();r.write(">");r.writeEscaped(h);r.write("</div>");}var o=c.getInfoToolbar();if(o&&c.getExpandable()){o.addStyleClass("sapMPanelExpandablePart");}if(o){o.setDesign(sap.m.ToolbarDesign.Info,true);r.renderControl(o);}r.write("<div");r.addClass("sapMPanelContent");r.addClass("sapMPanelBG");if(c.getExpandable()){r.addClass("sapMPanelExpandablePart");}r.writeClasses();r.write(">");var C=c.getContent();var l=C.length;for(var i=0;i<l;i++){r.renderControl(C[i]);}r.write("</div>");r.write("</section>");};},"sap/extent/uilib/MiniOrgChart.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
jQuery.sap.declare("sap.extent.uilib.MiniOrgChart");jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.ui.core.Control");jQuery.sap.require("sap.extent.uilib.QuickCard");sap.ui.core.Control.extend("sap.extent.uilib.MiniOrgChart",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true},expanded:{type:"boolean",group:"Appearance",defaultValue:false},people:{type:"object",group:"Appearance",defaultValue:undefined},photoMap:{type:"object",group:"Appearance",defaultValue:undefined}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},_quickCard:{type:"sap.extent.uilib.QuickCard",multiple:false,visibility:"hidden"}}},contentCreate:false,_managerControls:[],_selfControls:[],_reportsControls:[],_canBeExpanded:false,_imageSize:64,_largeImageSize:112,expanded:false});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *
 * (c) Copyright 2009-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare('sap.extent.uilib.MiniOrgChart');sap.extent.uilib.MiniOrgChart.prototype.onAfterRendering=function(){this.onResize();};sap.extent.uilib.MiniOrgChart.prototype.getItemsForWidth=function(w){this.clientWidth=w;return w<(this._imageSize+16)*6?Math.floor((w-20)/(this._imageSize+16)):6;};sap.extent.uilib.MiniOrgChart.prototype.onResize=function(){var i=this.$().parent().parent().parent();if(!i[0])return;var a=this.getItemsForWidth(i[0].clientWidth);if(this.getPeople()&&this.getPeople().reports&&this.getPeople().reports.length>a*2){this.setButtonLink(this.expanded);}if(a!==this.maxItems){this.maxItems=a;if(this.contentCreated){setTimeout(jQuery.proxy(this.rerender,this),150);}}};sap.extent.uilib.MiniOrgChart.prototype.onClickNMore=function(){this.expanded=!this.expanded;var i=this.$().parent().parent().parent();var a=this.getItemsForWidth(i[0].clientWidth);var p=this.getParent();while(p&&!(p instanceof sap.uxap.ObjectPageSubSection)){p=p.getParent();}if(p){this.setButtonLink();this.expanded?p.setMode("Expanded"):p.setMode("Collapsed");}setTimeout(jQuery.proxy(this.rerender,this),150);};sap.extent.uilib.MiniOrgChart.prototype.setButtonLink=function(){var m=this.expanded?"EMPFILE_PP3_SEE_LESS":"EMPFILE_PP3_SEE_MORE";this.moreItem=new sap.m.Link({text:this.oBundle.getText(m),press:jQuery.proxy(this.onClickNMore,this)});this.moreItem.addStyleClass("sapExtentUilibFormPatternLinkText");};sap.extent.uilib.MiniOrgChart.prototype.setPeople=function(p){this.contentCreated=false;this.setProperty("people",p,true);this.maxItems=this.getItemsForWidth(window.innerWidth);this._canBeExpanded=(p&&p.reports&&p.reports.length>this.maxItems*2);this.createContent();};sap.extent.uilib.MiniOrgChart.prototype.createContent=function(){_managerControls=[];_selfControls=[];_reportsControls=[];var p=this.getPeople();if(p){if(p.managers&&p.managers.length){for(var i=0;i<p.managers.length;i++){_managerControls.push(this.getPhoto(p.managers[i],"managers",this.getPhotoMap()));}}if(p.self&&p.self.length){for(var i=0;i<p.self.length;i++){if(!this.oLinkToFullChart){this.oLinkToFullChart=new sap.extent.uilib.LinkWithIcon({text:this.oBundle.getText("EMPFILE_PP3_LINK_TO_FULL_ORG_CHART"),href:(p.self[0].userIdEncoded?("/sf/orgchart?selected_user_encoded="+encodeURIComponent(p.self[0].userIdEncoded)):("/sf/orgchart?selected_user="+p.self[0].userId))+"&_s.crb="+ajaxSecKey,target:"sf_link",icon:"sap-icon://slim-arrow-right"});}else{this.oLinkToFullChart.setHref((p.self[0].userIdEncoded?("/sf/orgchart?selected_user_encoded="+encodeURIComponent(p.self[0].userIdEncoded)):("/sf/orgchart?selected_user="+p.self[0].userId))+"&_s.crb="+ajaxSecKey);}_selfControls.push(this.getPhoto(p.self[i],"self",this.getPhotoMap()));}}if(p.reports&&p.reports.length){for(var i=0;i<p.reports.length;i++){_reportsControls.push(this.getPhoto(p.reports[i],"reports",this.getPhotoMap()));}}}this.contentCreated=true;};sap.extent.uilib.MiniOrgChart.prototype.init=function(){this.oBundle=sap.ui.getCore().getModel("i18n").getResourceBundle();sap.ui.Device.resize.attachHandler(jQuery.proxy(this.onResize,this));var _=new sap.extent.uilib.QuickCard();this.setAggregation("_quickCard",_,true);};sap.extent.uilib.MiniOrgChart.prototype.getManagerControls=function(){return _managerControls;};sap.extent.uilib.MiniOrgChart.prototype.getSelfControls=function(){return _selfControls;};sap.extent.uilib.MiniOrgChart.prototype.getReportsControls=function(){return _reportsControls;};sap.extent.uilib.MiniOrgChart.prototype.getPhoto=function(u,t,p){var P={'urlType':'eduPhoto','photoType':'liveProfile','mod':p[u.userId]};if(u.userIdEncoded){P.userIdEncoded=u.userIdEncoded;}else{P.userId=u.userId;}var i=new sap.sf.surj.shell.controls.UserPhoto({user:{'userId':u.userId,'fullName':u.formattedName,'photoSrc':P},options:{'profile':t==="self"?"SQUARE_112":"SQUARE_64",'showUserName':false,'nameEllipsis':true,'wideAsPhoto':false,'showNameWhenNoPhoto':true,'shrinkNameToFit':false,'focusable':true,'useMButtonStyles':true}});if(t!=="self"){i.attachClick(jQuery.proxy(this.onClicked,this,u));}if(i){this.qc=this._getQuickCardControl();i.attachClick(jQuery.proxy(this.qc.onClick,this.qc));i.attachMouseover(jQuery.proxy(this.qc.onHover,this.qc));i.attachMouseout(jQuery.proxy(this.qc.onHoverLeave,this.qc));i.attachMouseover(jQuery.proxy(this.onHover,this));i.attachMouseout(jQuery.proxy(this.onHoverLeave,this));i.attachKeydown(jQuery.proxy(this.qc.onKeydown,this.qc));}return i;};sap.extent.uilib.MiniOrgChart.prototype.onHover=function(e){if(this.isPrintPreview()){return;}jQuery("."+e.getSource().getId()+e.getSource().getProperty("user").userId).addClass("sapExtentMiniOrgChartImageHover");};sap.extent.uilib.MiniOrgChart.prototype.onHoverLeave=function(e){jQuery("."+e.getSource().getId()+e.getSource().getProperty("user").userId).removeClass("sapExtentMiniOrgChartImageHover");};sap.extent.uilib.MiniOrgChart.prototype._getQuickCardControl=function(){var _=this.getAggregation("_quickCard");return _;};sap.extent.uilib.MiniOrgChart.prototype.onClicked=function(u,e){if(this.isPrintPreview()){return;}sap.ui.getCore().getEventBus().publish("peopleProfile","selectUserFromCard",{company:sap.ui.getCore().getModel("user").getProperty("/company"),userID:u.userId,userName:u.username});};sap.extent.uilib.MiniOrgChart.prototype.canBeExpanded=function(){return this._canBeExpanded;};sap.extent.uilib.MiniOrgChart.prototype.setExpandedMode=function(m){if(this.canBeExpanded()){this.expanded=m;this.setButtonLink();}};sap.extent.uilib.MiniOrgChart.prototype.isPrintPreview=function(){var p=sap.ui.getCore().getModel("objectPageMetaDataForPrint");var P=p&&p.getData()?p.getData().printPreview:false;return P};},"sap/extent/uilib/MiniOrgChartRenderer.js":function(){jQuery.sap.declare('sap.extent.uilib.MiniOrgChartRenderer');sap.extent.uilib.MiniOrgChartRenderer={};sap.extent.uilib.MiniOrgChartRenderer.render=function(r,c){if(!c.getVisible()){return;}var p=c._imageSize+16;var l=c._largeImageSize+16;r.write("<div class='sapExtentUilibMiniOrgChart'");r.writeControlData(c);r.writeClasses();r.writeStyles();r.write(">");var a=c.getManagerControls();if(a.length>0){r.write("<div class='sapExtentuilibMiniOrgChartSection' style='width:");r.writeEscaped(a.length*p);r.write("px'>");for(var i=0;i<a.length;i++){r.write("<span class='sapExtentUilibMiniOrgChartPhotoSmall ");r.writeEscaped(a[i].getId());r.writeEscaped(a[i].getProperty("user").userId);r.write("'>");r.renderControl(a[i]);r.write("</span>");}r.write("</div>");r.write("<div class='sapExtentUilibMiniOrgChartVerticalLine sapExtentuilibMiniOrgChartBottomLineMargin'>");r.write("</div>");}a=c.getSelfControls();r.write("<div class='sapExtentuilibMiniOrgChartSection' style='width:");r.writeEscaped(a.length*l);r.write("px'>");for(var i=0;i<a.length;i++){r.write("<span class='sapExtentUilibMiniOrgChartPhotoLarge ");r.writeEscaped(a[i].getId());r.writeEscaped(a[i].getProperty("user").userId);r.write("'>");r.renderControl(a[i]);r.write("</span>");}r.write("</div>");var b=c.getReportsControls().length;if(b>0&&c.maxItems>=5){r.write("<table class='sapExtentUilibMiniOrgChartReportsText'><tr>");r.write("<td class='sapExtentUilibFormPatternLargeNumber valuePattern'>");b<100?r.writeEscaped(String(b)):r.write("<span style='font-size:2.3rem'>99+</span>");r.write("</td>");r.write("<td class='sapExtentUilibMiniOrgChartReportsTextType'>");r.writeEscaped(c.oBundle.getText("EMPFILE_PP3_DIRECT_REPORTS"));r.write("</td>");r.write("</tr></table>");}a=c.getReportsControls();if(a.length>0){r.write("<div class='sapExtentUilibMiniOrgChartVerticalLine'>");r.write("</div>");var d=a.length;if(a.length>c.maxItems){d=c.maxItems;}r.write("<div class='sapExtentUilibMiniOrgChartBracket' style='width:");r.writeEscaped(d*p);r.write("px'></div><div class='sapExtentuilibMiniOrgChartSection' style='width:");r.writeEscaped(d*p);r.write("px'>");for(var i=0;i<a.length;i++){if(i>0&&i%d==0){if(i>c.maxItems&&!c.getExpanded()){r.renderControl(c.moreItem);break;}r.write("<div class='sapExtentuilibMiniOrgChartSectionBreak' style='width:");r.writeEscaped(d*p);r.write("px'></div>");}r.write("<span class='sapExtentUilibMiniOrgChartPhotoSmall ");r.writeEscaped(a[i].getId());r.writeEscaped(a[i].getProperty("user").userId);r.write("'>");r.renderControl(a[i]);r.write("</span>");}if(c.canBeExpanded()&&i==a.length){r.write("<div class='sapExtentuilibMiniOrgChartSectionBreak' style='width:");r.writeEscaped(d*p);r.write("px'></div>");r.renderControl(c.moreItem);}r.write("</div>");}r.write("<div class='sapExtentUilibMiniOrgChartFullLink'>");r.renderControl(c.oLinkToFullChart);r.write("</div>");r.write("</div>");};},"sap/extent/uilib/QuickCard.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
jQuery.sap.require("sap.extent.uilib.library");jQuery.sap.require("sap.extent.uilib.util.QuickCardManager");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.extent.uilib.QuickCard",{metadata:{library:"sap.extent.uilib",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true}}}});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *
 * (c) Copyright 2009-2014 SAP AG. All rights reserved
 */
jQuery.sap.declare('sap.extent.uilib.QuickCard');sap.extent.uilib.QuickCard.prototype.initQuickCard=function(u,t,r){sap.extent.uilib.util.QuickCardManager.hide();sap.extent.uilib.util.QuickCardManager.create(t,this,u,r,{userId:u,showOrgChart:true,useNameAnchor:false,showCloseIconByDefault:true});this.alreadyClicked=false;};sap.extent.uilib.QuickCard.prototype._clearQuickCard=function(){sap.extent.uilib.util.QuickCardManager.clearVisibleUser();sap.extent.uilib.util.QuickCardManager.clearQuickCardTimeout();};sap.extent.uilib.QuickCard.prototype.onKeydown=function(e){var k=e.getParameter('keyEvent').keyCode;var a=e.getParameter('keyCombo');if(a==='control-shift-1'||k===13){var s=e.getSource();var u=s.getUser().userId;var t=s.sId;this.initQuickCard(u,t,t);}};sap.extent.uilib.QuickCard.prototype.onClick=function(e){this.alreadyClicked=true;this._clearQuickCard();sap.extent.uilib.util.QuickCardManager.hide();};sap.extent.uilib.QuickCard.prototype.onHover=function(e){var p=sap.ui.getCore().getModel("objectPageMetaDataForPrint");var P=p&&p.getData()?p.getData().printPreview:false;if(P){return;}var s=e.getSource();var u=s.getProperty("user").userId;var t=s.sId;var a=this;var b=s.getId();var c;if(b&&u){if(sap.extent.uilib.util.QuickCardManager.getVisibleUser()!=u){sap.extent.uilib.util.QuickCardManager.clearQuickCardTimeout();c=window.setTimeout(function(){if(a.alreadyClicked)return;a.initQuickCard(u,t,t);},2000);sap.extent.uilib.util.QuickCardManager.registerQuickCardTimeout(c);}}};sap.extent.uilib.QuickCard.prototype.onHoverLeave=function(e){sap.extent.uilib.util.QuickCardManager.clearQuickCardTimeout();};sap.extent.uilib.QuickCard.prototype.handleEvent=function(e){if(e.type==='hide'){this._clearQuickCard();}};sap.extent.uilib.QuickCard.prototype.destroy=function(){if(sap.ui.core.Control.prototype.destroy){sap.ui.core.Control.prototype.destroy.call(this);}this.cleanUpQuickCard();};sap.extent.uilib.QuickCard.prototype.cleanUpQuickCard=function(){var q=sap.extent.uilib.util.QuickCardManager.getQuickCard();if(q&&q.isRegistered()){q.cleanup();}};},
/************************************************************************************
 The MIT License (MIT)

Copyright (c) 2008 Jacob Seidelin

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*************************************************************************************/
"sap/extent/uilib/ext-lib/exif.js":function(){(function(){var d=false;var r=this;var E=function(a){if(a instanceof E){return a;}if(!(this instanceof E)){return new E(a);}this.EXIFwrapped=a;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=E;}exports.EXIF=E;}else{r.EXIF=E;}var b=E.Tags={0x9000:"ExifVersion",0xA000:"FlashpixVersion",0xA001:"ColorSpace",0xA002:"PixelXDimension",0xA003:"PixelYDimension",0x9101:"ComponentsConfiguration",0x9102:"CompressedBitsPerPixel",0x927C:"MakerNote",0x9286:"UserComment",0xA004:"RelatedSoundFile",0x9003:"DateTimeOriginal",0x9004:"DateTimeDigitized",0x9290:"SubsecTime",0x9291:"SubsecTimeOriginal",0x9292:"SubsecTimeDigitized",0x829A:"ExposureTime",0x829D:"FNumber",0x8822:"ExposureProgram",0x8824:"SpectralSensitivity",0x8827:"ISOSpeedRatings",0x8828:"OECF",0x9201:"ShutterSpeedValue",0x9202:"ApertureValue",0x9203:"BrightnessValue",0x9204:"ExposureBias",0x9205:"MaxApertureValue",0x9206:"SubjectDistance",0x9207:"MeteringMode",0x9208:"LightSource",0x9209:"Flash",0x9214:"SubjectArea",0x920A:"FocalLength",0xA20B:"FlashEnergy",0xA20C:"SpatialFrequencyResponse",0xA20E:"FocalPlaneXResolution",0xA20F:"FocalPlaneYResolution",0xA210:"FocalPlaneResolutionUnit",0xA214:"SubjectLocation",0xA215:"ExposureIndex",0xA217:"SensingMethod",0xA300:"FileSource",0xA301:"SceneType",0xA302:"CFAPattern",0xA401:"CustomRendered",0xA402:"ExposureMode",0xA403:"WhiteBalance",0xA404:"DigitalZoomRation",0xA405:"FocalLengthIn35mmFilm",0xA406:"SceneCaptureType",0xA407:"GainControl",0xA408:"Contrast",0xA409:"Saturation",0xA40A:"Sharpness",0xA40B:"DeviceSettingDescription",0xA40C:"SubjectDistanceRange",0xA005:"InteroperabilityIFDPointer",0xA420:"ImageUniqueID"};var T=E.TiffTags={0x0100:"ImageWidth",0x0101:"ImageHeight",0x8769:"ExifIFDPointer",0x8825:"GPSInfoIFDPointer",0xA005:"InteroperabilityIFDPointer",0x0102:"BitsPerSample",0x0103:"Compression",0x0106:"PhotometricInterpretation",0x0112:"Orientation",0x0115:"SamplesPerPixel",0x011C:"PlanarConfiguration",0x0212:"YCbCrSubSampling",0x0213:"YCbCrPositioning",0x011A:"XResolution",0x011B:"YResolution",0x0128:"ResolutionUnit",0x0111:"StripOffsets",0x0116:"RowsPerStrip",0x0117:"StripByteCounts",0x0201:"JPEGInterchangeFormat",0x0202:"JPEGInterchangeFormatLength",0x012D:"TransferFunction",0x013E:"WhitePoint",0x013F:"PrimaryChromaticities",0x0211:"YCbCrCoefficients",0x0214:"ReferenceBlackWhite",0x0132:"DateTime",0x010E:"ImageDescription",0x010F:"Make",0x0110:"Model",0x0131:"Software",0x013B:"Artist",0x8298:"Copyright"};var G=E.GPSTags={0x0000:"GPSVersionID",0x0001:"GPSLatitudeRef",0x0002:"GPSLatitude",0x0003:"GPSLongitudeRef",0x0004:"GPSLongitude",0x0005:"GPSAltitudeRef",0x0006:"GPSAltitude",0x0007:"GPSTimeStamp",0x0008:"GPSSatellites",0x0009:"GPSStatus",0x000A:"GPSMeasureMode",0x000B:"GPSDOP",0x000C:"GPSSpeedRef",0x000D:"GPSSpeed",0x000E:"GPSTrackRef",0x000F:"GPSTrack",0x0010:"GPSImgDirectionRef",0x0011:"GPSImgDirection",0x0012:"GPSMapDatum",0x0013:"GPSDestLatitudeRef",0x0014:"GPSDestLatitude",0x0015:"GPSDestLongitudeRef",0x0016:"GPSDestLongitude",0x0017:"GPSDestBearingRef",0x0018:"GPSDestBearing",0x0019:"GPSDestDistanceRef",0x001A:"GPSDestDistance",0x001B:"GPSProcessingMethod",0x001C:"GPSAreaInformation",0x001D:"GPSDateStamp",0x001E:"GPSDifferential"};var S=E.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0x0000:"Flash did not fire",0x0001:"Flash fired",0x0005:"Strobe return light not detected",0x0007:"Strobe return light detected",0x0009:"Flash fired, compulsory flash mode",0x000D:"Flash fired, compulsory flash mode, return light not detected",0x000F:"Flash fired, compulsory flash mode, return light detected",0x0010:"Flash did not fire, compulsory flash mode",0x0018:"Flash did not fire, auto mode",0x0019:"Flash fired, auto mode",0x001D:"Flash fired, auto mode, return light not detected",0x001F:"Flash fired, auto mode, return light detected",0x0020:"No flash function",0x0041:"Flash fired, red-eye reduction mode",0x0045:"Flash fired, red-eye reduction mode, return light not detected",0x0047:"Flash fired, red-eye reduction mode, return light detected",0x0049:"Flash fired, compulsory flash mode, red-eye reduction mode",0x004D:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",0x004F:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",0x0059:"Flash fired, auto mode, red-eye reduction mode",0x005D:"Flash fired, auto mode, return light not detected, red-eye reduction mode",0x005F:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function c(e,a,i){if(e.addEventListener){e.addEventListener(a,i,false);}else if(e.attachEvent){e.attachEvent("on"+a,i);}}function f(i){return!!(i.exifdata);}function g(a,e){e=e||a.match(/^data\:([^\;]+)\;base64,/mi)[1]||'';a=a.replace(/^data\:([^\;]+)\;base64,/gmi,'');var t=atob(a);var u=t.length;var v=new ArrayBuffer(u);var w=new Uint8Array(v);for(var i=0;i<u;i++){w[i]=t.charCodeAt(i);}return v;}function o(u,a){var i=new XMLHttpRequest();i.open("GET",u,true);i.responseType="blob";i.onload=function(e){if(this.status==200||this.status===0){a(this.response);}};i.send();}function h(i,a){function t(e){var x=j(e);var y=k(e);i.exifdata=x||{};i.iptcdata=y||{};if(a){a.call(i);}}if(i.src){if(/^data\:/i.test(i.src)){var u=g(i.src);t(u);}else if(/^blob\:/i.test(i.src)){var v=new FileReader();v.onload=function(e){t(e.target.result);};o(i.src,function(e){v.readAsArrayBuffer(e);});}else{var w=new XMLHttpRequest();w.onload=function(){if(this.status==200||this.status===0){t(w.response);}else{throw"Could not load image";}w=null;};w.open("GET",i.src,true);w.responseType="arraybuffer";w.send(null);}}else if(window.FileReader&&(i instanceof window.Blob||i instanceof window.File)){var v=new FileReader();v.onload=function(e){if(d){console.log("Got file of length "+e.target.result.byteLength);}t(e.target.result);};v.readAsArrayBuffer(i);}}function j(a){var e=new DataView(a);if(d){console.log("Got file of length "+a.byteLength);}if((e.getUint8(0)!=0xFF)||(e.getUint8(1)!=0xD8)){if(d){console.log("Not a valid JPEG");}return false;}var i=2,t=a.byteLength,u;while(i<t){if(e.getUint8(i)!=0xFF){if(d)console.log("Not a valid marker at offset "+i+", found: "+e.getUint8(i));return false;}u=e.getUint8(i+1);if(d){console.log(u);}if(u==225){if(d){console.log("Found 0xFFE1 marker");}return s(e,i+4,e.getUint16(i+2)-2);}else{i+=2+e.getUint16(i+2);}}}function k(a){var e=new DataView(a);if(d){console.log("Got file of length "+a.byteLength);}if((e.getUint8(0)!=0xFF)||(e.getUint8(1)!=0xD8)){if(d){console.log("Not a valid JPEG");}return false;}var i=2,t=a.byteLength;var u=function(e,i){return(e.getUint8(i)===0x38&&e.getUint8(i+1)===0x42&&e.getUint8(i+2)===0x49&&e.getUint8(i+3)===0x4D&&e.getUint8(i+4)===0x04&&e.getUint8(i+5)===0x04);};while(i<t){if(u(e,i)){var v=e.getUint8(i+7);if(v%2!==0){v+=1;}if(v===0){v=4;}var w=i+8+v;var x=e.getUint16(i+6+v);return l(a,w,x);}i++;}}var I={0x78:'caption',0x6E:'credit',0x19:'keywords',0x37:'dateCreated',0x50:'byline',0x55:'bylineTitle',0x7A:'captionWriter',0x69:'headline',0x74:'copyright',0x0F:'category'};function l(a,e,i){var t=new DataView(a);var u={};var v,w,x,y,z;var A=e;while(A<e+i){if(t.getUint8(A)===0x1C&&t.getUint8(A+1)===0x02){y=t.getUint8(A+2);if(y in I){x=t.getInt16(A+3);z=x+5;w=I[y];v=q(t,A+5,x);if(u.hasOwnProperty(w)){if(u[w]instanceof Array){u[w].push(v);}else{u[w]=[u[w],v];}}else{u[w]=v;}}}A++;}return u;}function m(a,t,e,u,v){var w=a.getUint16(e,!v),x={},y,z,i;for(i=0;i<w;i++){y=e+i*12+2;z=u[a.getUint16(y,!v)];if(!z&&d){console.log("Unknown tag: "+a.getUint16(y,!v));}x[z]=p(a,y,t,e,v);}return x;}function p(a,e,t,i,u){var v=a.getUint16(e+2,!u),w=a.getUint32(e+4,!u),x=a.getUint32(e+8,!u)+t,y,z,A,n,B,C;switch(v){case 1:case 7:if(w==1){return a.getUint8(e+8,!u);}else{y=w>4?x:(e+8);z=[];for(n=0;n<w;n++){z[n]=a.getUint8(y+n);}return z;}case 2:y=w>4?x:(e+8);return q(a,y,w-1);case 3:if(w==1){return a.getUint16(e+8,!u);}else{y=w>2?x:(e+8);z=[];for(n=0;n<w;n++){z[n]=a.getUint16(y+2*n,!u);}return z;}case 4:if(w==1){return a.getUint32(e+8,!u);}else{z=[];for(n=0;n<w;n++){z[n]=a.getUint32(x+4*n,!u);}return z;}case 5:if(w==1){B=a.getUint32(x,!u);C=a.getUint32(x+4,!u);A=new Number(B/C);A.numerator=B;A.denominator=C;return A;}else{z=[];for(n=0;n<w;n++){B=a.getUint32(x+8*n,!u);C=a.getUint32(x+4+8*n,!u);z[n]=new Number(B/C);z[n].numerator=B;z[n].denominator=C;}return z;}case 9:if(w==1){return a.getInt32(e+8,!u);}else{z=[];for(n=0;n<w;n++){z[n]=a.getInt32(x+4*n,!u);}return z;}case 10:if(w==1){return a.getInt32(x,!u)/a.getInt32(x+4,!u);}else{z=[];for(n=0;n<w;n++){z[n]=a.getInt32(x+8*n,!u)/a.getInt32(x+4+8*n,!u);}return z;}}}function q(a,e,i){var t="";for(n=e;n<e+i;n++){t+=String.fromCharCode(a.getUint8(n));}return t;}function s(a,e){if(q(a,e,4)!="Exif"){if(d){console.log("Not valid EXIF data! "+q(a,e,4));}return false;}var i,t,u,v,w,x=e+6;if(a.getUint16(x)==0x4949){i=false;}else if(a.getUint16(x)==0x4D4D){i=true;}else{if(d){console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");}return false;}if(a.getUint16(x+2,!i)!=0x002A){if(d){console.log("Not valid TIFF data! (no 0x002A)");}return false;}var y=a.getUint32(x+4,!i);if(y<0x00000008){if(d){console.log("Not valid TIFF data! (First offset less than 8)",a.getUint32(x+4,!i));}return false;}t=m(a,x,x+y,T,i);if(t.ExifIFDPointer){v=m(a,x,x+t.ExifIFDPointer,b,i);for(u in v){switch(u){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":v[u]=S[u][v[u]];break;case"ExifVersion":case"FlashpixVersion":v[u]=String.fromCharCode(v[u][0],v[u][1],v[u][2],v[u][3]);break;case"ComponentsConfiguration":v[u]=S.Components[v[u][0]]+S.Components[v[u][1]]+S.Components[v[u][2]]+S.Components[v[u][3]];break;}t[u]=v[u];}}if(t.GPSInfoIFDPointer){w=m(a,x,x+t.GPSInfoIFDPointer,G,i);for(u in w){switch(u){case"GPSVersionID":w[u]=w[u][0]+"."+w[u][1]+"."+w[u][2]+"."+w[u][3];break;}t[u]=w[u];}}return t;}E.getData=function(i,a){if((i instanceof Image||i instanceof HTMLImageElement)&&!i.complete)return false;if(!f(i)){h(i,a);}else{if(a){a.call(i);}}return true;};E.getTag=function(i,t){if(!f(i))return;return i.exifdata[t];};E.getAllTags=function(i){if(!f(i))return{};var a,e=i.exifdata,t={};for(a in e){if(e.hasOwnProperty(a)){t[a]=e[a];}}return t;};E.pretty=function(i){if(!f(i))return"";var a,e=i.exifdata,t="";for(a in e){if(e.hasOwnProperty(a)){if(typeof e[a]=="object"){if(e[a]instanceof Number){t+=a+" : "+e[a]+" ["+e[a].numerator+"/"+e[a].denominator+"]\r\n";}else{t+=a+" : ["+e[a].length+" values]\r\n";}}else{t+=a+" : "+e[a]+"\r\n";}}}return t;};E.readFromBinaryFile=function(a){return j(a);};if(typeof define==='function'&&define.amd){define('exif-js',[],function(){return E;});}}.call(this));}},"sap/extent/uilib/library-preload");
